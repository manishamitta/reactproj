{"ast":null,"code":"\"use strict\";\n\nimport u from \"./getActiveElement.js\";\nconst r = () => {\n    const e = u();\n    return e && typeof e.focus == \"function\" ? e : null;\n  },\n  a = e => {\n    const n = r();\n    return n ? l(e, n) : !1;\n  },\n  l = (e, n) => {\n    let t = e;\n    if (t.shadowRoot && (t = Array.from(t.shadowRoot.children).find(c => c.localName !== \"style\"), !t)) return !1;\n    if (t === n) return !0;\n    const o = t.localName === \"slot\" ? t.assignedNodes() : t.children;\n    return o ? Array.from(o).some(s => l(s, n)) : !1;\n  },\n  m = (e, n, t) => e >= t.left && e <= t.right && n >= t.top && n <= t.bottom,\n  f = (e, n) => {\n    let t, o;\n    if (e instanceof MouseEvent) t = e.clientX, o = e.clientY;else {\n      const s = e.touches[0];\n      t = s.clientX, o = s.clientY;\n    }\n    return m(t, o, n);\n  };\nfunction d(e) {\n  return \"isUI5Element\" in e && \"_show\" in e;\n}\nconst i = e => {\n  const n = e.parentElement || e.getRootNode && e.getRootNode().host;\n  return n && (d(n) || n === document.documentElement) ? n : i(n);\n};\nexport { r as getFocusedElement, f as isClickInRect, i as getClosedPopupParent, a as isFocusedElementWithinNode };","map":{"version":3,"names":["u","r","getFocusedElement","e","focus","a","n","l","isNodeContainedWithin","t","shadowRoot","Array","from","children","find","c","localName","o","assignedNodes","some","s","m","isPointInRect","left","right","top","bottom","f","isClickInRect","MouseEvent","clientX","clientY","touches","d","i","parentElement","getRootNode","host","document","documentElement","getClosedPopupParent","isFocusedElementWithinNode"],"sources":["/home/user/projects/reactproj/node_modules/@ui5/webcomponents-base/src/util/PopupUtils.ts"],"sourcesContent":["import getActiveElement from \"./getActiveElement.js\";\n\nconst getFocusedElement = () => {\n\tconst element = getActiveElement() as HTMLElement;\n\treturn (element && typeof element.focus === \"function\") ? element : null;\n};\n\nconst isFocusedElementWithinNode = (node: HTMLElement) => {\n\tconst fe = getFocusedElement();\n\n\tif (fe) {\n\t\treturn isNodeContainedWithin(node, fe);\n\t}\n\n\treturn false;\n};\n\nconst isNodeContainedWithin = (parent: HTMLElement, child: HTMLElement): boolean => {\n\tlet currentNode: HTMLElement | undefined = parent;\n\n\tif (currentNode.shadowRoot) {\n\t\tconst children = Array.from(currentNode.shadowRoot.children) as Array<HTMLElement>;\n\t\tcurrentNode = children.find(n => n.localName !== \"style\");\n\n\t\tif (!currentNode) {\n\t\t\treturn false;\n\t\t}\n\t}\n\n\tif (currentNode === child) {\n\t\treturn true;\n\t}\n\n\tconst childNodes = currentNode.localName === \"slot\" ? (currentNode as HTMLSlotElement).assignedNodes() : currentNode.children;\n\n\tif (childNodes) {\n\t\treturn Array.from(childNodes).some(n => isNodeContainedWithin(n as HTMLElement, child));\n\t}\n\n\treturn false;\n};\n\nconst isPointInRect = (x: number, y: number, rect: DOMRect) => {\n\treturn x >= rect.left && x <= rect.right\n\t\t&& y >= rect.top && y <= rect.bottom;\n};\n\nconst isClickInRect = (e: MouseEvent | TouchEvent, rect: DOMRect) => {\n\tlet x;\n\tlet y;\n\n\tif (e instanceof MouseEvent) {\n\t\tx = e.clientX;\n\t\ty = e.clientY;\n\t} else {\n\t\tconst touch = e.touches[0];\n\t\tx = touch.clientX;\n\t\ty = touch.clientY;\n\t}\n\n\treturn isPointInRect(x, y, rect);\n};\n\ninterface PopupInterface { // Refactor: replace with Popup.js\n\t_show: () => void,\n\topen: boolean,\n}\nfunction instanceOfPopup(object: any): object is PopupInterface {\n\treturn \"isUI5Element\" in object && \"_show\" in object;\n}\n\nconst getClosedPopupParent = (el: HTMLElement): HTMLElement => {\n\tconst parent = el.parentElement || (el.getRootNode && (el.getRootNode() as ShadowRoot).host);\n\n\tif (parent && ((instanceOfPopup(parent) || parent === document.documentElement))) {\n\t\treturn parent as HTMLElement;\n\t}\n\n\treturn getClosedPopupParent(parent as HTMLElement);\n};\n\nexport {\n\tgetFocusedElement,\n\tisClickInRect,\n\tgetClosedPopupParent,\n\tisFocusedElementWithinNode,\n};\n"],"mappings":";;AAAA,OAAOA,CAAA,MAAsB;AAE7B,MAAMC,CAAA,GAAoBC,CAAA,KAAM;IAC/B,MAAMC,CAAA,GAAUH,CAAA,CAAiB;IACjC,OAAQG,CAAA,IAAW,OAAOA,CAAA,CAAQC,KAAA,IAAU,aAAcD,CAAA,GAAU,IACrE;EAAA;EAEME,CAAA,GAA8BF,CAAA,IAAsB;IACzD,MAAMG,CAAA,GAAKL,CAAA,CAAkB;IAE7B,OAAIK,CAAA,GACIC,CAAA,CAAsBJ,CAAA,EAAMG,CAAE,IAG/B,EACR;EAAA;EAEMC,CAAA,GAAwBC,CAACL,CAAA,EAAqBG,CAAA,KAAgC;IACnF,IAAIG,CAAA,GAAuCN,CAAA;IAE3C,IAAIM,CAAA,CAAYC,UAAA,KAEfD,CAAA,GADiBE,KAAA,CAAMC,IAAA,CAAKH,CAAA,CAAYC,UAAA,CAAWG,QAAQ,EACpCC,IAAA,CAAKC,CAAA,IAAKA,CAAA,CAAEC,SAAA,KAAc,OAAO,GAEpD,CAACP,CAAA,GACJ,OAAO;IAIT,IAAIA,CAAA,KAAgBH,CAAA,EACnB,OAAO;IAGR,MAAMW,CAAA,GAAaR,CAAA,CAAYO,SAAA,KAAc,SAAUP,CAAA,CAAgCS,aAAA,CAAc,IAAIT,CAAA,CAAYI,QAAA;IAErH,OAAII,CAAA,GACIN,KAAA,CAAMC,IAAA,CAAKK,CAAU,EAAEE,IAAA,CAAKC,CAAA,IAAKb,CAAA,CAAsBa,CAAA,EAAkBd,CAAK,CAAC,IAGhF,EACR;EAAA;EAEMe,CAAA,GAAgBC,CAACnB,CAAA,EAAWG,CAAA,EAAWG,CAAA,KACrCN,CAAA,IAAKM,CAAA,CAAKc,IAAA,IAAQpB,CAAA,IAAKM,CAAA,CAAKe,KAAA,IAC/BlB,CAAA,IAAKG,CAAA,CAAKgB,GAAA,IAAOnB,CAAA,IAAKG,CAAA,CAAKiB,MAAA;EAG1BC,CAAA,GAAgBC,CAACzB,CAAA,EAA4BG,CAAA,KAAkB;IACpE,IAAIG,CAAA,EACAQ,CAAA;IAEJ,IAAId,CAAA,YAAa0B,UAAA,EAChBpB,CAAA,GAAIN,CAAA,CAAE2B,OAAA,EACNb,CAAA,GAAId,CAAA,CAAE4B,OAAA,MACA;MACN,MAAMX,CAAA,GAAQjB,CAAA,CAAE6B,OAAA,CAAQ,CAAC;MACzBvB,CAAA,GAAIW,CAAA,CAAMU,OAAA,EACVb,CAAA,GAAIG,CAAA,CAAMW,OACX;IAAA;IAEA,OAAOV,CAAA,CAAcZ,CAAA,EAAGQ,CAAA,EAAGX,CAAI,CAChC;EAAA;AAMA,SAAS2B,EAAgB9B,CAAA,EAAuC;EAC/D,OAAO,kBAAkBA,CAAA,IAAU,WAAWA,CAC/C;AAAA;AAEA,MAAM+B,CAAA,GAAwB/B,CAAA,IAAiC;EAC9D,MAAMG,CAAA,GAASH,CAAA,CAAGgC,aAAA,IAAkBhC,CAAA,CAAGiC,WAAA,IAAgBjC,CAAA,CAAGiC,WAAA,CAAY,EAAiBC,IAAA;EAEvF,OAAI/B,CAAA,KAAY2B,CAAA,CAAgB3B,CAAM,KAAKA,CAAA,KAAWgC,QAAA,CAASC,eAAA,IACvDjC,CAAA,GAGD4B,CAAA,CAAqB5B,CAAqB,CAClD;AAAA;AAEA,SACCL,CAAA,IAAAC,iBAAA,EACAyB,CAAA,IAAAC,aAAA,EACAM,CAAA,IAAAM,oBAAA,EACAnC,CAAA,IAAAoC,0BAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}