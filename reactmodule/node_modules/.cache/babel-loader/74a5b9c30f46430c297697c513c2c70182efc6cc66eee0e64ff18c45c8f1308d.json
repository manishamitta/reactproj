{"ast":null,"code":"var __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar MultiComboBox_1;\nimport UI5Element from \"@ui5/webcomponents-base/dist/UI5Element.js\";\nimport customElement from \"@ui5/webcomponents-base/dist/decorators/customElement.js\";\nimport property from \"@ui5/webcomponents-base/dist/decorators/property.js\";\nimport slot from \"@ui5/webcomponents-base/dist/decorators/slot.js\";\nimport event from \"@ui5/webcomponents-base/dist/decorators/event.js\";\nimport litRender from \"@ui5/webcomponents-base/dist/renderer/LitRenderer.js\";\nimport ResizeHandler from \"@ui5/webcomponents-base/dist/delegate/ResizeHandler.js\";\nimport ValueState from \"@ui5/webcomponents-base/dist/types/ValueState.js\";\nimport { isShow, isDown, isUp, isSpace, isSpaceCtrl, isSpaceShift, isRight, isHome, isEnd, isTabNext, isTabPrevious, isUpShift, isDownShift, isLeftCtrl, isRightCtrl, isUpCtrl, isDownCtrl, isHomeCtrl, isEndCtrl, isCtrlA, isInsertShift, isBackSpace, isDelete, isEscape, isEnter } from \"@ui5/webcomponents-base/dist/Keys.js\";\nimport \"@ui5/webcomponents-icons/dist/slim-arrow-down.js\";\nimport { renderFinished } from \"@ui5/webcomponents-base/dist/Render.js\";\nimport { isPhone, isAndroid, isFirefox } from \"@ui5/webcomponents-base/dist/Device.js\";\nimport { getI18nBundle } from \"@ui5/webcomponents-base/dist/i18nBundle.js\";\nimport \"@ui5/webcomponents-icons/dist/decline.js\";\nimport \"@ui5/webcomponents-icons/dist/multiselect-all.js\";\nimport \"@ui5/webcomponents-icons/dist/not-editable.js\";\nimport \"@ui5/webcomponents-icons/dist/error.js\";\nimport \"@ui5/webcomponents-icons/dist/alert.js\";\nimport \"@ui5/webcomponents-icons/dist/sys-enter-2.js\";\nimport \"@ui5/webcomponents-icons/dist/information.js\";\nimport { getEffectiveAriaLabelText } from \"@ui5/webcomponents-base/dist/util/AriaLabelHelper.js\";\nimport { getScopedVarName } from \"@ui5/webcomponents-base/dist/CustomElementsScope.js\";\nimport { submitForm } from \"@ui5/webcomponents-base/dist/features/InputElementsFormSupport.js\";\nimport MultiComboBoxItem, { isInstanceOfMultiComboBoxItem } from \"./MultiComboBoxItem.js\";\nimport MultiComboBoxItemGroup, { isInstanceOfMultiComboBoxItemGroup } from \"./MultiComboBoxItemGroup.js\";\nimport ListItemGroup from \"./ListItemGroup.js\";\nimport Tokenizer, { getTokensCountText } from \"./Tokenizer.js\";\nimport Token from \"./Token.js\";\nimport Icon from \"./Icon.js\";\nimport Popover from \"./Popover.js\";\nimport ResponsivePopover from \"./ResponsivePopover.js\";\nimport List from \"./List.js\";\nimport ListItemStandard from \"./ListItemStandard.js\";\nimport ToggleButton from \"./ToggleButton.js\";\nimport * as Filters from \"./Filters.js\";\nimport Button from \"./Button.js\";\nimport { VALUE_STATE_SUCCESS, VALUE_STATE_ERROR, VALUE_STATE_WARNING, VALUE_STATE_INFORMATION, VALUE_STATE_TYPE_SUCCESS, VALUE_STATE_TYPE_INFORMATION, VALUE_STATE_TYPE_ERROR, VALUE_STATE_TYPE_WARNING, INPUT_SUGGESTIONS_TITLE, SELECT_OPTIONS, SHOW_SELECTED_BUTTON, MULTICOMBOBOX_DIALOG_OK_BUTTON, COMBOBOX_AVAILABLE_OPTIONS, VALUE_STATE_ERROR_ALREADY_SELECTED, MCB_SELECTED_ITEMS, INPUT_CLEAR_ICON_ACC_NAME, FORM_MIXED_TEXTFIELD_REQUIRED } from \"./generated/i18n/i18n-defaults.js\";\n// Templates\nimport MultiComboBoxTemplate from \"./generated/templates/MultiComboBoxTemplate.lit.js\";\n// Styles\nimport multiCbxStyles from \"./generated/themes/MultiComboBox.css.js\";\nimport ResponsivePopoverCommonCss from \"./generated/themes/ResponsivePopoverCommon.css.js\";\nimport ValueStateMessageCss from \"./generated/themes/ValueStateMessage.css.js\";\nimport SuggestionsCss from \"./generated/themes/Suggestions.css.js\";\nimport MultiComboBoxPopover from \"./generated/themes/MultiComboBoxPopover.css.js\";\nimport CheckBox from \"./CheckBox.js\";\nimport Input from \"./Input.js\";\nimport SuggestionItem from \"./SuggestionItem.js\";\n/**\n * @class\n *\n * ### Overview\n *\n * The `ui5-multi-combobox` component consists of a list box with items and a text field allowing the user to either type a value directly into the text field, or choose from the list of existing items.\n *\n * The drop-down list is used for selecting and filtering values, it enables users to select one or more options from a predefined list. The control provides an editable input field to filter the list, and a dropdown arrow to expand/collapse the list of available options.\n * The options in the list have checkboxes that permit multi-selection. Entered values are displayed as tokens.\n * ### Structure\n * The `ui5-multi-combobox` consists of the following elements:\n *\n * -  Tokenizer - a list of tokens with selected options.\n * -  Input field - displays the selected option/s as token/s. Users can type to filter the list.\n * -  Drop-down arrow - expands\\collapses the option list.\n * -  Option list - the list of available options.\n *\n * ### Keyboard Handling\n *\n * The `ui5-multi-combobox` provides advanced keyboard handling.\n *\n * #### Picker\n * If the `ui5-multi-combobox` is focused,\n * you can open or close the drop-down by pressing [F4], [Alt] + [Up] or [Alt] + [Down] keys.\n * Once the drop-down is opened, you can use the `UP` and `DOWN` arrow keys\n * to navigate through the available options and select one by pressing the `Space` or `Enter` keys.\n *\n * #### Tokens\n *\n * -  Left/Right arrow keys - moves the focus selection form the currently focused token to the previous/next one (if available).\n * -  Delete -  deletes the token and focuses the previous token.\n * -  Backspace -  deletes the token and focus the next token.\n *\n * ### ES6 Module Import\n *\n * `import \"@ui5/webcomponents/dist/MultiComboBox.js\";`\n * @constructor\n * @extends UI5Element\n * @public\n * @since 0.11.0\n * @csspart token-\\{index\\} - Used to style each token(where `token-0` corresponds to the first item)\n */\nlet MultiComboBox = MultiComboBox_1 = class MultiComboBox extends UI5Element {\n  get formValidityMessage() {\n    return MultiComboBox_1.i18nBundle.getText(FORM_MIXED_TEXTFIELD_REQUIRED);\n  }\n  get formValidity() {\n    const selectedItems = (this.items || []).filter(item => item.selected);\n    return {\n      valueMissing: this.required && !this.value && !selectedItems.length\n    };\n  }\n  async formElementAnchor() {\n    return this.getFocusDomRefAsync();\n  }\n  get formFormattedValue() {\n    const selectedItems = (this.items || []).filter(item => item.selected);\n    if (selectedItems.length && this.name) {\n      const formData = new FormData();\n      formData.append(this.name, this.value);\n      for (let i = 0; i < selectedItems.length; i++) {\n        formData.append(this.name, selectedItems[i].text);\n      }\n      return formData;\n    }\n    return this.value;\n  }\n  constructor() {\n    super();\n    /**\n     * Defines the value of the component.\n     *\n     * **Note:** The property is updated upon typing.\n     * @default \"\"\n     * @formEvents change input\n     * @formProperty\n     * @public\n     */\n    this.value = \"\";\n    /**\n     * Defines whether the value will be autcompleted to match an item\n     * @default false\n     * @public\n     * @since 1.4.0\n     */\n    this.noTypeahead = false;\n    /**\n     * Defines if the user input will be prevented, if no matching item has been found\n     * @default false\n     * @public\n     */\n    this.noValidation = false;\n    /**\n     * Defines whether the component is in disabled state.\n     *\n     * **Note:** A disabled component is completely noninteractive.\n     * @default false\n     * @public\n     */\n    this.disabled = false;\n    /**\n     * Defines the value state of the component.\n     * @default \"None\"\n     * @public\n     */\n    this.valueState = \"None\";\n    /**\n     * Defines whether the component is read-only.\n     *\n     * **Note:** A read-only component is not editable,\n     * but still provides visual feedback upon user interaction.\n     * @default false\n     * @public\n     */\n    this.readonly = false;\n    /**\n     * Defines whether the component is required.\n     * @default false\n     * @public\n     * @since 1.0.0-rc.5\n     */\n    this.required = false;\n    /**\n     * Defines the filter type of the component.\n     * @default \"StartsWithPerTerm\"\n     * @public\n     */\n    this.filter = \"StartsWithPerTerm\";\n    /**\n     * Defines whether the clear icon of the multi-combobox will be shown.\n     * @default false\n     * @public\n     * @since 1.20.1\n     */\n    this.showClearIcon = false;\n    /**\n     * Determines if the select all checkbox is visible on top of suggestions.\n     * @default false\n     * @public\n     */\n    this.showSelectAll = false;\n    this._effectiveValueState = \"None\";\n    /**\n     * Indicates whether the value state message popover is open.\n     * @private\n     */\n    this.valueStateOpen = false;\n    /**\n     * Indicates whether the Tokenizer n-more popover is open.\n     * @private\n     */\n    this.tokenizerOpen = false;\n    /**\n     * Indicates whether the items picker is open.\n     * @private\n     */\n    this._open = false;\n    this._valueBeforeOpen = this.value;\n    this.filterSelected = false;\n    this.focused = false;\n    this._tokenizerFocused = false;\n    this._iconPressed = false;\n    this._inputWidth = 0;\n    this._listWidth = 0;\n    this._performingSelectionTwice = false;\n    this._allSelected = false;\n    this._effectiveShowClearIcon = false;\n    this._dialogInputValueState = \"None\";\n    /**\n     * Indicates whether the tokenizer has tokens\n     * @private\n     */\n    this.tokenizerAvailable = false;\n    this._filteredItems = [];\n    this.selectedItems = [];\n    this._previouslySelectedItems = [];\n    this.selectedValues = [];\n    this._itemsBeforeOpen = [];\n    this._inputLastValue = \"\";\n    this._deleting = false;\n    this._validationTimeout = null;\n    this._handleResizeBound = this._handleResize.bind(this);\n    this.valueBeforeAutoComplete = \"\";\n    this._lastValue = this.getAttribute(\"value\") || \"\";\n    this.currentItemIdx = -1;\n  }\n  onEnterDOM() {\n    ResizeHandler.register(this, this._handleResizeBound);\n  }\n  onExitDOM() {\n    ResizeHandler.deregister(this, this._handleResizeBound);\n  }\n  _handleResize() {\n    this._inputWidth = this.offsetWidth;\n  }\n  _handleMobileInput(e) {\n    if (!this.open || this.readonly) {\n      return;\n    }\n    const target = e.target;\n    const value = target.value;\n    if (!this.noValidation && !this._filterItems(value).length) {\n      this._dialogInputValueState = ValueState.Negative;\n    } else {\n      this._dialogInputValueState = this.valueState;\n    }\n    this.value = value;\n    this._shouldFilterItems = true;\n    this.valueBeforeAutoComplete = value;\n    this.fireEvent(\"input\");\n  }\n  _inputChange() {\n    if (!this._clearingValue && this._lastValue !== this.value) {\n      this._lastValue = this.value;\n      this.fireEvent(\"change\");\n    }\n  }\n  _onMobileInputKeydown(e) {\n    if (!isEnter(e)) {\n      return;\n    }\n    const {\n      value\n    } = e.target;\n    const matchingItem = this._getItems().find(item => item.text === value);\n    if (!matchingItem) {\n      return;\n    }\n    const initiallySelected = matchingItem?.selected;\n    const changePrevented = this.fireSelectionChange();\n    if (!changePrevented) {\n      matchingItem.selected = !initiallySelected;\n      this._getResponsivePopover().preventFocusRestore = false;\n      this._open = false;\n      this.value = \"\";\n    }\n  }\n  _toggleTokenizerPopover() {\n    this.tokenizerOpen = false;\n    this._open = !this.open;\n  }\n  togglePopoverByDropdownIcon() {\n    this._shouldFilterItems = false;\n    this._open = !this.open;\n    this.tokenizerOpen = false;\n  }\n  _showFilteredItems() {\n    this.filterSelected = true;\n    this._showMorePressed = true;\n    this._toggleTokenizerPopover();\n  }\n  filterSelectedItems(e) {\n    this.filterSelected = e.target.pressed;\n    const selectedItems = this._filteredItems.filter(item => item.selected);\n    this.selectedItems = this._getItems().filter((item, idx, allItems) => MultiComboBox_1._groupItemFilter(item, ++idx, allItems, selectedItems) || selectedItems.indexOf(item) !== -1);\n  }\n  /**\n   * Indicates whether the dropdown is open. True if the dropdown is open, false otherwise.\n   * @default false\n   * @public\n   */\n  get open() {\n    return this._open;\n  }\n  get _showAllItemsButtonPressed() {\n    return this.filterSelected;\n  }\n  get _inputDom() {\n    return this.shadowRoot.querySelector(\"#ui5-multi-combobox-input\");\n  }\n  _inputLiveChange(e) {\n    const input = e.target;\n    const value = input.value;\n    const filteredItems = this._filterItems(value);\n    const oldValueState = this.valueState;\n    this._shouldFilterItems = true;\n    if (this.filterSelected) {\n      this.filterSelected = false;\n    }\n    if (this._validationTimeout) {\n      if (this._filterItems(value).length) {\n        this.valueState = this._effectiveValueState;\n        this._validationTimeout = null;\n      } else {\n        input.value = this._inputLastValue;\n        return;\n      }\n    }\n    this._effectiveValueState = this.valueState;\n    if (!filteredItems.length && value && !this.noValidation) {\n      const newValue = this.valueBeforeAutoComplete || this._inputLastValue;\n      input.value = newValue;\n      this.value = newValue;\n      this.valueState = ValueState.Negative;\n      this._shouldAutocomplete = false;\n      this._resetValueState(oldValueState);\n      return;\n    }\n    this._inputLastValue = input.value;\n    this.value = input.value;\n    this._filteredItems = filteredItems;\n    if (!isPhone()) {\n      if (filteredItems.length === 0) {\n        this._open = false;\n      } else {\n        this._open = true;\n      }\n    }\n    this.fireEvent(\"input\");\n  }\n  _tokenDelete(e) {\n    this._previouslySelectedItems = this._getSelectedItems();\n    const token = e.detail.tokens;\n    const deletingItems = this._getItems().filter(item => token.some(t => t.getAttribute(\"data-ui5-id\") === item._id));\n    deletingItems.forEach(item => {\n      item.selected = false;\n    });\n    this._deleting = true;\n    this._preventTokenizerToggle = true;\n    this.focus();\n    const changePrevented = this.fireSelectionChange();\n    if (changePrevented) {\n      this._revertSelection();\n    }\n  }\n  get _getPlaceholder() {\n    if (this._getSelectedItems().length) {\n      return \"\";\n    }\n    return this.placeholder || \"\";\n  }\n  _handleArrowLeft() {\n    const inputDomRef = this._inputDom;\n    const cursorPosition = inputDomRef.selectionStart || 0;\n    const isTextSelected = (inputDomRef.selectionEnd || 0) - cursorPosition > 0;\n    if (cursorPosition === 0 && !isTextSelected) {\n      this._tokenizer._focusLastToken();\n    }\n  }\n  _onPopoverFocusOut() {\n    if (!isPhone()) {\n      this._tokenizer.expanded = this._open;\n    }\n  }\n  _tokenizerFocusOut(e) {\n    this._tokenizerFocused = false;\n    const tokensCount = this._tokenizer.tokens.length;\n    const selectedTokens = this._selectedTokensCount;\n    const lastTokenBeingDeleted = tokensCount - 1 === 0 && this._deleting;\n    const allTokensAreBeingDeleted = selectedTokens === tokensCount && this._deleting;\n    const relatedTarget = e.relatedTarget;\n    if (!this.shadowRoot?.contains(relatedTarget)) {\n      this._tokenizer.tokens.forEach(token => {\n        token.selected = false;\n      });\n      this._tokenizer.expanded = this._preventTokenizerToggle ? this._tokenizer.expanded : false;\n    }\n    if (allTokensAreBeingDeleted || lastTokenBeingDeleted) {\n      setTimeout(() => {\n        if (!isPhone()) {\n          this._inputDom.focus();\n        }\n        this._deleting = false;\n      }, 0);\n    }\n  }\n  _tokenizerFocusIn() {\n    this._tokenizerFocused = true;\n    this.focused = false;\n  }\n  _onkeydown(e) {\n    const isArrowDownCtrl = isDownCtrl(e);\n    const isCtrl = e.metaKey || e.ctrlKey;\n    if (isShow(e) && !this.disabled) {\n      this._handleShow(e);\n      return;\n    }\n    if (isDownShift(e) || isUpShift(e)) {\n      e.preventDefault();\n      return;\n    }\n    if (isUp(e) || isDown(e) || isUpCtrl(e) || isArrowDownCtrl) {\n      this._handleArrowNavigation(e, isArrowDownCtrl);\n      return;\n    }\n    // CTRL + Arrow Down navigation is performed by the ItemNavigation module of the List,\n    // here we only implement the text selection of the selected item\n    if (isArrowDownCtrl && !this.open) {\n      setTimeout(() => this._inputDom.setSelectionRange(0, this._inputDom.value.length), 0);\n    }\n    if (isLeftCtrl(e) || isRightCtrl(e)) {\n      this._handleArrowCtrl(e);\n      return;\n    }\n    if (isInsertShift(e)) {\n      this._handleInsertPaste(e);\n      return;\n    }\n    if (isCtrl && e.key.toLowerCase() === \"i\" && this._tokenizer.tokens.length > 0) {\n      e.preventDefault();\n      this._toggleTokenizerPopover();\n    }\n    if (isSpaceShift(e)) {\n      e.preventDefault();\n    }\n    if (e.key === \"ArrowLeft\" || e.key === \"Show\" || e.key === \"PageUp\" || e.key === \"PageDown\" || e.key === \"Backspace\" || e.key === \"Escape\" || e.key === \"Home\" || e.key === \"End\" || e.key === \"Tab\" || e.key === \"ArrowDown\" || e.key === \"Enter\") {\n      this[`_handle${e.key}`](e);\n    }\n    this._shouldAutocomplete = !this.noTypeahead && !(isBackSpace(e) || isDelete(e) || isEscape(e) || isEnter(e));\n  }\n  _selectItems(matchingItems) {\n    this._previouslySelectedItems = this._getSelectedItems();\n    matchingItems.forEach(item => {\n      item.selected = true;\n      this.value = \"\";\n      const changePrevented = this.fireSelectionChange();\n      if (changePrevented) {\n        this._revertSelection();\n      }\n    });\n  }\n  _handlePaste(e) {\n    if (this.readonly || !e.clipboardData) {\n      return;\n    }\n    const pastedText = e.clipboardData.getData(\"text/plain\");\n    if (!pastedText) {\n      return;\n    }\n    this._handleTokenCreationUponPaste(pastedText, e);\n  }\n  _handleTokenCreationUponPaste(pastedText, e) {\n    const separatedText = pastedText.split(/\\r\\n|\\r|\\n|\\t/g).filter(t => !!t);\n    const matchingItems = this._getItems().filter(item => !item.isGroupItem && !item.selected && separatedText.includes(item.text));\n    if (matchingItems.length > 1) {\n      e.preventDefault();\n      this._selectItems(matchingItems);\n    }\n  }\n  async _handleInsertPaste(e) {\n    if (this.readonly || isFirefox()) {\n      return;\n    }\n    const pastedText = await navigator.clipboard.readText();\n    if (!pastedText) {\n      return;\n    }\n    this._handleTokenCreationUponPaste(pastedText, e);\n  }\n  _handleShow(e) {\n    const items = this._getItems();\n    const selectedItem = this._getSelectedItems()[0];\n    const focusedToken = this._tokenizer.tokens.find(token => token.focused);\n    const value = this.value;\n    const matchingItem = this._getItems().find(item => item.text?.localeCompare(value, undefined, {\n      sensitivity: \"base\"\n    }) === 0);\n    e.preventDefault();\n    if (this.readonly) {\n      return;\n    }\n    this._isOpenedByKeyboard = true;\n    this._shouldFilterItems = false;\n    this._filteredItems = this._getItems();\n    this._toggleTokenizerPopover();\n    if (!focusedToken && matchingItem) {\n      this._itemToFocus = matchingItem;\n      return;\n    }\n    if (selectedItem && !focusedToken) {\n      this._itemToFocus = selectedItem;\n    } else if (focusedToken && e.target === focusedToken) {\n      this._itemToFocus = items.find(item => item.text === focusedToken.text);\n    } else {\n      this._itemToFocus = items.find(item => isInstanceOfMultiComboBoxItem(item));\n    }\n  }\n  _handlePageUp(e) {\n    e.preventDefault();\n  }\n  _handlePageDown(e) {\n    e.preventDefault();\n  }\n  _handleBackspace(e) {\n    if (e.target.value === \"\") {\n      e.preventDefault();\n      this._tokenizer._focusLastToken();\n    }\n  }\n  _handleEscape() {\n    const innerInput = this._innerInput;\n    const isAutoCompleted = (innerInput.selectionEnd || 0) - (innerInput.selectionStart || 0) > 0;\n    if (isAutoCompleted) {\n      this.value = this.valueBeforeAutoComplete;\n    }\n    if (!this.noValidation || !this._open && this.noValidation) {\n      this.value = this._lastValue;\n    }\n  }\n  _handleHome(e) {\n    const shouldFocusToken = this._isFocusInside && e.target.selectionStart === 0 && this._tokenizer.tokens.length > 0;\n    if (shouldFocusToken) {\n      e.preventDefault();\n      this._tokenizer.tokens[0].focus();\n    }\n  }\n  _handleEnd(e) {\n    const tokens = this._tokenizer.tokens;\n    const lastTokenIdx = tokens.length - 1;\n    const shouldFocusInput = e.target === tokens[lastTokenIdx] && tokens[lastTokenIdx] === this.shadowRoot.activeElement;\n    if (shouldFocusInput) {\n      e.preventDefault();\n      this._inputDom.focus();\n    }\n  }\n  _handleTab() {\n    this._open = false;\n  }\n  _handleSelectAll() {\n    const filteredItems = this._filteredItems.filter(item => !item.isGroupItem);\n    const allItemsSelected = filteredItems.every(item => item.selected);\n    this._previouslySelectedItems = filteredItems.filter(item => item.selected).map(item => item);\n    filteredItems.forEach(item => {\n      item.selected = !allItemsSelected;\n    });\n    const changePrevented = this.fireSelectionChange();\n    if (changePrevented) {\n      this._revertSelection();\n    }\n  }\n  async _onListHeaderKeydown(e) {\n    const isArrowDown = isDown(e);\n    const isArrowUp = isUp(e);\n    const isSelectAllFocused = e.target.classList.contains(\"ui5-mcb-select-all-checkbox\");\n    if (isTabNext(e) || isTabPrevious(e)) {\n      this._onItemTab();\n      return;\n    }\n    e.preventDefault();\n    if (isArrowDown || isDownCtrl(e)) {\n      if (this.showSelectAll && !isSelectAllFocused) {\n        return this._getResponsivePopover().querySelector(\".ui5-mcb-select-all-checkbox\").focus();\n      }\n      this._handleArrowDown();\n    }\n    if (isArrowUp || isUpCtrl(e)) {\n      if (e.target === this.valueStateHeader || !this.valueStateHeader) {\n        this._shouldAutocomplete = true;\n        return this._inputDom.focus();\n      }\n      if (this.showSelectAll && isSelectAllFocused) {\n        this.valueStateHeader?.focus();\n      }\n    }\n  }\n  _handleSelectAllCheckboxClick(e) {\n    if (!this.filterSelected) {\n      this._handleSelectAll();\n      this.filterSelected = false;\n    } else {\n      this._previouslySelectedItems = this._getSelectedItems();\n      this.selectedItems?.filter(item => !item.isGroupItem).forEach(item => {\n        item.selected = e.target.checked;\n      });\n      if (!e.target.checked) {\n        this.filterSelected = false;\n      }\n      const changePrevented = this.fireSelectionChange();\n      if (changePrevented) {\n        this._revertSelection();\n      }\n    }\n  }\n  _onItemKeydown(e) {\n    const isFirstItemGroup = this.list?.items[1] === e.target && this.list?.items[0].hasAttribute(\"ui5-li-group\");\n    const isFirstItem = this.list?.items[0] === e.target || isFirstItemGroup;\n    const isArrowUp = isUp(e) || isUpCtrl(e);\n    if (this.hasValueStateMessage && !this.valueStateHeader) {\n      this._setValueStateHeader();\n    }\n    if (isTabNext(e) || isTabPrevious(e)) {\n      this._onItemTab();\n      return;\n    }\n    if (isHomeCtrl(e)) {\n      this.list?._itemNavigation._handleHome();\n      this.list?.items[this.list?._itemNavigation._currentIndex].focus();\n    }\n    if (isEndCtrl(e)) {\n      this.list?._itemNavigation._handleEnd();\n      this.list?.items[this.list?._itemNavigation._currentIndex].focus();\n    }\n    e.preventDefault();\n    if (isDownShift(e) || isUpShift(e)) {\n      this._handleItemRangeSelection(e);\n      return;\n    }\n    if (isUpCtrl(e) && !isFirstItem) {\n      this.list?._itemNavigation._handleUp();\n      this.list?.items[this.list?._itemNavigation._currentIndex].focus();\n    }\n    if (isDownCtrl(e)) {\n      this.list?._itemNavigation._handleDown();\n      this.list?.items[this.list?._itemNavigation._currentIndex].focus();\n    }\n    if (isShow(e)) {\n      this._toggleTokenizerPopover();\n    }\n    if (isCtrlA(e)) {\n      this._handleSelectAll();\n      return;\n    }\n    if (isFirstItem && isArrowUp) {\n      if (this.showSelectAll) {\n        if (isFirstItemGroup) {\n          this.list?.items[0].focus();\n          return;\n        }\n        this._getResponsivePopover().querySelector(\".ui5-mcb-select-all-checkbox\").focus();\n      } else if (this.valueStateHeader) {\n        this.valueStateHeader.focus();\n      } else {\n        this._inputDom.focus();\n        this._shouldAutocomplete = true;\n      }\n    }\n  }\n  _handleArrowCtrl(e) {\n    const input = this._inputDom;\n    const isArrowLeft = isLeftCtrl(e);\n    if (isArrowLeft && input.selectionStart === 0 && input.selectionEnd === 0) {\n      e.preventDefault();\n    }\n    if (isArrowLeft && (input.selectionEnd || 0) - (input.selectionStart || 0) > 0) {\n      input.setSelectionRange(0, 0);\n    }\n  }\n  _onItemTab() {\n    this._getResponsivePopover().preventFocusRestore = true;\n    this._inputDom.focus();\n    this._open = false;\n    this._tokenizer.expanded = false;\n  }\n  _handleArrowNavigation(e, isDownControl) {\n    const isArrowDown = isDownControl || isDown(e);\n    const hasSuggestions = this._getItems().length;\n    e.preventDefault();\n    if (this.hasValueStateMessage && !this.valueStateHeader) {\n      this._setValueStateHeader();\n    }\n    if (isArrowDown && this.open) {\n      if (this.valueStateHeader) {\n        this.value = this.valueBeforeAutoComplete || this.value;\n        this.valueStateHeader.focus();\n        return;\n      }\n      if (this.showSelectAll) {\n        this._getResponsivePopover().querySelector(\".ui5-mcb-select-all-checkbox\").focus();\n        return;\n      }\n    }\n    if (isArrowDown && hasSuggestions) {\n      this._handleArrowDown();\n    }\n    if (!isArrowDown && !this._open && !this.readonly) {\n      this._navigateToPrevItem();\n    }\n  }\n  async _handleArrowDown() {\n    const firstListItem = this.list?.listItems[0];\n    if (this.open) {\n      firstListItem && this.list?._itemNavigation.setCurrentItem(firstListItem);\n      this.value = this.valueBeforeAutoComplete || this.value;\n      // wait item navigation to apply correct tabindex\n      await renderFinished();\n      firstListItem?.focus();\n    } else if (!this.readonly) {\n      this._navigateToNextItem();\n    }\n  }\n  _handleItemRangeSelection(e) {\n    const items = this._getItems();\n    const listItems = this.list?.items;\n    const currentItemIdx = Number(listItems?.indexOf(e.target));\n    const nextItemIdx = currentItemIdx + 1;\n    const prevItemIdx = currentItemIdx - 1;\n    this._previouslySelectedItems = this._getSelectedItems();\n    if (isDownShift(e) && items[nextItemIdx]) {\n      items[nextItemIdx].selected = items[currentItemIdx].selected;\n      items[nextItemIdx].focus();\n    }\n    if (isUpShift(e) && items[prevItemIdx]) {\n      items[prevItemIdx].selected = items[currentItemIdx].selected;\n      items[prevItemIdx].focus();\n    }\n    const changePrevented = this.fireSelectionChange();\n    if (changePrevented) {\n      this._revertSelection();\n    }\n  }\n  _navigateToNextItem() {\n    const items = this._getItems();\n    const itemsCount = items.length;\n    const previousItemIdx = this.currentItemIdx;\n    if (previousItemIdx > -1 && items[previousItemIdx].text !== this.value) {\n      this.currentItemIdx = -1;\n    }\n    if (previousItemIdx >= itemsCount - 1) {\n      return;\n    }\n    let currentItem = this._getItems()[++this.currentItemIdx];\n    while (this.currentItemIdx < itemsCount - 1 && currentItem.selected || currentItem.isGroupItem) {\n      currentItem = this._getItems()[++this.currentItemIdx];\n    }\n    if (currentItem.selected === true || currentItem.isGroupItem) {\n      this.currentItemIdx = previousItemIdx;\n      return;\n    }\n    this.value = currentItem.text;\n    this._innerInput.value = currentItem.text;\n    this._innerInput.setSelectionRange(0, currentItem.text.length);\n  }\n  _navigateToPrevItem() {\n    const items = this._getItems();\n    let previousItemIdx = this.currentItemIdx;\n    if (!this.value && previousItemIdx !== -1 || previousItemIdx !== -1 && this.value && this.value !== items[previousItemIdx].text) {\n      previousItemIdx = -1;\n    }\n    if (previousItemIdx === -1) {\n      this.currentItemIdx = items.length;\n    }\n    if (previousItemIdx === 0) {\n      this.currentItemIdx = 0;\n      return;\n    }\n    let currentItem = this._getItems()[--this.currentItemIdx];\n    while (currentItem && this.currentItemIdx > 0 && (currentItem.selected || currentItem.isGroupItem)) {\n      currentItem = this._getItems()[--this.currentItemIdx];\n    }\n    if (!currentItem) {\n      return;\n    }\n    if (currentItem.selected || currentItem.isGroupItem) {\n      this.currentItemIdx = previousItemIdx;\n      return;\n    }\n    this.value = currentItem.text;\n    this._innerInput.value = currentItem.text;\n    this._innerInput.setSelectionRange(0, currentItem.text.length);\n  }\n  _handleEnter() {\n    const lowerCaseValue = this.value.toLowerCase();\n    const matchingItem = this._getItems().find(item => !item.isGroupItem && item.text.toLowerCase() === lowerCaseValue);\n    const oldValueState = this.valueState;\n    const innerInput = this._innerInput;\n    if (matchingItem) {\n      if (matchingItem.selected) {\n        if (this._validationTimeout) {\n          return;\n        }\n        this.valueState = ValueState.Negative;\n        this._performingSelectionTwice = true;\n        this._resetValueState(oldValueState, () => {\n          this._performingSelectionTwice = false;\n        });\n      } else {\n        this._previouslySelectedItems = this._getSelectedItems();\n        matchingItem.selected = true;\n        this.value = \"\";\n        const changePrevented = this.fireSelectionChange();\n        if (changePrevented) {\n          this._revertSelection();\n        }\n      }\n      innerInput.setSelectionRange(matchingItem.text.length, matchingItem.text.length);\n      this._open = false;\n    } else if (this._internals?.form) {\n      submitForm(this);\n    }\n  }\n  _resetValueState(valueState, callback) {\n    this._validationTimeout = setTimeout(() => {\n      this._effectiveValueState = this.valueState;\n      this._dialogInputValueState = valueState;\n      this.valueState = valueState;\n      this._validationTimeout = null;\n      callback && callback();\n    }, 2000);\n  }\n  _onTokenizerKeydown(e) {\n    if (isRight(e)) {\n      const lastTokenIndex = this._tokenizer.tokens.length - this._tokenizer.overflownTokens.length - 1;\n      if (e.target === this._tokenizer.tokens[lastTokenIndex]) {\n        setTimeout(() => {\n          this._inputDom.focus();\n        }, 0);\n      }\n    }\n    if (isInsertShift(e)) {\n      this._handleInsertPaste(e);\n    }\n    if (isHome(e)) {\n      this._handleHome(e);\n    }\n    if (isEnd(e)) {\n      this._handleEnd(e);\n    }\n    if (isShow(e) && !this.readonly && !this.disabled) {\n      this._preventTokenizerToggle = true;\n      this._handleShow(e);\n    }\n  }\n  _filterItems(str) {\n    const itemsToFilter = this._getItems().filter(item => !item.isGroupItem);\n    const filteredItems = (Filters[this.filter] || Filters.StartsWithPerTerm)(str, itemsToFilter, \"text\");\n    // Return the filtered items and their group items\n    return this._getItems().filter((item, idx, allItems) => MultiComboBox_1._groupItemFilter(item, ++idx, allItems, filteredItems) || filteredItems.indexOf(item) !== -1);\n  }\n  /**\n   * Returns true if the group header should be shown (if there is a filtered suggestion item for this group item)\n   * @private\n   */\n  static _groupItemFilter(item, idx, allItems, filteredItems) {\n    if (item.isGroupItem) {\n      let groupHasFilteredItems;\n      while (allItems[idx] && !allItems[idx].isGroupItem && !groupHasFilteredItems) {\n        groupHasFilteredItems = filteredItems.indexOf(allItems[idx]) !== -1;\n        idx++;\n      }\n      return groupHasFilteredItems;\n    }\n  }\n  _afterOpen() {\n    const action = this._open ? \"open\" : \"close\";\n    if (!isPhone() && !this._isOpenedByKeyboard) {\n      this._innerInput.focus();\n    } else if (this._isOpenedByKeyboard) {\n      this._itemToFocus?.focus();\n    } else {\n      this._getResponsivePopover().focus();\n    }\n    this.fireEvent(action);\n    this._previouslySelectedItems = this._getSelectedItems();\n    this._isOpenedByKeyboard = false;\n  }\n  /**\n   * Retrieves a flat structure of all MultiComboBox items from the slotted nodes.\n   *\n   * @private\n   */\n  _getItems() {\n    const items = [];\n    const slottedItems = this.getSlottedNodes(\"items\");\n    slottedItems.forEach(item => {\n      if (isInstanceOfMultiComboBoxItemGroup(item)) {\n        const groupItems = [item, ...item.items].filter(Boolean);\n        items.push(...groupItems);\n      } else {\n        items.push(item);\n      }\n    });\n    return items;\n  }\n  _getSelectedItems() {\n    // Angular 2 way data binding\n    this.selectedValues = this._getItems().filter(item => item.selected);\n    return this.selectedValues;\n  }\n  _listSelectionChange(e) {\n    let changePrevented;\n    if (!isPhone()) {\n      this._previouslySelectedItems = this._getSelectedItems();\n    }\n    // sync list items and cb items\n    this.syncItems(e.target.listItems);\n    // don't call selection change right after selection as user can cancel it on phone\n    if (!isPhone()) {\n      changePrevented = this.fireSelectionChange();\n      if (changePrevented) {\n        e.preventDefault();\n        this._revertSelection();\n      }\n    }\n    // casted to KeyboardEvent since isSpace and isSpaceCtrl accepts KeyboardEvent only\n    const castedEvent = {\n      key: e.detail.key\n    };\n    if (!e.detail.selectedItems.length && this.filterSelected) {\n      this.filterSelected = false;\n    }\n    if (!e.detail.selectionComponentPressed && !isSpace(castedEvent) && !isSpaceCtrl(castedEvent)) {\n      this._open = false;\n      this.value = \"\";\n      // if the item (not checkbox) is clicked, call the selection change\n      if (isPhone()) {\n        changePrevented = this.fireSelectionChange();\n        if (changePrevented) {\n          e.preventDefault();\n          this._revertSelection();\n        }\n      }\n      this.fireEvent(\"input\");\n      return;\n    }\n    this.value = this.valueBeforeAutoComplete || \"\";\n  }\n  syncItems(listItems) {\n    listItems.forEach(item => {\n      this._getItems().forEach(mcbItem => {\n        if (mcbItem._id === item.getAttribute(\"data-ui5-token-id\")) {\n          mcbItem.selected = item.selected;\n        }\n      });\n    });\n  }\n  fireSelectionChange() {\n    const changePrevented = !this.fireEvent(\"selection-change\", {\n      items: this._getSelectedItems()\n    }, true);\n    // Angular 2 way data binding\n    this.fireEvent(\"value-changed\");\n    return changePrevented;\n  }\n  _getList() {\n    this.list = this.shadowRoot.querySelector(\".ui5-multi-combobox-all-items-list\");\n    return this.list;\n  }\n  _click() {\n    if (isPhone() && !this.readonly && !this._showMorePressed && !this._deleting) {\n      this._open = true;\n    }\n    this._showMorePressed = false;\n  }\n  handleBeforeTokenizerPopoverOpen() {\n    const tokens = this._tokenizer.tokens;\n    const hasTruncatedToken = tokens.length === 1 && tokens[0].isTruncatable;\n    const popover = this._getResponsivePopover();\n    if (hasTruncatedToken && popover) {\n      popover.preventFocusRestore = true;\n      popover.open = false;\n    }\n  }\n  _beforeClose() {\n    this._open = false;\n  }\n  _afterClose() {\n    const action = this._open ? \"open\" : \"close\";\n    // close device's keyboard and prevent further typing\n    if (isPhone()) {\n      this._dialogInputValueState = this.valueState;\n      this._tokenizer.expanded = false;\n    }\n    this.fireEvent(action);\n    this._iconPressed = false;\n    this._preventTokenizerToggle = false;\n    this.filterSelected = false;\n  }\n  _beforeOpen() {\n    this._open = true;\n    this._itemsBeforeOpen = this._getItems().map(item => {\n      return {\n        ref: item,\n        selected: item.selected\n      };\n    });\n    this._valueBeforeOpen = this.value;\n    this._dialogInputValueState = this.valueState;\n    // in order to use the autocomplete feature of the input we should not set value in state\n    this._innerInput.value = this.value;\n    if (this.filterSelected) {\n      const selectedItems = this._filteredItems.filter(item => item.selected);\n      this.selectedItems = this._getItems().filter((item, idx, allItems) => MultiComboBox_1._groupItemFilter(item, ++idx, allItems, selectedItems) || selectedItems.indexOf(item) !== -1);\n    }\n  }\n  _handleTypeAhead(item, filterValue) {\n    if (!item) {\n      return;\n    }\n    const value = item.text;\n    const innerInput = this._innerInput;\n    filterValue = filterValue || \"\";\n    this.value = value;\n    innerInput.value = value;\n    innerInput.setSelectionRange(filterValue.length, value.length);\n    this._shouldAutocomplete = false;\n  }\n  _getFirstMatchingItem(current) {\n    if (!this._getItems().length) {\n      return;\n    }\n    const matchingItems = this._startsWithMatchingItems(current).filter(item => !item.selected);\n    if (matchingItems.length) {\n      return matchingItems[0];\n    }\n  }\n  _startsWithMatchingItems(str) {\n    return Filters.StartsWith(str, this._getItems().filter(item => !item.isGroupItem), \"text\");\n  }\n  _revertSelection() {\n    this._filteredItems.forEach(item => {\n      item.selected = this._previouslySelectedItems.includes(item);\n    });\n  }\n  onBeforeRendering() {\n    const input = this._innerInput;\n    const autoCompletedChars = input && (input.selectionEnd || 0) - (input.selectionStart || 0);\n    const value = input && input.value;\n    if (this.open) {\n      const list = this._getList();\n      const selectedListItemsCount = list?.querySelectorAll(\"[ui5-li][selected]\")?.length;\n      const items = this._getItems().filter(item => !item.isGroupItem);\n      const listItems = list?.querySelectorAll(\"[ui5-li]\")?.length;\n      const selectedItemsCount = items.filter(item => item.selected).length;\n      this._allSelected = selectedItemsCount === items.length || selectedListItemsCount === listItems;\n    }\n    this._effectiveShowClearIcon = this.showClearIcon && !!this.value && !this.readonly && !this.disabled;\n    this._inputLastValue = value;\n    if (input && !input.value) {\n      this.valueBeforeAutoComplete = \"\";\n      this._filteredItems = this._getItems();\n    }\n    this.tokenizerAvailable = this._getSelectedItems().length > 0;\n    this.style.setProperty(getScopedVarName(\"--_ui5-input-icons-count\"), `${this.iconsCount}`);\n    if (!input || !value) {\n      return;\n    }\n    // Typehead causes issues on Android devices, so we disable it for now\n    // If there is already a selection the autocomplete has already been performed\n    if (this._shouldAutocomplete && !isAndroid()) {\n      const item = this._getFirstMatchingItem(value);\n      // Keep the original typed in text intact\n      this.valueBeforeAutoComplete = value;\n      item && this._handleTypeAhead(item, value);\n    }\n    if (this._shouldFilterItems) {\n      this._filteredItems = this._filterItems(this._shouldAutocomplete || !!autoCompletedChars ? this.valueBeforeAutoComplete : value);\n    } else {\n      this._filteredItems = this._getItems();\n    }\n  }\n  onAfterRendering() {\n    this._getList();\n    this.valueStateOpen = this.shouldDisplayOnlyValueStateMessage;\n    this.storeResponsivePopoverWidth();\n    this._deleting = false;\n    // force resize of the tokenizer on invalidation\n    this._tokenizer._handleResize();\n    this._tokenizer.preventInitialFocus = true;\n    if (this.open && !isPhone()) {\n      this._tokenizer.expanded = true;\n    }\n    if (this._tokenizer.expanded && this.hasAttribute(\"focused\")) {\n      this._tokenizer.scrollToEnd();\n    }\n    this._getItems().forEach(item => {\n      item._getRealDomRef = () => this._getResponsivePopover().querySelector(`*[data-ui5-stable=${item.stableDomRef}]`);\n    });\n  }\n  get _isPhone() {\n    return isPhone();\n  }\n  _onIconMousedown() {\n    this._iconPressed = true;\n  }\n  _clear() {\n    this.value = \"\";\n    this._inputDom.value = \"\";\n    this.fireEvent(\"input\");\n    if (!this._isPhone) {\n      this.focus();\n    }\n  }\n  _iconMouseDown() {\n    this._clearingValue = true;\n  }\n  storeResponsivePopoverWidth() {\n    if (this._open && !this._listWidth) {\n      this._listWidth = this.list.offsetWidth;\n    }\n  }\n  handleCancel() {\n    this._itemsBeforeOpen.forEach(item => {\n      if (isInstanceOfMultiComboBoxItem(item.ref)) {\n        item.ref.selected = item.selected;\n      }\n    });\n    this._toggleTokenizerPopover();\n    this.value = this._valueBeforeOpen;\n  }\n  handleOK() {\n    if (isPhone()) {\n      const changePrevented = this.fireSelectionChange();\n      if (changePrevented) {\n        this._revertSelection();\n      }\n    }\n    if (!this.noValidation) {\n      this.value = \"\";\n    }\n    this._toggleTokenizerPopover();\n  }\n  _forwardFocusToInner() {\n    this._innerInput.focus();\n  }\n  get morePopoverOpener() {\n    const tokens = this._tokenizer?.tokens;\n    if (tokens?.length === 1 && tokens[0].isTruncatable) {\n      return tokens[0];\n    }\n    return this;\n  }\n  _getPopover() {\n    return this.shadowRoot.querySelector(\"[ui5-popover]\");\n  }\n  _getResponsivePopover() {\n    return this.shadowRoot.querySelector(\"[ui5-responsive-popover]\");\n  }\n  _setValueStateHeader() {\n    const responsivePopover = this._getResponsivePopover();\n    this.valueStateHeader = responsivePopover.querySelector(\"div.ui5-responsive-popover-header.ui5-valuestatemessage-root\");\n  }\n  get _tokenizer() {\n    return this.shadowRoot.querySelector(\"[ui5-tokenizer]\");\n  }\n  inputFocusIn(e) {\n    if (!isPhone()) {\n      this.focused = true;\n      this._tokenizer.expanded = true;\n      this._tokenizer.scrollToEnd();\n    } else {\n      this._innerInput.blur();\n    }\n    this._clearingValue = false;\n    if (!isPhone() && (e.relatedTarget?.tagName !== \"UI5-STATIC-AREA-ITEM\" || !e.relatedTarget)) {\n      this._innerInput.setSelectionRange(0, this.value.length);\n    }\n    this._tokenizer.tokens.forEach(token => {\n      token.selected = false;\n    });\n    this.valueBeforeAutoComplete = \"\";\n  }\n  inputFocusOut(e) {\n    const responsivePopover = this._getResponsivePopover();\n    const popover = this._getPopover();\n    const focusIsGoingInPopover = [responsivePopover, popover].some(popup => popup?.contains(e.relatedTarget));\n    const focusIsGoingInValueStatePopup = this?.contains(e.relatedTarget);\n    if (focusIsGoingInValueStatePopup) {\n      e.stopImmediatePropagation();\n      return;\n    }\n    if ((!this.shadowRoot.contains(e.relatedTarget) || focusIsGoingInPopover) && !this._deleting && !this._clearingValue) {\n      this.focused = false;\n      if (this._lastValue !== this.value) {\n        this._inputChange();\n      }\n      this._tokenizer.expanded = this.open;\n      // remove the value if user focus out the input and focus is not going in the popover\n      if (!isPhone() && !this.noValidation && !focusIsGoingInPopover) {\n        this.value = \"\";\n      }\n    }\n  }\n  get editable() {\n    return !this.readonly;\n  }\n  get _isFocusInside() {\n    return !isPhone() && (this.focused || this._tokenizerFocused);\n  }\n  get selectedItemsListMode() {\n    return this.readonly ? \"None\" : \"Multiple\";\n  }\n  get _listItemsType() {\n    return this.readonly ? \"Inactive\" : \"Active\";\n  }\n  get hasValueState() {\n    const isValueStateSet = this.valueState !== ValueState.None;\n    if (isPhone()) {\n      return isValueStateSet || this._dialogInputValueState !== ValueState.None;\n    }\n    return isValueStateSet;\n  }\n  get hasValueStateMessage() {\n    const valueState = isPhone() ? this._dialogInputValueState : this.valueState;\n    return this.hasValueState && valueState !== ValueState.Positive;\n  }\n  get ariaValueStateHiddenText() {\n    if (!this.hasValueState) {\n      return;\n    }\n    let text = \"\";\n    if (this.valueState !== ValueState.None) {\n      text = this.valueStateTypeMappings[this.valueState];\n    }\n    if (this.shouldDisplayDefaultValueStateMessage) {\n      return `${text} ${this.valueStateDefaultText || \"\"}`;\n    }\n    return `${text}`.concat(\" \", this.valueStateMessage.map(el => el.textContent).join(\" \"));\n  }\n  get valueStateDefaultText() {\n    const valueState = isPhone() ? this._dialogInputValueState : this.valueState;\n    if (valueState === ValueState.None) {\n      return \"\";\n    }\n    if (this._performingSelectionTwice) {\n      return MultiComboBox_1.i18nBundle.getText(VALUE_STATE_ERROR_ALREADY_SELECTED);\n    }\n    return this.valueStateTextMappings[valueState];\n  }\n  get valueStateTextId() {\n    return this.hasValueState ? `ui5-multi-combobox-valueStateDesc` : undefined;\n  }\n  get ariaLabelText() {\n    return getEffectiveAriaLabelText(this);\n  }\n  /**\n   * This method is relevant for sap_horizon theme only\n   */\n  get _valueStateMessageIcon() {\n    const valueState = isPhone() && this.open ? this._dialogInputValueState : this.valueState;\n    if (valueState === ValueState.None) {\n      return \"\";\n    }\n    return {\n      [ValueState.Negative]: \"error\",\n      [ValueState.Critical]: \"alert\",\n      [ValueState.Positive]: \"sys-enter-2\",\n      [ValueState.Information]: \"information\"\n    }[valueState];\n  }\n  get _tokensCountText() {\n    if (!this._tokenizer) {\n      return;\n    }\n    return getTokensCountText(this._tokenizer.tokens.length);\n  }\n  get _tokensCountTextId() {\n    return \"ui5-multi-combobox-hiddenText-nMore\";\n  }\n  get _selectedTokensCount() {\n    return this._tokenizer.tokens.filter(token => token.selected).length;\n  }\n  get ariaDescribedByText() {\n    return this.valueStateTextId ? `${this._tokensCountTextId} ${this.valueStateTextId}` : `${this._tokensCountTextId}`;\n  }\n  get shouldDisplayDefaultValueStateMessage() {\n    return !this.valueStateMessage.length && this.hasValueStateMessage;\n  }\n  get shouldDisplayOnlyValueStateMessage() {\n    return this.focused && !this.readonly && this.hasValueStateMessage && !this._iconPressed && !this.open;\n  }\n  get valueStateTypeMappings() {\n    return {\n      [ValueState.Positive]: MultiComboBox_1.i18nBundle.getText(VALUE_STATE_TYPE_SUCCESS),\n      [ValueState.Information]: MultiComboBox_1.i18nBundle.getText(VALUE_STATE_TYPE_INFORMATION),\n      [ValueState.Negative]: MultiComboBox_1.i18nBundle.getText(VALUE_STATE_TYPE_ERROR),\n      [ValueState.Critical]: MultiComboBox_1.i18nBundle.getText(VALUE_STATE_TYPE_WARNING)\n    };\n  }\n  get valueStateTextMappings() {\n    return {\n      [ValueState.Positive]: MultiComboBox_1.i18nBundle.getText(VALUE_STATE_SUCCESS),\n      [ValueState.Negative]: MultiComboBox_1.i18nBundle.getText(VALUE_STATE_ERROR),\n      [ValueState.Critical]: MultiComboBox_1.i18nBundle.getText(VALUE_STATE_WARNING),\n      [ValueState.Information]: MultiComboBox_1.i18nBundle.getText(VALUE_STATE_INFORMATION)\n    };\n  }\n  get _innerInput() {\n    if (isPhone()) {\n      if (this._getResponsivePopover()?.open) {\n        return this._getResponsivePopover().querySelector(\"[ui5-input]\").shadowRoot.querySelector(\"input\");\n      }\n    }\n    return this._inputDom;\n  }\n  get _headerTitleText() {\n    return MultiComboBox_1.i18nBundle.getText(INPUT_SUGGESTIONS_TITLE);\n  }\n  get _iconAccessibleNameText() {\n    return MultiComboBox_1.i18nBundle.getText(SELECT_OPTIONS);\n  }\n  get _showSelectedButtonAccessibleNameText() {\n    return MultiComboBox_1.i18nBundle.getText(SHOW_SELECTED_BUTTON);\n  }\n  get _dialogOkButton() {\n    return MultiComboBox_1.i18nBundle.getText(MULTICOMBOBOX_DIALOG_OK_BUTTON);\n  }\n  get _tokenizerExpanded() {\n    if (isPhone()) {\n      return false;\n    }\n    if (this._preventTokenizerToggle) {\n      return this._tokenizer.expanded;\n    }\n    const isCurrentlyExpanded = this._tokenizer?.expanded;\n    const shouldBeExpanded = this.focused || this._open || isCurrentlyExpanded;\n    return shouldBeExpanded;\n  }\n  get _valueStatePopoverHorizontalAlign() {\n    return this.effectiveDir !== \"rtl\" ? \"Start\" : \"End\";\n  }\n  get iconsCount() {\n    const slottedIconsCount = this.icon?.length || 0;\n    const clearIconCount = Number(this._effectiveShowClearIcon) ?? 0;\n    const arrowDownIconsCount = this.readonly ? 0 : 1;\n    return slottedIconsCount + clearIconCount + arrowDownIconsCount;\n  }\n  get clearIconAccessibleName() {\n    return MultiComboBox_1.i18nBundle.getText(INPUT_CLEAR_ICON_ACC_NAME);\n  }\n  get selectAllCheckboxLabel() {\n    const items = this._getItems().filter(item => !item.isGroupItem);\n    const selected = items.filter(item => item.selected);\n    return MultiComboBox_1.i18nBundle.getText(MCB_SELECTED_ITEMS, selected.length, items.length);\n  }\n  get _popupLabel() {\n    return MultiComboBox_1.i18nBundle.getText(COMBOBOX_AVAILABLE_OPTIONS);\n  }\n  get responsivePopoverId() {\n    return `${this._id}-popover`;\n  }\n  get classes() {\n    return {\n      popover: {\n        \"ui5-multi-combobox-all-items-responsive-popover\": true,\n        \"ui5-suggestions-popover\": true,\n        \"ui5-popover-with-value-state-header-phone\": this._isPhone && this.hasValueStateMessage,\n        \"ui5-popover-with-value-state-header\": !this._isPhone && this.hasValueStateMessage\n      },\n      popoverValueState: {\n        \"ui5-valuestatemessage-root\": true,\n        \"ui5-valuestatemessage-header\": true,\n        \"ui5-valuestatemessage--success\": this.valueState === ValueState.Positive || this._dialogInputValueState === ValueState.Positive,\n        \"ui5-valuestatemessage--error\": this.valueState === ValueState.Negative || this._dialogInputValueState === ValueState.Negative,\n        \"ui5-valuestatemessage--warning\": this.valueState === ValueState.Critical || this._dialogInputValueState === ValueState.Critical,\n        \"ui5-valuestatemessage--information\": this.valueState === ValueState.Information || this._dialogInputValueState === ValueState.Information\n      }\n    };\n  }\n  get styles() {\n    const remSizeIxPx = parseInt(getComputedStyle(document.documentElement).fontSize);\n    return {\n      popoverValueStateMessage: {\n        \"width\": `${this._listWidth || 0}px`,\n        \"display\": this._listWidth === 0 ? \"none\" : \"inline-block\"\n      },\n      popoverHeader: {\n        \"max-width\": isPhone() ? \"100%\" : `${this._inputWidth}px`\n      },\n      suggestionsPopover: {\n        \"min-width\": `${this._inputWidth}px`,\n        \"max-width\": this._inputWidth / remSizeIxPx > 40 ? `${this._inputWidth}px` : \"40rem\"\n      }\n    };\n  }\n  static async onDefine() {\n    MultiComboBox_1.i18nBundle = await getI18nBundle(\"@ui5/webcomponents\");\n  }\n};\n__decorate([property()], MultiComboBox.prototype, \"value\", void 0);\n__decorate([property()], MultiComboBox.prototype, \"name\", void 0);\n__decorate([property({\n  type: Boolean\n})], MultiComboBox.prototype, \"noTypeahead\", void 0);\n__decorate([property()], MultiComboBox.prototype, \"placeholder\", void 0);\n__decorate([property({\n  type: Boolean\n})], MultiComboBox.prototype, \"noValidation\", void 0);\n__decorate([property({\n  type: Boolean\n})], MultiComboBox.prototype, \"disabled\", void 0);\n__decorate([property()], MultiComboBox.prototype, \"valueState\", void 0);\n__decorate([property({\n  type: Boolean\n})], MultiComboBox.prototype, \"readonly\", void 0);\n__decorate([property({\n  type: Boolean\n})], MultiComboBox.prototype, \"required\", void 0);\n__decorate([property()], MultiComboBox.prototype, \"filter\", void 0);\n__decorate([property({\n  type: Boolean\n})], MultiComboBox.prototype, \"showClearIcon\", void 0);\n__decorate([property()], MultiComboBox.prototype, \"accessibleName\", void 0);\n__decorate([property()], MultiComboBox.prototype, \"accessibleNameRef\", void 0);\n__decorate([property({\n  type: Boolean\n})], MultiComboBox.prototype, \"showSelectAll\", void 0);\n__decorate([property()], MultiComboBox.prototype, \"_effectiveValueState\", void 0);\n__decorate([property({\n  type: Boolean,\n  noAttribute: true\n})], MultiComboBox.prototype, \"valueStateOpen\", void 0);\n__decorate([property({\n  type: Boolean,\n  noAttribute: true\n})], MultiComboBox.prototype, \"tokenizerOpen\", void 0);\n__decorate([property({\n  type: Boolean,\n  noAttribute: true\n})], MultiComboBox.prototype, \"_open\", void 0);\n__decorate([property()], MultiComboBox.prototype, \"_valueBeforeOpen\", void 0);\n__decorate([property({\n  type: Array\n})], MultiComboBox.prototype, \"_filteredItems\", void 0);\n__decorate([property({\n  type: Array\n})], MultiComboBox.prototype, \"_previouslySelectedItems\", void 0);\n__decorate([property({\n  type: Boolean\n})], MultiComboBox.prototype, \"filterSelected\", void 0);\n__decorate([property({\n  type: Boolean\n})], MultiComboBox.prototype, \"focused\", void 0);\n__decorate([property({\n  type: Boolean,\n  noAttribute: true\n})], MultiComboBox.prototype, \"_tokenizerFocused\", void 0);\n__decorate([property({\n  type: Boolean,\n  noAttribute: true\n})], MultiComboBox.prototype, \"_iconPressed\", void 0);\n__decorate([property({\n  type: Number,\n  noAttribute: true\n})], MultiComboBox.prototype, \"_inputWidth\", void 0);\n__decorate([property({\n  type: Number,\n  noAttribute: true\n})], MultiComboBox.prototype, \"_listWidth\", void 0);\n__decorate([property({\n  type: Boolean,\n  noAttribute: true\n})], MultiComboBox.prototype, \"_performingSelectionTwice\", void 0);\n__decorate([property({\n  type: Boolean,\n  noAttribute: true\n})], MultiComboBox.prototype, \"_allSelected\", void 0);\n__decorate([property({\n  type: Boolean,\n  noAttribute: true\n})], MultiComboBox.prototype, \"_effectiveShowClearIcon\", void 0);\n__decorate([property()], MultiComboBox.prototype, \"_dialogInputValueState\", void 0);\n__decorate([property({\n  type: Boolean\n})], MultiComboBox.prototype, \"tokenizerAvailable\", void 0);\n__decorate([slot({\n  type: HTMLElement,\n  \"default\": true,\n  invalidateOnChildChange: true\n})], MultiComboBox.prototype, \"items\", void 0);\n__decorate([slot()], MultiComboBox.prototype, \"icon\", void 0);\n__decorate([slot()], MultiComboBox.prototype, \"valueStateMessage\", void 0);\nMultiComboBox = MultiComboBox_1 = __decorate([customElement({\n  tag: \"ui5-multi-combobox\",\n  languageAware: true,\n  formAssociated: true,\n  renderer: litRender,\n  template: MultiComboBoxTemplate,\n  styles: [multiCbxStyles, ResponsivePopoverCommonCss, ValueStateMessageCss, SuggestionsCss, MultiComboBoxPopover],\n  dependencies: [MultiComboBoxItem, MultiComboBoxItemGroup, Tokenizer, Token, Icon, Input, ResponsivePopover, Popover, List, ListItemStandard, ListItemGroup, ToggleButton, Button, CheckBox, SuggestionItem]\n})\n/**\n * Fired when the input operation has finished by pressing Enter or on focusout.\n * @public\n */, event(\"change\")\n/**\n * Fired when the value of the component changes at each keystroke or clear icon is pressed.\n * @public\n */, event(\"input\")\n/**\n * Fired when the dropdown is opened.\n * @since 2.0.0\n * @public\n */, event(\"open\")\n/**\n * Fired when the dropdown is closed.\n * @since 2.0.0\n * @public\n */, event(\"close\")\n/**\n * Fired when selection is changed by user interaction.\n * @param {IMultiComboBoxItem[]} items an array of the selected items.\n * @public\n * @allowPreventDefault\n */, event(\"selection-change\", {\n  detail: {\n    /**\n     * @public\n     */\n    items: {\n      type: Array\n    }\n  }\n})], MultiComboBox);\nMultiComboBox.define();\nexport default MultiComboBox;","map":{"version":3,"names":["UI5Element","customElement","property","slot","event","litRender","ResizeHandler","ValueState","isShow","isDown","isUp","isSpace","isSpaceCtrl","isSpaceShift","isRight","isHome","isEnd","isTabNext","isTabPrevious","isUpShift","isDownShift","isLeftCtrl","isRightCtrl","isUpCtrl","isDownCtrl","isHomeCtrl","isEndCtrl","isCtrlA","isInsertShift","isBackSpace","isDelete","isEscape","isEnter","renderFinished","isPhone","isAndroid","isFirefox","getI18nBundle","getEffectiveAriaLabelText","getScopedVarName","submitForm","MultiComboBoxItem","isInstanceOfMultiComboBoxItem","MultiComboBoxItemGroup","isInstanceOfMultiComboBoxItemGroup","ListItemGroup","Tokenizer","getTokensCountText","Token","Icon","Popover","ResponsivePopover","List","ListItemStandard","ToggleButton","Filters","Button","VALUE_STATE_SUCCESS","VALUE_STATE_ERROR","VALUE_STATE_WARNING","VALUE_STATE_INFORMATION","VALUE_STATE_TYPE_SUCCESS","VALUE_STATE_TYPE_INFORMATION","VALUE_STATE_TYPE_ERROR","VALUE_STATE_TYPE_WARNING","INPUT_SUGGESTIONS_TITLE","SELECT_OPTIONS","SHOW_SELECTED_BUTTON","MULTICOMBOBOX_DIALOG_OK_BUTTON","COMBOBOX_AVAILABLE_OPTIONS","VALUE_STATE_ERROR_ALREADY_SELECTED","MCB_SELECTED_ITEMS","INPUT_CLEAR_ICON_ACC_NAME","FORM_MIXED_TEXTFIELD_REQUIRED","MultiComboBoxTemplate","multiCbxStyles","ResponsivePopoverCommonCss","ValueStateMessageCss","SuggestionsCss","MultiComboBoxPopover","CheckBox","Input","SuggestionItem","MultiComboBox","MultiComboBox_1","formValidityMessage","i18nBundle","getText","formValidity","selectedItems","items","filter","item","selected","valueMissing","required","value","length","formElementAnchor","getFocusDomRefAsync","formFormattedValue","name","formData","FormData","append","i","text","constructor","noTypeahead","noValidation","disabled","valueState","readonly","showClearIcon","showSelectAll","_effectiveValueState","valueStateOpen","tokenizerOpen","_open","_valueBeforeOpen","filterSelected","focused","_tokenizerFocused","_iconPressed","_inputWidth","_listWidth","_performingSelectionTwice","_allSelected","_effectiveShowClearIcon","_dialogInputValueState","tokenizerAvailable","_filteredItems","_previouslySelectedItems","selectedValues","_itemsBeforeOpen","_inputLastValue","_deleting","_validationTimeout","_handleResizeBound","_handleResize","bind","valueBeforeAutoComplete","_lastValue","getAttribute","currentItemIdx","onEnterDOM","register","onExitDOM","deregister","offsetWidth","_handleMobileInput","e","open","target","_filterItems","Negative","_shouldFilterItems","fireEvent","_inputChange","_clearingValue","_onMobileInputKeydown","matchingItem","_getItems","find","initiallySelected","changePrevented","fireSelectionChange","_getResponsivePopover","preventFocusRestore","_toggleTokenizerPopover","togglePopoverByDropdownIcon","_showFilteredItems","_showMorePressed","filterSelectedItems","pressed","idx","allItems","_groupItemFilter","indexOf","_showAllItemsButtonPressed","_inputDom","shadowRoot","querySelector","_inputLiveChange","input","filteredItems","oldValueState","newValue","_shouldAutocomplete","_resetValueState","_tokenDelete","_getSelectedItems","token","detail","tokens","deletingItems","some","t","_id","forEach","_preventTokenizerToggle","focus","_revertSelection","_getPlaceholder","placeholder","_handleArrowLeft","inputDomRef","cursorPosition","selectionStart","isTextSelected","selectionEnd","_tokenizer","_focusLastToken","_onPopoverFocusOut","expanded","_tokenizerFocusOut","tokensCount","selectedTokens","_selectedTokensCount","lastTokenBeingDeleted","allTokensAreBeingDeleted","relatedTarget","contains","setTimeout","_tokenizerFocusIn","_onkeydown","isArrowDownCtrl","isCtrl","metaKey","ctrlKey","_handleShow","preventDefault","_handleArrowNavigation","setSelectionRange","_handleArrowCtrl","_handleInsertPaste","key","toLowerCase","_selectItems","matchingItems","_handlePaste","clipboardData","pastedText","getData","_handleTokenCreationUponPaste","separatedText","split","isGroupItem","includes","navigator","clipboard","readText","selectedItem","focusedToken","localeCompare","undefined","sensitivity","_isOpenedByKeyboard","_itemToFocus","_handlePageUp","_handlePageDown","_handleBackspace","_handleEscape","innerInput","_innerInput","isAutoCompleted","_handleHome","shouldFocusToken","_isFocusInside","_handleEnd","lastTokenIdx","shouldFocusInput","activeElement","_handleTab","_handleSelectAll","allItemsSelected","every","map","_onListHeaderKeydown","isArrowDown","isArrowUp","isSelectAllFocused","classList","_onItemTab","_handleArrowDown","valueStateHeader","_handleSelectAllCheckboxClick","checked","_onItemKeydown","isFirstItemGroup","list","hasAttribute","isFirstItem","hasValueStateMessage","_setValueStateHeader","_itemNavigation","_currentIndex","_handleItemRangeSelection","_handleUp","_handleDown","isArrowLeft","isDownControl","hasSuggestions","_navigateToPrevItem","firstListItem","listItems","setCurrentItem","_navigateToNextItem","Number","nextItemIdx","prevItemIdx","itemsCount","previousItemIdx","currentItem","_handleEnter","lowerCaseValue","_internals","form","callback","_onTokenizerKeydown","lastTokenIndex","overflownTokens","str","itemsToFilter","StartsWithPerTerm","groupHasFilteredItems","_afterOpen","action","slottedItems","getSlottedNodes","groupItems","Boolean","push","_listSelectionChange","syncItems","castedEvent","selectionComponentPressed","mcbItem","_getList","_click","handleBeforeTokenizerPopoverOpen","hasTruncatedToken","isTruncatable","popover","_beforeClose","_afterClose","_beforeOpen","ref","_handleTypeAhead","filterValue","_getFirstMatchingItem","current","_startsWithMatchingItems","StartsWith","onBeforeRendering","autoCompletedChars","selectedListItemsCount","querySelectorAll","selectedItemsCount","style","setProperty","iconsCount","onAfterRendering","shouldDisplayOnlyValueStateMessage","storeResponsivePopoverWidth","preventInitialFocus","scrollToEnd","_getRealDomRef","stableDomRef","_isPhone","_onIconMousedown","_clear","_iconMouseDown","handleCancel","handleOK","_forwardFocusToInner","morePopoverOpener","_getPopover","responsivePopover","inputFocusIn","blur","tagName","inputFocusOut","focusIsGoingInPopover","popup","focusIsGoingInValueStatePopup","stopImmediatePropagation","editable","selectedItemsListMode","_listItemsType","hasValueState","isValueStateSet","None","Positive","ariaValueStateHiddenText","valueStateTypeMappings","shouldDisplayDefaultValueStateMessage","valueStateDefaultText","concat","valueStateMessage","el","textContent","join","valueStateTextMappings","valueStateTextId","ariaLabelText","_valueStateMessageIcon","Critical","Information","_tokensCountText","_tokensCountTextId","ariaDescribedByText","_headerTitleText","_iconAccessibleNameText","_showSelectedButtonAccessibleNameText","_dialogOkButton","_tokenizerExpanded","isCurrentlyExpanded","shouldBeExpanded","_valueStatePopoverHorizontalAlign","effectiveDir","slottedIconsCount","icon","clearIconCount","arrowDownIconsCount","clearIconAccessibleName","selectAllCheckboxLabel","_popupLabel","responsivePopoverId","classes","popoverValueState","styles","remSizeIxPx","parseInt","getComputedStyle","document","documentElement","fontSize","popoverValueStateMessage","popoverHeader","suggestionsPopover","onDefine","__decorate","type","noAttribute","Array","HTMLElement","invalidateOnChildChange","tag","languageAware","formAssociated","renderer","template","dependencies","define"],"sources":["/home/user/projects/reactproj/node_modules/@ui5/webcomponents/src/MultiComboBox.ts"],"sourcesContent":["import UI5Element from \"@ui5/webcomponents-base/dist/UI5Element.js\";\nimport customElement from \"@ui5/webcomponents-base/dist/decorators/customElement.js\";\nimport property from \"@ui5/webcomponents-base/dist/decorators/property.js\";\nimport slot from \"@ui5/webcomponents-base/dist/decorators/slot.js\";\nimport event from \"@ui5/webcomponents-base/dist/decorators/event.js\";\nimport type { ClassMap, Timeout } from \"@ui5/webcomponents-base/dist/types.js\";\nimport litRender from \"@ui5/webcomponents-base/dist/renderer/LitRenderer.js\";\nimport ResizeHandler from \"@ui5/webcomponents-base/dist/delegate/ResizeHandler.js\";\nimport type { ResizeObserverCallback } from \"@ui5/webcomponents-base/dist/delegate/ResizeHandler.js\";\nimport ValueState from \"@ui5/webcomponents-base/dist/types/ValueState.js\";\nimport {\n\tisShow,\n\tisDown,\n\tisUp,\n\tisSpace,\n\tisSpaceCtrl,\n\tisSpaceShift,\n\tisRight,\n\tisHome,\n\tisEnd,\n\tisTabNext,\n\tisTabPrevious,\n\tisUpShift,\n\tisDownShift,\n\tisLeftCtrl,\n\tisRightCtrl,\n\tisUpCtrl,\n\tisDownCtrl,\n\tisHomeCtrl,\n\tisEndCtrl,\n\tisCtrlA,\n\tisInsertShift,\n\tisBackSpace,\n\tisDelete,\n\tisEscape,\n\tisEnter,\n} from \"@ui5/webcomponents-base/dist/Keys.js\";\nimport \"@ui5/webcomponents-icons/dist/slim-arrow-down.js\";\nimport { renderFinished } from \"@ui5/webcomponents-base/dist/Render.js\";\nimport {\n\tisPhone,\n\tisAndroid,\n\tisFirefox,\n} from \"@ui5/webcomponents-base/dist/Device.js\";\nimport type I18nBundle from \"@ui5/webcomponents-base/dist/i18nBundle.js\";\nimport { getI18nBundle } from \"@ui5/webcomponents-base/dist/i18nBundle.js\";\nimport \"@ui5/webcomponents-icons/dist/decline.js\";\nimport \"@ui5/webcomponents-icons/dist/multiselect-all.js\";\nimport \"@ui5/webcomponents-icons/dist/not-editable.js\";\nimport \"@ui5/webcomponents-icons/dist/error.js\";\nimport \"@ui5/webcomponents-icons/dist/alert.js\";\nimport \"@ui5/webcomponents-icons/dist/sys-enter-2.js\";\nimport \"@ui5/webcomponents-icons/dist/information.js\";\nimport { getEffectiveAriaLabelText } from \"@ui5/webcomponents-base/dist/util/AriaLabelHelper.js\";\nimport { getScopedVarName } from \"@ui5/webcomponents-base/dist/CustomElementsScope.js\";\nimport { submitForm } from \"@ui5/webcomponents-base/dist/features/InputElementsFormSupport.js\";\nimport type { IFormInputElement } from \"@ui5/webcomponents-base/dist/features/InputElementsFormSupport.js\";\nimport MultiComboBoxItem, { isInstanceOfMultiComboBoxItem } from \"./MultiComboBoxItem.js\";\nimport MultiComboBoxItemGroup, { isInstanceOfMultiComboBoxItemGroup } from \"./MultiComboBoxItemGroup.js\";\nimport ListItemGroup from \"./ListItemGroup.js\";\nimport Tokenizer, { getTokensCountText } from \"./Tokenizer.js\";\nimport type { TokenizerTokenDeleteEventDetail } from \"./Tokenizer.js\";\nimport Token from \"./Token.js\";\nimport Icon from \"./Icon.js\";\nimport type { IIcon } from \"./Icon.js\";\nimport Popover from \"./Popover.js\";\nimport ResponsivePopover from \"./ResponsivePopover.js\";\nimport List from \"./List.js\";\nimport type { ListSelectionChangeEventDetail } from \"./List.js\";\nimport ListItemStandard from \"./ListItemStandard.js\";\nimport ToggleButton from \"./ToggleButton.js\";\nimport * as Filters from \"./Filters.js\";\nimport Button from \"./Button.js\";\nimport {\n\tVALUE_STATE_SUCCESS,\n\tVALUE_STATE_ERROR,\n\tVALUE_STATE_WARNING,\n\tVALUE_STATE_INFORMATION,\n\tVALUE_STATE_TYPE_SUCCESS,\n\tVALUE_STATE_TYPE_INFORMATION,\n\tVALUE_STATE_TYPE_ERROR,\n\tVALUE_STATE_TYPE_WARNING,\n\tINPUT_SUGGESTIONS_TITLE,\n\tSELECT_OPTIONS,\n\tSHOW_SELECTED_BUTTON,\n\tMULTICOMBOBOX_DIALOG_OK_BUTTON,\n\tCOMBOBOX_AVAILABLE_OPTIONS,\n\tVALUE_STATE_ERROR_ALREADY_SELECTED,\n\tMCB_SELECTED_ITEMS,\n\tINPUT_CLEAR_ICON_ACC_NAME,\n\tFORM_MIXED_TEXTFIELD_REQUIRED,\n} from \"./generated/i18n/i18n-defaults.js\";\n\n// Templates\nimport MultiComboBoxTemplate from \"./generated/templates/MultiComboBoxTemplate.lit.js\";\n\n// Styles\nimport multiCbxStyles from \"./generated/themes/MultiComboBox.css.js\";\nimport ResponsivePopoverCommonCss from \"./generated/themes/ResponsivePopoverCommon.css.js\";\nimport ValueStateMessageCss from \"./generated/themes/ValueStateMessage.css.js\";\nimport SuggestionsCss from \"./generated/themes/Suggestions.css.js\";\nimport MultiComboBoxPopover from \"./generated/themes/MultiComboBoxPopover.css.js\";\nimport type ComboBoxFilter from \"./types/ComboBoxFilter.js\";\nimport type ListItemBase from \"./ListItemBase.js\";\nimport CheckBox from \"./CheckBox.js\";\nimport Input from \"./Input.js\";\nimport type { InputEventDetail } from \"./Input.js\";\nimport type PopoverHorizontalAlign from \"./types/PopoverHorizontalAlign.js\";\nimport SuggestionItem from \"./SuggestionItem.js\";\n\n/**\n * Interface for components that may be slotted inside a `ui5-multi-combobox` as items\n * @public\n */\ninterface IMultiComboBoxItem extends UI5Element {\n\ttext?: string,\n\theaderText?: string,\n\tselected: boolean,\n\tisGroupItem?: boolean,\n\tstableDomRef: string,\n\t_isVisible?: boolean,\n\titems?: Array<IMultiComboBoxItem>,\n}\n\ntype ValueStateAnnouncement = Record<Exclude<ValueState, ValueState.None>, string>;\ntype ValueStateTypeAnnouncement = Record<Exclude<ValueState, ValueState.None>, string>;\n\ntype MultiComboBoxSelectionChangeEventDetail = {\n\titems: Array<MultiComboBoxItem>,\n};\n\ntype MultiComboboxItemWithSelection = {\n\tref: IMultiComboBoxItem,\n\tselected: boolean,\n};\n\n/**\n * @class\n *\n * ### Overview\n *\n * The `ui5-multi-combobox` component consists of a list box with items and a text field allowing the user to either type a value directly into the text field, or choose from the list of existing items.\n *\n * The drop-down list is used for selecting and filtering values, it enables users to select one or more options from a predefined list. The control provides an editable input field to filter the list, and a dropdown arrow to expand/collapse the list of available options.\n * The options in the list have checkboxes that permit multi-selection. Entered values are displayed as tokens.\n * ### Structure\n * The `ui5-multi-combobox` consists of the following elements:\n *\n * -  Tokenizer - a list of tokens with selected options.\n * -  Input field - displays the selected option/s as token/s. Users can type to filter the list.\n * -  Drop-down arrow - expands\\collapses the option list.\n * -  Option list - the list of available options.\n *\n * ### Keyboard Handling\n *\n * The `ui5-multi-combobox` provides advanced keyboard handling.\n *\n * #### Picker\n * If the `ui5-multi-combobox` is focused,\n * you can open or close the drop-down by pressing [F4], [Alt] + [Up] or [Alt] + [Down] keys.\n * Once the drop-down is opened, you can use the `UP` and `DOWN` arrow keys\n * to navigate through the available options and select one by pressing the `Space` or `Enter` keys.\n *\n * #### Tokens\n *\n * -  Left/Right arrow keys - moves the focus selection form the currently focused token to the previous/next one (if available).\n * -  Delete -  deletes the token and focuses the previous token.\n * -  Backspace -  deletes the token and focus the next token.\n *\n * ### ES6 Module Import\n *\n * `import \"@ui5/webcomponents/dist/MultiComboBox.js\";`\n * @constructor\n * @extends UI5Element\n * @public\n * @since 0.11.0\n * @csspart token-\\{index\\} - Used to style each token(where `token-0` corresponds to the first item)\n */\n@customElement({\n\ttag: \"ui5-multi-combobox\",\n\tlanguageAware: true,\n\tformAssociated: true,\n\trenderer: litRender,\n\ttemplate: MultiComboBoxTemplate,\n\tstyles: [\n\t\tmultiCbxStyles,\n\t\tResponsivePopoverCommonCss,\n\t\tValueStateMessageCss,\n\t\tSuggestionsCss,\n\t\tMultiComboBoxPopover,\n\t],\n\tdependencies: [\n\t\tMultiComboBoxItem,\n\t\tMultiComboBoxItemGroup,\n\t\tTokenizer,\n\t\tToken,\n\t\tIcon,\n\t\tInput,\n\t\tResponsivePopover,\n\t\tPopover,\n\t\tList,\n\t\tListItemStandard,\n\t\tListItemGroup,\n\t\tToggleButton,\n\t\tButton,\n\t\tCheckBox,\n\t\tSuggestionItem,\n\t],\n})\n/**\n * Fired when the input operation has finished by pressing Enter or on focusout.\n * @public\n */\n@event(\"change\")\n\n/**\n * Fired when the value of the component changes at each keystroke or clear icon is pressed.\n * @public\n */\n@event(\"input\")\n\n/**\n * Fired when the dropdown is opened.\n * @since 2.0.0\n * @public\n */\n@event(\"open\")\n\n/**\n * Fired when the dropdown is closed.\n * @since 2.0.0\n * @public\n */\n@event(\"close\")\n\n/**\n * Fired when selection is changed by user interaction.\n * @param {IMultiComboBoxItem[]} items an array of the selected items.\n * @public\n * @allowPreventDefault\n */\n@event<MultiComboBoxSelectionChangeEventDetail>(\"selection-change\", {\n\tdetail: {\n\t\t/**\n\t\t * @public\n\t\t */\n\t\titems: { type: Array<IMultiComboBoxItem> },\n\t},\n})\n\nclass MultiComboBox extends UI5Element implements IFormInputElement {\n\t/**\n\t * Defines the value of the component.\n\t *\n\t * **Note:** The property is updated upon typing.\n\t * @default \"\"\n\t * @formEvents change input\n\t * @formProperty\n\t * @public\n\t */\n\t@property()\n\tvalue = \"\";\n\n\t/**\n\t * Determines the name by which the component will be identified upon submission in an HTML form.\n\t *\n\t * **Note:** This property is only applicable within the context of an HTML Form element.\n\t * **Note:** When the component is used inside a form element,\n\t * the value is sent as the first element in the form data, even if it's empty.\n\t * @default undefined\n\t * @public\n\t * @since 2.0.0\n\t */\n\t@property()\n\tname?: string;\n\n\t/**\n\t * Defines whether the value will be autcompleted to match an item\n\t * @default false\n\t * @public\n\t * @since 1.4.0\n\t */\n\t@property({ type: Boolean })\n\tnoTypeahead = false;\n\n\t/**\n\t * Defines a short hint intended to aid the user with data entry when the\n\t * component has no value.\n\t * @default undefined\n\t * @public\n\t */\n\t@property()\n\tplaceholder?: string;\n\n\t/**\n\t * Defines if the user input will be prevented, if no matching item has been found\n\t * @default false\n\t * @public\n\t */\n\t@property({ type: Boolean })\n\tnoValidation = false;\n\n\t/**\n\t * Defines whether the component is in disabled state.\n\t *\n\t * **Note:** A disabled component is completely noninteractive.\n\t * @default false\n\t * @public\n\t */\n\t@property({ type: Boolean })\n\tdisabled = false;\n\n\t/**\n\t * Defines the value state of the component.\n\t * @default \"None\"\n\t * @public\n\t */\n\t@property()\n\tvalueState: `${ValueState}` = \"None\";\n\n\t/**\n\t * Defines whether the component is read-only.\n\t *\n\t * **Note:** A read-only component is not editable,\n\t * but still provides visual feedback upon user interaction.\n\t * @default false\n\t * @public\n\t */\n\t@property({ type: Boolean })\n\treadonly = false;\n\n\t/**\n\t * Defines whether the component is required.\n\t * @default false\n\t * @public\n\t * @since 1.0.0-rc.5\n\t */\n\t@property({ type: Boolean })\n\trequired = false;\n\n\t/**\n\t * Defines the filter type of the component.\n\t * @default \"StartsWithPerTerm\"\n\t * @public\n\t */\n\t@property()\n\tfilter: `${ComboBoxFilter}` = \"StartsWithPerTerm\";\n\n\t/**\n\t * Defines whether the clear icon of the multi-combobox will be shown.\n\t * @default false\n\t * @public\n\t * @since 1.20.1\n\t */\n\t@property({ type: Boolean })\n\tshowClearIcon = false;\n\n\t/**\n\t * Defines the accessible ARIA name of the component.\n\t * @default undefined\n\t * @public\n\t * @since 1.4.0\n\t */\n\t@property()\n\taccessibleName?: string;\n\n\t/**\n\t * Receives id(or many ids) of the elements that label the component.\n\t * @default undefined\n\t * @public\n\t * @since 1.4.0\n\t */\n\t@property()\n\taccessibleNameRef?: string;\n\n\t/**\n\t * Determines if the select all checkbox is visible on top of suggestions.\n\t * @default false\n\t * @public\n\t */\n\t@property({ type: Boolean })\n\tshowSelectAll = false;\n\n\t@property()\n\t_effectiveValueState: `${ValueState}` = \"None\";\n\t/**\n\t * Indicates whether the value state message popover is open.\n\t * @private\n\t */\n\t@property({ type: Boolean, noAttribute: true })\n\tvalueStateOpen = false;\n\n\t/**\n\t * Indicates whether the Tokenizer n-more popover is open.\n\t * @private\n\t */\n\t@property({ type: Boolean, noAttribute: true })\n\ttokenizerOpen = false;\n\n\t/**\n\t * Indicates whether the items picker is open.\n\t * @private\n\t */\n\t@property({ type: Boolean, noAttribute: true })\n\t_open = false;\n\n\t@property()\n\t_valueBeforeOpen = this.value;\n\n\t@property({ type: Array })\n\t_filteredItems!: Array<IMultiComboBoxItem>;\n\n\t@property({ type: Array })\n\t_previouslySelectedItems!: Array<IMultiComboBoxItem>;\n\n\t@property({ type: Boolean })\n\tfilterSelected = false;\n\n\t@property({ type: Boolean })\n\tfocused = false;\n\n\t@property({ type: Boolean, noAttribute: true })\n\t_tokenizerFocused = false;\n\n\t@property({ type: Boolean, noAttribute: true })\n\t_iconPressed = false;\n\n\t@property({ type: Number, noAttribute: true })\n\t_inputWidth = 0;\n\n\t@property({ type: Number, noAttribute: true })\n\t_listWidth = 0;\n\n\t@property({ type: Boolean, noAttribute: true })\n\t_performingSelectionTwice = false;\n\n\t@property({ type: Boolean, noAttribute: true })\n\t_allSelected = false;\n\n\t@property({ type: Boolean, noAttribute: true })\n\t_effectiveShowClearIcon = false;\n\n\t@property()\n\t_dialogInputValueState: `${ValueState}` = \"None\";\n\n\t/**\n\t * Indicates whether the tokenizer has tokens\n\t * @private\n\t */\n\t@property({ type: Boolean })\n\ttokenizerAvailable = false;\n\n\t/**\n\t * Defines the component items.\n\t * @public\n\t */\n\t@slot({ type: HTMLElement, \"default\": true, invalidateOnChildChange: true })\n\titems!: Array<IMultiComboBoxItem>;\n\n\t/**\n\t* Defines the icon to be displayed in the component.\n\t* @public\n\t* @since 1.0.0-rc.9\n\t*/\n\t@slot()\n\ticon!: Array<IIcon>;\n\n\t/**\n\t * Defines the value state message that will be displayed as pop up under the component.\n\t * The value state message slot should contain only one root element.\n\t *\n\t * **Note:** If not specified, a default text (in the respective language) will be displayed.\n\t *\n\t * **Note:** The `valueStateMessage` would be displayed,\n\t * when the component is in `Information`, `Critical` or `Negative` value state.\n\t * @since 1.0.0-rc.9\n\t * @public\n\t */\n\t@slot()\n\tvalueStateMessage!: Array<HTMLElement>;\n\n\tselectedValues: Array<IMultiComboBoxItem>;\n\t_inputLastValue: string;\n\t_deleting: boolean;\n\t_validationTimeout: Timeout | null;\n\t_handleResizeBound: ResizeObserverCallback;\n\tvalueBeforeAutoComplete: string;\n\tcurrentItemIdx: number;\n\t_lastValue: string;\n\t_shouldFilterItems?: boolean;\n\t_showMorePressed?: boolean;\n\t_clearingValue?: boolean;\n\tvalueStateHeader?: HTMLElement;\n\tlist?: List;\n\t_shouldAutocomplete?: boolean;\n\t_preventTokenizerToggle?: boolean;\n\t_isOpenedByKeyboard?: boolean;\n\t_itemToFocus?: IMultiComboBoxItem;\n\t_itemsBeforeOpen: Array<MultiComboboxItemWithSelection>;\n\tselectedItems: Array<IMultiComboBoxItem>;\n\tstatic i18nBundle: I18nBundle;\n\n\tget formValidityMessage() {\n\t\treturn MultiComboBox.i18nBundle.getText(FORM_MIXED_TEXTFIELD_REQUIRED);\n\t}\n\n\tget formValidity(): ValidityStateFlags {\n\t\tconst selectedItems = (this.items || []).filter(item => item.selected);\n\n\t\treturn { valueMissing: this.required && !this.value && !selectedItems.length };\n\t}\n\n\tasync formElementAnchor() {\n\t\treturn this.getFocusDomRefAsync();\n\t}\n\n\tget formFormattedValue(): FormData | string | null {\n\t\tconst selectedItems = (this.items || []).filter(item => item.selected);\n\n\t\tif (selectedItems.length && this.name) {\n\t\t\tconst formData = new FormData();\n\n\t\t\tformData.append(this.name, this.value);\n\n\t\t\tfor (let i = 0; i < selectedItems.length; i++) {\n\t\t\t\tformData.append(this.name, selectedItems[i].text!);\n\t\t\t}\n\n\t\t\treturn formData;\n\t\t}\n\n\t\treturn this.value;\n\t}\n\n\tconstructor() {\n\t\tsuper();\n\n\t\tthis._filteredItems = [];\n\t\tthis.selectedItems = [];\n\t\tthis._previouslySelectedItems = [];\n\t\tthis.selectedValues = [];\n\t\tthis._itemsBeforeOpen = [];\n\t\tthis._inputLastValue = \"\";\n\t\tthis._deleting = false;\n\t\tthis._validationTimeout = null;\n\t\tthis._handleResizeBound = this._handleResize.bind(this);\n\t\tthis.valueBeforeAutoComplete = \"\";\n\t\tthis._lastValue = this.getAttribute(\"value\") || \"\";\n\t\tthis.currentItemIdx = -1;\n\t}\n\n\tonEnterDOM() {\n\t\tResizeHandler.register(this, this._handleResizeBound);\n\t}\n\n\tonExitDOM() {\n\t\tResizeHandler.deregister(this, this._handleResizeBound);\n\t}\n\n\t_handleResize() {\n\t\tthis._inputWidth = this.offsetWidth;\n\t}\n\n\t_handleMobileInput(e: CustomEvent<InputEventDetail>) {\n\t\tif (!this.open || this.readonly) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst target = e.target as Input;\n\t\tconst value = target.value;\n\n\t\tif (!this.noValidation && !this._filterItems(value).length) {\n\t\t\tthis._dialogInputValueState = ValueState.Negative;\n\t\t} else {\n\t\t\tthis._dialogInputValueState = this.valueState;\n\t\t}\n\n\t\tthis.value = value;\n\t\tthis._shouldFilterItems = true;\n\t\tthis.valueBeforeAutoComplete = value;\n\n\t\tthis.fireEvent(\"input\");\n\t}\n\n\t_inputChange() {\n\t\tif (!this._clearingValue && this._lastValue !== this.value) {\n\t\t\tthis._lastValue = this.value;\n\t\t\tthis.fireEvent(\"change\");\n\t\t}\n\t}\n\n\t_onMobileInputKeydown(e: KeyboardEvent) {\n\t\tif (!isEnter(e)) {\n\t\t\treturn;\n\t\t}\n\t\tconst { value } = (e.target as Input);\n\t\tconst matchingItem = this._getItems().find(item => item.text === value);\n\n\t\tif (!matchingItem) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst initiallySelected = matchingItem?.selected;\n\t\tconst changePrevented = this.fireSelectionChange();\n\n\t\tif (!changePrevented) {\n\t\t\tmatchingItem.selected = !initiallySelected;\n\t\t\tthis._getResponsivePopover().preventFocusRestore = false;\n\t\t\tthis._open = false;\n\t\t\tthis.value = \"\";\n\t\t}\n\t}\n\n\t_toggleTokenizerPopover() {\n\t\tthis.tokenizerOpen = false;\n\t\tthis._open = !this.open;\n\t}\n\n\ttogglePopoverByDropdownIcon() {\n\t\tthis._shouldFilterItems = false;\n\t\tthis._open = !this.open;\n\t\tthis.tokenizerOpen = false;\n\t}\n\n\t_showFilteredItems() {\n\t\tthis.filterSelected = true;\n\t\tthis._showMorePressed = true;\n\n\t\tthis._toggleTokenizerPopover();\n\t}\n\n\tfilterSelectedItems(e: MouseEvent) {\n\t\tthis.filterSelected = (e.target as ToggleButton).pressed;\n\t\tconst selectedItems = this._filteredItems.filter(item => item.selected);\n\n\t\tthis.selectedItems = this._getItems().filter((item, idx, allItems) => MultiComboBox._groupItemFilter(item, ++idx, allItems, selectedItems) || selectedItems.indexOf(item) !== -1);\n\t}\n\n\t/**\n\t * Indicates whether the dropdown is open. True if the dropdown is open, false otherwise.\n\t * @default false\n\t * @public\n\t */\n\tget open(): boolean {\n\t\treturn this._open;\n\t}\n\n\tget _showAllItemsButtonPressed(): boolean {\n\t\treturn this.filterSelected;\n\t}\n\n\tget _inputDom(): HTMLInputElement {\n\t\treturn this.shadowRoot!.querySelector(\"#ui5-multi-combobox-input\")!;\n\t}\n\n\t_inputLiveChange(e: InputEvent) {\n\t\tconst input = e.target as HTMLInputElement;\n\t\tconst value: string = input.value;\n\t\tconst filteredItems: Array<IMultiComboBoxItem> = this._filterItems(value);\n\t\tconst oldValueState: `${ValueState}` = this.valueState;\n\n\t\tthis._shouldFilterItems = true;\n\n\t\tif (this.filterSelected) {\n\t\t\tthis.filterSelected = false;\n\t\t}\n\n\t\tif (this._validationTimeout) {\n\t\t\tif (this._filterItems(value).length) {\n\t\t\t\tthis.valueState = this._effectiveValueState;\n\t\t\t\tthis._validationTimeout = null;\n\t\t\t} else {\n\t\t\t\tinput.value = this._inputLastValue;\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tthis._effectiveValueState = this.valueState;\n\n\t\tif (!filteredItems.length && value && !this.noValidation) {\n\t\t\tconst newValue = this.valueBeforeAutoComplete || this._inputLastValue;\n\n\t\t\tinput.value = newValue;\n\t\t\tthis.value = newValue;\n\t\t\tthis.valueState = ValueState.Negative;\n\n\t\t\tthis._shouldAutocomplete = false;\n\t\t\tthis._resetValueState(oldValueState);\n\n\t\t\treturn;\n\t\t}\n\n\t\tthis._inputLastValue = input.value;\n\t\tthis.value = input.value;\n\t\tthis._filteredItems = filteredItems;\n\n\t\tif (!isPhone()) {\n\t\t\tif (filteredItems.length === 0) {\n\t\t\t\tthis._open = false;\n\t\t\t} else {\n\t\t\t\tthis._open = true;\n\t\t\t}\n\t\t}\n\n\t\tthis.fireEvent(\"input\");\n\t}\n\n\t_tokenDelete(e: CustomEvent<TokenizerTokenDeleteEventDetail>) {\n\t\tthis._previouslySelectedItems = this._getSelectedItems();\n\t\tconst token: Token[] = e.detail.tokens;\n\t\tconst deletingItems = this._getItems().filter(item => token.some(t => t.getAttribute(\"data-ui5-id\") === item._id));\n\n\t\tdeletingItems.forEach(item => {\n\t\t\titem.selected = false;\n\t\t});\n\n\t\tthis._deleting = true;\n\t\tthis._preventTokenizerToggle = true;\n\n\t\tthis.focus();\n\t\tconst changePrevented = this.fireSelectionChange();\n\n\t\tif (changePrevented) {\n\t\t\tthis._revertSelection();\n\t\t}\n\t}\n\n\tget _getPlaceholder(): string {\n\t\tif (this._getSelectedItems().length) {\n\t\t\treturn \"\";\n\t\t}\n\n\t\treturn this.placeholder || \"\";\n\t}\n\n\t_handleArrowLeft() {\n\t\tconst inputDomRef = this._inputDom;\n\t\tconst cursorPosition = inputDomRef.selectionStart || 0;\n\t\tconst isTextSelected = ((inputDomRef.selectionEnd || 0) - cursorPosition) > 0;\n\n\t\tif (cursorPosition === 0 && !isTextSelected) {\n\t\t\tthis._tokenizer._focusLastToken();\n\t\t}\n\t}\n\n\t_onPopoverFocusOut() {\n\t\tif (!isPhone()) {\n\t\t\tthis._tokenizer.expanded = this._open;\n\t\t}\n\t}\n\n\t_tokenizerFocusOut(e: FocusEvent) {\n\t\tthis._tokenizerFocused = false;\n\n\t\tconst tokensCount = this._tokenizer.tokens.length;\n\t\tconst selectedTokens = this._selectedTokensCount;\n\t\tconst lastTokenBeingDeleted = tokensCount - 1 === 0 && this._deleting;\n\t\tconst allTokensAreBeingDeleted = selectedTokens === tokensCount && this._deleting;\n\t\tconst relatedTarget: HTMLElement | undefined = e.relatedTarget as HTMLElement;\n\n\t\tif (!this.shadowRoot?.contains(relatedTarget)) {\n\t\t\tthis._tokenizer.tokens.forEach(token => {\n\t\t\t\ttoken.selected = false;\n\t\t\t});\n\n\t\t\tthis._tokenizer.expanded = this._preventTokenizerToggle ? this._tokenizer.expanded : false;\n\t\t}\n\n\t\tif (allTokensAreBeingDeleted || lastTokenBeingDeleted) {\n\t\t\tsetTimeout(() => {\n\t\t\t\tif (!isPhone()) {\n\t\t\t\t\tthis._inputDom.focus();\n\t\t\t\t}\n\n\t\t\t\tthis._deleting = false;\n\t\t\t}, 0);\n\t\t}\n\t}\n\n\t_tokenizerFocusIn() {\n\t\tthis._tokenizerFocused = true;\n\t\tthis.focused = false;\n\t}\n\n\t_onkeydown(e: KeyboardEvent) {\n\t\tconst isArrowDownCtrl: boolean = isDownCtrl(e);\n\t\tconst isCtrl: boolean = e.metaKey || e.ctrlKey;\n\n\t\tif (isShow(e) && !this.disabled) {\n\t\t\tthis._handleShow(e);\n\t\t\treturn;\n\t\t}\n\n\t\tif (isDownShift(e) || isUpShift(e)) {\n\t\t\te.preventDefault();\n\t\t\treturn;\n\t\t}\n\n\t\tif (isUp(e) || isDown(e) || isUpCtrl(e) || isArrowDownCtrl) {\n\t\t\tthis._handleArrowNavigation(e, isArrowDownCtrl);\n\t\t\treturn;\n\t\t}\n\n\t\t// CTRL + Arrow Down navigation is performed by the ItemNavigation module of the List,\n\t\t// here we only implement the text selection of the selected item\n\t\tif (isArrowDownCtrl && !this.open) {\n\t\t\tsetTimeout(() => this._inputDom.setSelectionRange(0, this._inputDom.value.length), 0);\n\t\t}\n\n\t\tif (isLeftCtrl(e) || isRightCtrl(e)) {\n\t\t\tthis._handleArrowCtrl(e);\n\t\t\treturn;\n\t\t}\n\n\t\tif (isInsertShift(e)) {\n\t\t\tthis._handleInsertPaste(e);\n\t\t\treturn;\n\t\t}\n\n\t\tif (isCtrl && e.key.toLowerCase() === \"i\" && this._tokenizer.tokens.length > 0) {\n\t\t\te.preventDefault();\n\t\t\tthis._toggleTokenizerPopover();\n\t\t}\n\n\t\tif (isSpaceShift(e)) {\n\t\t\te.preventDefault();\n\t\t}\n\n\t\tif (\n\t\t\te.key === \"ArrowLeft\"\n\t\t\t|| e.key === \"Show\"\n\t\t\t|| e.key === \"PageUp\"\n\t\t\t|| e.key === \"PageDown\"\n\t\t\t|| e.key === \"Backspace\"\n\t\t\t|| e.key === \"Escape\"\n\t\t\t|| e.key === \"Home\"\n\t\t\t|| e.key === \"End\"\n\t\t\t|| e.key === \"Tab\"\n\t\t\t|| e.key === \"ArrowDown\"\n\t\t\t|| e.key === \"Enter\"\n\t\t) {\n\t\t\tthis[`_handle${e.key}`](e);\n\t\t}\n\n\t\tthis._shouldAutocomplete = !this.noTypeahead && !(isBackSpace(e) || isDelete(e) || isEscape(e) || isEnter(e));\n\t}\n\n\t_selectItems(matchingItems: IMultiComboBoxItem[]) {\n\t\tthis._previouslySelectedItems = this._getSelectedItems();\n\n\t\tmatchingItems.forEach(item => {\n\t\t\titem.selected = true;\n\t\t\tthis.value = \"\";\n\n\t\t\tconst changePrevented = this.fireSelectionChange();\n\n\t\t\tif (changePrevented) {\n\t\t\t\tthis._revertSelection();\n\t\t\t}\n\t\t});\n\t}\n\n\t_handlePaste(e: ClipboardEvent) {\n\t\tif (this.readonly || !e.clipboardData) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst pastedText = (e.clipboardData).getData(\"text/plain\");\n\n\t\tif (!pastedText) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._handleTokenCreationUponPaste(pastedText, e);\n\t}\n\n\t_handleTokenCreationUponPaste(pastedText: string, e: KeyboardEvent | ClipboardEvent) {\n\t\tconst separatedText = pastedText.split(/\\r\\n|\\r|\\n|\\t/g).filter(t => !!t);\n\t\tconst matchingItems = this._getItems().filter(item => !item.isGroupItem && !item.selected && separatedText.includes(item.text!));\n\n\t\tif (matchingItems.length > 1) {\n\t\t\te.preventDefault();\n\t\t\tthis._selectItems(matchingItems);\n\t\t}\n\t}\n\n\tasync _handleInsertPaste(e: KeyboardEvent) {\n\t\tif (this.readonly || isFirefox()) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst pastedText = await navigator.clipboard.readText();\n\n\t\tif (!pastedText) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._handleTokenCreationUponPaste(pastedText, e);\n\t}\n\n\t_handleShow(e: KeyboardEvent) {\n\t\tconst items = this._getItems();\n\t\tconst selectedItem = this._getSelectedItems()[0];\n\t\tconst focusedToken = this._tokenizer.tokens.find(token => token.focused);\n\t\tconst value = this.value;\n\t\tconst matchingItem = this._getItems().find(item => item.text?.localeCompare(value, undefined, { sensitivity: \"base\" }) === 0);\n\n\t\te.preventDefault();\n\n\t\tif (this.readonly) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._isOpenedByKeyboard = true;\n\t\tthis._shouldFilterItems = false;\n\t\tthis._filteredItems = this._getItems();\n\n\t\tthis._toggleTokenizerPopover();\n\n\t\tif (!focusedToken && matchingItem) {\n\t\t\tthis._itemToFocus = matchingItem;\n\t\t\treturn;\n\t\t}\n\n\t\tif (selectedItem && !focusedToken) {\n\t\t\tthis._itemToFocus = selectedItem;\n\t\t} else if (focusedToken && e.target === focusedToken) {\n\t\t\tthis._itemToFocus = items.find(item => item.text === focusedToken.text);\n\t\t} else {\n\t\t\tthis._itemToFocus = items.find(item => isInstanceOfMultiComboBoxItem(item));\n\t\t}\n\t}\n\n\t_handlePageUp(e: KeyboardEvent) {\n\t\te.preventDefault();\n\t}\n\n\t_handlePageDown(e: KeyboardEvent) {\n\t\te.preventDefault();\n\t}\n\n\t_handleBackspace(e: KeyboardEvent) {\n\t\tif ((e.target as HTMLInputElement).value === \"\") {\n\t\t\te.preventDefault();\n\t\t\tthis._tokenizer._focusLastToken();\n\t\t}\n\t}\n\n\t_handleEscape() {\n\t\tconst innerInput = this._innerInput;\n\t\tconst isAutoCompleted = ((innerInput.selectionEnd || 0) - (innerInput.selectionStart || 0)) > 0;\n\n\t\tif (isAutoCompleted) {\n\t\t\tthis.value = this.valueBeforeAutoComplete;\n\t\t}\n\n\t\tif (!this.noValidation || (!this._open && this.noValidation)) {\n\t\t\tthis.value = this._lastValue;\n\t\t}\n\t}\n\n\t_handleHome(e: KeyboardEvent) {\n\t\tconst shouldFocusToken = this._isFocusInside && (e.target as HTMLInputElement).selectionStart === 0 && this._tokenizer.tokens.length > 0;\n\n\t\tif (shouldFocusToken) {\n\t\t\te.preventDefault();\n\t\t\tthis._tokenizer.tokens[0].focus();\n\t\t}\n\t}\n\n\t_handleEnd(e: KeyboardEvent) {\n\t\tconst tokens = this._tokenizer.tokens;\n\t\tconst lastTokenIdx = tokens.length - 1;\n\t\tconst shouldFocusInput = e.target === tokens[lastTokenIdx] && tokens[lastTokenIdx] === this.shadowRoot!.activeElement;\n\n\t\tif (shouldFocusInput) {\n\t\t\te.preventDefault();\n\t\t\tthis._inputDom.focus();\n\t\t}\n\t}\n\n\t_handleTab() {\n\t\tthis._open = false;\n\t}\n\n\t_handleSelectAll() {\n\t\tconst filteredItems = this._filteredItems.filter(item => !item.isGroupItem);\n\t\tconst allItemsSelected = filteredItems.every(item => item.selected);\n\t\tthis._previouslySelectedItems = filteredItems.filter(item => item.selected).map(item => item);\n\n\t\tfilteredItems.forEach(item => {\n\t\t\titem.selected = !allItemsSelected;\n\t\t});\n\n\t\tconst changePrevented = this.fireSelectionChange();\n\n\t\tif (changePrevented) {\n\t\t\tthis._revertSelection();\n\t\t}\n\t}\n\n\tasync _onListHeaderKeydown(e: KeyboardEvent) {\n\t\tconst isArrowDown = isDown(e);\n\t\tconst isArrowUp = isUp(e);\n\t\tconst isSelectAllFocused = (e.target as HTMLElement).classList.contains(\"ui5-mcb-select-all-checkbox\");\n\n\t\tif (isTabNext(e) || isTabPrevious(e)) {\n\t\t\tthis._onItemTab();\n\t\t\treturn;\n\t\t}\n\n\t\te.preventDefault();\n\n\t\tif (isArrowDown || isDownCtrl(e)) {\n\t\t\tif (this.showSelectAll && !isSelectAllFocused) {\n\t\t\t\treturn (this._getResponsivePopover()!.querySelector(\".ui5-mcb-select-all-checkbox\") as CheckBox).focus();\n\t\t\t}\n\n\t\t\tthis._handleArrowDown();\n\t\t}\n\n\t\tif (isArrowUp || isUpCtrl(e)) {\n\t\t\tif (e.target === this.valueStateHeader || !this.valueStateHeader) {\n\t\t\t\tthis._shouldAutocomplete = true;\n\t\t\t\treturn this._inputDom.focus();\n\t\t\t}\n\n\t\t\tif (this.showSelectAll && isSelectAllFocused) {\n\t\t\t\tthis.valueStateHeader?.focus();\n\t\t\t}\n\t\t}\n\t}\n\n\t_handleSelectAllCheckboxClick(e: CustomEvent) {\n\t\tif (!this.filterSelected) {\n\t\t\tthis._handleSelectAll();\n\t\t\tthis.filterSelected = false;\n\t\t} else {\n\t\t\tthis._previouslySelectedItems = this._getSelectedItems();\n\t\t\tthis.selectedItems?.filter(item => !item.isGroupItem).forEach(item => {\n\t\t\t\titem.selected = (e.target as CheckBox).checked;\n\t\t\t});\n\n\t\t\tif (!(e.target as CheckBox).checked) {\n\t\t\t\tthis.filterSelected = false;\n\t\t\t}\n\n\t\t\tconst changePrevented = this.fireSelectionChange();\n\n\t\t\tif (changePrevented) {\n\t\t\t\tthis._revertSelection();\n\t\t\t}\n\t\t}\n\t}\n\n\t_onItemKeydown(e: KeyboardEvent) {\n\t\tconst isFirstItemGroup = this.list?.items[1] === e.target && this.list?.items[0].hasAttribute(\"ui5-li-group\");\n\t\tconst isFirstItem = this.list?.items[0] === e.target || isFirstItemGroup;\n\t\tconst isArrowUp = isUp(e) || isUpCtrl(e);\n\n\t\tif (this.hasValueStateMessage && !this.valueStateHeader) {\n\t\t\tthis._setValueStateHeader();\n\t\t}\n\n\t\tif (isTabNext(e) || isTabPrevious(e)) {\n\t\t\tthis._onItemTab();\n\t\t\treturn;\n\t\t}\n\n\t\tif (isHomeCtrl(e)) {\n\t\t\tthis.list?._itemNavigation._handleHome();\n\t\t\tthis.list?.items[this.list?._itemNavigation._currentIndex].focus();\n\t\t}\n\n\t\tif (isEndCtrl(e)) {\n\t\t\tthis.list?._itemNavigation._handleEnd();\n\t\t\tthis.list?.items[this.list?._itemNavigation._currentIndex].focus();\n\t\t}\n\n\t\te.preventDefault();\n\n\t\tif (isDownShift(e) || isUpShift(e)) {\n\t\t\tthis._handleItemRangeSelection(e);\n\t\t\treturn;\n\t\t}\n\n\t\tif ((isUpCtrl(e)) && !isFirstItem) {\n\t\t\tthis.list?._itemNavigation._handleUp();\n\t\t\tthis.list?.items[this.list?._itemNavigation._currentIndex].focus();\n\t\t}\n\n\t\tif (isDownCtrl(e)) {\n\t\t\tthis.list?._itemNavigation._handleDown();\n\t\t\tthis.list?.items[this.list?._itemNavigation._currentIndex].focus();\n\t\t}\n\n\t\tif (isShow(e)) {\n\t\t\tthis._toggleTokenizerPopover();\n\t\t}\n\n\t\tif (isCtrlA(e)) {\n\t\t\tthis._handleSelectAll();\n\t\t\treturn;\n\t\t}\n\n\t\tif (isFirstItem && isArrowUp) {\n\t\t\tif (this.showSelectAll) {\n\t\t\t\tif (isFirstItemGroup) {\n\t\t\t\t\tthis.list?.items[0].focus();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t(this._getResponsivePopover()!.querySelector(\".ui5-mcb-select-all-checkbox\") as CheckBox).focus();\n\t\t\t} else if (this.valueStateHeader) {\n\t\t\t\tthis.valueStateHeader.focus();\n\t\t\t} else {\n\t\t\t\tthis._inputDom.focus();\n\t\t\t\tthis._shouldAutocomplete = true;\n\t\t\t}\n\t\t}\n\t}\n\n\t_handleArrowCtrl(e: KeyboardEvent) {\n\t\tconst input = this._inputDom;\n\t\tconst isArrowLeft = isLeftCtrl(e);\n\n\t\tif (isArrowLeft && input.selectionStart === 0 && input.selectionEnd === 0) {\n\t\t\te.preventDefault();\n\t\t}\n\n\t\tif (isArrowLeft && ((input.selectionEnd || 0) - (input.selectionStart || 0) > 0)) {\n\t\t\tinput.setSelectionRange(0, 0);\n\t\t}\n\t}\n\n\t_onItemTab() {\n\t\tthis._getResponsivePopover().preventFocusRestore = true;\n\t\tthis._inputDom.focus();\n\t\tthis._open = false;\n\t\tthis._tokenizer.expanded = false;\n\t}\n\n\t_handleArrowNavigation(e: KeyboardEvent, isDownControl: boolean) {\n\t\tconst isArrowDown = isDownControl || isDown(e);\n\t\tconst hasSuggestions = this._getItems().length;\n\n\t\te.preventDefault();\n\n\t\tif (this.hasValueStateMessage && !this.valueStateHeader) {\n\t\t\tthis._setValueStateHeader();\n\t\t}\n\n\t\tif (isArrowDown && this.open) {\n\t\t\tif (this.valueStateHeader) {\n\t\t\t\tthis.value = this.valueBeforeAutoComplete || this.value;\n\t\t\t\tthis.valueStateHeader.focus();\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (this.showSelectAll) {\n\t\t\t\t(this._getResponsivePopover()!.querySelector(\".ui5-mcb-select-all-checkbox\") as CheckBox).focus();\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tif (isArrowDown && hasSuggestions) {\n\t\t\tthis._handleArrowDown();\n\t\t}\n\n\t\tif (!isArrowDown && !this._open && !this.readonly) {\n\t\t\tthis._navigateToPrevItem();\n\t\t}\n\t}\n\n\tasync _handleArrowDown() {\n\t\tconst firstListItem = this.list?.listItems[0];\n\n\t\tif (this.open) {\n\t\t\tfirstListItem && this.list?._itemNavigation.setCurrentItem(firstListItem);\n\t\t\tthis.value = this.valueBeforeAutoComplete || this.value;\n\n\t\t\t// wait item navigation to apply correct tabindex\n\t\t\tawait renderFinished();\n\t\t\tfirstListItem?.focus();\n\t\t} else if (!this.readonly) {\n\t\t\tthis._navigateToNextItem();\n\t\t}\n\t}\n\n\t_handleItemRangeSelection(e: KeyboardEvent) {\n\t\tconst items = this._getItems();\n\t\tconst listItems = this.list?.items;\n\t\tconst currentItemIdx = Number(listItems?.indexOf(e.target as ListItemBase));\n\t\tconst nextItemIdx = currentItemIdx + 1;\n\t\tconst prevItemIdx = currentItemIdx - 1;\n\t\tthis._previouslySelectedItems = this._getSelectedItems();\n\t\tif (isDownShift(e) && items[nextItemIdx]) {\n\t\t\titems[nextItemIdx].selected = items[currentItemIdx].selected;\n\t\t\titems[nextItemIdx].focus();\n\t\t}\n\n\t\tif (isUpShift(e) && items[prevItemIdx]) {\n\t\t\titems[prevItemIdx].selected = items[currentItemIdx].selected;\n\t\t\titems[prevItemIdx].focus();\n\t\t}\n\n\t\tconst changePrevented = this.fireSelectionChange();\n\n\t\tif (changePrevented) {\n\t\t\tthis._revertSelection();\n\t\t}\n\t}\n\n\t_navigateToNextItem() {\n\t\tconst items = this._getItems();\n\t\tconst itemsCount = items.length;\n\t\tconst previousItemIdx = this.currentItemIdx;\n\n\t\tif (previousItemIdx > -1 && items[previousItemIdx].text !== this.value) {\n\t\t\tthis.currentItemIdx = -1;\n\t\t}\n\n\t\tif (previousItemIdx >= itemsCount - 1) {\n\t\t\treturn;\n\t\t}\n\n\t\tlet currentItem = this._getItems()[++this.currentItemIdx];\n\n\t\twhile ((this.currentItemIdx < itemsCount - 1 && currentItem.selected) || currentItem.isGroupItem) {\n\t\t\tcurrentItem = this._getItems()[++this.currentItemIdx];\n\t\t}\n\n\t\tif (currentItem.selected === true || currentItem.isGroupItem) {\n\t\t\tthis.currentItemIdx = previousItemIdx;\n\t\t\treturn;\n\t\t}\n\n\t\tthis.value = currentItem.text!;\n\t\tthis._innerInput.value = currentItem.text!;\n\t\tthis._innerInput.setSelectionRange(0, currentItem.text!.length);\n\t}\n\n\t_navigateToPrevItem() {\n\t\tconst items = this._getItems();\n\t\tlet previousItemIdx = this.currentItemIdx;\n\n\t\tif ((!this.value && previousItemIdx !== -1) || (previousItemIdx !== -1 && this.value && this.value !== items[previousItemIdx].text)) {\n\t\t\tpreviousItemIdx = -1;\n\t\t}\n\n\t\tif (previousItemIdx === -1) {\n\t\t\tthis.currentItemIdx = items.length;\n\t\t}\n\n\t\tif (previousItemIdx === 0) {\n\t\t\tthis.currentItemIdx = 0;\n\t\t\treturn;\n\t\t}\n\n\t\tlet currentItem = this._getItems()[--this.currentItemIdx];\n\n\t\twhile ((currentItem && this.currentItemIdx > 0) && (currentItem.selected || currentItem.isGroupItem)) {\n\t\t\tcurrentItem = this._getItems()[--this.currentItemIdx];\n\t\t}\n\n\t\tif (!currentItem) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (currentItem.selected || currentItem.isGroupItem) {\n\t\t\tthis.currentItemIdx = previousItemIdx;\n\t\t\treturn;\n\t\t}\n\n\t\tthis.value = currentItem.text!;\n\t\tthis._innerInput.value = currentItem.text!;\n\t\tthis._innerInput.setSelectionRange(0, currentItem.text!.length);\n\t}\n\n\t_handleEnter() {\n\t\tconst lowerCaseValue = this.value.toLowerCase();\n\t\tconst matchingItem = this._getItems().find(item => (!item.isGroupItem && item.text!.toLowerCase() === lowerCaseValue));\n\t\tconst oldValueState = this.valueState;\n\t\tconst innerInput = this._innerInput;\n\n\t\tif (matchingItem) {\n\t\t\tif (matchingItem.selected) {\n\t\t\t\tif (this._validationTimeout) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tthis.valueState = ValueState.Negative;\n\t\t\t\tthis._performingSelectionTwice = true;\n\t\t\t\tthis._resetValueState(oldValueState, () => {\n\t\t\t\t\tthis._performingSelectionTwice = false;\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tthis._previouslySelectedItems = this._getSelectedItems();\n\t\t\t\tmatchingItem.selected = true;\n\t\t\t\tthis.value = \"\";\n\t\t\t\tconst changePrevented = this.fireSelectionChange();\n\n\t\t\t\tif (changePrevented) {\n\t\t\t\t\tthis._revertSelection();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tinnerInput.setSelectionRange(matchingItem.text!.length, matchingItem.text!.length);\n\t\t\tthis._open = false;\n\t\t} else if (this._internals?.form) {\n\t\t\tsubmitForm(this);\n\t\t}\n\t}\n\n\t_resetValueState(valueState: `${ValueState}`, callback?: () => void) {\n\t\tthis._validationTimeout = setTimeout(() => {\n\t\t\tthis._effectiveValueState = this.valueState;\n\t\t\tthis._dialogInputValueState = valueState;\n\t\t\tthis.valueState = valueState;\n\t\t\tthis._validationTimeout = null;\n\n\t\t\tcallback && callback();\n\t\t}, 2000);\n\t}\n\n\t_onTokenizerKeydown(e: KeyboardEvent) {\n\t\tif (isRight(e)) {\n\t\t\tconst lastTokenIndex = this._tokenizer.tokens.length - this._tokenizer.overflownTokens.length - 1;\n\n\t\t\tif (e.target === this._tokenizer.tokens[lastTokenIndex]) {\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tthis._inputDom.focus();\n\t\t\t\t}, 0);\n\t\t\t}\n\t\t}\n\n\t\tif (isInsertShift(e)) {\n\t\t\tthis._handleInsertPaste(e);\n\t\t}\n\n\t\tif (isHome(e)) {\n\t\t\tthis._handleHome(e);\n\t\t}\n\n\t\tif (isEnd(e)) {\n\t\t\tthis._handleEnd(e);\n\t\t}\n\n\t\tif (isShow(e) && !this.readonly && !this.disabled) {\n\t\t\tthis._preventTokenizerToggle = true;\n\t\t\tthis._handleShow(e);\n\t\t}\n\t}\n\n\t_filterItems(str: string) {\n\t\tconst itemsToFilter = this._getItems().filter(item => !item.isGroupItem);\n\t\tconst filteredItems = (Filters[this.filter] || Filters.StartsWithPerTerm)(str, itemsToFilter, \"text\");\n\n\t\t// Return the filtered items and their group items\n\t\treturn this._getItems().filter((item, idx, allItems) => MultiComboBox._groupItemFilter(item, ++idx, allItems, filteredItems) || filteredItems.indexOf(item) !== -1);\n\t}\n\n\t/**\n\t * Returns true if the group header should be shown (if there is a filtered suggestion item for this group item)\n\t * @private\n\t */\n\tstatic _groupItemFilter(item: IMultiComboBoxItem, idx: number, allItems: Array<IMultiComboBoxItem>, filteredItems: Array<IMultiComboBoxItem>) {\n\t\tif (item.isGroupItem) {\n\t\t\tlet groupHasFilteredItems;\n\n\t\t\twhile (allItems[idx] && !allItems[idx].isGroupItem && !groupHasFilteredItems) {\n\t\t\t\tgroupHasFilteredItems = filteredItems.indexOf(allItems[idx]) !== -1;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\treturn groupHasFilteredItems;\n\t\t}\n\t}\n\n\t_afterOpen() {\n\t\tconst action = this._open ? \"open\" : \"close\";\n\n\t\tif (!isPhone() && !this._isOpenedByKeyboard) {\n\t\t\tthis._innerInput.focus();\n\t\t} else if (this._isOpenedByKeyboard) {\n\t\t\tthis._itemToFocus?.focus();\n\t\t} else {\n\t\t\tthis._getResponsivePopover().focus();\n\t\t}\n\n\t\tthis.fireEvent(action);\n\n\t\tthis._previouslySelectedItems = this._getSelectedItems();\n\t\tthis._isOpenedByKeyboard = false;\n\t}\n\n\t/**\n\t * Retrieves a flat structure of all MultiComboBox items from the slotted nodes.\n\t *\n\t * @private\n\t */\n\t_getItems(): Array<IMultiComboBoxItem> {\n\t\tconst items: IMultiComboBoxItem[] = [];\n\t\tconst slottedItems = this.getSlottedNodes<IMultiComboBoxItem>(\"items\");\n\n\t\tslottedItems.forEach(item => {\n\t\t\tif (isInstanceOfMultiComboBoxItemGroup(item)) {\n\t\t\t\tconst groupItems = [item, ...item.items].filter(Boolean);\n\t\t\t\titems.push(...groupItems);\n\t\t\t} else {\n\t\t\t\titems.push(item);\n\t\t\t}\n\t\t});\n\n\t\treturn items;\n\t}\n\n\t_getSelectedItems(): Array<MultiComboBoxItem> {\n\t\t// Angular 2 way data binding\n\t\tthis.selectedValues = this._getItems().filter(item => item.selected);\n\t\treturn this.selectedValues as Array<MultiComboBoxItem>;\n\t}\n\n\t_listSelectionChange(e: CustomEvent<ListSelectionChangeEventDetail>) {\n\t\tlet changePrevented;\n\n\t\tif (!isPhone()) {\n\t\t\tthis._previouslySelectedItems = this._getSelectedItems();\n\t\t}\n\n\t\t// sync list items and cb items\n\t\tthis.syncItems((e.target as List).listItems);\n\n\t\t// don't call selection change right after selection as user can cancel it on phone\n\t\tif (!isPhone()) {\n\t\t\tchangePrevented = this.fireSelectionChange();\n\n\t\t\tif (changePrevented) {\n\t\t\t\te.preventDefault();\n\t\t\t\tthis._revertSelection();\n\t\t\t}\n\t\t}\n\n\t\t// casted to KeyboardEvent since isSpace and isSpaceCtrl accepts KeyboardEvent only\n\t\tconst castedEvent = { key: e.detail.key } as KeyboardEvent;\n\n\t\tif (!e.detail.selectedItems.length && this.filterSelected) {\n\t\t\tthis.filterSelected = false;\n\t\t}\n\n\t\tif (!e.detail.selectionComponentPressed && !isSpace(castedEvent) && !isSpaceCtrl(castedEvent)) {\n\t\t\tthis._open = false;\n\t\t\tthis.value = \"\";\n\n\t\t\t// if the item (not checkbox) is clicked, call the selection change\n\t\t\tif (isPhone()) {\n\t\t\t\tchangePrevented = this.fireSelectionChange();\n\t\t\t\tif (changePrevented) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\tthis._revertSelection();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.fireEvent(\"input\");\n\t\t\treturn;\n\t\t}\n\n\t\tthis.value = this.valueBeforeAutoComplete || \"\";\n\t}\n\n\tsyncItems(listItems: Array<ListItemBase>) {\n\t\tlistItems.forEach(item => {\n\t\t\tthis._getItems().forEach(mcbItem => {\n\t\t\t\tif (mcbItem._id === item.getAttribute(\"data-ui5-token-id\")) {\n\t\t\t\t\tmcbItem.selected = item.selected;\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t}\n\n\tfireSelectionChange() {\n\t\tconst changePrevented = !this.fireEvent<MultiComboBoxSelectionChangeEventDetail>(\"selection-change\", {\n\t\t\titems: this._getSelectedItems(),\n\t\t}, true);\n\n\t\t// Angular 2 way data binding\n\t\tthis.fireEvent(\"value-changed\");\n\n\t\treturn changePrevented;\n\t}\n\n\t_getList(): List {\n\t\tthis.list = this.shadowRoot!.querySelector(\".ui5-multi-combobox-all-items-list\")!;\n\t\treturn this.list;\n\t}\n\n\t_click() {\n\t\tif (isPhone() && !this.readonly && !this._showMorePressed && !this._deleting) {\n\t\t\tthis._open = true;\n\t\t}\n\n\t\tthis._showMorePressed = false;\n\t}\n\n\thandleBeforeTokenizerPopoverOpen() {\n\t\tconst tokens = this._tokenizer.tokens;\n\t\tconst hasTruncatedToken = tokens.length === 1 && tokens[0].isTruncatable;\n\t\tconst popover = this._getResponsivePopover();\n\n\t\tif (hasTruncatedToken && popover) {\n\t\t\tpopover.preventFocusRestore = true;\n\t\t\tpopover.open = false;\n\t\t}\n\t}\n\n\t_beforeClose() {\n\t\tthis._open = false;\n\t}\n\n\t_afterClose() {\n\t\tconst action = this._open ? \"open\" : \"close\";\n\n\t\t// close device's keyboard and prevent further typing\n\t\tif (isPhone()) {\n\t\t\tthis._dialogInputValueState = this.valueState;\n\t\t\tthis._tokenizer.expanded = false;\n\t\t}\n\n\t\tthis.fireEvent(action);\n\n\t\tthis._iconPressed = false;\n\t\tthis._preventTokenizerToggle = false;\n\t\tthis.filterSelected = false;\n\t}\n\n\t_beforeOpen() {\n\t\tthis._open = true;\n\t\tthis._itemsBeforeOpen = this._getItems().map(item => {\n\t\t\treturn {\n\t\t\t\tref: item,\n\t\t\t\tselected: item.selected,\n\t\t\t};\n\t\t});\n\n\t\tthis._valueBeforeOpen = this.value;\n\t\tthis._dialogInputValueState = this.valueState;\n\n\t\t// in order to use the autocomplete feature of the input we should not set value in state\n\t\tthis._innerInput.value = this.value;\n\n\t\tif (this.filterSelected) {\n\t\t\tconst selectedItems = this._filteredItems.filter(item => item.selected);\n\t\t\tthis.selectedItems = this._getItems().filter((item, idx, allItems) => MultiComboBox._groupItemFilter(item, ++idx, allItems, selectedItems) || selectedItems.indexOf(item) !== -1);\n\t\t}\n\t}\n\n\t_handleTypeAhead(item: IMultiComboBoxItem, filterValue: string) {\n\t\tif (!item) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst value = item.text;\n\t\tconst innerInput = this._innerInput;\n\n\t\tfilterValue = filterValue || \"\";\n\t\tthis.value = value!;\n\n\t\tinnerInput.value = value!;\n\t\tinnerInput.setSelectionRange(filterValue.length, value!.length);\n\n\t\tthis._shouldAutocomplete = false;\n\t}\n\n\t_getFirstMatchingItem(current: string) {\n\t\tif (!this._getItems().length) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst matchingItems = this._startsWithMatchingItems(current).filter(item => !item.selected);\n\n\t\tif (matchingItems.length) {\n\t\t\treturn matchingItems[0];\n\t\t}\n\t}\n\n\t_startsWithMatchingItems(str: string) {\n\t\treturn Filters.StartsWith(str, this._getItems().filter(item => !item.isGroupItem), \"text\");\n\t}\n\n\t_revertSelection() {\n\t\tthis._filteredItems.forEach(item => {\n\t\t\titem.selected = this._previouslySelectedItems.includes(item);\n\t\t});\n\t}\n\n\tonBeforeRendering() {\n\t\tconst input = this._innerInput;\n\t\tconst autoCompletedChars = input && (input.selectionEnd || 0) - (input.selectionStart || 0);\n\t\tconst value = input && input.value;\n\n\t\tif (this.open) {\n\t\t\tconst list = this._getList();\n\t\t\tconst selectedListItemsCount = list?.querySelectorAll(\"[ui5-li][selected]\")?.length;\n\t\t\tconst items = this._getItems().filter(item => !item.isGroupItem);\n\t\t\tconst listItems = list?.querySelectorAll(\"[ui5-li]\")?.length;\n\t\t\tconst selectedItemsCount = items.filter(item => item.selected).length;\n\t\t\tthis._allSelected = selectedItemsCount === items.length || selectedListItemsCount === listItems;\n\t\t}\n\n\t\tthis._effectiveShowClearIcon = (this.showClearIcon && !!this.value && !this.readonly && !this.disabled);\n\n\t\tthis._inputLastValue = value;\n\n\t\tif (input && !input.value) {\n\t\t\tthis.valueBeforeAutoComplete = \"\";\n\t\t\tthis._filteredItems = this._getItems();\n\t\t}\n\n\t\tthis.tokenizerAvailable = this._getSelectedItems().length > 0;\n\t\tthis.style.setProperty(getScopedVarName(\"--_ui5-input-icons-count\"), `${this.iconsCount}`);\n\n\t\tif (!input || !value) {\n\t\t\treturn;\n\t\t}\n\t\t// Typehead causes issues on Android devices, so we disable it for now\n\t\t// If there is already a selection the autocomplete has already been performed\n\t\tif (this._shouldAutocomplete && !isAndroid()) {\n\t\t\tconst item = this._getFirstMatchingItem(value);\n\n\t\t\t// Keep the original typed in text intact\n\t\t\tthis.valueBeforeAutoComplete = value;\n\t\t\titem && this._handleTypeAhead(item, value);\n\t\t}\n\n\t\tif (this._shouldFilterItems) {\n\t\t\tthis._filteredItems = this._filterItems(this._shouldAutocomplete || !!autoCompletedChars ? this.valueBeforeAutoComplete : value);\n\t\t} else {\n\t\t\tthis._filteredItems = this._getItems();\n\t\t}\n\t}\n\n\tonAfterRendering() {\n\t\tthis._getList();\n\t\tthis.valueStateOpen = this.shouldDisplayOnlyValueStateMessage;\n\t\tthis.storeResponsivePopoverWidth();\n\n\t\tthis._deleting = false;\n\t\t// force resize of the tokenizer on invalidation\n\t\tthis._tokenizer._handleResize();\n\t\tthis._tokenizer.preventInitialFocus = true;\n\n\t\tif (this.open && !isPhone()) {\n\t\t\tthis._tokenizer.expanded = true;\n\t\t}\n\n\t\tif (this._tokenizer.expanded && this.hasAttribute(\"focused\")) {\n\t\t\tthis._tokenizer.scrollToEnd();\n\t\t}\n\n\t\tthis._getItems().forEach(item => {\n\t\t\titem._getRealDomRef = () => this._getResponsivePopover()!.querySelector(`*[data-ui5-stable=${item.stableDomRef}]`)!;\n\t\t});\n\t}\n\n\tget _isPhone() {\n\t\treturn isPhone();\n\t}\n\n\t_onIconMousedown() {\n\t\tthis._iconPressed = true;\n\t}\n\n\t_clear() {\n\t\tthis.value = \"\";\n\t\tthis._inputDom.value = \"\";\n\t\tthis.fireEvent(\"input\");\n\n\t\tif (!this._isPhone) {\n\t\t\tthis.focus();\n\t\t}\n\t}\n\n\t_iconMouseDown() {\n\t\tthis._clearingValue = true;\n\t}\n\n\tstoreResponsivePopoverWidth() {\n\t\tif (this._open && !this._listWidth) {\n\t\t\tthis._listWidth = this.list!.offsetWidth;\n\t\t}\n\t}\n\n\thandleCancel() {\n\t\tthis._itemsBeforeOpen.forEach(item => {\n\t\t\tif (isInstanceOfMultiComboBoxItem(item.ref)) {\n\t\t\t\titem.ref.selected = item.selected;\n\t\t\t}\n\t\t});\n\n\t\tthis._toggleTokenizerPopover();\n\n\t\tthis.value = this._valueBeforeOpen;\n\t}\n\n\thandleOK() {\n\t\tif (isPhone()) {\n\t\t\tconst changePrevented = this.fireSelectionChange();\n\n\t\t\tif (changePrevented) {\n\t\t\t\tthis._revertSelection();\n\t\t\t}\n\t\t}\n\n\t\tif (!this.noValidation) {\n\t\t\tthis.value = \"\";\n\t\t}\n\n\t\tthis._toggleTokenizerPopover();\n\t}\n\n\t_forwardFocusToInner() {\n\t\tthis._innerInput.focus();\n\t}\n\n\tget morePopoverOpener(): HTMLElement {\n\t\tconst tokens = this._tokenizer?.tokens;\n\n\t\tif (tokens?.length === 1 && tokens[0].isTruncatable) {\n\t\t\treturn tokens[0];\n\t\t}\n\n\t\treturn this;\n\t}\n\n\t_getPopover() {\n\t\treturn this.shadowRoot!.querySelector<Popover>(\"[ui5-popover]\")!;\n\t}\n\n\t_getResponsivePopover() {\n\t\treturn this.shadowRoot!.querySelector<ResponsivePopover>(\"[ui5-responsive-popover]\")!;\n\t}\n\n\t_setValueStateHeader() {\n\t\tconst responsivePopover = this._getResponsivePopover();\n\t\tthis.valueStateHeader = responsivePopover.querySelector(\"div.ui5-responsive-popover-header.ui5-valuestatemessage-root\")!;\n\t}\n\n\tget _tokenizer() {\n\t\treturn this.shadowRoot!.querySelector<Tokenizer>(\"[ui5-tokenizer]\")!;\n\t}\n\n\tinputFocusIn(e: FocusEvent) {\n\t\tif (!isPhone()) {\n\t\t\tthis.focused = true;\n\t\t\tthis._tokenizer.expanded = true;\n\t\t\tthis._tokenizer.scrollToEnd();\n\t\t} else {\n\t\t\tthis._innerInput.blur();\n\t\t}\n\n\t\tthis._clearingValue = false;\n\n\t\tif (!isPhone() && (((e.relatedTarget as HTMLElement)?.tagName !== \"UI5-STATIC-AREA-ITEM\") || !e.relatedTarget)) {\n\t\t\tthis._innerInput.setSelectionRange(0, this.value.length);\n\t\t}\n\t\tthis._tokenizer.tokens.forEach(token => {\n\t\t\ttoken.selected = false;\n\t\t});\n\n\t\tthis.valueBeforeAutoComplete = \"\";\n\t}\n\n\tinputFocusOut(e: FocusEvent) {\n\t\tconst responsivePopover = this._getResponsivePopover();\n\t\tconst popover = this._getPopover();\n\t\tconst focusIsGoingInPopover = [responsivePopover, popover].some(popup => popup?.contains(e.relatedTarget as Node));\n\t\tconst focusIsGoingInValueStatePopup = this?.contains(e.relatedTarget as Node);\n\n\t\tif (focusIsGoingInValueStatePopup) {\n\t\t\te.stopImmediatePropagation();\n\t\t\treturn;\n\t\t}\n\n\t\tif ((!this.shadowRoot!.contains(e.relatedTarget as Node) || focusIsGoingInPopover) && !this._deleting && !this._clearingValue) {\n\t\t\tthis.focused = false;\n\n\t\t\tif (this._lastValue !== this.value) {\n\t\t\t\tthis._inputChange();\n\t\t\t}\n\n\t\t\tthis._tokenizer.expanded = this.open;\n\t\t\t// remove the value if user focus out the input and focus is not going in the popover\n\t\t\tif (!isPhone() && !this.noValidation && !focusIsGoingInPopover) {\n\t\t\t\tthis.value = \"\";\n\t\t\t}\n\t\t}\n\t}\n\n\tget editable() {\n\t\treturn !this.readonly;\n\t}\n\n\tget _isFocusInside() {\n\t\treturn !isPhone() && (this.focused || this._tokenizerFocused);\n\t}\n\n\tget selectedItemsListMode() {\n\t\treturn this.readonly ? \"None\" : \"Multiple\";\n\t}\n\n\tget _listItemsType() {\n\t\treturn this.readonly ? \"Inactive\" : \"Active\";\n\t}\n\n\tget hasValueState() {\n\t\tconst isValueStateSet = this.valueState !== ValueState.None;\n\n\t\tif (isPhone()) {\n\t\t\treturn isValueStateSet || (this._dialogInputValueState !== ValueState.None);\n\t\t}\n\n\t\treturn isValueStateSet;\n\t}\n\n\tget hasValueStateMessage() {\n\t\tconst valueState = isPhone() ? this._dialogInputValueState : this.valueState;\n\n\t\treturn this.hasValueState && valueState !== ValueState.Positive;\n\t}\n\n\tget ariaValueStateHiddenText() {\n\t\tif (!this.hasValueState) {\n\t\t\treturn;\n\t\t}\n\n\t\tlet text = \"\";\n\n\t\tif (this.valueState !== ValueState.None) {\n\t\t\ttext = this.valueStateTypeMappings[this.valueState];\n\t\t}\n\n\t\tif (this.shouldDisplayDefaultValueStateMessage) {\n\t\t\treturn `${text} ${this.valueStateDefaultText || \"\"}`;\n\t\t}\n\n\t\treturn `${text}`.concat(\" \", this.valueStateMessage.map(el => el.textContent).join(\" \"));\n\t}\n\n\tget valueStateDefaultText(): string {\n\t\tconst valueState = isPhone() ? this._dialogInputValueState : this.valueState;\n\n\t\tif (valueState === ValueState.None) {\n\t\t\treturn \"\";\n\t\t}\n\n\t\tif (this._performingSelectionTwice) {\n\t\t\treturn MultiComboBox.i18nBundle.getText(VALUE_STATE_ERROR_ALREADY_SELECTED);\n\t\t}\n\n\t\treturn this.valueStateTextMappings[valueState];\n\t}\n\n\tget valueStateTextId() {\n\t\treturn this.hasValueState ? `ui5-multi-combobox-valueStateDesc` : undefined;\n\t}\n\n\tget ariaLabelText() {\n\t\treturn getEffectiveAriaLabelText(this);\n\t}\n\n\t/**\n\t * This method is relevant for sap_horizon theme only\n\t */\n\tget _valueStateMessageIcon() {\n\t\tconst valueState = (isPhone() && this.open) ? this._dialogInputValueState : this.valueState;\n\n\t\tif (valueState === ValueState.None) {\n\t\t\treturn \"\";\n\t\t}\n\n\t\treturn {\n\t\t\t[ValueState.Negative]: \"error\",\n\t\t\t[ValueState.Critical]: \"alert\",\n\t\t\t[ValueState.Positive]: \"sys-enter-2\",\n\t\t\t[ValueState.Information]: \"information\",\n\t\t}[valueState];\n\t}\n\n\tget _tokensCountText() {\n\t\tif (!this._tokenizer) {\n\t\t\treturn;\n\t\t}\n\t\treturn getTokensCountText(this._tokenizer.tokens.length);\n\t}\n\n\tget _tokensCountTextId() {\n\t\treturn \"ui5-multi-combobox-hiddenText-nMore\";\n\t}\n\n\tget _selectedTokensCount() {\n\t\treturn this._tokenizer.tokens.filter(token => token.selected).length;\n\t}\n\n\tget ariaDescribedByText() {\n\t\treturn this.valueStateTextId ? `${this._tokensCountTextId} ${this.valueStateTextId}` : `${this._tokensCountTextId}`;\n\t}\n\n\tget shouldDisplayDefaultValueStateMessage() {\n\t\treturn !this.valueStateMessage.length && this.hasValueStateMessage;\n\t}\n\n\tget shouldDisplayOnlyValueStateMessage() {\n\t\treturn this.focused && !this.readonly && this.hasValueStateMessage && !this._iconPressed && !this.open;\n\t}\n\n\tget valueStateTypeMappings(): ValueStateTypeAnnouncement {\n\t\treturn {\n\t\t\t[ValueState.Positive]: MultiComboBox.i18nBundle.getText(VALUE_STATE_TYPE_SUCCESS),\n\t\t\t[ValueState.Information]: MultiComboBox.i18nBundle.getText(VALUE_STATE_TYPE_INFORMATION),\n\t\t\t[ValueState.Negative]: MultiComboBox.i18nBundle.getText(VALUE_STATE_TYPE_ERROR),\n\t\t\t[ValueState.Critical]: MultiComboBox.i18nBundle.getText(VALUE_STATE_TYPE_WARNING),\n\t\t};\n\t}\n\n\tget valueStateTextMappings(): ValueStateAnnouncement {\n\t\treturn {\n\t\t\t[ValueState.Positive]: MultiComboBox.i18nBundle.getText(VALUE_STATE_SUCCESS),\n\t\t\t[ValueState.Negative]: MultiComboBox.i18nBundle.getText(VALUE_STATE_ERROR),\n\t\t\t[ValueState.Critical]: MultiComboBox.i18nBundle.getText(VALUE_STATE_WARNING),\n\t\t\t[ValueState.Information]: MultiComboBox.i18nBundle.getText(VALUE_STATE_INFORMATION),\n\t\t};\n\t}\n\n\tget _innerInput(): HTMLInputElement {\n\t\tif (isPhone()) {\n\t\t\tif (this._getResponsivePopover()?.open) {\n\t\t\t\treturn this._getResponsivePopover().querySelector(\"[ui5-input]\")!.shadowRoot!.querySelector(\"input\")!;\n\t\t\t}\n\t\t}\n\n\t\treturn this._inputDom;\n\t}\n\n\tget _headerTitleText() {\n\t\treturn MultiComboBox.i18nBundle.getText(INPUT_SUGGESTIONS_TITLE);\n\t}\n\n\tget _iconAccessibleNameText() {\n\t\treturn MultiComboBox.i18nBundle.getText(SELECT_OPTIONS);\n\t}\n\n\tget _showSelectedButtonAccessibleNameText() {\n\t\treturn MultiComboBox.i18nBundle.getText(SHOW_SELECTED_BUTTON);\n\t}\n\n\tget _dialogOkButton() {\n\t\treturn MultiComboBox.i18nBundle.getText(MULTICOMBOBOX_DIALOG_OK_BUTTON);\n\t}\n\n\tget _tokenizerExpanded() {\n\t\tif (isPhone()) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif (this._preventTokenizerToggle) {\n\t\t\treturn this._tokenizer.expanded;\n\t\t}\n\n\t\tconst isCurrentlyExpanded = this._tokenizer?.expanded;\n\t\tconst shouldBeExpanded = this.focused || this._open || isCurrentlyExpanded;\n\n\t\treturn shouldBeExpanded;\n\t}\n\n\tget _valueStatePopoverHorizontalAlign(): `${PopoverHorizontalAlign}` {\n\t\treturn this.effectiveDir !== \"rtl\" ? \"Start\" : \"End\";\n\t}\n\n\tget iconsCount() {\n\t\tconst slottedIconsCount = this.icon?.length || 0;\n\t\tconst clearIconCount = Number(this._effectiveShowClearIcon) ?? 0;\n\t\tconst arrowDownIconsCount = this.readonly ? 0 : 1;\n\n\t\treturn slottedIconsCount + clearIconCount + arrowDownIconsCount;\n\t}\n\n\tget clearIconAccessibleName() {\n\t\treturn MultiComboBox.i18nBundle.getText(INPUT_CLEAR_ICON_ACC_NAME);\n\t}\n\n\tget selectAllCheckboxLabel() {\n\t\tconst items = this._getItems().filter(item => !item.isGroupItem);\n\t\tconst selected = items.filter(item => item.selected);\n\n\t\treturn MultiComboBox.i18nBundle.getText(MCB_SELECTED_ITEMS, selected.length, items.length);\n\t}\n\n\tget _popupLabel() {\n\t\treturn MultiComboBox.i18nBundle.getText(COMBOBOX_AVAILABLE_OPTIONS);\n\t}\n\n\tget responsivePopoverId() {\n\t\treturn `${this._id}-popover`;\n\t}\n\n\tget classes(): ClassMap {\n\t\treturn {\n\t\t\tpopover: {\n\t\t\t\t\"ui5-multi-combobox-all-items-responsive-popover\": true,\n\t\t\t\t\"ui5-suggestions-popover\": true,\n\t\t\t\t\"ui5-popover-with-value-state-header-phone\": this._isPhone && this.hasValueStateMessage,\n\t\t\t\t\"ui5-popover-with-value-state-header\": !this._isPhone && this.hasValueStateMessage,\n\t\t\t},\n\t\t\tpopoverValueState: {\n\t\t\t\t\"ui5-valuestatemessage-root\": true,\n\t\t\t\t\"ui5-valuestatemessage-header\": true,\n\t\t\t\t\"ui5-valuestatemessage--success\": (this.valueState === ValueState.Positive) || (this._dialogInputValueState === ValueState.Positive),\n\t\t\t\t\"ui5-valuestatemessage--error\": (this.valueState === ValueState.Negative) || (this._dialogInputValueState === ValueState.Negative),\n\t\t\t\t\"ui5-valuestatemessage--warning\": (this.valueState === ValueState.Critical) || (this._dialogInputValueState === ValueState.Critical),\n\t\t\t\t\"ui5-valuestatemessage--information\": (this.valueState === ValueState.Information) || (this._dialogInputValueState === ValueState.Information),\n\t\t\t},\n\t\t};\n\t}\n\n\tget styles() {\n\t\tconst remSizeIxPx = parseInt(getComputedStyle(document.documentElement).fontSize);\n\t\treturn {\n\t\t\tpopoverValueStateMessage: {\n\t\t\t\t\"width\": `${this._listWidth || 0}px`,\n\t\t\t\t\"display\": this._listWidth === 0 ? \"none\" : \"inline-block\",\n\t\t\t},\n\t\t\tpopoverHeader: {\n\t\t\t\t\"max-width\": isPhone() ? \"100%\" : `${this._inputWidth}px`,\n\t\t\t},\n\t\t\tsuggestionsPopover: {\n\t\t\t\t\"min-width\": `${this._inputWidth}px`,\n\t\t\t\t\"max-width\": (this._inputWidth / remSizeIxPx) > 40 ? `${this._inputWidth}px` : \"40rem\",\n\t\t\t},\n\t\t};\n\t}\n\n\tstatic async onDefine() {\n\t\tMultiComboBox.i18nBundle = await getI18nBundle(\"@ui5/webcomponents\");\n\t}\n}\n\nMultiComboBox.define();\n\nexport default MultiComboBox;\n\nexport type {\n\tIMultiComboBoxItem,\n\tMultiComboBoxSelectionChangeEventDetail,\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}