{"ast":null,"code":"'use client';\n\nimport AvatarSize from '@ui5/webcomponents/dist/types/AvatarSize.js';\nimport { debounce, enrichEventWithDetails, ThemingParameters, useStylesheet, useSyncRef } from '@ui5/webcomponents-react-base';\nimport { clsx } from 'clsx';\nimport { cloneElement, forwardRef, isValidElement, useCallback, useEffect, useMemo, useRef, useState } from 'react';\nimport { ObjectPageMode } from '../../enums/index.js';\nimport { addCustomCSSWithScoping } from '../../internal/addCustomCSSWithScoping.js';\nimport { safeGetChildrenArray } from '../../internal/safeGetChildrenArray.js';\nimport { useObserveHeights } from '../../internal/useObserveHeights.js';\nimport { Tab, TabContainer } from '../../webComponents/index.js';\nimport { ObjectPageAnchorBar } from '../ObjectPageAnchorBar/index.js';\nimport { CollapsedAvatar } from './CollapsedAvatar.js';\nimport { classNames, styleData } from './ObjectPage.module.css.js';\nimport { extractSectionIdFromHtmlId, getSectionById } from './ObjectPageUtils.js';\nimport { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\naddCustomCSSWithScoping('ui5-tabcontainer',\n// todo: the additional text span adds 3px to the container - needs to be investigated why\n`\n  :host([data-component-name=\"ObjectPageTabContainer\"]) [id$=\"additionalText\"] {\n    display: none;\n  }\n  `);\nconst ObjectPageCssVariables = {\n  headerDisplay: '--_ui5wcr_ObjectPage_header_display',\n  titleFontSize: '--_ui5wcr_ObjectPage_title_fontsize'\n};\nconst TAB_CONTAINER_HEADER_HEIGHT = 48;\n/**\n * A component that allows apps to easily display information related to a business object.\n *\n * The `ObjectPage` is composed of a header (title and content) and block content wrapped in sections and subsections that structure the information.\n */\nconst ObjectPage = /*#__PURE__*/forwardRef((props, ref) => {\n  const {\n    titleArea,\n    image,\n    footerArea,\n    mode = ObjectPageMode.Default,\n    imageShapeCircle,\n    className,\n    style,\n    slot,\n    children,\n    selectedSectionId,\n    headerPinned: headerPinnedProp,\n    headerArea,\n    hidePinButton,\n    preserveHeaderStateOnClick,\n    accessibilityAttributes,\n    placeholder,\n    onSelectedSectionChange,\n    onToggleHeaderArea,\n    onPinButtonToggle,\n    onBeforeNavigate,\n    ...rest\n  } = props;\n  useStylesheet(styleData, ObjectPage.displayName);\n  const firstSectionId = safeGetChildrenArray(children)[0]?.props?.id;\n  const [internalSelectedSectionId, setInternalSelectedSectionId] = useState(selectedSectionId ?? firstSectionId);\n  const [selectedSubSectionId, setSelectedSubSectionId] = useState(props.selectedSubSectionId);\n  const [headerPinned, setHeaderPinned] = useState(headerPinnedProp);\n  const isProgrammaticallyScrolled = useRef(false);\n  const prevSelectedSectionId = useRef(undefined);\n  const [componentRef, objectPageRef] = useSyncRef(ref);\n  const topHeaderRef = useRef(null);\n  const scrollEvent = useRef(undefined);\n  const prevTopHeaderHeight = useRef(0);\n  // @ts-expect-error: useSyncRef will create a ref if not present\n  const [componentRefHeaderContent, headerContentRef] = useSyncRef(headerArea?.ref);\n  const anchorBarRef = useRef(null);\n  const objectPageContentRef = useRef(null);\n  const selectionScrollTimeout = useRef(null);\n  const [isAfterScroll, setIsAfterScroll] = useState(false);\n  const isToggledRef = useRef(false);\n  const [headerCollapsedInternal, setHeaderCollapsedInternal] = useState(undefined);\n  const [scrolledHeaderExpanded, setScrolledHeaderExpanded] = useState(false);\n  const scrollTimeout = useRef(0);\n  const [sectionSpacer, setSectionSpacer] = useState(0);\n  const [currentTabModeSection, setCurrentTabModeSection] = useState(null);\n  const sections = mode === ObjectPageMode.IconTabBar ? currentTabModeSection : children;\n  useEffect(() => {\n    const currentSection = mode === ObjectPageMode.IconTabBar ? getSectionById(children, internalSelectedSectionId) : null;\n    setCurrentTabModeSection(currentSection);\n  }, [mode, children, internalSelectedSectionId]);\n  const prevInternalSelectedSectionId = useRef(internalSelectedSectionId);\n  const fireOnSelectedChangedEvent = (targetEvent, index, id, section) => {\n    if (typeof onSelectedSectionChange === 'function' && prevInternalSelectedSectionId.current !== id) {\n      onSelectedSectionChange(enrichEventWithDetails(targetEvent, {\n        selectedSectionIndex: parseInt(index, 10),\n        selectedSectionId: id,\n        section\n      }));\n      prevInternalSelectedSectionId.current = id;\n    }\n  };\n  const debouncedOnSectionChange = useRef(debounce(fireOnSelectedChangedEvent, 500)).current;\n  useEffect(() => {\n    return () => {\n      debouncedOnSectionChange.cancel();\n      clearTimeout(selectionScrollTimeout.current);\n    };\n  }, []);\n\n  // observe heights of header parts\n  const {\n    topHeaderHeight,\n    headerContentHeight,\n    anchorBarHeight,\n    totalHeaderHeight,\n    headerCollapsed\n  } = useObserveHeights(objectPageRef, topHeaderRef, headerContentRef, anchorBarRef, [headerCollapsedInternal, setHeaderCollapsedInternal], {\n    noHeader: !titleArea && !headerArea,\n    fixedHeader: headerPinned,\n    scrollTimeout\n  });\n  useEffect(() => {\n    if (typeof onToggleHeaderArea === 'function' && isToggledRef.current) {\n      onToggleHeaderArea(headerCollapsed !== true);\n    }\n  }, [headerCollapsed]);\n  useEffect(() => {\n    const objectPageNode = objectPageRef.current;\n    if (objectPageNode) {\n      Object.assign(objectPageNode, {\n        toggleHeaderArea(snapped) {\n          if (typeof snapped === 'boolean') {\n            onToggleHeaderContentVisibility({\n              detail: {\n                visible: !snapped\n              }\n            });\n          } else {\n            onToggleHeaderContentVisibility({\n              detail: {\n                visible: !!headerCollapsed\n              }\n            });\n          }\n        }\n      });\n    }\n  }, [headerCollapsed]);\n  const avatar = useMemo(() => {\n    if (!image) {\n      return null;\n    }\n    if (typeof image === 'string') {\n      return /*#__PURE__*/_jsx(\"span\", {\n        className: classNames.headerImage,\n        style: {\n          borderRadius: imageShapeCircle ? '50%' : 0,\n          overflow: 'hidden'\n        },\n        children: /*#__PURE__*/_jsx(\"img\", {\n          src: image,\n          className: classNames.image,\n          alt: \"Company Logo\"\n        })\n      });\n    } else {\n      return /*#__PURE__*/cloneElement(image, {\n        size: AvatarSize.L,\n        className: clsx(classNames.headerImage, image.props?.className)\n      });\n    }\n  }, [image, classNames.headerImage, classNames.image, imageShapeCircle]);\n  const scrollToSectionById = function (id) {\n    let isSubSection = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n    const section = objectPageRef.current?.querySelector(`#${isSubSection ? 'ObjectPageSubSection' : 'ObjectPageSection'}-${CSS.escape(id)}`);\n    scrollTimeout.current = performance.now() + 500;\n    if (section) {\n      const safeTopHeaderHeight = topHeaderHeight || prevTopHeaderHeight.current;\n      section.style.scrollMarginBlockStart = safeTopHeaderHeight + anchorBarHeight + TAB_CONTAINER_HEADER_HEIGHT + (headerPinned ? headerContentHeight : 0) + 'px';\n      section.focus();\n      section.scrollIntoView({\n        behavior: 'smooth'\n      });\n      section.style.scrollMarginBlockStart = '0px';\n    }\n  };\n  const scrollToSection = sectionId => {\n    if (!sectionId) {\n      return;\n    }\n    if (firstSectionId === sectionId) {\n      objectPageRef.current?.scrollTo({\n        top: 0,\n        behavior: 'smooth'\n      });\n    } else {\n      scrollToSectionById(sectionId);\n    }\n    isProgrammaticallyScrolled.current = false;\n  };\n  const programmaticallySetSection = () => {\n    const currentId = selectedSectionId ?? firstSectionId;\n    if (currentId !== prevSelectedSectionId.current) {\n      debouncedOnSectionChange.cancel();\n      isProgrammaticallyScrolled.current = true;\n      setInternalSelectedSectionId(currentId);\n      prevSelectedSectionId.current = currentId;\n      const sectionNodes = objectPageRef.current?.querySelectorAll('section[data-component-name=\"ObjectPageSection\"]');\n      const currentIndex = safeGetChildrenArray(children).findIndex(objectPageSection => {\n        return /*#__PURE__*/isValidElement(objectPageSection) && objectPageSection.props?.id === currentId;\n      });\n      fireOnSelectedChangedEvent({}, currentIndex, currentId, sectionNodes[0]);\n    }\n  };\n\n  // change selected section when prop is changed (external change)\n  const [timeStamp, setTimeStamp] = useState(0);\n  const requestAnimationFrameRef = useRef(undefined);\n  useEffect(() => {\n    if (selectedSectionId) {\n      if (mode === ObjectPageMode.Default) {\n        // wait for DOM draw, otherwise initial scroll won't work as intended\n        if (timeStamp < 750 && timeStamp !== undefined) {\n          requestAnimationFrameRef.current = requestAnimationFrame(internalTimestamp => {\n            setTimeStamp(internalTimestamp);\n          });\n        } else {\n          setTimeStamp(undefined);\n          programmaticallySetSection();\n        }\n      } else {\n        programmaticallySetSection();\n      }\n    }\n    return () => {\n      cancelAnimationFrame(requestAnimationFrameRef.current);\n    };\n  }, [timeStamp, selectedSectionId, firstSectionId, debouncedOnSectionChange]);\n\n  // section was selected by clicking on the tab bar buttons\n  const handleOnSectionSelected = (targetEvent, newSelectionSectionId, index, section) => {\n    isProgrammaticallyScrolled.current = true;\n    debouncedOnSectionChange.cancel();\n    setInternalSelectedSectionId(prevSelectedSection => {\n      if (prevSelectedSection === newSelectionSectionId) {\n        scrollToSection(newSelectionSectionId);\n      }\n      return newSelectionSectionId;\n    });\n    scrollEvent.current = targetEvent;\n    fireOnSelectedChangedEvent(targetEvent, index, newSelectionSectionId, section);\n  };\n\n  // do internal scrolling\n  useEffect(() => {\n    if (mode === ObjectPageMode.Default && isProgrammaticallyScrolled.current === true && !selectedSubSectionId) {\n      scrollToSection(internalSelectedSectionId);\n    }\n  }, [internalSelectedSectionId, mode, isProgrammaticallyScrolled, scrollToSection, selectedSubSectionId]);\n\n  // Scrolling for Sub Section Selection\n  useEffect(() => {\n    if (selectedSubSectionId && isProgrammaticallyScrolled.current === true && sectionSpacer) {\n      scrollToSectionById(selectedSubSectionId, true);\n      isProgrammaticallyScrolled.current = false;\n    }\n  }, [selectedSubSectionId, isProgrammaticallyScrolled.current, sectionSpacer]);\n  useEffect(() => {\n    if (headerPinnedProp !== undefined) {\n      setHeaderPinned(headerPinnedProp);\n    }\n    if (headerPinnedProp) {\n      onToggleHeaderContentVisibility({\n        detail: {\n          visible: true\n        }\n      });\n    }\n  }, [headerPinnedProp]);\n  const prevHeaderPinned = useRef(headerPinned);\n  useEffect(() => {\n    if (prevHeaderPinned.current && !headerPinned && objectPageRef.current.scrollTop > topHeaderHeight) {\n      onToggleHeaderContentVisibility({\n        detail: {\n          visible: false\n        }\n      });\n      prevHeaderPinned.current = false;\n    }\n    if (!prevHeaderPinned.current && headerPinned) {\n      prevHeaderPinned.current = true;\n    }\n  }, [headerPinned, topHeaderHeight]);\n  useEffect(() => {\n    setSelectedSubSectionId(props.selectedSubSectionId);\n    if (props.selectedSubSectionId) {\n      isProgrammaticallyScrolled.current = true;\n      if (mode === ObjectPageMode.IconTabBar) {\n        let sectionId;\n        safeGetChildrenArray(children).forEach(section => {\n          if (/*#__PURE__*/isValidElement(section) && section.props && section.props.children) {\n            safeGetChildrenArray(section.props.children).forEach(subSection => {\n              if (/*#__PURE__*/isValidElement(subSection) && subSection.props && subSection.props.id === props.selectedSubSectionId) {\n                sectionId = section.props?.id;\n              }\n            });\n          }\n        });\n        if (sectionId) {\n          setInternalSelectedSectionId(sectionId);\n        }\n      }\n    }\n  }, [props.selectedSubSectionId, children, mode]);\n  const tabContainerContainerRef = useRef(null);\n  useEffect(() => {\n    const objectPage = objectPageRef.current;\n    const sectionNodes = objectPage.querySelectorAll('[id^=\"ObjectPageSection\"]');\n    const lastSectionNode = sectionNodes[sectionNodes.length - 1];\n    const tabContainerContainer = tabContainerContainerRef.current;\n    const observer = new ResizeObserver(_ref => {\n      let [sectionElement] = _ref;\n      const subSections = lastSectionNode.querySelectorAll('[id^=\"ObjectPageSubSection\"]');\n      const lastSubSection = subSections[subSections.length - 1];\n      const lastSubSectionOrSection = lastSubSection ?? sectionElement.target;\n      if (currentTabModeSection && !lastSubSection || sectionNodes.length === 1 && !lastSubSection) {\n        setSectionSpacer(0);\n      } else if (!!tabContainerContainer) {\n        setSectionSpacer(objectPage.getBoundingClientRect().bottom - tabContainerContainer.getBoundingClientRect().bottom - lastSubSectionOrSection.getBoundingClientRect().height - TAB_CONTAINER_HEADER_HEIGHT);\n      }\n    });\n    if (objectPage && lastSectionNode) {\n      observer.observe(lastSectionNode, {\n        box: 'border-box'\n      });\n    }\n    return () => {\n      observer.disconnect();\n    };\n  }, [headerCollapsed, topHeaderHeight, headerContentHeight, currentTabModeSection, children]);\n  const onToggleHeaderContentVisibility = useCallback(e => {\n    isToggledRef.current = true;\n    scrollTimeout.current = performance.now() + 500;\n    if (!e.detail.visible) {\n      setHeaderCollapsedInternal(true);\n      objectPageRef.current?.classList.add(classNames.headerCollapsed);\n    } else {\n      setHeaderCollapsedInternal(false);\n      setScrolledHeaderExpanded(true);\n      objectPageRef.current?.classList.remove(classNames.headerCollapsed);\n    }\n  }, []);\n  const handleOnSubSectionSelected = useCallback(e => {\n    isProgrammaticallyScrolled.current = true;\n    if (mode === ObjectPageMode.IconTabBar) {\n      const sectionId = e.detail.sectionId;\n      setInternalSelectedSectionId(sectionId);\n      const sectionNodes = objectPageRef.current?.querySelectorAll('section[data-component-name=\"ObjectPageSection\"]');\n      const currentIndex = safeGetChildrenArray(children).findIndex(objectPageSection => {\n        return /*#__PURE__*/isValidElement(objectPageSection) && objectPageSection.props?.id === sectionId;\n      });\n      debouncedOnSectionChange(e, currentIndex, sectionId, sectionNodes[currentIndex]);\n    }\n    const subSectionId = e.detail.subSectionId;\n    scrollTimeout.current = performance.now() + 200;\n    setSelectedSubSectionId(subSectionId);\n  }, [mode, setInternalSelectedSectionId, setSelectedSubSectionId, isProgrammaticallyScrolled, children]);\n  const objectPageClasses = clsx(classNames.objectPage, className, mode === ObjectPageMode.IconTabBar && classNames.iconTabBarMode);\n  const {\n    onScroll: _0,\n    selectedSubSectionId: _1,\n    ...propsWithoutOmitted\n  } = rest;\n  useEffect(() => {\n    const sectionNodes = objectPageRef.current?.querySelectorAll('section[data-component-name=\"ObjectPageSection\"]');\n    const objectPageHeight = objectPageRef.current?.clientHeight ?? 1000;\n    const marginBottom = objectPageHeight - totalHeaderHeight - /*TabContainer*/TAB_CONTAINER_HEADER_HEIGHT;\n    const rootMargin = `-${totalHeaderHeight}px 0px -${marginBottom < 0 ? 0 : marginBottom}px 0px`;\n    const observer = new IntersectionObserver(_ref2 => {\n      let [section] = _ref2;\n      if (section.isIntersecting && isProgrammaticallyScrolled.current === false) {\n        if (objectPageRef.current.getBoundingClientRect().top + totalHeaderHeight + TAB_CONTAINER_HEADER_HEIGHT <= section.target.getBoundingClientRect().bottom) {\n          const currentId = extractSectionIdFromHtmlId(section.target.id);\n          setInternalSelectedSectionId(currentId);\n          const currentIndex = safeGetChildrenArray(children).findIndex(objectPageSection => {\n            return /*#__PURE__*/isValidElement(objectPageSection) && objectPageSection.props?.id === currentId;\n          });\n          debouncedOnSectionChange(scrollEvent.current, currentIndex, currentId, section.target);\n        }\n      }\n    }, {\n      root: objectPageRef.current,\n      rootMargin,\n      threshold: [0]\n    });\n    sectionNodes.forEach(el => {\n      observer.observe(el);\n    });\n    return () => {\n      observer.disconnect();\n    };\n  }, [children, totalHeaderHeight, setInternalSelectedSectionId, isProgrammaticallyScrolled]);\n\n  // Fallback when scrolling faster than the IntersectionObserver can observe (in most cases faster than 60fps)\n  useEffect(() => {\n    const sectionNodes = objectPageRef.current?.querySelectorAll('section[data-component-name=\"ObjectPageSection\"]');\n    if (isAfterScroll) {\n      let currentSection = sectionNodes[sectionNodes.length - 1];\n      let currentIndex;\n      for (let i = 0; i <= sectionNodes.length - 1; i++) {\n        const sectionNode = sectionNodes[i];\n        if (objectPageRef.current.getBoundingClientRect().top + totalHeaderHeight + TAB_CONTAINER_HEADER_HEIGHT <= sectionNode.getBoundingClientRect().bottom) {\n          currentSection = sectionNode;\n          currentIndex = i;\n          break;\n        }\n      }\n      const currentSectionId = extractSectionIdFromHtmlId(currentSection?.id);\n      if (currentSectionId !== internalSelectedSectionId) {\n        setInternalSelectedSectionId(currentSectionId);\n        debouncedOnSectionChange(scrollEvent.current, currentIndex ?? sectionNodes.length - 1, currentSectionId, currentSection);\n      }\n      setIsAfterScroll(false);\n    }\n  }, [isAfterScroll]);\n  const onTitleClick = e => {\n    e.stopPropagation();\n    if (!preserveHeaderStateOnClick) {\n      onToggleHeaderContentVisibility(enrichEventWithDetails(e, {\n        visible: headerCollapsed\n      }));\n    }\n  };\n  const snappedHeaderInObjPage = titleArea && titleArea.props.snappedContent && headerCollapsed === true && !!image;\n  const isInitial = useRef(true);\n  useEffect(() => {\n    if (!isInitial.current) {\n      scrollTimeout.current = performance.now() + 200;\n    } else {\n      isInitial.current = false;\n    }\n  }, [snappedHeaderInObjPage]);\n  const renderHeaderContentSection = () => {\n    if (headerArea?.props) {\n      return /*#__PURE__*/cloneElement(headerArea, {\n        ...headerArea.props,\n        topHeaderHeight,\n        style: headerCollapsed === true ? {\n          position: 'absolute',\n          visibility: 'hidden',\n          flexShrink: 0\n        } : {\n          ...headerArea.props.style,\n          flexShrink: 0\n        },\n        headerPinned: headerPinned || scrolledHeaderExpanded,\n        //@ts-expect-error: todo remove me when forwardref has been replaced\n        ref: componentRefHeaderContent,\n        children: /*#__PURE__*/_jsxs(\"div\", {\n          className: classNames.headerContainer,\n          \"data-component-name\": \"ObjectPageHeaderContainer\",\n          children: [avatar, headerArea.props.children && /*#__PURE__*/_jsx(\"div\", {\n            \"data-component-name\": \"ObjectPageHeaderContent\",\n            children: headerArea.props.children\n          })]\n        })\n      });\n    }\n  };\n  const onTabItemSelect = event => {\n    if (typeof onBeforeNavigate === 'function') {\n      const selectedTabDataset = event.detail.tab.dataset;\n      const sectionIndex = parseInt(selectedTabDataset.index, 10);\n      const sectionId = selectedTabDataset.parentId ?? selectedTabDataset.sectionId;\n      const subSectionId = selectedTabDataset.hasOwnProperty('isSubTab') ? selectedTabDataset.sectionId : undefined;\n      onBeforeNavigate(enrichEventWithDetails(event, {\n        sectionIndex,\n        sectionId,\n        subSectionId\n      }));\n      if (event.defaultPrevented) {\n        return;\n      }\n    }\n    event.preventDefault();\n    const {\n      sectionId,\n      index,\n      isSubTab,\n      parentId\n    } = event.detail.tab.dataset;\n    if (isSubTab !== undefined) {\n      handleOnSubSectionSelected(enrichEventWithDetails(event, {\n        sectionId: parentId,\n        subSectionId: sectionId\n      }));\n    } else {\n      const section = safeGetChildrenArray(children).find(el => {\n        return el.props.id == sectionId;\n      });\n      handleOnSectionSelected(event, section?.props?.id, index, section);\n    }\n  };\n  const prevScrollTop = useRef(undefined);\n  const onObjectPageScroll = useCallback(e => {\n    if (!isToggledRef.current) {\n      isToggledRef.current = true;\n    }\n    if (scrollTimeout.current >= performance.now()) {\n      return;\n    }\n    scrollEvent.current = e;\n    if (typeof props.onScroll === 'function') {\n      props.onScroll(e);\n    }\n    if (selectedSubSectionId) {\n      setSelectedSubSectionId(undefined);\n    }\n    if (selectionScrollTimeout.current) {\n      clearTimeout(selectionScrollTimeout.current);\n    }\n    selectionScrollTimeout.current = setTimeout(() => {\n      setIsAfterScroll(true);\n    }, 100);\n    if (!headerPinned || e.target.scrollTop === 0) {\n      objectPageRef.current?.classList.remove(classNames.headerCollapsed);\n    }\n    if (scrolledHeaderExpanded && e.target.scrollTop !== prevScrollTop.current) {\n      if (e.target.scrollHeight - e.target.scrollTop === e.target.clientHeight) {\n        return;\n      }\n      prevScrollTop.current = e.target.scrollTop;\n      if (!headerPinned) {\n        setHeaderCollapsedInternal(true);\n      }\n      setScrolledHeaderExpanded(false);\n    }\n  }, [topHeaderHeight, headerPinned, props.onScroll, scrolledHeaderExpanded, selectedSubSectionId]);\n  const onHoverToggleButton = useCallback(e => {\n    if (e?.type === 'mouseover') {\n      topHeaderRef.current?.classList.add(classNames.headerHoverStyles);\n    } else {\n      topHeaderRef.current?.classList.remove(classNames.headerHoverStyles);\n    }\n  }, [classNames.headerHoverStyles]);\n  const objectPageStyles = {\n    ...style\n  };\n  if (headerCollapsed === true && headerArea) {\n    objectPageStyles[ObjectPageCssVariables.titleFontSize] = ThemingParameters.sapObjectHeader_Title_SnappedFontSize;\n  }\n  return /*#__PURE__*/_jsxs(\"div\", {\n    \"data-component-name\": \"ObjectPage\",\n    slot: slot,\n    className: objectPageClasses,\n    style: objectPageStyles,\n    ref: componentRef,\n    onScroll: onObjectPageScroll,\n    ...propsWithoutOmitted,\n    children: [/*#__PURE__*/_jsxs(\"header\", {\n      onMouseOver: onHoverToggleButton,\n      onMouseLeave: onHoverToggleButton,\n      \"data-component-name\": \"ObjectPageTopHeader\",\n      ref: topHeaderRef,\n      role: accessibilityAttributes?.objectPageTopHeader?.role,\n      \"data-not-clickable\": !!preserveHeaderStateOnClick,\n      \"aria-roledescription\": accessibilityAttributes?.objectPageTopHeader?.ariaRoledescription ?? 'Object Page header',\n      className: classNames.header,\n      style: {\n        gridAutoColumns: `min-content ${titleArea && image && headerCollapsed === true ? `calc(100% - 3rem - 1rem)` : '100%'}`\n      },\n      children: [/*#__PURE__*/_jsx(\"span\", {\n        className: classNames.clickArea,\n        onClick: onTitleClick,\n        \"data-component-name\": \"ObjectPageTitleAreaClickElement\"\n      }), titleArea && image && headerCollapsed === true && /*#__PURE__*/_jsx(CollapsedAvatar, {\n        image: image,\n        imageShapeCircle: imageShapeCircle\n      }), titleArea && /*#__PURE__*/cloneElement(titleArea, {\n        className: clsx(titleArea?.props?.className),\n        onToggleHeaderContentVisibility: onTitleClick,\n        'data-not-clickable': !!preserveHeaderStateOnClick,\n        'data-header-content-visible': headerArea && headerCollapsed !== true,\n        'data-is-snapped-rendered-outside': snappedHeaderInObjPage\n      }), snappedHeaderInObjPage && /*#__PURE__*/_jsx(\"div\", {\n        className: classNames.snappedContent,\n        \"data-component-name\": \"ATwithImageSnappedContentContainer\",\n        children: titleArea.props.snappedContent\n      })]\n    }), renderHeaderContentSection(), headerArea && titleArea && /*#__PURE__*/_jsx(\"div\", {\n      \"data-component-name\": \"ObjectPageAnchorBar\",\n      ref: anchorBarRef,\n      className: classNames.anchorBar,\n      style: {\n        top: scrolledHeaderExpanded || headerPinned ? `${topHeaderHeight + (headerCollapsed === true ? 0 : headerContentHeight)}px` : `${topHeaderHeight + 5}px`\n      },\n      children: /*#__PURE__*/_jsx(ObjectPageAnchorBar, {\n        headerContentVisible: headerArea && headerCollapsed !== true,\n        hidePinButton: !!hidePinButton,\n        headerPinned: headerPinned,\n        accessibilityAttributes: accessibilityAttributes,\n        onToggleHeaderContentVisibility: onToggleHeaderContentVisibility,\n        setHeaderPinned: setHeaderPinned,\n        onHoverToggleButton: onHoverToggleButton,\n        onPinButtonToggle: onPinButtonToggle\n      })\n    }), !placeholder && /*#__PURE__*/_jsx(\"div\", {\n      ref: tabContainerContainerRef,\n      className: classNames.tabContainer,\n      \"data-component-name\": \"ObjectPageTabContainer\",\n      style: {\n        top: headerPinned || scrolledHeaderExpanded ? `${topHeaderHeight + (headerCollapsed === true ? 0 : headerContentHeight)}px` : `${topHeaderHeight}px`\n      },\n      children: /*#__PURE__*/_jsx(TabContainer, {\n        collapsed: true,\n        onTabSelect: onTabItemSelect,\n        \"data-component-name\": \"ObjectPageTabContainer\",\n        className: classNames.tabContainerComponent,\n        children: safeGetChildrenArray(children).map((section, index) => {\n          if (! /*#__PURE__*/isValidElement(section) || !section.props) return null;\n          const subTabs = safeGetChildrenArray(section.props.children).filter(subSection =>\n          // @ts-expect-error: if the `ObjectPageSubSection` component is passed as children, the `displayName` is available. Otherwise, the default children should be rendered w/o additional logic.\n          /*#__PURE__*/\n          isValidElement(subSection) && subSection?.type?.displayName === 'ObjectPageSubSection');\n          return /*#__PURE__*/_jsx(Tab, {\n            \"data-index\": index,\n            \"data-section-id\": section.props.id,\n            text: section.props.titleText,\n            selected: internalSelectedSectionId === section.props?.id || undefined,\n            items: subTabs.map(item => {\n              if (! /*#__PURE__*/isValidElement(item)) {\n                return null;\n              }\n              return /*#__PURE__*/_jsx(Tab, {\n                \"data-parent-id\": section.props.id,\n                \"data-is-sub-tab\": true,\n                \"data-section-id\": item.props.id,\n                text: item.props.titleText,\n                selected: item.props.id === selectedSubSectionId || undefined,\n                \"data-index\": index,\n                children: /*#__PURE__*/_jsx(\"span\", {\n                  style: {\n                    display: 'none'\n                  }\n                })\n              }, item.props.id);\n            }),\n            children: /*#__PURE__*/_jsx(\"span\", {\n              style: {\n                display: 'none'\n              }\n            })\n          }, `Anchor-${section.props?.id}`);\n        })\n      })\n    }), /*#__PURE__*/_jsxs(\"div\", {\n      \"data-component-name\": \"ObjectPageContent\",\n      className: classNames.content,\n      ref: objectPageContentRef,\n      children: [/*#__PURE__*/_jsx(\"div\", {\n        style: {\n          height: headerCollapsed ? `${headerContentHeight}px` : 0\n        },\n        \"aria-hidden\": true\n      }), placeholder ? placeholder : sections, /*#__PURE__*/_jsx(\"div\", {\n        style: {\n          height: `${sectionSpacer}px`\n        },\n        \"aria-hidden\": true\n      })]\n    }), footerArea && mode === ObjectPageMode.IconTabBar && !sectionSpacer && /*#__PURE__*/_jsx(\"div\", {\n      className: classNames.footerSpacer,\n      \"data-component-name\": \"ObjectPageFooterSpacer\",\n      \"aria-hidden\": true\n    }), footerArea && /*#__PURE__*/_jsx(\"footer\", {\n      className: classNames.footer,\n      \"data-component-name\": \"ObjectPageFooter\",\n      children: footerArea\n    })]\n  });\n});\nObjectPage.displayName = 'ObjectPage';\nexport { ObjectPage };","map":{"version":3,"names":["AvatarSize","debounce","enrichEventWithDetails","ThemingParameters","useStylesheet","useSyncRef","clsx","cloneElement","forwardRef","isValidElement","useCallback","useEffect","useMemo","useRef","useState","ObjectPageMode","addCustomCSSWithScoping","safeGetChildrenArray","useObserveHeights","Tab","TabContainer","ObjectPageAnchorBar","CollapsedAvatar","classNames","styleData","extractSectionIdFromHtmlId","getSectionById","jsx","_jsx","jsxs","_jsxs","ObjectPageCssVariables","headerDisplay","titleFontSize","TAB_CONTAINER_HEADER_HEIGHT","ObjectPage","props","ref","titleArea","image","footerArea","mode","Default","imageShapeCircle","className","style","slot","children","selectedSectionId","headerPinned","headerPinnedProp","headerArea","hidePinButton","preserveHeaderStateOnClick","accessibilityAttributes","placeholder","onSelectedSectionChange","onToggleHeaderArea","onPinButtonToggle","onBeforeNavigate","rest","displayName","firstSectionId","id","internalSelectedSectionId","setInternalSelectedSectionId","selectedSubSectionId","setSelectedSubSectionId","setHeaderPinned","isProgrammaticallyScrolled","prevSelectedSectionId","undefined","componentRef","objectPageRef","topHeaderRef","scrollEvent","prevTopHeaderHeight","componentRefHeaderContent","headerContentRef","anchorBarRef","objectPageContentRef","selectionScrollTimeout","isAfterScroll","setIsAfterScroll","isToggledRef","headerCollapsedInternal","setHeaderCollapsedInternal","scrolledHeaderExpanded","setScrolledHeaderExpanded","scrollTimeout","sectionSpacer","setSectionSpacer","currentTabModeSection","setCurrentTabModeSection","sections","IconTabBar","currentSection","prevInternalSelectedSectionId","fireOnSelectedChangedEvent","targetEvent","index","section","current","selectedSectionIndex","parseInt","debouncedOnSectionChange","cancel","clearTimeout","topHeaderHeight","headerContentHeight","anchorBarHeight","totalHeaderHeight","headerCollapsed","noHeader","fixedHeader","objectPageNode","Object","assign","toggleHeaderArea","snapped","onToggleHeaderContentVisibility","detail","visible","avatar","headerImage","borderRadius","overflow","src","alt","size","L","scrollToSectionById","isSubSection","arguments","length","querySelector","CSS","escape","performance","now","safeTopHeaderHeight","scrollMarginBlockStart","focus","scrollIntoView","behavior","scrollToSection","sectionId","scrollTo","top","programmaticallySetSection","currentId","sectionNodes","querySelectorAll","currentIndex","findIndex","objectPageSection","timeStamp","setTimeStamp","requestAnimationFrameRef","requestAnimationFrame","internalTimestamp","cancelAnimationFrame","handleOnSectionSelected","newSelectionSectionId","prevSelectedSection","prevHeaderPinned","scrollTop","forEach","subSection","tabContainerContainerRef","objectPage","lastSectionNode","tabContainerContainer","observer","ResizeObserver","_ref","sectionElement","subSections","lastSubSection","lastSubSectionOrSection","target","getBoundingClientRect","bottom","height","observe","box","disconnect","e","classList","add","remove","handleOnSubSectionSelected","subSectionId","objectPageClasses","iconTabBarMode","onScroll","_0","_1","propsWithoutOmitted","objectPageHeight","clientHeight","marginBottom","rootMargin","IntersectionObserver","_ref2","isIntersecting","root","threshold","el","i","sectionNode","currentSectionId","onTitleClick","stopPropagation","snappedHeaderInObjPage","snappedContent","isInitial","renderHeaderContentSection","position","visibility","flexShrink","headerContainer","onTabItemSelect","event","selectedTabDataset","tab","dataset","sectionIndex","parentId","hasOwnProperty","defaultPrevented","preventDefault","isSubTab","find","prevScrollTop","onObjectPageScroll","setTimeout","scrollHeight","onHoverToggleButton","type","headerHoverStyles","objectPageStyles","sapObjectHeader_Title_SnappedFontSize","onMouseOver","onMouseLeave","role","objectPageTopHeader","ariaRoledescription","header","gridAutoColumns","clickArea","onClick","anchorBar","headerContentVisible","tabContainer","collapsed","onTabSelect","tabContainerComponent","map","subTabs","filter","text","titleText","selected","items","item","display","content","footerSpacer","footer"],"sources":["/home/user/projects/reactproj/node_modules/@ui5/webcomponents-react/dist/components/ObjectPage/index.js"],"sourcesContent":["'use client';\n\nimport AvatarSize from '@ui5/webcomponents/dist/types/AvatarSize.js';\nimport { debounce, enrichEventWithDetails, ThemingParameters, useStylesheet, useSyncRef } from '@ui5/webcomponents-react-base';\nimport { clsx } from 'clsx';\nimport { cloneElement, forwardRef, isValidElement, useCallback, useEffect, useMemo, useRef, useState } from 'react';\nimport { ObjectPageMode } from '../../enums/index.js';\nimport { addCustomCSSWithScoping } from '../../internal/addCustomCSSWithScoping.js';\nimport { safeGetChildrenArray } from '../../internal/safeGetChildrenArray.js';\nimport { useObserveHeights } from '../../internal/useObserveHeights.js';\nimport { Tab, TabContainer } from '../../webComponents/index.js';\nimport { ObjectPageAnchorBar } from '../ObjectPageAnchorBar/index.js';\nimport { CollapsedAvatar } from './CollapsedAvatar.js';\nimport { classNames, styleData } from './ObjectPage.module.css.js';\nimport { extractSectionIdFromHtmlId, getSectionById } from './ObjectPageUtils.js';\nimport { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\naddCustomCSSWithScoping('ui5-tabcontainer',\n// todo: the additional text span adds 3px to the container - needs to be investigated why\n`\n  :host([data-component-name=\"ObjectPageTabContainer\"]) [id$=\"additionalText\"] {\n    display: none;\n  }\n  `);\nconst ObjectPageCssVariables = {\n  headerDisplay: '--_ui5wcr_ObjectPage_header_display',\n  titleFontSize: '--_ui5wcr_ObjectPage_title_fontsize'\n};\nconst TAB_CONTAINER_HEADER_HEIGHT = 48;\n/**\n * A component that allows apps to easily display information related to a business object.\n *\n * The `ObjectPage` is composed of a header (title and content) and block content wrapped in sections and subsections that structure the information.\n */\nconst ObjectPage = /*#__PURE__*/forwardRef((props, ref) => {\n  const {\n    titleArea,\n    image,\n    footerArea,\n    mode = ObjectPageMode.Default,\n    imageShapeCircle,\n    className,\n    style,\n    slot,\n    children,\n    selectedSectionId,\n    headerPinned: headerPinnedProp,\n    headerArea,\n    hidePinButton,\n    preserveHeaderStateOnClick,\n    accessibilityAttributes,\n    placeholder,\n    onSelectedSectionChange,\n    onToggleHeaderArea,\n    onPinButtonToggle,\n    onBeforeNavigate,\n    ...rest\n  } = props;\n  useStylesheet(styleData, ObjectPage.displayName);\n  const firstSectionId = safeGetChildrenArray(children)[0]?.props?.id;\n  const [internalSelectedSectionId, setInternalSelectedSectionId] = useState(selectedSectionId ?? firstSectionId);\n  const [selectedSubSectionId, setSelectedSubSectionId] = useState(props.selectedSubSectionId);\n  const [headerPinned, setHeaderPinned] = useState(headerPinnedProp);\n  const isProgrammaticallyScrolled = useRef(false);\n  const prevSelectedSectionId = useRef(undefined);\n  const [componentRef, objectPageRef] = useSyncRef(ref);\n  const topHeaderRef = useRef(null);\n  const scrollEvent = useRef(undefined);\n  const prevTopHeaderHeight = useRef(0);\n  // @ts-expect-error: useSyncRef will create a ref if not present\n  const [componentRefHeaderContent, headerContentRef] = useSyncRef(headerArea?.ref);\n  const anchorBarRef = useRef(null);\n  const objectPageContentRef = useRef(null);\n  const selectionScrollTimeout = useRef(null);\n  const [isAfterScroll, setIsAfterScroll] = useState(false);\n  const isToggledRef = useRef(false);\n  const [headerCollapsedInternal, setHeaderCollapsedInternal] = useState(undefined);\n  const [scrolledHeaderExpanded, setScrolledHeaderExpanded] = useState(false);\n  const scrollTimeout = useRef(0);\n  const [sectionSpacer, setSectionSpacer] = useState(0);\n  const [currentTabModeSection, setCurrentTabModeSection] = useState(null);\n  const sections = mode === ObjectPageMode.IconTabBar ? currentTabModeSection : children;\n  useEffect(() => {\n    const currentSection = mode === ObjectPageMode.IconTabBar ? getSectionById(children, internalSelectedSectionId) : null;\n    setCurrentTabModeSection(currentSection);\n  }, [mode, children, internalSelectedSectionId]);\n  const prevInternalSelectedSectionId = useRef(internalSelectedSectionId);\n  const fireOnSelectedChangedEvent = (targetEvent, index, id, section) => {\n    if (typeof onSelectedSectionChange === 'function' && prevInternalSelectedSectionId.current !== id) {\n      onSelectedSectionChange(enrichEventWithDetails(targetEvent, {\n        selectedSectionIndex: parseInt(index, 10),\n        selectedSectionId: id,\n        section\n      }));\n      prevInternalSelectedSectionId.current = id;\n    }\n  };\n  const debouncedOnSectionChange = useRef(debounce(fireOnSelectedChangedEvent, 500)).current;\n  useEffect(() => {\n    return () => {\n      debouncedOnSectionChange.cancel();\n      clearTimeout(selectionScrollTimeout.current);\n    };\n  }, []);\n\n  // observe heights of header parts\n  const {\n    topHeaderHeight,\n    headerContentHeight,\n    anchorBarHeight,\n    totalHeaderHeight,\n    headerCollapsed\n  } = useObserveHeights(objectPageRef, topHeaderRef, headerContentRef, anchorBarRef, [headerCollapsedInternal, setHeaderCollapsedInternal], {\n    noHeader: !titleArea && !headerArea,\n    fixedHeader: headerPinned,\n    scrollTimeout\n  });\n  useEffect(() => {\n    if (typeof onToggleHeaderArea === 'function' && isToggledRef.current) {\n      onToggleHeaderArea(headerCollapsed !== true);\n    }\n  }, [headerCollapsed]);\n  useEffect(() => {\n    const objectPageNode = objectPageRef.current;\n    if (objectPageNode) {\n      Object.assign(objectPageNode, {\n        toggleHeaderArea(snapped) {\n          if (typeof snapped === 'boolean') {\n            onToggleHeaderContentVisibility({\n              detail: {\n                visible: !snapped\n              }\n            });\n          } else {\n            onToggleHeaderContentVisibility({\n              detail: {\n                visible: !!headerCollapsed\n              }\n            });\n          }\n        }\n      });\n    }\n  }, [headerCollapsed]);\n  const avatar = useMemo(() => {\n    if (!image) {\n      return null;\n    }\n    if (typeof image === 'string') {\n      return /*#__PURE__*/_jsx(\"span\", {\n        className: classNames.headerImage,\n        style: {\n          borderRadius: imageShapeCircle ? '50%' : 0,\n          overflow: 'hidden'\n        },\n        children: /*#__PURE__*/_jsx(\"img\", {\n          src: image,\n          className: classNames.image,\n          alt: \"Company Logo\"\n        })\n      });\n    } else {\n      return /*#__PURE__*/cloneElement(image, {\n        size: AvatarSize.L,\n        className: clsx(classNames.headerImage, image.props?.className)\n      });\n    }\n  }, [image, classNames.headerImage, classNames.image, imageShapeCircle]);\n  const scrollToSectionById = (id, isSubSection = false) => {\n    const section = objectPageRef.current?.querySelector(`#${isSubSection ? 'ObjectPageSubSection' : 'ObjectPageSection'}-${CSS.escape(id)}`);\n    scrollTimeout.current = performance.now() + 500;\n    if (section) {\n      const safeTopHeaderHeight = topHeaderHeight || prevTopHeaderHeight.current;\n      section.style.scrollMarginBlockStart = safeTopHeaderHeight + anchorBarHeight + TAB_CONTAINER_HEADER_HEIGHT + (headerPinned ? headerContentHeight : 0) + 'px';\n      section.focus();\n      section.scrollIntoView({\n        behavior: 'smooth'\n      });\n      section.style.scrollMarginBlockStart = '0px';\n    }\n  };\n  const scrollToSection = sectionId => {\n    if (!sectionId) {\n      return;\n    }\n    if (firstSectionId === sectionId) {\n      objectPageRef.current?.scrollTo({\n        top: 0,\n        behavior: 'smooth'\n      });\n    } else {\n      scrollToSectionById(sectionId);\n    }\n    isProgrammaticallyScrolled.current = false;\n  };\n  const programmaticallySetSection = () => {\n    const currentId = selectedSectionId ?? firstSectionId;\n    if (currentId !== prevSelectedSectionId.current) {\n      debouncedOnSectionChange.cancel();\n      isProgrammaticallyScrolled.current = true;\n      setInternalSelectedSectionId(currentId);\n      prevSelectedSectionId.current = currentId;\n      const sectionNodes = objectPageRef.current?.querySelectorAll('section[data-component-name=\"ObjectPageSection\"]');\n      const currentIndex = safeGetChildrenArray(children).findIndex(objectPageSection => {\n        return /*#__PURE__*/isValidElement(objectPageSection) && objectPageSection.props?.id === currentId;\n      });\n      fireOnSelectedChangedEvent({}, currentIndex, currentId, sectionNodes[0]);\n    }\n  };\n\n  // change selected section when prop is changed (external change)\n  const [timeStamp, setTimeStamp] = useState(0);\n  const requestAnimationFrameRef = useRef(undefined);\n  useEffect(() => {\n    if (selectedSectionId) {\n      if (mode === ObjectPageMode.Default) {\n        // wait for DOM draw, otherwise initial scroll won't work as intended\n        if (timeStamp < 750 && timeStamp !== undefined) {\n          requestAnimationFrameRef.current = requestAnimationFrame(internalTimestamp => {\n            setTimeStamp(internalTimestamp);\n          });\n        } else {\n          setTimeStamp(undefined);\n          programmaticallySetSection();\n        }\n      } else {\n        programmaticallySetSection();\n      }\n    }\n    return () => {\n      cancelAnimationFrame(requestAnimationFrameRef.current);\n    };\n  }, [timeStamp, selectedSectionId, firstSectionId, debouncedOnSectionChange]);\n\n  // section was selected by clicking on the tab bar buttons\n  const handleOnSectionSelected = (targetEvent, newSelectionSectionId, index, section) => {\n    isProgrammaticallyScrolled.current = true;\n    debouncedOnSectionChange.cancel();\n    setInternalSelectedSectionId(prevSelectedSection => {\n      if (prevSelectedSection === newSelectionSectionId) {\n        scrollToSection(newSelectionSectionId);\n      }\n      return newSelectionSectionId;\n    });\n    scrollEvent.current = targetEvent;\n    fireOnSelectedChangedEvent(targetEvent, index, newSelectionSectionId, section);\n  };\n\n  // do internal scrolling\n  useEffect(() => {\n    if (mode === ObjectPageMode.Default && isProgrammaticallyScrolled.current === true && !selectedSubSectionId) {\n      scrollToSection(internalSelectedSectionId);\n    }\n  }, [internalSelectedSectionId, mode, isProgrammaticallyScrolled, scrollToSection, selectedSubSectionId]);\n\n  // Scrolling for Sub Section Selection\n  useEffect(() => {\n    if (selectedSubSectionId && isProgrammaticallyScrolled.current === true && sectionSpacer) {\n      scrollToSectionById(selectedSubSectionId, true);\n      isProgrammaticallyScrolled.current = false;\n    }\n  }, [selectedSubSectionId, isProgrammaticallyScrolled.current, sectionSpacer]);\n  useEffect(() => {\n    if (headerPinnedProp !== undefined) {\n      setHeaderPinned(headerPinnedProp);\n    }\n    if (headerPinnedProp) {\n      onToggleHeaderContentVisibility({\n        detail: {\n          visible: true\n        }\n      });\n    }\n  }, [headerPinnedProp]);\n  const prevHeaderPinned = useRef(headerPinned);\n  useEffect(() => {\n    if (prevHeaderPinned.current && !headerPinned && objectPageRef.current.scrollTop > topHeaderHeight) {\n      onToggleHeaderContentVisibility({\n        detail: {\n          visible: false\n        }\n      });\n      prevHeaderPinned.current = false;\n    }\n    if (!prevHeaderPinned.current && headerPinned) {\n      prevHeaderPinned.current = true;\n    }\n  }, [headerPinned, topHeaderHeight]);\n  useEffect(() => {\n    setSelectedSubSectionId(props.selectedSubSectionId);\n    if (props.selectedSubSectionId) {\n      isProgrammaticallyScrolled.current = true;\n      if (mode === ObjectPageMode.IconTabBar) {\n        let sectionId;\n        safeGetChildrenArray(children).forEach(section => {\n          if ( /*#__PURE__*/isValidElement(section) && section.props && section.props.children) {\n            safeGetChildrenArray(section.props.children).forEach(subSection => {\n              if ( /*#__PURE__*/isValidElement(subSection) && subSection.props && subSection.props.id === props.selectedSubSectionId) {\n                sectionId = section.props?.id;\n              }\n            });\n          }\n        });\n        if (sectionId) {\n          setInternalSelectedSectionId(sectionId);\n        }\n      }\n    }\n  }, [props.selectedSubSectionId, children, mode]);\n  const tabContainerContainerRef = useRef(null);\n  useEffect(() => {\n    const objectPage = objectPageRef.current;\n    const sectionNodes = objectPage.querySelectorAll('[id^=\"ObjectPageSection\"]');\n    const lastSectionNode = sectionNodes[sectionNodes.length - 1];\n    const tabContainerContainer = tabContainerContainerRef.current;\n    const observer = new ResizeObserver(([sectionElement]) => {\n      const subSections = lastSectionNode.querySelectorAll('[id^=\"ObjectPageSubSection\"]');\n      const lastSubSection = subSections[subSections.length - 1];\n      const lastSubSectionOrSection = lastSubSection ?? sectionElement.target;\n      if (currentTabModeSection && !lastSubSection || sectionNodes.length === 1 && !lastSubSection) {\n        setSectionSpacer(0);\n      } else if (!!tabContainerContainer) {\n        setSectionSpacer(objectPage.getBoundingClientRect().bottom - tabContainerContainer.getBoundingClientRect().bottom - lastSubSectionOrSection.getBoundingClientRect().height - TAB_CONTAINER_HEADER_HEIGHT);\n      }\n    });\n    if (objectPage && lastSectionNode) {\n      observer.observe(lastSectionNode, {\n        box: 'border-box'\n      });\n    }\n    return () => {\n      observer.disconnect();\n    };\n  }, [headerCollapsed, topHeaderHeight, headerContentHeight, currentTabModeSection, children]);\n  const onToggleHeaderContentVisibility = useCallback(e => {\n    isToggledRef.current = true;\n    scrollTimeout.current = performance.now() + 500;\n    if (!e.detail.visible) {\n      setHeaderCollapsedInternal(true);\n      objectPageRef.current?.classList.add(classNames.headerCollapsed);\n    } else {\n      setHeaderCollapsedInternal(false);\n      setScrolledHeaderExpanded(true);\n      objectPageRef.current?.classList.remove(classNames.headerCollapsed);\n    }\n  }, []);\n  const handleOnSubSectionSelected = useCallback(e => {\n    isProgrammaticallyScrolled.current = true;\n    if (mode === ObjectPageMode.IconTabBar) {\n      const sectionId = e.detail.sectionId;\n      setInternalSelectedSectionId(sectionId);\n      const sectionNodes = objectPageRef.current?.querySelectorAll('section[data-component-name=\"ObjectPageSection\"]');\n      const currentIndex = safeGetChildrenArray(children).findIndex(objectPageSection => {\n        return /*#__PURE__*/isValidElement(objectPageSection) && objectPageSection.props?.id === sectionId;\n      });\n      debouncedOnSectionChange(e, currentIndex, sectionId, sectionNodes[currentIndex]);\n    }\n    const subSectionId = e.detail.subSectionId;\n    scrollTimeout.current = performance.now() + 200;\n    setSelectedSubSectionId(subSectionId);\n  }, [mode, setInternalSelectedSectionId, setSelectedSubSectionId, isProgrammaticallyScrolled, children]);\n  const objectPageClasses = clsx(classNames.objectPage, className, mode === ObjectPageMode.IconTabBar && classNames.iconTabBarMode);\n  const {\n    onScroll: _0,\n    selectedSubSectionId: _1,\n    ...propsWithoutOmitted\n  } = rest;\n  useEffect(() => {\n    const sectionNodes = objectPageRef.current?.querySelectorAll('section[data-component-name=\"ObjectPageSection\"]');\n    const objectPageHeight = objectPageRef.current?.clientHeight ?? 1000;\n    const marginBottom = objectPageHeight - totalHeaderHeight - /*TabContainer*/TAB_CONTAINER_HEADER_HEIGHT;\n    const rootMargin = `-${totalHeaderHeight}px 0px -${marginBottom < 0 ? 0 : marginBottom}px 0px`;\n    const observer = new IntersectionObserver(([section]) => {\n      if (section.isIntersecting && isProgrammaticallyScrolled.current === false) {\n        if (objectPageRef.current.getBoundingClientRect().top + totalHeaderHeight + TAB_CONTAINER_HEADER_HEIGHT <= section.target.getBoundingClientRect().bottom) {\n          const currentId = extractSectionIdFromHtmlId(section.target.id);\n          setInternalSelectedSectionId(currentId);\n          const currentIndex = safeGetChildrenArray(children).findIndex(objectPageSection => {\n            return /*#__PURE__*/isValidElement(objectPageSection) && objectPageSection.props?.id === currentId;\n          });\n          debouncedOnSectionChange(scrollEvent.current, currentIndex, currentId, section.target);\n        }\n      }\n    }, {\n      root: objectPageRef.current,\n      rootMargin,\n      threshold: [0]\n    });\n    sectionNodes.forEach(el => {\n      observer.observe(el);\n    });\n    return () => {\n      observer.disconnect();\n    };\n  }, [children, totalHeaderHeight, setInternalSelectedSectionId, isProgrammaticallyScrolled]);\n\n  // Fallback when scrolling faster than the IntersectionObserver can observe (in most cases faster than 60fps)\n  useEffect(() => {\n    const sectionNodes = objectPageRef.current?.querySelectorAll('section[data-component-name=\"ObjectPageSection\"]');\n    if (isAfterScroll) {\n      let currentSection = sectionNodes[sectionNodes.length - 1];\n      let currentIndex;\n      for (let i = 0; i <= sectionNodes.length - 1; i++) {\n        const sectionNode = sectionNodes[i];\n        if (objectPageRef.current.getBoundingClientRect().top + totalHeaderHeight + TAB_CONTAINER_HEADER_HEIGHT <= sectionNode.getBoundingClientRect().bottom) {\n          currentSection = sectionNode;\n          currentIndex = i;\n          break;\n        }\n      }\n      const currentSectionId = extractSectionIdFromHtmlId(currentSection?.id);\n      if (currentSectionId !== internalSelectedSectionId) {\n        setInternalSelectedSectionId(currentSectionId);\n        debouncedOnSectionChange(scrollEvent.current, currentIndex ?? sectionNodes.length - 1, currentSectionId, currentSection);\n      }\n      setIsAfterScroll(false);\n    }\n  }, [isAfterScroll]);\n  const onTitleClick = e => {\n    e.stopPropagation();\n    if (!preserveHeaderStateOnClick) {\n      onToggleHeaderContentVisibility(enrichEventWithDetails(e, {\n        visible: headerCollapsed\n      }));\n    }\n  };\n  const snappedHeaderInObjPage = titleArea && titleArea.props.snappedContent && headerCollapsed === true && !!image;\n  const isInitial = useRef(true);\n  useEffect(() => {\n    if (!isInitial.current) {\n      scrollTimeout.current = performance.now() + 200;\n    } else {\n      isInitial.current = false;\n    }\n  }, [snappedHeaderInObjPage]);\n  const renderHeaderContentSection = () => {\n    if (headerArea?.props) {\n      return /*#__PURE__*/cloneElement(headerArea, {\n        ...headerArea.props,\n        topHeaderHeight,\n        style: headerCollapsed === true ? {\n          position: 'absolute',\n          visibility: 'hidden',\n          flexShrink: 0\n        } : {\n          ...headerArea.props.style,\n          flexShrink: 0\n        },\n        headerPinned: headerPinned || scrolledHeaderExpanded,\n        //@ts-expect-error: todo remove me when forwardref has been replaced\n        ref: componentRefHeaderContent,\n        children: /*#__PURE__*/_jsxs(\"div\", {\n          className: classNames.headerContainer,\n          \"data-component-name\": \"ObjectPageHeaderContainer\",\n          children: [avatar, headerArea.props.children && /*#__PURE__*/_jsx(\"div\", {\n            \"data-component-name\": \"ObjectPageHeaderContent\",\n            children: headerArea.props.children\n          })]\n        })\n      });\n    }\n  };\n  const onTabItemSelect = event => {\n    if (typeof onBeforeNavigate === 'function') {\n      const selectedTabDataset = event.detail.tab.dataset;\n      const sectionIndex = parseInt(selectedTabDataset.index, 10);\n      const sectionId = selectedTabDataset.parentId ?? selectedTabDataset.sectionId;\n      const subSectionId = selectedTabDataset.hasOwnProperty('isSubTab') ? selectedTabDataset.sectionId : undefined;\n      onBeforeNavigate(enrichEventWithDetails(event, {\n        sectionIndex,\n        sectionId,\n        subSectionId\n      }));\n      if (event.defaultPrevented) {\n        return;\n      }\n    }\n    event.preventDefault();\n    const {\n      sectionId,\n      index,\n      isSubTab,\n      parentId\n    } = event.detail.tab.dataset;\n    if (isSubTab !== undefined) {\n      handleOnSubSectionSelected(enrichEventWithDetails(event, {\n        sectionId: parentId,\n        subSectionId: sectionId\n      }));\n    } else {\n      const section = safeGetChildrenArray(children).find(el => {\n        return el.props.id == sectionId;\n      });\n      handleOnSectionSelected(event, section?.props?.id, index, section);\n    }\n  };\n  const prevScrollTop = useRef(undefined);\n  const onObjectPageScroll = useCallback(e => {\n    if (!isToggledRef.current) {\n      isToggledRef.current = true;\n    }\n    if (scrollTimeout.current >= performance.now()) {\n      return;\n    }\n    scrollEvent.current = e;\n    if (typeof props.onScroll === 'function') {\n      props.onScroll(e);\n    }\n    if (selectedSubSectionId) {\n      setSelectedSubSectionId(undefined);\n    }\n    if (selectionScrollTimeout.current) {\n      clearTimeout(selectionScrollTimeout.current);\n    }\n    selectionScrollTimeout.current = setTimeout(() => {\n      setIsAfterScroll(true);\n    }, 100);\n    if (!headerPinned || e.target.scrollTop === 0) {\n      objectPageRef.current?.classList.remove(classNames.headerCollapsed);\n    }\n    if (scrolledHeaderExpanded && e.target.scrollTop !== prevScrollTop.current) {\n      if (e.target.scrollHeight - e.target.scrollTop === e.target.clientHeight) {\n        return;\n      }\n      prevScrollTop.current = e.target.scrollTop;\n      if (!headerPinned) {\n        setHeaderCollapsedInternal(true);\n      }\n      setScrolledHeaderExpanded(false);\n    }\n  }, [topHeaderHeight, headerPinned, props.onScroll, scrolledHeaderExpanded, selectedSubSectionId]);\n  const onHoverToggleButton = useCallback(e => {\n    if (e?.type === 'mouseover') {\n      topHeaderRef.current?.classList.add(classNames.headerHoverStyles);\n    } else {\n      topHeaderRef.current?.classList.remove(classNames.headerHoverStyles);\n    }\n  }, [classNames.headerHoverStyles]);\n  const objectPageStyles = {\n    ...style\n  };\n  if (headerCollapsed === true && headerArea) {\n    objectPageStyles[ObjectPageCssVariables.titleFontSize] = ThemingParameters.sapObjectHeader_Title_SnappedFontSize;\n  }\n  return /*#__PURE__*/_jsxs(\"div\", {\n    \"data-component-name\": \"ObjectPage\",\n    slot: slot,\n    className: objectPageClasses,\n    style: objectPageStyles,\n    ref: componentRef,\n    onScroll: onObjectPageScroll,\n    ...propsWithoutOmitted,\n    children: [/*#__PURE__*/_jsxs(\"header\", {\n      onMouseOver: onHoverToggleButton,\n      onMouseLeave: onHoverToggleButton,\n      \"data-component-name\": \"ObjectPageTopHeader\",\n      ref: topHeaderRef,\n      role: accessibilityAttributes?.objectPageTopHeader?.role,\n      \"data-not-clickable\": !!preserveHeaderStateOnClick,\n      \"aria-roledescription\": accessibilityAttributes?.objectPageTopHeader?.ariaRoledescription ?? 'Object Page header',\n      className: classNames.header,\n      style: {\n        gridAutoColumns: `min-content ${titleArea && image && headerCollapsed === true ? `calc(100% - 3rem - 1rem)` : '100%'}`\n      },\n      children: [/*#__PURE__*/_jsx(\"span\", {\n        className: classNames.clickArea,\n        onClick: onTitleClick,\n        \"data-component-name\": \"ObjectPageTitleAreaClickElement\"\n      }), titleArea && image && headerCollapsed === true && /*#__PURE__*/_jsx(CollapsedAvatar, {\n        image: image,\n        imageShapeCircle: imageShapeCircle\n      }), titleArea && /*#__PURE__*/cloneElement(titleArea, {\n        className: clsx(titleArea?.props?.className),\n        onToggleHeaderContentVisibility: onTitleClick,\n        'data-not-clickable': !!preserveHeaderStateOnClick,\n        'data-header-content-visible': headerArea && headerCollapsed !== true,\n        'data-is-snapped-rendered-outside': snappedHeaderInObjPage\n      }), snappedHeaderInObjPage && /*#__PURE__*/_jsx(\"div\", {\n        className: classNames.snappedContent,\n        \"data-component-name\": \"ATwithImageSnappedContentContainer\",\n        children: titleArea.props.snappedContent\n      })]\n    }), renderHeaderContentSection(), headerArea && titleArea && /*#__PURE__*/_jsx(\"div\", {\n      \"data-component-name\": \"ObjectPageAnchorBar\",\n      ref: anchorBarRef,\n      className: classNames.anchorBar,\n      style: {\n        top: scrolledHeaderExpanded || headerPinned ? `${topHeaderHeight + (headerCollapsed === true ? 0 : headerContentHeight)}px` : `${topHeaderHeight + 5}px`\n      },\n      children: /*#__PURE__*/_jsx(ObjectPageAnchorBar, {\n        headerContentVisible: headerArea && headerCollapsed !== true,\n        hidePinButton: !!hidePinButton,\n        headerPinned: headerPinned,\n        accessibilityAttributes: accessibilityAttributes,\n        onToggleHeaderContentVisibility: onToggleHeaderContentVisibility,\n        setHeaderPinned: setHeaderPinned,\n        onHoverToggleButton: onHoverToggleButton,\n        onPinButtonToggle: onPinButtonToggle\n      })\n    }), !placeholder && /*#__PURE__*/_jsx(\"div\", {\n      ref: tabContainerContainerRef,\n      className: classNames.tabContainer,\n      \"data-component-name\": \"ObjectPageTabContainer\",\n      style: {\n        top: headerPinned || scrolledHeaderExpanded ? `${topHeaderHeight + (headerCollapsed === true ? 0 : headerContentHeight)}px` : `${topHeaderHeight}px`\n      },\n      children: /*#__PURE__*/_jsx(TabContainer, {\n        collapsed: true,\n        onTabSelect: onTabItemSelect,\n        \"data-component-name\": \"ObjectPageTabContainer\",\n        className: classNames.tabContainerComponent,\n        children: safeGetChildrenArray(children).map((section, index) => {\n          if (! /*#__PURE__*/isValidElement(section) || !section.props) return null;\n          const subTabs = safeGetChildrenArray(section.props.children).filter(subSection =>\n          // @ts-expect-error: if the `ObjectPageSubSection` component is passed as children, the `displayName` is available. Otherwise, the default children should be rendered w/o additional logic.\n          /*#__PURE__*/isValidElement(subSection) && subSection?.type?.displayName === 'ObjectPageSubSection');\n          return /*#__PURE__*/_jsx(Tab, {\n            \"data-index\": index,\n            \"data-section-id\": section.props.id,\n            text: section.props.titleText,\n            selected: internalSelectedSectionId === section.props?.id || undefined,\n            items: subTabs.map(item => {\n              if (! /*#__PURE__*/isValidElement(item)) {\n                return null;\n              }\n              return /*#__PURE__*/_jsx(Tab, {\n                \"data-parent-id\": section.props.id,\n                \"data-is-sub-tab\": true,\n                \"data-section-id\": item.props.id,\n                text: item.props.titleText,\n                selected: item.props.id === selectedSubSectionId || undefined,\n                \"data-index\": index,\n                children: /*#__PURE__*/_jsx(\"span\", {\n                  style: {\n                    display: 'none'\n                  }\n                })\n              }, item.props.id);\n            }),\n            children: /*#__PURE__*/_jsx(\"span\", {\n              style: {\n                display: 'none'\n              }\n            })\n          }, `Anchor-${section.props?.id}`);\n        })\n      })\n    }), /*#__PURE__*/_jsxs(\"div\", {\n      \"data-component-name\": \"ObjectPageContent\",\n      className: classNames.content,\n      ref: objectPageContentRef,\n      children: [/*#__PURE__*/_jsx(\"div\", {\n        style: {\n          height: headerCollapsed ? `${headerContentHeight}px` : 0\n        },\n        \"aria-hidden\": true\n      }), placeholder ? placeholder : sections, /*#__PURE__*/_jsx(\"div\", {\n        style: {\n          height: `${sectionSpacer}px`\n        },\n        \"aria-hidden\": true\n      })]\n    }), footerArea && mode === ObjectPageMode.IconTabBar && !sectionSpacer && /*#__PURE__*/_jsx(\"div\", {\n      className: classNames.footerSpacer,\n      \"data-component-name\": \"ObjectPageFooterSpacer\",\n      \"aria-hidden\": true\n    }), footerArea && /*#__PURE__*/_jsx(\"footer\", {\n      className: classNames.footer,\n      \"data-component-name\": \"ObjectPageFooter\",\n      children: footerArea\n    })]\n  });\n});\nObjectPage.displayName = 'ObjectPage';\nexport { ObjectPage };"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}