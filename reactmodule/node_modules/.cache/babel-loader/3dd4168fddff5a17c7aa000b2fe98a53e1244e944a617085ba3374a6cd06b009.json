{"ast":null,"code":"\"use strict\";\n\nimport { attachLanguageChange as g } from \"../locale/languageChange.js\";\nimport h from \"../locale/getLocale.js\";\nimport { DEFAULT_LOCALE as a, SUPPORTED_LOCALES as L } from \"../generated/AssetParameters.js\";\nimport { getFeature as w } from \"../FeaturesRegistry.js\";\nconst f = new Map(),\n  s = new Map(),\n  i = new Map(),\n  D = new Set();\nlet d = !1;\nconst O = {\n    iw: \"he\",\n    ji: \"yi\",\n    in: \"id\"\n  },\n  l = t => {\n    d || (console.warn(`[LocaleData] Supported locale \"${t}\" not configured, import the \"Assets.js\" module from the webcomponents package you are using.`), d = !0);\n  },\n  R = (t, e, n) => {\n    t = t && O[t] || t, t === \"no\" && (t = \"nb\"), t === \"zh\" && !e && (n === \"Hans\" ? e = \"CN\" : n === \"Hant\" && (e = \"TW\")), (t === \"sh\" || t === \"sr\" && n === \"Latn\") && (t = \"sr\", e = \"Latn\");\n    let r = `${t}_${e}`;\n    return L.includes(r) ? s.has(r) ? r : (l(r), a) : (r = t, L.includes(r) ? s.has(r) ? r : (l(r), a) : a);\n  },\n  m = (t, e) => {\n    f.set(t, e);\n  },\n  S = t => {\n    s.has(t) || (t = a);\n    const e = f.get(t);\n    if (!e) throw new Error(`CLDR data for locale ${t} is not loaded!`);\n    return e;\n  },\n  _ = t => {\n    if (!i.get(t)) {\n      const e = s.get(t);\n      if (!e) throw new Error(`CLDR data for locale ${t} is not loaded!`);\n      i.set(t, e(t));\n    }\n    return i.get(t);\n  },\n  u = async (t, e, n) => {\n    const r = R(t, e, n),\n      p = w(\"OpenUI5Support\");\n    if (p) {\n      const o = p.getLocaleDataObject();\n      if (o) {\n        m(r, o);\n        return;\n      }\n    }\n    try {\n      const o = await _(r);\n      m(r, o);\n    } catch (o) {\n      const c = o;\n      D.has(c.message) || (D.add(c.message), console.error(c.message));\n    }\n  },\n  C = (t, e) => {\n    s.set(t, e);\n  };\nC(\"en\", async () => (await fetch(\"https://sdk.openui5.org/1.120.17/resources/sap/ui/core/cldr/en.json\")).json()), g(() => {\n  const t = h();\n  return u(t.getLanguage(), t.getRegion(), t.getScript());\n});\nexport { C as registerLocaleDataLoader, u as fetchCldr, S as getLocaleData };","map":{"version":3,"names":["attachLanguageChange","g","h","DEFAULT_LOCALE","a","SUPPORTED_LOCALES","L","getFeature","w","f","Map","s","i","D","Set","d","O","iw","ji","in","l","t","console","warn","R","calcLocale","e","n","r","includes","has","m","setLocaleData","set","S","get","Error","_","u","fetchCldr","p","o","getLocaleDataObject","c","message","add","error","C","registerLocaleDataLoader","fetch","json","getLanguage","getRegion","getScript","getLocaleData"],"sources":["/home/user/projects/reactproj/node_modules/@ui5/webcomponents-base/src/asset-registries/LocaleData.ts"],"sourcesContent":["import { attachLanguageChange } from \"../locale/languageChange.js\";\nimport getLocale from \"../locale/getLocale.js\";\nimport { DEFAULT_LOCALE, SUPPORTED_LOCALES } from \"../generated/AssetParameters.js\";\nimport { getFeature } from \"../FeaturesRegistry.js\";\nimport type OpenUI5Support from \"../features/OpenUI5Support.js\";\n\ntype LocaleDataLoader = (locale: string) => Promise<CLDRData>;\ntype CLDRData = Record<string, object | boolean | string>;\n\nconst localeDataMap = new Map<string, CLDRData>();\nconst loaders = new Map<string, LocaleDataLoader>();\nconst cldrPromises = new Map<string, Promise<CLDRData>>();\nconst reportedErrors = new Set<string>();\nlet warningShown = false;\n\nconst M_ISO639_OLD_TO_NEW = {\n\t\"iw\": \"he\",\n\t\"ji\": \"yi\",\n\t\"in\": \"id\",\n};\n\nconst _showAssetsWarningOnce = (localeId: string) => {\n\tif (warningShown) {\n\t\treturn;\n\t}\n\n\tconsole.warn(`[LocaleData] Supported locale \"${localeId}\" not configured, import the \"Assets.js\" module from the webcomponents package you are using.`); /* eslint-disable-line */\n\n\twarningShown = true;\n};\n\nconst calcLocale = (language: string, region: string, script: string) => {\n\t// normalize language and handle special cases\n\tlanguage = (language && M_ISO639_OLD_TO_NEW[language as keyof typeof M_ISO639_OLD_TO_NEW]) || language;\n\t// Special case 1: in an SAP context, the inclusive language code \"no\" always means Norwegian Bokmal (\"nb\")\n\tif (language === \"no\") {\n\t\tlanguage = \"nb\";\n\t}\n\t// Special case 2: for Chinese, derive a default region from the script (this behavior is inherited from Java)\n\tif (language === \"zh\" && !region) {\n\t\tif (script === \"Hans\") {\n\t\t\tregion = \"CN\";\n\t\t} else if (script === \"Hant\") {\n\t\t\tregion = \"TW\";\n\t\t}\n\t}\n\n\t// Special case 3: for Serbian, there are cyrillic and latin scripts, \"sh\" and \"sr-latn\" map to \"latin\", \"sr\" maps to cyrillic.\n\tif (language === \"sh\" || (language === \"sr\" && script === \"Latn\")) {\n\t\tlanguage = \"sr\";\n\t\tregion = \"Latn\";\n\t}\n\n\t// try language + region\n\tlet localeId = `${language}_${region}`;\n\tif (SUPPORTED_LOCALES.includes(localeId)) {\n\t\tif (loaders.has(localeId)) {\n\t\t\t// supported and has loader\n\t\t\treturn localeId;\n\t\t}\n\n\t\t// supported, no loader - fallback to default and warn\n\t\t_showAssetsWarningOnce(localeId);\n\t\treturn DEFAULT_LOCALE;\n\t}\n\n\t// not supported, try language only\n\tlocaleId = language;\n\tif (SUPPORTED_LOCALES.includes(localeId)) {\n\t\tif (loaders.has(localeId)) {\n\t\t\t// supported and has loader\n\t\t\treturn localeId;\n\t\t}\n\n\t\t// supported, no loader - fallback to default and warn\n\t\t_showAssetsWarningOnce(localeId);\n\t\treturn DEFAULT_LOCALE;\n\t}\n\n\t// not supported - fallback to default locale\n\treturn DEFAULT_LOCALE;\n};\n\n// internal set data\nconst setLocaleData = (localeId: string, content: CLDRData) => {\n\tlocaleDataMap.set(localeId, content);\n};\n\n// external getSync\nconst getLocaleData = (localeId: string) => {\n\t// if there is no loader, the default fallback was fetched and a warning was given - use default locale instead\n\tif (!loaders.has(localeId)) {\n\t\tlocaleId = DEFAULT_LOCALE;\n\t}\n\n\tconst content = localeDataMap.get(localeId);\n\tif (!content) {\n\t\tthrow new Error(`CLDR data for locale ${localeId} is not loaded!`);\n\t}\n\n\treturn content;\n};\n\n// load bundle over the network once\nconst _loadCldrOnce = (localeId: string) => {\n\tif (!cldrPromises.get(localeId)) {\n\t\tconst loadCldr = loaders.get(localeId);\n\n\t\tif (!loadCldr) {\n\t\t\tthrow new Error(`CLDR data for locale ${localeId} is not loaded!`);\n\t\t}\n\n\t\tcldrPromises.set(localeId, loadCldr(localeId));\n\t}\n\n\treturn cldrPromises.get(localeId);\n};\n\n// external getAsync\nconst fetchCldr = async (language: string, region: string, script: string) => {\n\tconst localeId = calcLocale(language, region, script);\n\n\t// reuse OpenUI5 CLDR if present\n\tconst openUI5Support = getFeature<typeof OpenUI5Support>(\"OpenUI5Support\");\n\tif (openUI5Support) {\n\t\tconst cldrContent = openUI5Support.getLocaleDataObject();\n\t\tif (cldrContent) {\n\t\t\t// only if openui5 actually returned valid content\n\t\t\tsetLocaleData(localeId, cldrContent);\n\t\t\treturn;\n\t\t}\n\t}\n\n\t// fetch it\n\ttry {\n\t\tconst cldrContent = await _loadCldrOnce(localeId);\n\t\tsetLocaleData(localeId, cldrContent as CLDRData);\n\t} catch (error: unknown) {\n\t\tconst e = error as Error;\n\t\tif (!reportedErrors.has(e.message)) {\n\t\t\treportedErrors.add(e.message);\n\t\t\tconsole.error(e.message); /* eslint-disable-line */\n\t\t}\n\t}\n};\n\nconst registerLocaleDataLoader = (localeId: string, loader: LocaleDataLoader) => {\n\tloaders.set(localeId, loader);\n};\n\n// register default loader for \"en\" from ui5 CDN (dev workflow without assets)\nregisterLocaleDataLoader(\"en\", async () => {\n\tconst cldrContent = await fetch(`https://sdk.openui5.org/1.120.17/resources/sap/ui/core/cldr/en.json`);\n\treturn cldrContent.json() as Promise<CLDRData>;\n});\n\n// When the language changes dynamically (the user calls setLanguage),\n// re-fetch the required CDRD data.\nattachLanguageChange(() => {\n\tconst locale = getLocale();\n\treturn fetchCldr(locale.getLanguage(), locale.getRegion(), locale.getScript());\n});\n\nexport {\n\tregisterLocaleDataLoader,\n\tfetchCldr,\n\tgetLocaleData,\n};\n\nexport type {\n\tCLDRData,\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}