{"ast":null,"code":"\"use strict\";\n\nlet t = null,\n  n = !1;\nconst r = new Set(),\n  d = new Set(),\n  a = e => {\n    !e.dataTransfer || !(e.target instanceof HTMLElement) || d.has(e.target) || (t = e.target);\n  },\n  o = () => {\n    t = null;\n  },\n  l = () => {\n    t = null;\n  },\n  s = e => {\n    t = e;\n  },\n  g = () => t,\n  c = () => {\n    n || (document.body.addEventListener(\"dragstart\", a), document.body.addEventListener(\"dragend\", o), document.body.addEventListener(\"drop\", l));\n  },\n  m = () => {\n    document.body.removeEventListener(\"dragstart\", a), document.body.removeEventListener(\"dragend\", o), document.body.removeEventListener(\"drop\", l), n = !1;\n  },\n  E = e => {\n    r.add(e), n || c();\n  },\n  u = e => {\n    r.delete(e), r.size === 0 && n && m();\n  },\n  i = e => (d.add(e), s),\n  b = e => {\n    d.delete(e);\n  },\n  f = {\n    subscribe: E,\n    unsubscribe: u,\n    addSelfManagedArea: i,\n    removeSelfManagedArea: b,\n    getDraggedElement: g\n  };\nexport default f;","map":{"version":3,"names":["t","n","r","Set","d","a","e","dataTransfer","target","HTMLElement","has","o","ondragend","l","ondrop","s","g","getDraggedElement","c","attachGlobalHandlers","document","body","addEventListener","m","detachGlobalHandlers","removeEventListener","E","add","u","delete","size","i","b","f","subscribe","unsubscribe","addSelfManagedArea","removeSelfManagedArea"],"sources":["/home/user/projects/reactproj/node_modules/@ui5/webcomponents-base/src/util/dragAndDrop/DragRegistry.ts"],"sourcesContent":["import type UI5Element from \"../../UI5Element.js\";\n\nlet draggedElement: HTMLElement | null = null;\nlet globalHandlersAttached = false;\nconst subscribers = new Set<UI5Element>();\nconst selfManagedDragAreas = new Set<HTMLElement | ShadowRoot>();\n\nconst ondragstart = (e: DragEvent) => {\n\tif (!e.dataTransfer || !(e.target instanceof HTMLElement)) {\n\t\treturn;\n\t}\n\n\tif (!selfManagedDragAreas.has(e.target)) {\n\t\tdraggedElement = e.target;\n\t}\n};\n\nconst ondragend = () => {\n\tdraggedElement = null;\n};\n\nconst ondrop = () => {\n\tdraggedElement = null;\n};\n\nconst setDraggedElement = (element: HTMLElement | null) => {\n\tdraggedElement = element;\n};\ntype SetDraggedElementFunction = typeof setDraggedElement;\n\nconst getDraggedElement = () => {\n\treturn draggedElement;\n};\n\nconst attachGlobalHandlers = () => {\n\tif (globalHandlersAttached) {\n\t\treturn;\n\t}\n\n\tdocument.body.addEventListener(\"dragstart\", ondragstart);\n\tdocument.body.addEventListener(\"dragend\", ondragend);\n\tdocument.body.addEventListener(\"drop\", ondrop);\n};\n\nconst detachGlobalHandlers = () => {\n\tdocument.body.removeEventListener(\"dragstart\", ondragstart);\n\tdocument.body.removeEventListener(\"dragend\", ondragend);\n\tdocument.body.removeEventListener(\"drop\", ondrop);\n\tglobalHandlersAttached = false;\n};\n\nconst subscribe = (subscriber: UI5Element) => {\n\tsubscribers.add(subscriber);\n\n\tif (!globalHandlersAttached) {\n\t\tattachGlobalHandlers();\n\t}\n};\n\nconst unsubscribe = (subscriber: UI5Element) => {\n\tsubscribers.delete(subscriber);\n\n\tif (subscribers.size === 0 && globalHandlersAttached) {\n\t\tdetachGlobalHandlers();\n\t}\n};\n\nconst addSelfManagedArea = (area: HTMLElement | ShadowRoot) => {\n\tselfManagedDragAreas.add(area);\n\n\treturn setDraggedElement;\n};\n\nconst removeSelfManagedArea = (area: HTMLElement | ShadowRoot) => {\n\tselfManagedDragAreas.delete(area);\n};\n\nconst DragRegistry = {\n\tsubscribe,\n\tunsubscribe,\n\taddSelfManagedArea,\n\tremoveSelfManagedArea,\n\tgetDraggedElement,\n};\n\nexport default DragRegistry;\nexport type {\n\tSetDraggedElementFunction,\n};\n"],"mappings":";;AAEA,IAAIA,CAAA,GAAqC;EACrCC,CAAA,GAAyB;AAC7B,MAAMC,CAAA,GAAc,IAAIC,GAAA;EAClBC,CAAA,GAAuB,IAAID,GAAA;EAE3BE,CAAA,GAAeC,CAAA,IAAiB;IACjC,CAACA,CAAA,CAAEC,YAAA,IAAgB,EAAED,CAAA,CAAEE,MAAA,YAAkBC,WAAA,KAIxCL,CAAA,CAAqBM,GAAA,CAAIJ,CAAA,CAAEE,MAAM,MACrCR,CAAA,GAAiBM,CAAA,CAAEE,MAAA,CAErB;EAAA;EAEMG,CAAA,GAAYC,CAAA,KAAM;IACvBZ,CAAA,GAAiB,IAClB;EAAA;EAEMa,CAAA,GAASC,CAAA,KAAM;IACpBd,CAAA,GAAiB,IAClB;EAAA;EAEMe,CAAA,GAAqBT,CAAA,IAAgC;IAC1DN,CAAA,GAAiBM,CAClB;EAAA;EAGMU,CAAA,GAAoBC,CAAA,KAClBjB,CAAA;EAGFkB,CAAA,GAAuBC,CAAA,KAAM;IAC9BlB,CAAA,KAIJmB,QAAA,CAASC,IAAA,CAAKC,gBAAA,CAAiB,aAAajB,CAAW,GACvDe,QAAA,CAASC,IAAA,CAAKC,gBAAA,CAAiB,WAAWX,CAAS,GACnDS,QAAA,CAASC,IAAA,CAAKC,gBAAA,CAAiB,QAAQT,CAAM,EAC9C;EAAA;EAEMU,CAAA,GAAuBC,CAAA,KAAM;IAClCJ,QAAA,CAASC,IAAA,CAAKI,mBAAA,CAAoB,aAAapB,CAAW,GAC1De,QAAA,CAASC,IAAA,CAAKI,mBAAA,CAAoB,WAAWd,CAAS,GACtDS,QAAA,CAASC,IAAA,CAAKI,mBAAA,CAAoB,QAAQZ,CAAM,GAChDZ,CAAA,GAAyB,EAC1B;EAAA;EAEMyB,CAAA,GAAapB,CAAA,IAA2B;IAC7CJ,CAAA,CAAYyB,GAAA,CAAIrB,CAAU,GAErBL,CAAA,IACJiB,CAAA,CAAqB,CAEvB;EAAA;EAEMU,CAAA,GAAetB,CAAA,IAA2B;IAC/CJ,CAAA,CAAY2B,MAAA,CAAOvB,CAAU,GAEzBJ,CAAA,CAAY4B,IAAA,KAAS,KAAK7B,CAAA,IAC7BsB,CAAA,CAAqB,CAEvB;EAAA;EAEMQ,CAAA,GAAsBzB,CAAA,KAC3BF,CAAA,CAAqBuB,GAAA,CAAIrB,CAAI,GAEtBS,CAAA;EAGFiB,CAAA,GAAyB1B,CAAA,IAAmC;IACjEF,CAAA,CAAqByB,MAAA,CAAOvB,CAAI,CACjC;EAAA;EAEM2B,CAAA,GAAe;IACpBC,SAAA,EAAAR,CAAA;IACAS,WAAA,EAAAP,CAAA;IACAQ,kBAAA,EAAAL,CAAA;IACAM,qBAAA,EAAAL,CAAA;IACAf,iBAAA,EAAAD;EACD;AAEA,eAAeiB,CAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}