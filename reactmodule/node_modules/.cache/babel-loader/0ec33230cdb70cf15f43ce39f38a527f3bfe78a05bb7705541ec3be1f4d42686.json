{"ast":null,"code":"\"use strict\";\n\nimport p from \"./AnimationQueue.js\";\nconst f = e => {\n    let n = null,\n      a = !1,\n      i,\n      o,\n      r;\n    const m = new Promise((t, c) => {\n      r = u => {\n        n = n || u;\n        const d = u - n,\n          l = e.duration - d;\n        if (d <= e.duration) {\n          const s = 1 - l / e.duration;\n          e.advance(s), a || (i = requestAnimationFrame(r));\n        } else e.advance(1), t();\n      }, o = () => {\n        a = !0, cancelAnimationFrame(i), c(new Error(\"animation stopped\"));\n      };\n    }).catch(t => t);\n    return p.push(e.element, () => (typeof e.beforeStart == \"function\" && e.beforeStart(), requestAnimationFrame(r), new Promise(t => {\n      m.then(() => t());\n    }))), {\n      promise: () => m,\n      stop: () => o\n    };\n  },\n  v = 400;\nexport { v as duration };\nexport default f;","map":{"version":3,"names":["p","f","e","n","a","i","o","r","m","Promise","t","c","u","d","l","duration","s","advance","requestAnimationFrame","stop","cancelAnimationFrame","Error","catch","push","element","beforeStart","then","promise","v"],"sources":["/home/user/projects/reactproj/node_modules/@ui5/webcomponents-base/src/animations/animate.ts"],"sourcesContent":["import AnimationQueue from \"./AnimationQueue.js\";\n\ntype AnimateOptions = {\n\tbeforeStart?: () => void,\n\tduration: number,\n\telement: HTMLElement,\n\tadvance: (p: number) => void,\n};\n\nconst animate = (options: AnimateOptions) => {\n\tlet start: number | null = null;\n\tlet stopped = false;\n\tlet animationFrame: number;\n\tlet stop: () => void;\n\tlet advanceAnimation: (timestamp: number) => void;\n\n\tconst promise = new Promise<void>((resolve, reject) => {\n\t\tadvanceAnimation = timestamp => {\n\t\t\tstart = start || timestamp;\n\n\t\t\tconst timeElapsed = timestamp - start;\n\t\t\tconst remaining = options.duration - timeElapsed;\n\n\t\t\tif (timeElapsed <= options.duration) {\n\t\t\t\tconst currentAdvance = 1 - remaining / options.duration; // easing formula (currently linear)\n\t\t\t\toptions.advance(currentAdvance);\n\t\t\t\tif (!stopped) {\n\t\t\t\t\tanimationFrame = requestAnimationFrame(advanceAnimation);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\toptions.advance(1);\n\t\t\t\tresolve();\n\t\t\t}\n\t\t};\n\n\t\tstop = () => {\n\t\t\tstopped = true;\n\t\t\tcancelAnimationFrame(animationFrame);\n\t\t\treject(new Error(\"animation stopped\"));\n\t\t};\n\t}).catch((reason: Error) => reason);\n\n\tAnimationQueue.push(options.element, () => {\n\t\tif (typeof options.beforeStart === \"function\") {\n\t\t\toptions.beforeStart();\n\t\t}\n\n\t\trequestAnimationFrame(advanceAnimation);\n\n\t\treturn new Promise(resolve => {\n\t\t\tpromise.then(() => resolve());\n\t\t});\n\t});\n\n\treturn {\n\t\tpromise: () => promise,\n\t\tstop: () => stop,\n\t};\n};\nconst duration = 400;\n\nexport { duration };\nexport type { AnimateOptions };\nexport default animate;\n"],"mappings":";;AAAA,OAAOA,CAAA,MAAoB;AAS3B,MAAMC,CAAA,GAAWC,CAAA,IAA4B;IAC5C,IAAIC,CAAA,GAAuB;MACvBC,CAAA,GAAU;MACVC,CAAA;MACAC,CAAA;MACAC,CAAA;IAEJ,MAAMC,CAAA,GAAU,IAAIC,OAAA,CAAc,CAACC,CAAA,EAASC,CAAA,KAAW;MACtDJ,CAAA,GAAmBK,CAAA,IAAa;QAC/BT,CAAA,GAAQA,CAAA,IAASS,CAAA;QAEjB,MAAMC,CAAA,GAAcD,CAAA,GAAYT,CAAA;UAC1BW,CAAA,GAAYZ,CAAA,CAAQa,QAAA,GAAWF,CAAA;QAErC,IAAIA,CAAA,IAAeX,CAAA,CAAQa,QAAA,EAAU;UACpC,MAAMC,CAAA,GAAiB,IAAIF,CAAA,GAAYZ,CAAA,CAAQa,QAAA;UAC/Cb,CAAA,CAAQe,OAAA,CAAQD,CAAc,GACzBZ,CAAA,KACJC,CAAA,GAAiBa,qBAAA,CAAsBX,CAAgB,EAEzD;QAAA,OACCL,CAAA,CAAQe,OAAA,CAAQ,CAAC,GACjBP,CAAA,CAAQ,CAEV;MAAA,GAEAJ,CAAA,GAAOa,CAAA,KAAM;QACZf,CAAA,GAAU,IACVgB,oBAAA,CAAqBf,CAAc,GACnCM,CAAA,CAAO,IAAIU,KAAA,CAAM,mBAAmB,CAAC,CACtC;MAAA,CACD;IAAA,CAAC,EAAEC,KAAA,CAAOZ,CAAA,IAAkBA,CAAM;IAElC,OAAAV,CAAA,CAAeuB,IAAA,CAAKrB,CAAA,CAAQsB,OAAA,EAAS,OAChC,OAAOtB,CAAA,CAAQuB,WAAA,IAAgB,cAClCvB,CAAA,CAAQuB,WAAA,CAAY,GAGrBP,qBAAA,CAAsBX,CAAgB,GAE/B,IAAIE,OAAA,CAAQC,CAAA,IAAW;MAC7BF,CAAA,CAAQkB,IAAA,CAAK,MAAMhB,CAAA,CAAQ,CAAC,CAC7B;IAAA,CAAC,EACD,GAEM;MACNiB,OAAA,EAASA,CAAA,KAAMnB,CAAA;MACfW,IAAA,EAAMA,CAAA,KAAMb;IACb,CACD;EAAA;EACMsB,CAAA,GAAW;AAEjB,SAASA,CAAA,IAAAb,QAAA;AAET,eAAed,CAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}