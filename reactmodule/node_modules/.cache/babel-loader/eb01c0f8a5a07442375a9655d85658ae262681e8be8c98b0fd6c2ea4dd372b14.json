{"ast":null,"code":"\"use strict\";\n\nimport { getLocationHref as i } from \"./Location.js\";\nconst o = e => {\n    const t = document.querySelector(`META[name=\"${e}\"]`);\n    return t && t.getAttribute(\"content\");\n  },\n  s = e => {\n    const t = o(\"sap-allowedThemeOrigins\");\n    return t && t.split(\",\").some(n => n === \"*\" || e === n.trim());\n  },\n  a = (e, t) => {\n    const n = new URL(e).pathname;\n    return new URL(n, t).toString();\n  },\n  g = e => {\n    let t;\n    try {\n      if (e.startsWith(\".\") || e.startsWith(\"/\")) t = new URL(e, i()).toString();else {\n        const n = new URL(e),\n          r = n.origin;\n        r && s(r) ? t = n.toString() : t = a(n.toString(), i());\n      }\n      return t.endsWith(\"/\") || (t = `${t}/`), `${t}UI5/`;\n    } catch {}\n  };\nexport default g;","map":{"version":3,"names":["getLocationHref","i","o","e","t","document","querySelector","getAttribute","s","split","some","n","trim","a","buildCorrectUrl","URL","pathname","toString","g","startsWith","r","origin","endsWith"],"sources":["/home/user/projects/reactproj/node_modules/@ui5/webcomponents-base/src/validateThemeRoot.ts"],"sourcesContent":["import { getLocationHref } from \"./Location.js\";\n\nconst getMetaTagValue = (metaTagName: string) => {\n\tconst metaTag = document.querySelector(`META[name=\"${metaTagName}\"]`),\n\t\tmetaTagContent = metaTag && metaTag.getAttribute(\"content\");\n\n\treturn metaTagContent;\n};\n\nconst validateThemeOrigin = (origin: string) => {\n\tconst allowedOrigins = getMetaTagValue(\"sap-allowedThemeOrigins\");\n\n\treturn allowedOrigins && allowedOrigins.split(\",\").some(allowedOrigin => {\n\t\treturn allowedOrigin === \"*\" || origin === allowedOrigin.trim();\n\t});\n};\n\nconst buildCorrectUrl = (oldUrl: string, newOrigin: string) => {\n\tconst oldUrlPath = new URL(oldUrl).pathname;\n\n\treturn new URL(oldUrlPath, newOrigin).toString();\n};\n\nconst validateThemeRoot = (themeRoot: string) => {\n\tlet resultUrl;\n\n\ttry {\n\t\tif (themeRoot.startsWith(\".\") || themeRoot.startsWith(\"/\")) {\n\t\t\t// Handle relative url\n\t\t\t// new URL(\"/newExmPath\", \"http://example.com/exmPath\") => http://example.com/newExmPath\n\t\t\t// new URL(\"./newExmPath\", \"http://example.com/exmPath\") => http://example.com/exmPath/newExmPath\n\t\t\t// new URL(\"../newExmPath\", \"http://example.com/exmPath\") => http://example.com/newExmPath\n\t\t\tresultUrl = new URL(themeRoot, getLocationHref()).toString();\n\t\t} else {\n\t\t\tconst themeRootURL = new URL(themeRoot);\n\t\t\tconst origin = themeRootURL.origin;\n\n\t\t\tif (origin && validateThemeOrigin(origin)) {\n\t\t\t\t// If origin is allowed, use it\n\t\t\t\tresultUrl = themeRootURL.toString();\n\t\t\t} else {\n\t\t\t\t// If origin is not allow and the URL is not relative, we have to replace the origin\n\t\t\t\t// with current location\n\t\t\t\tresultUrl = buildCorrectUrl(themeRootURL.toString(), getLocationHref());\n\t\t\t}\n\t\t}\n\n\t\tif (!resultUrl.endsWith(\"/\")) {\n\t\t\tresultUrl = `${resultUrl}/`;\n\t\t}\n\n\t\treturn `${resultUrl}UI5/`;\n\t} catch (e) {\n\t\t// Catch if URL is not correct\n\t}\n};\n\nexport default validateThemeRoot;\n"],"mappings":";;AAAA,SAASA,eAAA,IAAAC,CAAA,QAAuB;AAEhC,MAAMC,CAAA,GAAmBC,CAAA,IAAwB;IAChD,MAAMC,CAAA,GAAUC,QAAA,CAASC,aAAA,CAAc,cAAcH,CAAW,IAAI;IAGpE,OAFkBC,CAAA,IAAWA,CAAA,CAAQG,YAAA,CAAa,SAAS,CAG5D;EAAA;EAEMC,CAAA,GAAuBL,CAAA,IAAmB;IAC/C,MAAMC,CAAA,GAAiBF,CAAA,CAAgB,yBAAyB;IAEhE,OAAOE,CAAA,IAAkBA,CAAA,CAAeK,KAAA,CAAM,GAAG,EAAEC,IAAA,CAAKC,CAAA,IAChDA,CAAA,KAAkB,OAAOR,CAAA,KAAWQ,CAAA,CAAcC,IAAA,CAAK,CAC9D,CACF;EAAA;EAEMC,CAAA,GAAkBC,CAACX,CAAA,EAAgBC,CAAA,KAAsB;IAC9D,MAAMO,CAAA,GAAa,IAAII,GAAA,CAAIZ,CAAM,EAAEa,QAAA;IAEnC,OAAO,IAAID,GAAA,CAAIJ,CAAA,EAAYP,CAAS,EAAEa,QAAA,CAAS,CAChD;EAAA;EAEMC,CAAA,GAAqBf,CAAA,IAAsB;IAChD,IAAIC,CAAA;IAEJ,IAAI;MACH,IAAID,CAAA,CAAUgB,UAAA,CAAW,GAAG,KAAKhB,CAAA,CAAUgB,UAAA,CAAW,GAAG,GAKxDf,CAAA,GAAY,IAAIW,GAAA,CAAIZ,CAAA,EAAWF,CAAA,CAAgB,CAAC,EAAEgB,QAAA,CAAS,OACrD;QACN,MAAMN,CAAA,GAAe,IAAII,GAAA,CAAIZ,CAAS;UAChCiB,CAAA,GAAST,CAAA,CAAaU,MAAA;QAExBD,CAAA,IAAUZ,CAAA,CAAoBY,CAAM,IAEvChB,CAAA,GAAYO,CAAA,CAAaM,QAAA,CAAS,IAIlCb,CAAA,GAAYS,CAAA,CAAgBF,CAAA,CAAaM,QAAA,CAAS,GAAGhB,CAAA,CAAgB,CAAC,CAExE;MAAA;MAEA,OAAKG,CAAA,CAAUkB,QAAA,CAAS,GAAG,MAC1BlB,CAAA,GAAY,GAAGA,CAAS,MAGlB,GAAGA,CAAS,MACpB;IAAA,QAAY,CAEZ;EACD;AAEA,eAAec,CAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}