{"ast":null,"code":"\"use strict\";\n\nimport { reRenderAllUI5Elements as C } from \"../Render.js\";\nimport S from \"../getSharedResource.js\";\nimport m from \"../EventProvider.js\";\nconst r = () => S(\"CustomStyle.eventProvider\", new m()),\n  n = \"CustomCSSChange\",\n  i = t => {\n    r().attachEvent(n, t);\n  },\n  a = t => {\n    r().detachEvent(n, t);\n  },\n  u = t => r().fireEvent(n, t),\n  c = () => S(\"CustomStyle.customCSSFor\", {});\nlet s;\ni(t => {\n  s || C({\n    tag: t\n  });\n});\nconst g = (t, e) => {\n    const o = c();\n    o[t] || (o[t] = []), o[t].push(e), s = !0;\n    try {\n      u(t);\n    } finally {\n      s = !1;\n    }\n    return C({\n      tag: t\n    });\n  },\n  l = t => {\n    const e = c();\n    return e[t] ? e[t].join(\"\") : \"\";\n  };\nexport { g as addCustomCSS, l as getCustomCSS, i as attachCustomCSSChange, a as detachCustomCSSChange };","map":{"version":3,"names":["reRenderAllUI5Elements","C","S","m","r","getEventProvider","n","i","t","attachEvent","a","detachEvent","u","fireEvent","c","getCustomCSSFor","s","tag","g","addCustomCSS","e","o","push","l","join","getCustomCSS","attachCustomCSSChange","detachCustomCSSChange"],"sources":["/home/user/projects/reactproj/node_modules/@ui5/webcomponents-base/src/theming/CustomStyle.ts"],"sourcesContent":["import { reRenderAllUI5Elements } from \"../Render.js\";\nimport getSharedResource from \"../getSharedResource.js\";\nimport EventProvider from \"../EventProvider.js\";\n\ntype CustomCSSChangeCallback = (tag: string) => void;\n\nconst getEventProvider = () => getSharedResource(\"CustomStyle.eventProvider\", new EventProvider<string, void>());\nconst CUSTOM_CSS_CHANGE = \"CustomCSSChange\";\n\nconst attachCustomCSSChange = (listener: CustomCSSChangeCallback) => {\n\tgetEventProvider().attachEvent(CUSTOM_CSS_CHANGE, listener);\n};\n\nconst detachCustomCSSChange = (listener: CustomCSSChangeCallback) => {\n\tgetEventProvider().detachEvent(CUSTOM_CSS_CHANGE, listener);\n};\n\nconst fireCustomCSSChange = (tag: string) => {\n\treturn getEventProvider().fireEvent(CUSTOM_CSS_CHANGE, tag);\n};\n\nconst getCustomCSSFor = () => getSharedResource<Record<string, Array<string>>>(\"CustomStyle.customCSSFor\", {});\n\n// Listen to the eventProvider, in case other copies of this CustomStyle module fire this\n// event, and this copy would therefore need to reRender the ui5 webcomponents; but\n// don't reRender if it was this copy that fired the event to begin with.\nlet skipRerender: boolean;\nattachCustomCSSChange((tag: string) => {\n\tif (!skipRerender) {\n\t\treRenderAllUI5Elements({ tag });\n\t}\n});\n\nconst addCustomCSS = (tag: string, css: string) => {\n\tconst customCSSFor = getCustomCSSFor();\n\tif (!customCSSFor[tag]) {\n\t\tcustomCSSFor[tag] = [];\n\t}\n\tcustomCSSFor[tag].push(css);\n\n\tskipRerender = true;\n\ttry {\n\t\t// The event is fired and the attached event listeners are all called synchronously\n\t\t// The skipRerender flag will be used to avoid calling reRenderAllUI5Elements twice when it is this copy\n\t\t// of CustomStyle.js which is firing the `CustomCSSChange` event.\n\t\tfireCustomCSSChange(tag);\n\t} finally {\n\t\tskipRerender = false;\n\t}\n\n\treturn reRenderAllUI5Elements({ tag });\n};\n\nconst getCustomCSS = (tag: string) => {\n\tconst customCSSFor = getCustomCSSFor();\n\treturn customCSSFor[tag] ? customCSSFor[tag].join(\"\") : \"\";\n};\n\nexport {\n\taddCustomCSS,\n\tgetCustomCSS,\n\tattachCustomCSSChange,\n\tdetachCustomCSSChange,\n};\n"],"mappings":";;AAAA,SAASA,sBAAA,IAAAC,CAAA,QAA8B;AACvC,OAAOC,CAAA,MAAuB;AAC9B,OAAOC,CAAA,MAAmB;AAI1B,MAAMC,CAAA,GAAmBC,CAAA,KAAMH,CAAA,CAAkB,6BAA6B,IAAIC,CAA6B,CAA7B,CAA6B;EACzGG,CAAA,GAAoB;EAEpBC,CAAA,GAAyBC,CAAA,IAAsC;IACpEJ,CAAA,CAAiB,EAAEK,WAAA,CAAYH,CAAA,EAAmBE,CAAQ,CAC3D;EAAA;EAEME,CAAA,GAAyBF,CAAA,IAAsC;IACpEJ,CAAA,CAAiB,EAAEO,WAAA,CAAYL,CAAA,EAAmBE,CAAQ,CAC3D;EAAA;EAEMI,CAAA,GAAuBJ,CAAA,IACrBJ,CAAA,CAAiB,EAAES,SAAA,CAAUP,CAAA,EAAmBE,CAAG;EAGrDM,CAAA,GAAkBC,CAAA,KAAMb,CAAA,CAAiD,4BAA4B,CAAC,CAAC;AAK7G,IAAIc,CAAA;AACJT,CAAA,CAAuBC,CAAA,IAAgB;EACjCQ,CAAA,IACJf,CAAA,CAAuB;IAAEgB,GAAA,EAAAT;EAAI,CAAC,CAEhC;AAAA,CAAC;AAED,MAAMU,CAAA,GAAeC,CAACX,CAAA,EAAaY,CAAA,KAAgB;IAClD,MAAMC,CAAA,GAAeP,CAAA,CAAgB;IAChCO,CAAA,CAAab,CAAG,MACpBa,CAAA,CAAab,CAAG,IAAI,EAAC,GAEtBa,CAAA,CAAab,CAAG,EAAEc,IAAA,CAAKF,CAAG,GAE1BJ,CAAA,GAAe;IACf,IAAI;MAIHJ,CAAA,CAAoBJ,CAAG,CACxB;IAAA,UAAE;MACDQ,CAAA,GAAe,EAChB;IAAA;IAEA,OAAOf,CAAA,CAAuB;MAAEgB,GAAA,EAAAT;IAAI,CAAC,CACtC;EAAA;EAEMe,CAAA,GAAgBf,CAAA,IAAgB;IACrC,MAAMY,CAAA,GAAeN,CAAA,CAAgB;IACrC,OAAOM,CAAA,CAAaZ,CAAG,IAAIY,CAAA,CAAaZ,CAAG,EAAEgB,IAAA,CAAK,EAAE,IAAI,EACzD;EAAA;AAEA,SACCN,CAAA,IAAAC,YAAA,EACAI,CAAA,IAAAE,YAAA,EACAlB,CAAA,IAAAmB,qBAAA,EACAhB,CAAA,IAAAiB,qBAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}