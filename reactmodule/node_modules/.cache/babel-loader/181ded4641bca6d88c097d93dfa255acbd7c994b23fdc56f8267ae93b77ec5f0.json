{"ast":null,"code":"import { useStylesheet, useI18nBundle } from '@ui5/webcomponents-react-base';\nimport { useCallback, useEffect, useRef, useState } from 'react';\nimport { DRAG_TO_RESIZE } from '../../i18n/i18n-defaults.js';\nimport { classNames, styleData } from './VerticalResizer.module.css.js';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nconst isTouchEvent = (e, touchEvent) => {\n  if (e.type === touchEvent) {\n    return !(e.touches && e.touches.length > 1);\n  }\n  return false;\n};\nexport const VerticalResizer = props => {\n  const {\n    analyticalTableRef,\n    dispatch,\n    extensionsHeight,\n    internalRowHeight,\n    hasPopInColumns,\n    popInRowHeight,\n    rowsLength,\n    visibleRows,\n    handleOnLoadMore\n  } = props;\n  useStylesheet(styleData, VerticalResizer.displayName);\n  const startY = useRef(null);\n  const verticalResizerRef = useRef(null);\n  const [resizerPosition, setResizerPosition] = useState(undefined);\n  const [isDragging, setIsDragging] = useState(false);\n  const [mountTouchEvents, setMountTouchEvents] = useState(false);\n  const i18nBundle = useI18nBundle('@ui5/webcomponents-react');\n  const handleResizeStart = useCallback(e => {\n    e.preventDefault();\n    const touchEvent = isTouchEvent(e, 'touchstart');\n    startY.current = touchEvent ? Math.round(e.touches[0].pageY) : e.pageY;\n    setMountTouchEvents(touchEvent);\n    setIsDragging(true);\n  }, [startY.current, setIsDragging]);\n  const handleMove = useCallback(e => {\n    setResizerPosition(prev => ({\n      ...prev,\n      top: isTouchEvent(e, 'touchmove') ? Math.round(e.touches[0].pageY) : e.pageY\n    }));\n  }, [setResizerPosition]);\n  const handleResizeEnd = useCallback(e => {\n    setIsDragging(false);\n    const rowCount = Math.floor((analyticalTableRef.current.clientHeight + (isTouchEvent(e, 'touchend') ? Math.round(e.changedTouches[0].pageY) : e.pageY) - startY.current - extensionsHeight - 5 /*resizer height*/) / popInRowHeight);\n    if (hasPopInColumns) {\n      dispatch({\n        type: 'INTERACTIVE_ROWS_HAVE_POPIN',\n        payload: true\n      });\n    }\n    dispatch({\n      type: 'VISIBLE_ROWS',\n      payload: {\n        visibleRows: rowCount\n      }\n    });\n  }, [analyticalTableRef.current?.clientHeight, startY.current, extensionsHeight, internalRowHeight, dispatch]);\n  useEffect(() => {\n    const removeEventListeners = () => {\n      if (mountTouchEvents) {\n        document.removeEventListener('touchmove', handleMove);\n        document.removeEventListener('touchend', handleResizeEnd);\n      } else {\n        document.removeEventListener('mouseup', handleResizeEnd);\n        document.removeEventListener('mousemove', handleMove);\n      }\n    };\n    if (isDragging) {\n      if (mountTouchEvents) {\n        document.addEventListener('touchmove', handleMove);\n        document.addEventListener('touchend', handleResizeEnd);\n      } else {\n        document.addEventListener('mousemove', handleMove);\n        document.addEventListener('mouseup', handleResizeEnd);\n      }\n    } else {\n      removeEventListeners();\n    }\n    return () => {\n      removeEventListeners();\n    };\n  }, [isDragging]);\n  useEffect(() => {\n    const resizerPosTop = verticalResizerRef.current?.getBoundingClientRect()?.top + window.scrollY;\n    const resizerPosLeft = verticalResizerRef.current?.getBoundingClientRect()?.left + window.scrollX;\n    const resizerPosWidth = verticalResizerRef.current?.getBoundingClientRect()?.width;\n    if (!isDragging && resizerPosTop > 0) {\n      setResizerPosition({\n        left: resizerPosLeft,\n        top: resizerPosTop,\n        width: resizerPosWidth\n      });\n    }\n  }, [verticalResizerRef.current?.getBoundingClientRect()?.top, isDragging]);\n  useEffect(() => {\n    return () => {\n      dispatch({\n        type: 'WITH_POPIN',\n        payload: false\n      });\n    };\n  }, []);\n  const isInitial = useRef(true);\n  useEffect(() => {\n    if (!isInitial.current && rowsLength <= visibleRows) {\n      handleOnLoadMore({\n        type: 'tableGrow'\n      });\n    }\n    isInitial.current = false;\n  }, [rowsLength, visibleRows]);\n  return /*#__PURE__*/_jsx(\"div\", {\n    className: classNames.container,\n    ref: verticalResizerRef,\n    onMouseDown: handleResizeStart,\n    onTouchStart: handleResizeStart,\n    role: \"separator\",\n    title: i18nBundle.getText(DRAG_TO_RESIZE),\n    children: resizerPosition && isDragging && /*#__PURE__*/_jsx(\"div\", {\n      className: classNames.resizer,\n      style: {\n        top: resizerPosition.top,\n        left: resizerPosition.left,\n        width: resizerPosition.width\n      }\n    })\n  });\n};\nVerticalResizer.displayName = 'VerticalResizer';","map":{"version":3,"names":["useStylesheet","useI18nBundle","useCallback","useEffect","useRef","useState","DRAG_TO_RESIZE","classNames","styleData","jsx","_jsx","isTouchEvent","e","touchEvent","type","touches","length","VerticalResizer","props","analyticalTableRef","dispatch","extensionsHeight","internalRowHeight","hasPopInColumns","popInRowHeight","rowsLength","visibleRows","handleOnLoadMore","displayName","startY","verticalResizerRef","resizerPosition","setResizerPosition","undefined","isDragging","setIsDragging","mountTouchEvents","setMountTouchEvents","i18nBundle","handleResizeStart","preventDefault","current","Math","round","pageY","handleMove","prev","top","handleResizeEnd","rowCount","floor","clientHeight","changedTouches","payload","removeEventListeners","document","removeEventListener","addEventListener","resizerPosTop","getBoundingClientRect","window","scrollY","resizerPosLeft","left","scrollX","resizerPosWidth","width","isInitial","className","container","ref","onMouseDown","onTouchStart","role","title","getText","children","resizer","style"],"sources":["/home/user/projects/reactproj/node_modules/@ui5/webcomponents-react/dist/components/AnalyticalTable/VerticalResizer.js"],"sourcesContent":["import { useStylesheet, useI18nBundle } from '@ui5/webcomponents-react-base';\nimport { useCallback, useEffect, useRef, useState } from 'react';\nimport { DRAG_TO_RESIZE } from '../../i18n/i18n-defaults.js';\nimport { classNames, styleData } from './VerticalResizer.module.css.js';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nconst isTouchEvent = (e, touchEvent) => {\n  if (e.type === touchEvent) {\n    return !(e.touches && e.touches.length > 1);\n  }\n  return false;\n};\nexport const VerticalResizer = props => {\n  const {\n    analyticalTableRef,\n    dispatch,\n    extensionsHeight,\n    internalRowHeight,\n    hasPopInColumns,\n    popInRowHeight,\n    rowsLength,\n    visibleRows,\n    handleOnLoadMore\n  } = props;\n  useStylesheet(styleData, VerticalResizer.displayName);\n  const startY = useRef(null);\n  const verticalResizerRef = useRef(null);\n  const [resizerPosition, setResizerPosition] = useState(undefined);\n  const [isDragging, setIsDragging] = useState(false);\n  const [mountTouchEvents, setMountTouchEvents] = useState(false);\n  const i18nBundle = useI18nBundle('@ui5/webcomponents-react');\n  const handleResizeStart = useCallback(e => {\n    e.preventDefault();\n    const touchEvent = isTouchEvent(e, 'touchstart');\n    startY.current = touchEvent ? Math.round(e.touches[0].pageY) : e.pageY;\n    setMountTouchEvents(touchEvent);\n    setIsDragging(true);\n  }, [startY.current, setIsDragging]);\n  const handleMove = useCallback(e => {\n    setResizerPosition(prev => ({\n      ...prev,\n      top: isTouchEvent(e, 'touchmove') ? Math.round(e.touches[0].pageY) : e.pageY\n    }));\n  }, [setResizerPosition]);\n  const handleResizeEnd = useCallback(e => {\n    setIsDragging(false);\n    const rowCount = Math.floor((analyticalTableRef.current.clientHeight + (isTouchEvent(e, 'touchend') ? Math.round(e.changedTouches[0].pageY) : e.pageY) - startY.current - extensionsHeight - 5 /*resizer height*/) / popInRowHeight);\n    if (hasPopInColumns) {\n      dispatch({\n        type: 'INTERACTIVE_ROWS_HAVE_POPIN',\n        payload: true\n      });\n    }\n    dispatch({\n      type: 'VISIBLE_ROWS',\n      payload: {\n        visibleRows: rowCount\n      }\n    });\n  }, [analyticalTableRef.current?.clientHeight, startY.current, extensionsHeight, internalRowHeight, dispatch]);\n  useEffect(() => {\n    const removeEventListeners = () => {\n      if (mountTouchEvents) {\n        document.removeEventListener('touchmove', handleMove);\n        document.removeEventListener('touchend', handleResizeEnd);\n      } else {\n        document.removeEventListener('mouseup', handleResizeEnd);\n        document.removeEventListener('mousemove', handleMove);\n      }\n    };\n    if (isDragging) {\n      if (mountTouchEvents) {\n        document.addEventListener('touchmove', handleMove);\n        document.addEventListener('touchend', handleResizeEnd);\n      } else {\n        document.addEventListener('mousemove', handleMove);\n        document.addEventListener('mouseup', handleResizeEnd);\n      }\n    } else {\n      removeEventListeners();\n    }\n    return () => {\n      removeEventListeners();\n    };\n  }, [isDragging]);\n  useEffect(() => {\n    const resizerPosTop = verticalResizerRef.current?.getBoundingClientRect()?.top + window.scrollY;\n    const resizerPosLeft = verticalResizerRef.current?.getBoundingClientRect()?.left + window.scrollX;\n    const resizerPosWidth = verticalResizerRef.current?.getBoundingClientRect()?.width;\n    if (!isDragging && resizerPosTop > 0) {\n      setResizerPosition({\n        left: resizerPosLeft,\n        top: resizerPosTop,\n        width: resizerPosWidth\n      });\n    }\n  }, [verticalResizerRef.current?.getBoundingClientRect()?.top, isDragging]);\n  useEffect(() => {\n    return () => {\n      dispatch({\n        type: 'WITH_POPIN',\n        payload: false\n      });\n    };\n  }, []);\n  const isInitial = useRef(true);\n  useEffect(() => {\n    if (!isInitial.current && rowsLength <= visibleRows) {\n      handleOnLoadMore({\n        type: 'tableGrow'\n      });\n    }\n    isInitial.current = false;\n  }, [rowsLength, visibleRows]);\n  return /*#__PURE__*/_jsx(\"div\", {\n    className: classNames.container,\n    ref: verticalResizerRef,\n    onMouseDown: handleResizeStart,\n    onTouchStart: handleResizeStart,\n    role: \"separator\",\n    title: i18nBundle.getText(DRAG_TO_RESIZE),\n    children: resizerPosition && isDragging && /*#__PURE__*/_jsx(\"div\", {\n      className: classNames.resizer,\n      style: {\n        top: resizerPosition.top,\n        left: resizerPosition.left,\n        width: resizerPosition.width\n      }\n    })\n  });\n};\nVerticalResizer.displayName = 'VerticalResizer';"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}