{"ast":null,"code":"var __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar TabContainer_1;\nimport UI5Element from \"@ui5/webcomponents-base/dist/UI5Element.js\";\nimport customElement from \"@ui5/webcomponents-base/dist/decorators/customElement.js\";\nimport event from \"@ui5/webcomponents-base/dist/decorators/event.js\";\nimport property from \"@ui5/webcomponents-base/dist/decorators/property.js\";\nimport slot from \"@ui5/webcomponents-base/dist/decorators/slot.js\";\nimport litRender from \"@ui5/webcomponents-base/dist/renderer/LitRenderer.js\";\nimport ResizeHandler from \"@ui5/webcomponents-base/dist/delegate/ResizeHandler.js\";\nimport { renderFinished } from \"@ui5/webcomponents-base/dist/Render.js\";\nimport slideDown from \"@ui5/webcomponents-base/dist/animations/slideDown.js\";\nimport slideUp from \"@ui5/webcomponents-base/dist/animations/slideUp.js\";\nimport ItemNavigation from \"@ui5/webcomponents-base/dist/delegate/ItemNavigation.js\";\nimport { isDesktop } from \"@ui5/webcomponents-base/dist/Device.js\";\nimport { isSpace, isEnter, isDown, isRight, isLeft, isUp } from \"@ui5/webcomponents-base/dist/Keys.js\";\nimport MediaRange from \"@ui5/webcomponents-base/dist/MediaRange.js\";\nimport { getI18nBundle } from \"@ui5/webcomponents-base/dist/i18nBundle.js\";\nimport { getScopedVarName } from \"@ui5/webcomponents-base/dist/CustomElementsScope.js\";\nimport \"@ui5/webcomponents-icons/dist/slim-arrow-up.js\";\nimport \"@ui5/webcomponents-icons/dist/slim-arrow-down.js\";\nimport arraysAreEqual from \"@ui5/webcomponents-base/dist/util/arraysAreEqual.js\";\nimport findClosestPosition from \"@ui5/webcomponents-base/dist/util/dragAndDrop/findClosestPosition.js\";\nimport Orientation from \"@ui5/webcomponents-base/dist/types/Orientation.js\";\nimport DragRegistry from \"@ui5/webcomponents-base/dist/util/dragAndDrop/DragRegistry.js\";\nimport longDragOverHandler from \"@ui5/webcomponents-base/dist/util/dragAndDrop/longDragOverHandler.js\";\nimport MovePlacement from \"@ui5/webcomponents-base/dist/types/MovePlacement.js\";\nimport { TABCONTAINER_PREVIOUS_ICON_ACC_NAME, TABCONTAINER_NEXT_ICON_ACC_NAME, TABCONTAINER_OVERFLOW_MENU_TITLE, TABCONTAINER_END_OVERFLOW, TABCONTAINER_POPOVER_CANCEL_BUTTON, TABCONTAINER_SUBTABS_DESCRIPTION } from \"./generated/i18n/i18n-defaults.js\";\nimport Button from \"./Button.js\";\nimport Icon from \"./Icon.js\";\nimport List from \"./List.js\";\nimport DropIndicator from \"./DropIndicator.js\";\nimport ListItemCustom from \"./ListItemCustom.js\";\nimport ResponsivePopover from \"./ResponsivePopover.js\";\nimport TabContainerTabsPlacement from \"./types/TabContainerTabsPlacement.js\";\nimport SemanticColor from \"./types/SemanticColor.js\";\nimport TabLayout from \"./types/TabLayout.js\";\nimport OverflowMode from \"./types/OverflowMode.js\";\n// Templates\nimport TabContainerTemplate from \"./generated/templates/TabContainerTemplate.lit.js\";\n// Styles\nimport tabContainerCss from \"./generated/themes/TabContainer.css.js\";\nimport ResponsivePopoverCommonCss from \"./generated/themes/ResponsivePopoverCommon.css.js\";\nconst tabStyles = [];\nconst PAGE_UP_DOWN_SIZE = 5;\n/**\n * @class\n *\n * ### Overview\n *\n * The `ui5-tabcontainer` represents a collection of tabs with associated content.\n * Navigation through the tabs changes the content display of the currently active content area.\n * A tab can be labeled with text only, or icons with text.\n *\n * ### Structure\n *\n * The `ui5-tabcontainer` can hold two types of entities:\n *\n * - `ui5-tab` - contains all the information on an item (text and icon)\n * - `ui5-tab-separator` - used to separate tabs with a line\n *\n * ### Hierarchies\n * Multiple sub tabs could be placed underneath one main tab. Nesting allows deeper hierarchies with indentations\n * to indicate the level of each nested tab. When a tab has both sub tabs and own content its click area is split\n * to allow the user to display the content or alternatively to expand / collapse the list of sub tabs.\n *\n * ### Keyboard Handling\n *\n * #### Fast Navigation\n * This component provides a build in fast navigation group which can be used via [F6] / [Shift] + [F6] / [Ctrl] + [Alt/Option] / [Down] or [Ctrl] + [Alt/Option] + [Up].\n * In order to use this functionality, you need to import the following module:\n * `import \"@ui5/webcomponents-base/dist/features/F6Navigation.js\"`\n *\n * ### ES6 Module Import\n *\n * `import \"@ui5/webcomponents/dist/TabContainer.js\";`\n *\n * `import \"@ui5/webcomponents/dist/Tab.js\";` (for `ui5-tab`)\n *\n * `import \"@ui5/webcomponents/dist/TabSeparator.js\";` (for `ui5-tab-separator`)\n * @constructor\n * @extends UI5Element\n * @public\n * @csspart content - Used to style the content of the component\n * @csspart tabstrip - Used to style the tabstrip of the component\n */\nlet TabContainer = TabContainer_1 = class TabContainer extends UI5Element {\n  static registerTabStyles(styles) {\n    tabStyles.push(styles);\n  }\n  constructor() {\n    super();\n    /**\n     * Defines whether the tab content is collapsed.\n     * @default false\n     * @public\n     */\n    this.collapsed = false;\n    /**\n     * Defines the alignment of the content and the `additionalText` of a tab.\n     *\n     * **Note:**\n     * The content and the `additionalText` would be displayed vertically by default,\n     * but when set to `Inline`, they would be displayed horizontally.\n     * @default \"Standard\"\n     * @public\n     */\n    this.tabLayout = \"Standard\";\n    /**\n     * Defines the overflow mode of the header (the tab strip). If you have a large number of tabs, only the tabs that can fit on screen will be visible.\n     * All other tabs that can 't fit on the screen are available in an overflow tab \"More\".\n     *\n     * **Note:**\n     * Only one overflow at the end would be displayed by default,\n     * but when set to `StartAndEnd`, there will be two overflows on both ends, and tab order will not change on tab selection.\n     * @default \"End\"\n     * @since 1.1.0\n     * @public\n     */\n    this.overflowMode = \"End\";\n    /**\n     * Sets the background color of the Tab Container's header as `Solid`, `Transparent`, or `Translucent`.\n     * @default \"Solid\"\n     * @since 1.10.0\n     * @public\n     */\n    this.headerBackgroundDesign = \"Solid\";\n    /**\n     * Sets the background color of the Tab Container's content as `Solid`, `Transparent`, or `Translucent`.\n     * @default \"Solid\"\n     * @since 1.10.0\n     * @public\n     */\n    this.contentBackgroundDesign = \"Solid\";\n    /**\n     * Defines the placement of the tab strip relative to the actual tabs' content.\n     *\n     * **Note:** By default the tab strip is displayed above the tabs' content area and this is the recommended\n     * layout for most scenarios. Set to `Bottom` only when the component is at the\n     * bottom of the page and you want the tab strip to act as a menu.\n     * @default \"Top\"\n     * @since 1.0.0-rc.7\n     * @private\n     */\n    this.tabsPlacement = \"Top\";\n    this._animationRunning = false;\n    this._contentCollapsed = false;\n    this._startOverflowText = \"0\";\n    this._endOverflowText = \"More\";\n    this._popoverItemsFlat = [];\n    this._itemsFlat = [];\n    this._hasScheduledPopoverOpen = false;\n    this._handleResizeBound = this._handleResize.bind(this);\n    // Init ItemNavigation\n    this._itemNavigation = new ItemNavigation(this, {\n      getItemsCallback: () => this._getFocusableRefs(),\n      skipItemsSize: PAGE_UP_DOWN_SIZE\n    });\n  }\n  onBeforeRendering() {\n    this._itemsFlat = this._flatten(this.items);\n    if (!this._itemsFlat.length) {\n      return;\n    }\n    // update selected tab\n    const selectedTab = this._itemsFlat.find(tab => !tab.isSeparator && tab.selected);\n    if (selectedTab) {\n      this._selectedTab = selectedTab;\n    } else {\n      this._selectedTab = this._itemsFlat[0];\n    }\n    walk(this.items, item => {\n      if (!item.isSeparator) {\n        item._selectedTabReference = this._selectedTab;\n      }\n    });\n    this._sendStripPresentationInfos(this.items);\n    if (!this._animationRunning) {\n      this._contentCollapsed = this.collapsed;\n    }\n  }\n  onAfterRendering() {\n    if (!this.items.length) {\n      return;\n    }\n    this._setItemsForStrip();\n    if (!this.shadowRoot.contains(document.activeElement)) {\n      const focusStart = this._getRootTab(this._selectedTab);\n      if (focusStart) {\n        this._itemNavigation.setCurrentItem(focusStart);\n      }\n    }\n    if (this.responsivePopover?.open) {\n      const popoverItems = this._getPopoverItemsFor(this._getPopoverOwner(this.responsivePopover.opener));\n      if (popoverItems.length) {\n        this._setPopoverItems(popoverItems);\n      } else {\n        this._closePopover();\n      }\n    }\n  }\n  onEnterDOM() {\n    ResizeHandler.register(this._getHeader(), this._handleResizeBound);\n    DragRegistry.subscribe(this);\n    this._setDraggedElement = DragRegistry.addSelfManagedArea(this);\n    if (isDesktop()) {\n      this.setAttribute(\"desktop\", \"\");\n    }\n  }\n  onExitDOM() {\n    ResizeHandler.deregister(this._getHeader(), this._handleResizeBound);\n    DragRegistry.unsubscribe(this);\n    DragRegistry.removeSelfManagedArea(this);\n    this._setDraggedElement = undefined;\n  }\n  _handleResize() {\n    if (this.responsivePopover && this.responsivePopover.open) {\n      this._closePopover();\n    }\n    // invalidate\n    this._width = this.offsetWidth;\n    this._updateMediaRange(this._width);\n  }\n  _updateMediaRange(width) {\n    this.mediaRange = MediaRange.getCurrentRange(MediaRange.RANGESETS.RANGE_4STEPS, width);\n  }\n  _sendStripPresentationInfos(items) {\n    const setsize = this._getTabs().length;\n    let posinset = 1;\n    items.forEach(item => {\n      let info = {\n        getElementInStrip: () => this.getDomRef().querySelector(`[id=\"${item._id}\"]`)\n      };\n      if (!item.isSeparator) {\n        info = {\n          ...info,\n          isInline: this.tabLayout === TabLayout.Inline,\n          mixedMode: this.mixedMode,\n          posinset,\n          setsize,\n          isTopLevelTab: items.some(i => i === item)\n        };\n        posinset++;\n      }\n      item.receiveStripInfo(info);\n    });\n  }\n  _onHeaderFocusin(e) {\n    const tab = getTabInStrip(e.target);\n    if (tab) {\n      this._itemNavigation.setCurrentItem(tab.realTabReference);\n    }\n  }\n  _onDragStart(e) {\n    if (!e.dataTransfer || !(e.target instanceof HTMLElement)) {\n      return;\n    }\n    e.dataTransfer.dropEffect = \"move\";\n    e.dataTransfer.effectAllowed = \"move\";\n    this._setDraggedElement(e.target.realTabReference);\n  }\n  _onHeaderDragEnter(e) {\n    e.preventDefault();\n  }\n  _onHeaderDragOver(e, isLongDragOver) {\n    if (!(e.target instanceof HTMLElement) || !e.target.closest(\"[data-ui5-stable=overflow-start],[data-ui5-stable=overflow-end],[role=tab],[role=separator]\")) {\n      this.dropIndicatorDOM.targetReference = null;\n      return;\n    }\n    const draggedElement = DragRegistry.getDraggedElement();\n    const closestPosition = findClosestPosition([...this._getTabStrip().querySelectorAll(`[role=\"tab\"]:not([hidden])`)], e.clientX, Orientation.Horizontal);\n    const overflowButton = e.target.closest(\"[data-ui5-stable=overflow-start],[data-ui5-stable=overflow-end]\");\n    let popoverTarget = null;\n    if (overflowButton) {\n      popoverTarget = overflowButton;\n      e.preventDefault();\n    } else if (closestPosition) {\n      const dropTarget = closestPosition.element.realTabReference;\n      let placements = closestPosition.placements;\n      if (dropTarget === draggedElement) {\n        placements = placements.filter(placement => placement !== MovePlacement.On);\n      }\n      const acceptedPlacement = placements.find(placement => {\n        const dragOverPrevented = !this.fireEvent(\"move-over\", {\n          source: {\n            element: draggedElement\n          },\n          destination: {\n            element: dropTarget,\n            placement\n          }\n        }, true);\n        if (dragOverPrevented) {\n          e.preventDefault();\n          this.dropIndicatorDOM.targetReference = closestPosition.element;\n          this.dropIndicatorDOM.placement = placement;\n          return true;\n        }\n        return false;\n      });\n      if (acceptedPlacement === MovePlacement.On && closestPosition.element.realTabReference.items.length) {\n        popoverTarget = closestPosition.element;\n      } else if (!acceptedPlacement) {\n        this.dropIndicatorDOM.targetReference = null;\n      }\n    }\n    if (popoverTarget && isLongDragOver) {\n      this._showPopoverAt(popoverTarget, false, true);\n    } else {\n      this._closePopover();\n    }\n  }\n  _onHeaderDrop(e) {\n    if (e.target === this._getStartOverflowBtnDOM() || e.target === this._getEndOverflowBtnDOM()) {\n      return;\n    }\n    e.preventDefault();\n    const draggedElement = DragRegistry.getDraggedElement();\n    this.fireEvent(\"move\", {\n      source: {\n        element: draggedElement\n      },\n      destination: {\n        element: this.dropIndicatorDOM.targetReference.realTabReference,\n        placement: this.dropIndicatorDOM.placement\n      }\n    });\n    this.dropIndicatorDOM.targetReference = null;\n    draggedElement.focus();\n  }\n  _onHeaderDragLeave(e) {\n    if (e.relatedTarget instanceof Node && this.shadowRoot.contains(e.relatedTarget)) {\n      return;\n    }\n    this.dropIndicatorDOM.targetReference = null;\n  }\n  _onPopoverListMoveOver(e) {\n    const {\n      destination\n    } = e.detail;\n    const draggedElement = DragRegistry.getDraggedElement();\n    const dropTarget = destination.element.realTabReference;\n    if (destination.placement === MovePlacement.On && (dropTarget.isSeparator || draggedElement === dropTarget)) {\n      return;\n    }\n    if (draggedElement !== dropTarget && draggedElement.contains(dropTarget)) {\n      return;\n    }\n    const placementAccepted = !this.fireEvent(\"move-over\", {\n      source: {\n        element: draggedElement\n      },\n      destination: {\n        element: dropTarget,\n        placement: destination.placement\n      }\n    }, true);\n    if (placementAccepted) {\n      e.preventDefault();\n    } else {\n      this.dropIndicatorDOM.targetReference = null;\n    }\n  }\n  _onPopoverListMove(e) {\n    const {\n      destination\n    } = e.detail;\n    const draggedElement = DragRegistry.getDraggedElement();\n    e.preventDefault();\n    this.fireEvent(\"move\", {\n      source: {\n        element: draggedElement\n      },\n      destination: {\n        element: destination.element.realTabReference,\n        placement: destination.placement\n      }\n    }, true);\n    this.dropIndicatorDOM.targetReference = null;\n    draggedElement.focus();\n  }\n  async _onTabStripClick(e) {\n    const tab = getTabInStrip(e.target);\n    if (!tab || tab.realTabReference.disabled) {\n      return;\n    }\n    e.stopPropagation();\n    e.preventDefault();\n    if (e.target.hasAttribute(\"ui5-button\")) {\n      this._onTabExpandButtonClick(e);\n      return;\n    }\n    if (!tab.realTabReference.hasOwnContent && tab.realTabReference.tabs.length) {\n      await this._togglePopover(tab);\n      return;\n    }\n    this._onHeaderItemSelect(tab);\n  }\n  async _onTabExpandButtonClick(e) {\n    e.stopPropagation();\n    e.preventDefault();\n    let tabInstance;\n    if (isTabInStrip(e.target)) {\n      tabInstance = e.target;\n    } else {\n      tabInstance = getTabInStrip(e.target);\n    }\n    if (tabInstance) {\n      tabInstance.focus();\n    }\n    let opener = e.target;\n    if (e.type === \"keydown\" && !e.target.realTabReference.isSingleClickArea) {\n      opener = e.target.querySelector(\".ui5-tab-expand-button [ui5-button]\");\n    }\n    // if clicked between the expand button and the tab\n    if (!tabInstance) {\n      this._onHeaderItemSelect(opener.parentElement);\n      return;\n    }\n    await this._togglePopover(opener, true);\n  }\n  _setPopoverInitialFocus() {\n    const selectedTabInOverflow = this._getSelectedTabInOverflow();\n    const tab = selectedTabInOverflow || this._getFirstFocusableItemInOverflow();\n    this.responsivePopover.initialFocus = `${tab.realTabReference._id}-li`;\n  }\n  _getSelectedTabInOverflow() {\n    return this.responsivePopover.content[0].items.find(item => {\n      return item.realTabReference && item.realTabReference.selected;\n    });\n  }\n  _getFirstFocusableItemInOverflow() {\n    return this.responsivePopover.content[0].items.find(item => item.classList.contains(\"ui5-tab-overflow-item\"));\n  }\n  _findTabInOverflow(realTab) {\n    if (!this.responsivePopover.open) {\n      return undefined;\n    }\n    return this.responsivePopover.content[0].items.find(item => item.realTabReference === realTab);\n  }\n  _onTabStripKeyDown(e) {\n    const tab = getTabInStrip(e.target);\n    if (!tab || tab.realTabReference.disabled) {\n      return;\n    }\n    if (isEnter(e)) {\n      if (tab.realTabReference.isSingleClickArea) {\n        this._onTabStripClick(e);\n      } else {\n        this._onHeaderItemSelect(tab);\n      }\n    }\n    if (isSpace(e)) {\n      e.preventDefault(); // prevent scrolling\n    }\n    if (isDown(e) || isUp(e)) {\n      if (tab.realTabReference.requiresExpandButton) {\n        this._onTabExpandButtonClick(e);\n      }\n      if (tab.realTabReference.isSingleClickArea) {\n        this._onTabStripClick(e);\n      }\n    }\n  }\n  _onTabStripKeyUp(e) {\n    const tab = getTabInStrip(e.target);\n    if (!tab || tab.realTabReference.disabled) {\n      return;\n    }\n    if (isSpace(e)) {\n      e.preventDefault();\n      if (tab.realTabReference.isSingleClickArea) {\n        this._onTabStripClick(e);\n      } else {\n        this._onHeaderItemSelect(tab);\n      }\n    }\n  }\n  _onHeaderItemSelect(tab) {\n    if (!tab.hasAttribute(\"disabled\")) {\n      this._onItemSelect(tab.id);\n    }\n  }\n  async _onOverflowListItemClick(e) {\n    e.preventDefault(); // cancel the item selection\n    this._onItemSelect(e.detail.item.id.slice(0, -3)); // strip \"-li\" from end of id\n    this._closePopover();\n    await renderFinished();\n    const selectedTopLevel = this._getRootTab(this._selectedTab);\n    selectedTopLevel?.getDomRefInStrip().focus();\n  }\n  /**\n   * Returns all slotted tabs and their subTabs in a flattened array.\n   * The order of tabs is depth-first.\n   *\n   * @public\n   * @default []\n   */\n  get allItems() {\n    return this._flatten(this.items);\n  }\n  _flatten(items) {\n    const result = [];\n    walk(items, item => {\n      if (item.hasAttribute(\"ui5-tab\") || item.hasAttribute(\"ui5-tab-separator\")) {\n        result.push(item);\n      }\n    });\n    return result;\n  }\n  _onItemSelect(selectedTabId) {\n    const selectedTabIndex = this._itemsFlat.findIndex(item => item.__id === selectedTabId);\n    const selectedTab = this._itemsFlat[selectedTabIndex];\n    const selectionSuccessful = this.selectTab(selectedTab, selectedTabIndex);\n    if (!selectionSuccessful) {\n      return;\n    }\n    // update selected property on all items\n    this._itemsFlat.forEach(item => {\n      if (!item.isSeparator) {\n        item.selected = item === selectedTab;\n      }\n    });\n  }\n  /**\n   * Fires the `tab-select` event and changes the internal reference for the currently selected tab.\n   * If the event is prevented, the current tab is not changed.\n   * @private\n   * @param selectedTab selected tab instance\n   * @param selectedTabIndex selected tab index for an array containing all tabs and sub tabs. **Note:** Use the method `allTabs` to get this array.\n   * @returns true if the tab selection is successful, false if it was prevented\n   */\n  selectTab(selectedTab, selectedTabIndex) {\n    if (!this.fireEvent(\"tab-select\", {\n      tab: selectedTab,\n      tabIndex: selectedTabIndex\n    }, true)) {\n      return false;\n    }\n    // select the tab\n    this._selectedTab = selectedTab;\n    return true;\n  }\n  slideContentDown(element) {\n    return slideDown(element).promise();\n  }\n  slideContentUp(element) {\n    return slideUp(element).promise();\n  }\n  async _onOverflowClick(e) {\n    if (e.target.classList.contains(\"ui5-tc__overflow\")) {\n      // the empty area in the overflow was clicked\n      return;\n    }\n    const overflow = e.currentTarget;\n    const isEndOverflow = overflow.classList.contains(\"ui5-tc__overflow--end\");\n    let opener;\n    if (isEndOverflow) {\n      opener = this.overflowButton[0] || this._getEndOverflowBtnDOM();\n    } else {\n      opener = this.startOverflowButton[0] || this._getStartOverflowBtnDOM();\n    }\n    await this._togglePopover(opener, true);\n  }\n  _sendOverflowPresentationInfos(items) {\n    const extraIndent = items.filter(item => !item.isSeparator).some(tab => tab.design !== SemanticColor.Default && tab.design !== SemanticColor.Neutral);\n    walk(items, (item, level) => {\n      item.receiveOverflowInfo({\n        getElementInOverflow: () => {\n          return this._findTabInOverflow(item);\n        },\n        style: {\n          [getScopedVarName(\"--_ui5-tab-indentation-level\")]: item.isSeparator ? level + 1 : level,\n          [getScopedVarName(\"--_ui5-tab-extra-indent\")]: extraIndent ? 1 : null\n        }\n      });\n    });\n  }\n  async _onOverflowKeyDown(e) {\n    const overflow = e.currentTarget;\n    const isEndOverflow = overflow.classList.contains(\"ui5-tc__overflow--end\");\n    const isStartOverflow = overflow.classList.contains(\"ui5-tc__overflow--start\");\n    if (isDown(e) || isStartOverflow && isLeft(e) || isEndOverflow && isRight(e)) {\n      e.stopPropagation();\n      e.preventDefault();\n      await this._onOverflowClick(e);\n    }\n  }\n  _setItemsForStrip() {\n    const tabStrip = this._getTabStrip();\n    let allItemsWidth = 0;\n    if (!this._selectedTab) {\n      return;\n    }\n    const itemsDomRefs = this.items.map(item => item.getDomRefInStrip());\n    // make sure the overflows are hidden\n    this._getStartOverflow().setAttribute(\"hidden\", \"\");\n    this._getEndOverflow().setAttribute(\"hidden\", \"\");\n    // show all tabs\n    for (let i = 0; i < itemsDomRefs.length; i++) {\n      itemsDomRefs[i].removeAttribute(\"hidden\");\n      itemsDomRefs[i].removeAttribute(\"start-overflow\");\n      itemsDomRefs[i].removeAttribute(\"end-overflow\");\n    }\n    itemsDomRefs.forEach(item => {\n      allItemsWidth += this._getItemWidth(item);\n    });\n    const hasOverflow = tabStrip.offsetWidth < allItemsWidth;\n    if (!hasOverflow) {\n      return;\n    }\n    if (this.isModeStartAndEnd) {\n      this._updateStartAndEndOverflow(itemsDomRefs);\n      this._updateOverflowCounters();\n    } else {\n      this._updateEndOverflow(itemsDomRefs);\n    }\n  }\n  _getRootTab(tab) {\n    while (tab?.hasAttribute(\"ui5-tab\")) {\n      if (tab.parentElement.hasAttribute(\"ui5-tabcontainer\")) {\n        break;\n      }\n      tab = tab.parentElement;\n    }\n    return tab;\n  }\n  _updateEndOverflow(itemsDomRefs) {\n    // show end overflow\n    this._getEndOverflow().removeAttribute(\"hidden\");\n    const selectedTab = this._getRootTab(this._selectedTab);\n    const selectedTabDomRef = selectedTab?.getDomRefInStrip();\n    const containerWidth = this._getTabStrip().offsetWidth;\n    const selectedItemIndexAndWidth = this._getSelectedItemIndexAndWidth(itemsDomRefs, selectedTabDomRef);\n    const lastVisibleTabIndex = this._findLastVisibleItem(itemsDomRefs, containerWidth, selectedItemIndexAndWidth.width);\n    for (let i = lastVisibleTabIndex + 1; i < itemsDomRefs.length; i++) {\n      itemsDomRefs[i].setAttribute(\"hidden\", \"\");\n      itemsDomRefs[i].setAttribute(\"end-overflow\", \"\");\n    }\n    this._endOverflowText = this.overflowButtonText;\n  }\n  _updateStartAndEndOverflow(itemsDomRefs) {\n    let containerWidth = this._getTabStrip().offsetWidth;\n    const selectedTab = this._getRootTab(this._selectedTab);\n    const selectedTabDomRef = selectedTab?.getDomRefInStrip();\n    const selectedItemIndexAndWidth = this._getSelectedItemIndexAndWidth(itemsDomRefs, selectedTabDomRef);\n    const hasStartOverflow = this._hasStartOverflow(containerWidth, itemsDomRefs, selectedItemIndexAndWidth);\n    const hasEndOverflow = this._hasEndOverflow(containerWidth, itemsDomRefs, selectedItemIndexAndWidth);\n    let firstVisible;\n    let lastVisible;\n    // has \"end\", but no \"start\" overflow\n    if (!hasStartOverflow) {\n      // show \"end\" overflow\n      this._getEndOverflow().removeAttribute(\"hidden\");\n      // width is changed\n      containerWidth = this._getTabStrip().offsetWidth;\n      lastVisible = this._findLastVisibleItem(itemsDomRefs, containerWidth, selectedItemIndexAndWidth.width);\n      for (let i = lastVisible + 1; i < itemsDomRefs.length; i++) {\n        itemsDomRefs[i].setAttribute(\"hidden\", \"\");\n        itemsDomRefs[i].setAttribute(\"end-overflow\", \"\");\n      }\n      return;\n    }\n    // has \"start\", but no \"end\" overflow\n    if (!hasEndOverflow) {\n      // show \"start\" overflow\n      this._getStartOverflow().removeAttribute(\"hidden\");\n      // width is changed\n      containerWidth = this._getTabStrip().offsetWidth;\n      firstVisible = this._findFirstVisibleItem(itemsDomRefs, containerWidth, selectedItemIndexAndWidth.width);\n      for (let i = firstVisible - 1; i >= 0; i--) {\n        itemsDomRefs[i].setAttribute(\"hidden\", \"\");\n        itemsDomRefs[i].setAttribute(\"start-overflow\", \"\");\n      }\n      return;\n    }\n    // show \"start\" overflow\n    this._getStartOverflow().removeAttribute(\"hidden\");\n    // show \"end\" overflow\n    this._getEndOverflow().removeAttribute(\"hidden\");\n    // width is changed\n    containerWidth = this._getTabStrip().offsetWidth;\n    firstVisible = this._findFirstVisibleItem(itemsDomRefs, containerWidth, selectedItemIndexAndWidth.width, selectedItemIndexAndWidth.index - 1);\n    lastVisible = this._findLastVisibleItem(itemsDomRefs, containerWidth, selectedItemIndexAndWidth.width, firstVisible);\n    for (let i = firstVisible - 1; i >= 0; i--) {\n      itemsDomRefs[i].setAttribute(\"hidden\", \"\");\n      itemsDomRefs[i].setAttribute(\"start-overflow\", \"\");\n    }\n    for (let i = lastVisible + 1; i < itemsDomRefs.length; i++) {\n      itemsDomRefs[i].setAttribute(\"hidden\", \"\");\n      itemsDomRefs[i].setAttribute(\"end-overflow\", \"\");\n    }\n  }\n  _hasStartOverflow(containerWidth, itemsDomRefs, selectedItemIndexAndWidth) {\n    if (selectedItemIndexAndWidth.index === 0) {\n      return false;\n    }\n    let leftItemsWidth = 0;\n    for (let i = selectedItemIndexAndWidth.index - 1; i >= 0; i--) {\n      leftItemsWidth += this._getItemWidth(itemsDomRefs[i]);\n    }\n    let hasStartOverflow = containerWidth < leftItemsWidth + selectedItemIndexAndWidth.width;\n    // if there is no \"start\" overflow, it has \"end\" overflow\n    // check it again with the \"end\" overflow\n    if (!hasStartOverflow) {\n      this._getEndOverflow().removeAttribute(\"hidden\");\n      containerWidth = this._getTabStrip().offsetWidth;\n      hasStartOverflow = containerWidth < leftItemsWidth + selectedItemIndexAndWidth.width;\n      this._getEndOverflow().setAttribute(\"hidden\", \"\");\n    }\n    return hasStartOverflow;\n  }\n  _hasEndOverflow(containerWidth, itemsDomRefs, selectedItemIndexAndWidth) {\n    if (selectedItemIndexAndWidth.index >= itemsDomRefs.length) {\n      return false;\n    }\n    let rightItemsWidth = 0;\n    for (let i = selectedItemIndexAndWidth.index; i < itemsDomRefs.length; i++) {\n      rightItemsWidth += this._getItemWidth(itemsDomRefs[i]);\n    }\n    let hasEndOverflow = containerWidth < rightItemsWidth + selectedItemIndexAndWidth.width;\n    // if there is no \"end\" overflow, it has \"start\" overflow\n    // check it again with the \"start\" overflow\n    if (!hasEndOverflow) {\n      this._getStartOverflow().removeAttribute(\"hidden\");\n      containerWidth = this._getTabStrip().offsetWidth;\n      hasEndOverflow = containerWidth < rightItemsWidth + selectedItemIndexAndWidth.width;\n      this._getStartOverflow().setAttribute(\"hidden\", \"\");\n    }\n    return hasEndOverflow;\n  }\n  _getItemWidth(itemDomRef) {\n    const styles = window.getComputedStyle(itemDomRef);\n    const margins = Number.parseInt(styles.marginLeft) + Number.parseInt(styles.marginRight);\n    return itemDomRef.offsetWidth + margins;\n  }\n  _getSelectedItemIndexAndWidth(itemsDomRefs, selectedTabDomRef) {\n    if (!selectedTabDomRef) {\n      return {\n        index: 0,\n        width: 0\n      };\n    }\n    let index = itemsDomRefs.indexOf(selectedTabDomRef);\n    let width = selectedTabDomRef.offsetWidth;\n    let selectedSeparator;\n    if (itemsDomRefs[index - 1] && itemsDomRefs[index - 1].realTabReference.isSeparator) {\n      selectedSeparator = itemsDomRefs[index - 1];\n      width += this._getItemWidth(selectedSeparator);\n    }\n    itemsDomRefs.splice(index, 1);\n    // if previous item is a separator - remove it\n    if (selectedSeparator) {\n      itemsDomRefs.splice(index - 1, 1);\n      index--;\n    }\n    return {\n      index,\n      width\n    };\n  }\n  _findFirstVisibleItem(itemsDomRefs, containerWidth, selectedItemWidth, startIndex) {\n    if (startIndex === undefined) {\n      startIndex = itemsDomRefs.length - 1;\n    }\n    let lastVisible = startIndex + 1;\n    for (let index = startIndex; index >= 0; index--) {\n      const itemWidth = this._getItemWidth(itemsDomRefs[index]);\n      if (containerWidth < selectedItemWidth + itemWidth) {\n        break;\n      }\n      selectedItemWidth += itemWidth;\n      lastVisible = index;\n    }\n    return lastVisible;\n  }\n  _findLastVisibleItem(itemsDomRefs, containerWidth, selectedItemWidth) {\n    let startIndex = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 0;\n    let lastVisibleIndex = startIndex - 1;\n    let index = startIndex;\n    for (; index < itemsDomRefs.length; index++) {\n      const itemWidth = this._getItemWidth(itemsDomRefs[index]);\n      if (containerWidth < selectedItemWidth + itemWidth) {\n        break;\n      }\n      selectedItemWidth += itemWidth;\n      lastVisibleIndex = index;\n    }\n    // if prev item is separator - hide it\n    const prevItem = itemsDomRefs[index - 1];\n    if (prevItem && prevItem.realTabReference.isSeparator) {\n      lastVisibleIndex -= 1;\n    }\n    return lastVisibleIndex;\n  }\n  get isModeStartAndEnd() {\n    return this.overflowMode === OverflowMode.StartAndEnd;\n  }\n  _updateOverflowCounters() {\n    let startOverflowItemsCount = 0;\n    let endOverflowItemsCount = 0;\n    this._getTabs().map(tab => tab.getDomRefInStrip()).forEach(tab => {\n      if (tab.hasAttribute(\"start-overflow\")) {\n        startOverflowItemsCount++;\n      }\n      if (tab.hasAttribute(\"end-overflow\")) {\n        endOverflowItemsCount++;\n      }\n    });\n    this._startOverflowText = `+${startOverflowItemsCount}`;\n    this._endOverflowText = `+${endOverflowItemsCount}`;\n  }\n  _getFocusableRefs() {\n    if (!this.getDomRef()) {\n      return [];\n    }\n    const focusableRefs = [];\n    if (!this._getStartOverflow().hasAttribute(\"hidden\")) {\n      focusableRefs.push(this.startOverflowButton[0] || this._getStartOverflowBtnDOM());\n    }\n    this._getTabs().forEach(tab => {\n      const ref = tab.getDomRefInStrip();\n      const focusable = ref && !ref.hasAttribute(\"hidden\");\n      if (focusable) {\n        focusableRefs.push(tab);\n      }\n    });\n    if (!this._getEndOverflow().hasAttribute(\"hidden\")) {\n      focusableRefs.push(this.overflowButton[0] || this._getEndOverflowBtnDOM());\n    }\n    return focusableRefs;\n  }\n  _getHeader() {\n    return this.shadowRoot.querySelector(`#${this._id}-header`);\n  }\n  _getTabs() {\n    return this.items.filter(item => !item.isSeparator);\n  }\n  _getPopoverOwner(opener) {\n    if (opener === this._getStartOverflowBtnDOM() || opener.slot === \"startOverflowButton\") {\n      return \"start-overflow\";\n    }\n    if (opener === this._getEndOverflowBtnDOM() || opener.slot === \"overflowButton\") {\n      return \"end-overflow\";\n    }\n    return getTabInStrip(opener);\n  }\n  _getPopoverItemsFor(targetOwner) {\n    if (targetOwner === \"start-overflow\") {\n      return this.items.filter(item => {\n        const stripRef = item.getDomRefInStrip();\n        return stripRef && stripRef.hasAttribute(\"start-overflow\");\n      });\n    }\n    if (targetOwner === \"end-overflow\") {\n      return this.items.filter(item => {\n        const stripRef = item.getDomRefInStrip();\n        return stripRef && stripRef.hasAttribute(\"end-overflow\");\n      });\n    }\n    return targetOwner.realTabReference.items;\n  }\n  _setPopoverItems(items) {\n    this._sendOverflowPresentationInfos(items);\n    const newItemsFlat = this._flatten(items);\n    if (!arraysAreEqual(this._popoverItemsFlat, newItemsFlat)) {\n      this._popoverItemsFlat = newItemsFlat;\n    }\n  }\n  async _togglePopover(opener) {\n    let setInitialFocus = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n    this.responsivePopover = await this._respPopover();\n    if (this.responsivePopover.open) {\n      this._closePopover();\n    } else {\n      await this._showPopoverAt(opener, setInitialFocus);\n    }\n  }\n  async _showPopoverAt(opener) {\n    let setInitialFocus = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n    let preventInitialFocus = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n    this._hasScheduledPopoverOpen = true;\n    this._setPopoverItems(this._getPopoverItemsFor(this._getPopoverOwner(opener)));\n    this.responsivePopover = await this._respPopover();\n    if (setInitialFocus) {\n      this._setPopoverInitialFocus();\n    }\n    if (this._hasScheduledPopoverOpen) {\n      this.responsivePopover.preventInitialFocus = preventInitialFocus;\n      this.responsivePopover.opener = opener;\n      this.responsivePopover.open = true;\n    }\n  }\n  get hasItems() {\n    const tabs = this._getTabs();\n    for (let i = 0; i < tabs.length; i++) {\n      if (tabs[i].items.length > 0) {\n        return true;\n      }\n    }\n    return false;\n  }\n  _getTabStrip() {\n    return this.shadowRoot.querySelector(`#${this._id}-tabStrip`);\n  }\n  _getStartOverflow() {\n    return this.shadowRoot.querySelector(\".ui5-tc__overflow--start\");\n  }\n  _getEndOverflow() {\n    return this.shadowRoot.querySelector(\".ui5-tc__overflow--end\");\n  }\n  _getStartOverflowBtnDOM() {\n    return this._getStartOverflow().querySelector(\"[ui5-button]\");\n  }\n  _getEndOverflowBtnDOM() {\n    return this._getEndOverflow().querySelector(\"[ui5-button]\");\n  }\n  async _respPopover() {\n    await renderFinished();\n    return this.shadowRoot.querySelector(`#${this._id}-overflowMenu`);\n  }\n  _closePopover() {\n    this._hasScheduledPopoverOpen = false;\n    if (this.responsivePopover) {\n      this.responsivePopover.open = false;\n    }\n  }\n  get dropIndicatorDOM() {\n    return this.shadowRoot.querySelector(\"[ui5-drop-indicator]\");\n  }\n  get classes() {\n    return {\n      root: {\n        \"ui5-tc-root\": true,\n        \"ui5-tc--textOnly\": this.textOnly,\n        \"ui5-tc--withAdditionalText\": this.withAdditionalText,\n        \"ui5-tc--standardTabLayout\": this.standardTabLayout\n      },\n      header: {\n        \"ui5-tc__header\": true\n      },\n      tabStrip: {\n        \"ui5-tc__tabStrip\": true\n      },\n      separator: {\n        \"ui5-tc__separator\": true\n      },\n      content: {\n        \"ui5-tc__content\": true,\n        \"ui5-tc__content--collapsed\": this._contentCollapsed\n      }\n    };\n  }\n  get mixedMode() {\n    const tabs = this._getTabs();\n    return tabs.some(item => item.icon) && tabs.some(item => item.text);\n  }\n  get textOnly() {\n    return this._getTabs().every(item => !item.icon);\n  }\n  get withAdditionalText() {\n    return this._getTabs().some(item => !!item.additionalText);\n  }\n  get standardTabLayout() {\n    return this.tabLayout === TabLayout.Standard;\n  }\n  get previousIconACCName() {\n    return TabContainer_1.i18nBundle.getText(TABCONTAINER_PREVIOUS_ICON_ACC_NAME);\n  }\n  get nextIconACCName() {\n    return TabContainer_1.i18nBundle.getText(TABCONTAINER_NEXT_ICON_ACC_NAME);\n  }\n  get overflowMenuTitle() {\n    return TabContainer_1.i18nBundle.getText(TABCONTAINER_OVERFLOW_MENU_TITLE);\n  }\n  get tabsAtTheBottom() {\n    return this.tabsPlacement === TabContainerTabsPlacement.Bottom;\n  }\n  get overflowMenuIcon() {\n    return this.tabsAtTheBottom ? \"slim-arrow-up\" : \"slim-arrow-down\";\n  }\n  get overflowButtonText() {\n    return TabContainer_1.i18nBundle.getText(TABCONTAINER_END_OVERFLOW);\n  }\n  get popoverCancelButtonText() {\n    return TabContainer_1.i18nBundle.getText(TABCONTAINER_POPOVER_CANCEL_BUTTON);\n  }\n  get accInvisibleText() {\n    return TabContainer_1.i18nBundle.getText(TABCONTAINER_SUBTABS_DESCRIPTION);\n  }\n  get overflowBtnAccessibilityAttributes() {\n    return {\n      hasPopup: \"menu\"\n    };\n  }\n  get tablistAriaDescribedById() {\n    return this.hasItems ? `${this._id}-invisibleText` : undefined;\n  }\n  static async onDefine() {\n    TabContainer_1.i18nBundle = await getI18nBundle(\"@ui5/webcomponents\");\n  }\n};\n__decorate([property({\n  type: Boolean\n})], TabContainer.prototype, \"collapsed\", void 0);\n__decorate([property()], TabContainer.prototype, \"tabLayout\", void 0);\n__decorate([property()], TabContainer.prototype, \"overflowMode\", void 0);\n__decorate([property()], TabContainer.prototype, \"headerBackgroundDesign\", void 0);\n__decorate([property()], TabContainer.prototype, \"contentBackgroundDesign\", void 0);\n__decorate([property()], TabContainer.prototype, \"tabsPlacement\", void 0);\n__decorate([property()], TabContainer.prototype, \"mediaRange\", void 0);\n__decorate([property({\n  type: Object\n})], TabContainer.prototype, \"_selectedTab\", void 0);\n__decorate([property({\n  type: Boolean,\n  noAttribute: true\n})], TabContainer.prototype, \"_animationRunning\", void 0);\n__decorate([property({\n  type: Boolean,\n  noAttribute: true\n})], TabContainer.prototype, \"_contentCollapsed\", void 0);\n__decorate([property({\n  noAttribute: true\n})], TabContainer.prototype, \"_startOverflowText\", void 0);\n__decorate([property({\n  noAttribute: true\n})], TabContainer.prototype, \"_endOverflowText\", void 0);\n__decorate([property({\n  type: Array\n})], TabContainer.prototype, \"_popoverItemsFlat\", void 0);\n__decorate([property({\n  type: Number,\n  noAttribute: true\n})], TabContainer.prototype, \"_width\", void 0);\n__decorate([slot({\n  \"default\": true,\n  type: HTMLElement,\n  individualSlots: true,\n  invalidateOnChildChange: {\n    properties: true,\n    slots: true\n  }\n})], TabContainer.prototype, \"items\", void 0);\n__decorate([slot()], TabContainer.prototype, \"overflowButton\", void 0);\n__decorate([slot()], TabContainer.prototype, \"startOverflowButton\", void 0);\n__decorate([longDragOverHandler(\"[data-ui5-stable=overflow-start],[data-ui5-stable=overflow-end],[role=tab]\")], TabContainer.prototype, \"_onHeaderDragOver\", null);\nTabContainer = TabContainer_1 = __decorate([customElement({\n  tag: \"ui5-tabcontainer\",\n  languageAware: true,\n  fastNavigation: true,\n  styles: [tabStyles, tabContainerCss, ResponsivePopoverCommonCss],\n  renderer: litRender,\n  template: TabContainerTemplate,\n  dependencies: [Button, Icon, List, ResponsivePopover, DropIndicator, ListItemCustom]\n})\n/**\n * Fired when a tab is selected.\n * @param {Tab} tab The selected `tab`.\n * @param {Integer} tabIndex The selected `tab` index in the flattened array of all tabs and their subTabs, provided by the `allItems` getter.\n * @public\n * @since 2.0.0\n * @allowPreventDefault\n */, event(\"tab-select\", {\n  detail: {\n    /**\n     * @public\n     */\n    tab: {\n      type: HTMLElement\n    },\n    /**\n     * @public\n     */\n    tabIndex: {\n      type: Number\n    }\n  }\n})\n/**\n * Fired when element is being moved over the tab container.\n *\n * If the new position is valid, prevent the default action of the event using `preventDefault()`.\n * @param {object} source Contains information about the moved element under `element` property.\n * @param {object} destination Contains information about the destination of the moved element. Has `element` and `placement` properties.\n * @public\n * @since 2.0.0\n * @allowPreventDefault\n */, event(\"move-over\", {\n  detail: {\n    /**\n     * @public\n     */\n    source: {\n      type: Object\n    },\n    /**\n     * @public\n     */\n    destination: {\n      type: Object\n    }\n  }\n})\n/**\n * Fired when element is moved to the tab container.\n *\n * **Note:** `move` event is fired only if there was a preceding `move-over` with prevented default action.\n * @param {object} source Contains information about the moved element under `element` property.\n * @param {object} destination Contains information about the destination of the moved element. Has `element` and `placement` properties.\n * @public\n * @allowPreventDefault\n */, event(\"move\", {\n  detail: {\n    /**\n     * @public\n     */\n    source: {\n      type: Object\n    },\n    /**\n     * @public\n     */\n    destination: {\n      type: Object\n    }\n  }\n})], TabContainer);\nconst isTabInStrip = el => el.localName === \"div\" && el.getAttribute(\"role\") === \"tab\";\nconst getTabInStrip = el => {\n  while (el) {\n    if (isTabInStrip(el)) {\n      return el;\n    }\n    el = el.parentElement;\n  }\n  return false;\n};\nconst _walk = (items, callback, level) => {\n  [...items].forEach(item => {\n    callback(item, level);\n    if (item.hasAttribute(\"ui5-tab\") && item.items) {\n      _walk(item.items, callback, level + 1);\n    }\n  });\n};\nconst walk = (items, callback) => {\n  _walk(items, callback, 0);\n};\nTabContainer.define();\nexport default TabContainer;","map":{"version":3,"names":["UI5Element","customElement","event","property","slot","litRender","ResizeHandler","renderFinished","slideDown","slideUp","ItemNavigation","isDesktop","isSpace","isEnter","isDown","isRight","isLeft","isUp","MediaRange","getI18nBundle","getScopedVarName","arraysAreEqual","findClosestPosition","Orientation","DragRegistry","longDragOverHandler","MovePlacement","TABCONTAINER_PREVIOUS_ICON_ACC_NAME","TABCONTAINER_NEXT_ICON_ACC_NAME","TABCONTAINER_OVERFLOW_MENU_TITLE","TABCONTAINER_END_OVERFLOW","TABCONTAINER_POPOVER_CANCEL_BUTTON","TABCONTAINER_SUBTABS_DESCRIPTION","Button","Icon","List","DropIndicator","ListItemCustom","ResponsivePopover","TabContainerTabsPlacement","SemanticColor","TabLayout","OverflowMode","TabContainerTemplate","tabContainerCss","ResponsivePopoverCommonCss","tabStyles","PAGE_UP_DOWN_SIZE","TabContainer","TabContainer_1","registerTabStyles","styles","push","constructor","collapsed","tabLayout","overflowMode","headerBackgroundDesign","contentBackgroundDesign","tabsPlacement","_animationRunning","_contentCollapsed","_startOverflowText","_endOverflowText","_popoverItemsFlat","_itemsFlat","_hasScheduledPopoverOpen","_handleResizeBound","_handleResize","bind","_itemNavigation","getItemsCallback","_getFocusableRefs","skipItemsSize","onBeforeRendering","_flatten","items","length","selectedTab","find","tab","isSeparator","selected","_selectedTab","walk","item","_selectedTabReference","_sendStripPresentationInfos","onAfterRendering","_setItemsForStrip","shadowRoot","contains","document","activeElement","focusStart","_getRootTab","setCurrentItem","responsivePopover","open","popoverItems","_getPopoverItemsFor","_getPopoverOwner","opener","_setPopoverItems","_closePopover","onEnterDOM","register","_getHeader","subscribe","_setDraggedElement","addSelfManagedArea","setAttribute","onExitDOM","deregister","unsubscribe","removeSelfManagedArea","undefined","_width","offsetWidth","_updateMediaRange","width","mediaRange","getCurrentRange","RANGESETS","RANGE_4STEPS","setsize","_getTabs","posinset","forEach","info","getElementInStrip","getDomRef","querySelector","_id","isInline","Inline","mixedMode","isTopLevelTab","some","i","receiveStripInfo","_onHeaderFocusin","e","getTabInStrip","target","realTabReference","_onDragStart","dataTransfer","HTMLElement","dropEffect","effectAllowed","_onHeaderDragEnter","preventDefault","_onHeaderDragOver","isLongDragOver","closest","dropIndicatorDOM","targetReference","draggedElement","getDraggedElement","closestPosition","_getTabStrip","querySelectorAll","clientX","Horizontal","overflowButton","popoverTarget","dropTarget","element","placements","filter","placement","On","acceptedPlacement","dragOverPrevented","fireEvent","source","destination","_showPopoverAt","_onHeaderDrop","_getStartOverflowBtnDOM","_getEndOverflowBtnDOM","focus","_onHeaderDragLeave","relatedTarget","Node","_onPopoverListMoveOver","detail","placementAccepted","_onPopoverListMove","_onTabStripClick","disabled","stopPropagation","hasAttribute","_onTabExpandButtonClick","hasOwnContent","tabs","_togglePopover","_onHeaderItemSelect","tabInstance","isTabInStrip","type","isSingleClickArea","parentElement","_setPopoverInitialFocus","selectedTabInOverflow","_getSelectedTabInOverflow","_getFirstFocusableItemInOverflow","initialFocus","content","classList","_findTabInOverflow","realTab","_onTabStripKeyDown","requiresExpandButton","_onTabStripKeyUp","_onItemSelect","id","_onOverflowListItemClick","slice","selectedTopLevel","getDomRefInStrip","allItems","result","selectedTabId","selectedTabIndex","findIndex","__id","selectionSuccessful","selectTab","tabIndex","slideContentDown","promise","slideContentUp","_onOverflowClick","overflow","currentTarget","isEndOverflow","startOverflowButton","_sendOverflowPresentationInfos","extraIndent","design","Default","Neutral","level","receiveOverflowInfo","getElementInOverflow","style","_onOverflowKeyDown","isStartOverflow","tabStrip","allItemsWidth","itemsDomRefs","map","_getStartOverflow","_getEndOverflow","removeAttribute","_getItemWidth","hasOverflow","isModeStartAndEnd","_updateStartAndEndOverflow","_updateOverflowCounters","_updateEndOverflow","selectedTabDomRef","containerWidth","selectedItemIndexAndWidth","_getSelectedItemIndexAndWidth","lastVisibleTabIndex","_findLastVisibleItem","overflowButtonText","hasStartOverflow","_hasStartOverflow","hasEndOverflow","_hasEndOverflow","firstVisible","lastVisible","_findFirstVisibleItem","index","leftItemsWidth","rightItemsWidth","itemDomRef","window","getComputedStyle","margins","Number","parseInt","marginLeft","marginRight","indexOf","selectedSeparator","splice","selectedItemWidth","startIndex","itemWidth","arguments","lastVisibleIndex","prevItem","StartAndEnd","startOverflowItemsCount","endOverflowItemsCount","focusableRefs","ref","focusable","targetOwner","stripRef","newItemsFlat","setInitialFocus","_respPopover","preventInitialFocus","hasItems","classes","root","textOnly","withAdditionalText","standardTabLayout","header","separator","icon","text","every","additionalText","Standard","previousIconACCName","i18nBundle","getText","nextIconACCName","overflowMenuTitle","tabsAtTheBottom","Bottom","overflowMenuIcon","popoverCancelButtonText","accInvisibleText","overflowBtnAccessibilityAttributes","hasPopup","tablistAriaDescribedById","onDefine","__decorate","Boolean","Object","noAttribute","Array","individualSlots","invalidateOnChildChange","properties","slots","tag","languageAware","fastNavigation","renderer","template","dependencies","el","localName","getAttribute","_walk","callback","define"],"sources":["/home/user/projects/reactproj/node_modules/@ui5/webcomponents/src/TabContainer.ts"],"sourcesContent":["import UI5Element from \"@ui5/webcomponents-base/dist/UI5Element.js\";\nimport type { AccessibilityAttributes, StyleData } from \"@ui5/webcomponents-base/dist/types.js\";\nimport customElement from \"@ui5/webcomponents-base/dist/decorators/customElement.js\";\nimport event from \"@ui5/webcomponents-base/dist/decorators/event.js\";\nimport property from \"@ui5/webcomponents-base/dist/decorators/property.js\";\nimport slot from \"@ui5/webcomponents-base/dist/decorators/slot.js\";\nimport litRender from \"@ui5/webcomponents-base/dist/renderer/LitRenderer.js\";\nimport ResizeHandler from \"@ui5/webcomponents-base/dist/delegate/ResizeHandler.js\";\nimport { renderFinished } from \"@ui5/webcomponents-base/dist/Render.js\";\nimport slideDown from \"@ui5/webcomponents-base/dist/animations/slideDown.js\";\nimport slideUp from \"@ui5/webcomponents-base/dist/animations/slideUp.js\";\nimport ItemNavigation from \"@ui5/webcomponents-base/dist/delegate/ItemNavigation.js\";\nimport {\n\tisDesktop,\n} from \"@ui5/webcomponents-base/dist/Device.js\";\nimport {\n\tisSpace,\n\tisEnter,\n\tisDown,\n\tisRight,\n\tisLeft,\n\tisUp,\n} from \"@ui5/webcomponents-base/dist/Keys.js\";\nimport MediaRange from \"@ui5/webcomponents-base/dist/MediaRange.js\";\nimport { getI18nBundle } from \"@ui5/webcomponents-base/dist/i18nBundle.js\";\nimport type I18nBundle from \"@ui5/webcomponents-base/dist/i18nBundle.js\";\nimport { getScopedVarName } from \"@ui5/webcomponents-base/dist/CustomElementsScope.js\";\nimport \"@ui5/webcomponents-icons/dist/slim-arrow-up.js\";\nimport \"@ui5/webcomponents-icons/dist/slim-arrow-down.js\";\nimport arraysAreEqual from \"@ui5/webcomponents-base/dist/util/arraysAreEqual.js\";\nimport findClosestPosition from \"@ui5/webcomponents-base/dist/util/dragAndDrop/findClosestPosition.js\";\nimport Orientation from \"@ui5/webcomponents-base/dist/types/Orientation.js\";\nimport DragRegistry from \"@ui5/webcomponents-base/dist/util/dragAndDrop/DragRegistry.js\";\nimport type { SetDraggedElementFunction } from \"@ui5/webcomponents-base/dist/util/dragAndDrop/DragRegistry.js\";\nimport longDragOverHandler from \"@ui5/webcomponents-base/dist/util/dragAndDrop/longDragOverHandler.js\";\nimport MovePlacement from \"@ui5/webcomponents-base/dist/types/MovePlacement.js\";\nimport {\n\tTABCONTAINER_PREVIOUS_ICON_ACC_NAME,\n\tTABCONTAINER_NEXT_ICON_ACC_NAME,\n\tTABCONTAINER_OVERFLOW_MENU_TITLE,\n\tTABCONTAINER_END_OVERFLOW,\n\tTABCONTAINER_POPOVER_CANCEL_BUTTON,\n\tTABCONTAINER_SUBTABS_DESCRIPTION,\n} from \"./generated/i18n/i18n-defaults.js\";\nimport Button from \"./Button.js\";\nimport Icon from \"./Icon.js\";\nimport List from \"./List.js\";\nimport DropIndicator from \"./DropIndicator.js\";\nimport type Tab from \"./Tab.js\";\nimport type { TabInStrip, TabInOverflow } from \"./Tab.js\";\nimport type { TabSeparatorInOverflow, TabSeparatorInStrip } from \"./TabSeparator.js\";\nimport type { ListItemClickEventDetail, ListMoveEventDetail } from \"./List.js\";\nimport ListItemCustom from \"./ListItemCustom.js\";\nimport ResponsivePopover from \"./ResponsivePopover.js\";\nimport TabContainerTabsPlacement from \"./types/TabContainerTabsPlacement.js\";\nimport SemanticColor from \"./types/SemanticColor.js\";\nimport type BackgroundDesign from \"./types/BackgroundDesign.js\";\nimport TabLayout from \"./types/TabLayout.js\";\nimport OverflowMode from \"./types/OverflowMode.js\";\nimport type { IButton } from \"./Button.js\";\n\n// Templates\nimport TabContainerTemplate from \"./generated/templates/TabContainerTemplate.lit.js\";\n\n// Styles\nimport tabContainerCss from \"./generated/themes/TabContainer.css.js\";\nimport ResponsivePopoverCommonCss from \"./generated/themes/ResponsivePopoverCommon.css.js\";\n\ntype TabContainerPopoverOwner = \"start-overflow\" | \"end-overflow\" | TabInStrip;\n\nconst tabStyles: Array<StyleData> = [];\nconst PAGE_UP_DOWN_SIZE = 5;\n\ntype TabContainerStripInfo = {\n\tgetElementInStrip: () => HTMLElement | undefined;\n\tisInline?: boolean;\n\tmixedMode?: boolean;\n\tposinset?: number;\n\tsetsize?: number;\n\tisTopLevelTab?: boolean;\n}\n\ntype TabContainerOverflowInfo = {\n\tgetElementInOverflow: () => HTMLElement | undefined;\n\tstyle: Record<string, any>;\n}\n\ntype TabContainerTabSelectEventDetail = {\n\ttab: Tab;\n\ttabIndex: number;\n}\n\ntype TabContainerMoveEventDetail = {\n\tsource: {\n\t\telement: HTMLElement;\n\t},\n\tdestination: {\n\t\telement: HTMLElement;\n\t\tplacement: `${MovePlacement}`\n\t}\n}\n\n/**\n * Interface for components that may be slotted inside `ui5-tabcontainer` as items\n *\n * **Note:** Use directly `ui5-tab` or `ui5-tab-seprator`. Implementing the interface does not guarantee that the class can work as a tab.\n * @public\n */\ninterface ITab extends UI5Element {\n\tisSeparator: boolean;\n\treceiveStripInfo: (arg0: TabContainerStripInfo) => void;\n\treceiveOverflowInfo: (arg0: TabContainerOverflowInfo) => void;\n\tgetDomRefInStrip: () => HTMLElement | undefined;\n\titems?: Array<ITab>;\n}\n\n/**\n * @class\n *\n * ### Overview\n *\n * The `ui5-tabcontainer` represents a collection of tabs with associated content.\n * Navigation through the tabs changes the content display of the currently active content area.\n * A tab can be labeled with text only, or icons with text.\n *\n * ### Structure\n *\n * The `ui5-tabcontainer` can hold two types of entities:\n *\n * - `ui5-tab` - contains all the information on an item (text and icon)\n * - `ui5-tab-separator` - used to separate tabs with a line\n *\n * ### Hierarchies\n * Multiple sub tabs could be placed underneath one main tab. Nesting allows deeper hierarchies with indentations\n * to indicate the level of each nested tab. When a tab has both sub tabs and own content its click area is split\n * to allow the user to display the content or alternatively to expand / collapse the list of sub tabs.\n *\n * ### Keyboard Handling\n *\n * #### Fast Navigation\n * This component provides a build in fast navigation group which can be used via [F6] / [Shift] + [F6] / [Ctrl] + [Alt/Option] / [Down] or [Ctrl] + [Alt/Option] + [Up].\n * In order to use this functionality, you need to import the following module:\n * `import \"@ui5/webcomponents-base/dist/features/F6Navigation.js\"`\n *\n * ### ES6 Module Import\n *\n * `import \"@ui5/webcomponents/dist/TabContainer.js\";`\n *\n * `import \"@ui5/webcomponents/dist/Tab.js\";` (for `ui5-tab`)\n *\n * `import \"@ui5/webcomponents/dist/TabSeparator.js\";` (for `ui5-tab-separator`)\n * @constructor\n * @extends UI5Element\n * @public\n * @csspart content - Used to style the content of the component\n * @csspart tabstrip - Used to style the tabstrip of the component\n */\n@customElement({\n\ttag: \"ui5-tabcontainer\",\n\tlanguageAware: true,\n\tfastNavigation: true,\n\tstyles: [\n\t\ttabStyles,\n\t\ttabContainerCss,\n\t\tResponsivePopoverCommonCss,\n\t],\n\trenderer: litRender,\n\ttemplate: TabContainerTemplate,\n\tdependencies: [\n\t\tButton,\n\t\tIcon,\n\t\tList,\n\t\tResponsivePopover,\n\t\tDropIndicator,\n\t\tListItemCustom,\n\t],\n})\n/**\n * Fired when a tab is selected.\n * @param {Tab} tab The selected `tab`.\n * @param {Integer} tabIndex The selected `tab` index in the flattened array of all tabs and their subTabs, provided by the `allItems` getter.\n * @public\n * @since 2.0.0\n * @allowPreventDefault\n */\n@event<TabContainerTabSelectEventDetail>(\"tab-select\", {\n\tdetail: {\n\t\t/**\n\t\t * @public\n\t\t */\n\t\ttab: { type: HTMLElement },\n\t\t/**\n\t\t * @public\n\t\t */\n\t\ttabIndex: { type: Number },\n\t},\n})\n/**\n * Fired when element is being moved over the tab container.\n *\n * If the new position is valid, prevent the default action of the event using `preventDefault()`.\n * @param {object} source Contains information about the moved element under `element` property.\n * @param {object} destination Contains information about the destination of the moved element. Has `element` and `placement` properties.\n * @public\n * @since 2.0.0\n * @allowPreventDefault\n */\n@event<TabContainerMoveEventDetail>(\"move-over\", {\n\tdetail: {\n\t\t/**\n\t\t * @public\n\t\t */\n\t\tsource: { type: Object },\n\t\t/**\n\t\t * @public\n\t\t */\n\t\tdestination: { type: Object },\n\t},\n})\n/**\n * Fired when element is moved to the tab container.\n *\n * **Note:** `move` event is fired only if there was a preceding `move-over` with prevented default action.\n * @param {object} source Contains information about the moved element under `element` property.\n * @param {object} destination Contains information about the destination of the moved element. Has `element` and `placement` properties.\n * @public\n * @allowPreventDefault\n */\n@event<TabContainerMoveEventDetail>(\"move\", {\n\tdetail: {\n\t\t/**\n\t\t * @public\n\t\t */\n\t\tsource: { type: Object },\n\t\t/**\n\t\t * @public\n\t\t */\n\t\tdestination: { type: Object },\n\t},\n})\nclass TabContainer extends UI5Element {\n\t/**\n\t * Defines whether the tab content is collapsed.\n\t * @default false\n\t * @public\n\t */\n\t@property({ type: Boolean })\n\tcollapsed = false;\n\n\t/**\n\t * Defines the alignment of the content and the `additionalText` of a tab.\n\t *\n\t * **Note:**\n\t * The content and the `additionalText` would be displayed vertically by default,\n\t * but when set to `Inline`, they would be displayed horizontally.\n\t * @default \"Standard\"\n\t * @public\n\t */\n\t@property()\n\ttabLayout: `${TabLayout}` = \"Standard\";\n\n\t/**\n\t * Defines the overflow mode of the header (the tab strip). If you have a large number of tabs, only the tabs that can fit on screen will be visible.\n\t * All other tabs that can 't fit on the screen are available in an overflow tab \"More\".\n\t *\n\t * **Note:**\n\t * Only one overflow at the end would be displayed by default,\n\t * but when set to `StartAndEnd`, there will be two overflows on both ends, and tab order will not change on tab selection.\n\t * @default \"End\"\n\t * @since 1.1.0\n\t * @public\n\t */\n\t@property()\n\toverflowMode: `${OverflowMode}` = \"End\";\n\n\t/**\n\t * Sets the background color of the Tab Container's header as `Solid`, `Transparent`, or `Translucent`.\n\t * @default \"Solid\"\n\t * @since 1.10.0\n\t * @public\n\t */\n\t@property()\n\theaderBackgroundDesign: `${BackgroundDesign}` = \"Solid\";\n\n\t/**\n\t * Sets the background color of the Tab Container's content as `Solid`, `Transparent`, or `Translucent`.\n\t * @default \"Solid\"\n\t * @since 1.10.0\n\t * @public\n\t */\n\t@property()\n\tcontentBackgroundDesign: `${BackgroundDesign}` = \"Solid\";\n\n\t/**\n\t * Defines the placement of the tab strip relative to the actual tabs' content.\n\t *\n\t * **Note:** By default the tab strip is displayed above the tabs' content area and this is the recommended\n\t * layout for most scenarios. Set to `Bottom` only when the component is at the\n\t * bottom of the page and you want the tab strip to act as a menu.\n\t * @default \"Top\"\n\t * @since 1.0.0-rc.7\n\t * @private\n\t */\n\t@property()\n\ttabsPlacement: `${TabContainerTabsPlacement}` = \"Top\";\n\n\t/**\n\t * Defines the current media query size.\n\t * @private\n\t */\n\t@property()\n\tmediaRange?: string;\n\n\t@property({ type: Object })\n\t_selectedTab?: Tab;\n\n\t@property({ type: Boolean, noAttribute: true })\n\t_animationRunning = false;\n\n\t@property({ type: Boolean, noAttribute: true })\n\t_contentCollapsed = false;\n\n\t@property({ noAttribute: true })\n\t_startOverflowText = \"0\"\n\n\t@property({ noAttribute: true })\n\t_endOverflowText = \"More\";\n\n\t@property({ type: Array })\n\t_popoverItemsFlat: Array<ITab> = [];\n\n\t@property({ type: Number, noAttribute: true })\n\t_width?: number;\n\n\t/**\n\t * Defines the tabs.\n\t *\n\t * **Note:** Use `ui5-tab` and `ui5-tab-separator` for the intended design.\n\t * @public\n\t */\n\t@slot({\n\t\t\"default\": true,\n\t\ttype: HTMLElement,\n\t\tindividualSlots: true,\n\t\tinvalidateOnChildChange: {\n\t\t\tproperties: true,\n\t\t\tslots: true,\n\t\t},\n\t})\n\titems!: Array<ITab>;\n\n\t/**\n\t * Defines the button which will open the overflow menu. If nothing is provided to this slot,\n\t * the default button will be used.\n\t * @public\n\t * @since 1.0.0-rc.9\n\t */\n\t@slot()\n\toverflowButton!: Array<IButton>;\n\n\t/**\n\t * Defines the button which will open the start overflow menu if available. If nothing is provided to this slot,\n\t * the default button will be used.\n\t * @public\n\t * @since 1.1.0\n\t */\n\t@slot()\n\tstartOverflowButton!: Array<IButton>;\n\n\t_itemNavigation: ItemNavigation;\n\t_itemsFlat: Array<ITab> = [];\n\tresponsivePopover?: ResponsivePopover;\n\t_hasScheduledPopoverOpen = false;\n\t_handleResizeBound: () => void;\n\t_setDraggedElement?: SetDraggedElementFunction;\n\n\tstatic registerTabStyles(styles: StyleData) {\n\t\ttabStyles.push(styles);\n\t}\n\n\tstatic i18nBundle: I18nBundle;\n\n\tconstructor() {\n\t\tsuper();\n\n\t\tthis._handleResizeBound = this._handleResize.bind(this);\n\n\t\t// Init ItemNavigation\n\t\tthis._itemNavigation = new ItemNavigation(this, {\n\t\t\tgetItemsCallback: () => this._getFocusableRefs(),\n\t\t\tskipItemsSize: PAGE_UP_DOWN_SIZE,\n\t\t});\n\t}\n\n\tonBeforeRendering() {\n\t\tthis._itemsFlat = this._flatten(this.items);\n\t\tif (!this._itemsFlat.length) {\n\t\t\treturn;\n\t\t}\n\n\t\t// update selected tab\n\t\tconst selectedTab = this._itemsFlat.find((tab): tab is Tab => !tab.isSeparator && (tab as Tab).selected);\n\n\t\tif (selectedTab) {\n\t\t\tthis._selectedTab = selectedTab;\n\t\t} else {\n\t\t\tthis._selectedTab = this._itemsFlat[0] as Tab;\n\t\t}\n\n\t\twalk(this.items, item => {\n\t\t\tif (!item.isSeparator) {\n\t\t\t\t(item as Tab)._selectedTabReference = this._selectedTab;\n\t\t\t}\n\t\t});\n\n\t\tthis._sendStripPresentationInfos(this.items);\n\n\t\tif (!this._animationRunning) {\n\t\t\tthis._contentCollapsed = this.collapsed;\n\t\t}\n\t}\n\n\tonAfterRendering() {\n\t\tif (!this.items.length) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._setItemsForStrip();\n\n\t\tif (!this.shadowRoot!.contains(document.activeElement)) {\n\t\t\tconst focusStart = this._getRootTab(this._selectedTab);\n\n\t\t\tif (focusStart) {\n\t\t\t\tthis._itemNavigation.setCurrentItem(focusStart);\n\t\t\t}\n\t\t}\n\n\t\tif (this.responsivePopover?.open) {\n\t\t\tconst popoverItems = this._getPopoverItemsFor(this._getPopoverOwner(this.responsivePopover.opener as HTMLElement));\n\n\t\t\tif (popoverItems.length) {\n\t\t\t\tthis._setPopoverItems(popoverItems);\n\t\t\t} else {\n\t\t\t\tthis._closePopover();\n\t\t\t}\n\t\t}\n\t}\n\n\tonEnterDOM() {\n\t\tResizeHandler.register(this._getHeader(), this._handleResizeBound);\n\t\tDragRegistry.subscribe(this);\n\t\tthis._setDraggedElement = DragRegistry.addSelfManagedArea(this);\n\t\tif (isDesktop()) {\n\t\t\tthis.setAttribute(\"desktop\", \"\");\n\t\t}\n\t}\n\n\tonExitDOM() {\n\t\tResizeHandler.deregister(this._getHeader(), this._handleResizeBound);\n\t\tDragRegistry.unsubscribe(this);\n\t\tDragRegistry.removeSelfManagedArea(this);\n\t\tthis._setDraggedElement = undefined;\n\t}\n\n\t_handleResize() {\n\t\tif (this.responsivePopover && this.responsivePopover.open) {\n\t\t\tthis._closePopover();\n\t\t}\n\n\t\t// invalidate\n\t\tthis._width = this.offsetWidth;\n\t\tthis._updateMediaRange(this._width);\n\t}\n\n\t_updateMediaRange(width: number) {\n\t\tthis.mediaRange = MediaRange.getCurrentRange(MediaRange.RANGESETS.RANGE_4STEPS, width);\n\t}\n\n\t_sendStripPresentationInfos(items: Array<ITab>) {\n\t\tconst setsize = this._getTabs().length;\n\t\tlet posinset = 1;\n\n\t\titems.forEach(item => {\n\t\t\tlet info: TabContainerStripInfo = {\n\t\t\t\tgetElementInStrip: () => this.getDomRef()!.querySelector<HTMLElement>(`[id=\"${item._id}\"]`)!,\n\t\t\t};\n\n\t\t\tif (!item.isSeparator) {\n\t\t\t\tinfo = {\n\t\t\t\t\t...info,\n\t\t\t\t\tisInline: this.tabLayout === TabLayout.Inline,\n\t\t\t\t\tmixedMode: this.mixedMode,\n\t\t\t\t\tposinset,\n\t\t\t\t\tsetsize,\n\t\t\t\t\tisTopLevelTab: items.some(i => i === item),\n\t\t\t\t};\n\n\t\t\t\tposinset++;\n\t\t\t}\n\n\t\t\titem.receiveStripInfo(info);\n\t\t});\n\t}\n\n\t_onHeaderFocusin(e: FocusEvent) {\n\t\tconst tab = getTabInStrip(e.target as HTMLElement);\n\n\t\tif (tab) {\n\t\t\tthis._itemNavigation.setCurrentItem(tab.realTabReference);\n\t\t}\n\t}\n\n\t_onDragStart(e: DragEvent) {\n\t\tif (!e.dataTransfer || !(e.target instanceof HTMLElement)) {\n\t\t\treturn;\n\t\t}\n\n\t\te.dataTransfer.dropEffect = \"move\";\n\t\te.dataTransfer.effectAllowed = \"move\";\n\n\t\tthis._setDraggedElement!((e.target as TabInStrip).realTabReference);\n\t}\n\n\t_onHeaderDragEnter(e: DragEvent) {\n\t\te.preventDefault();\n\t}\n\n\t@longDragOverHandler(\"[data-ui5-stable=overflow-start],[data-ui5-stable=overflow-end],[role=tab]\")\n\t_onHeaderDragOver(e: DragEvent, isLongDragOver: boolean) {\n\t\tif (!(e.target instanceof HTMLElement) || !e.target.closest(\"[data-ui5-stable=overflow-start],[data-ui5-stable=overflow-end],[role=tab],[role=separator]\")) {\n\t\t\tthis.dropIndicatorDOM!.targetReference = null;\n\t\t\treturn;\n\t\t}\n\n\t\tconst draggedElement = DragRegistry.getDraggedElement();\n\t\tconst closestPosition = findClosestPosition(\n\t\t\t[...this._getTabStrip().querySelectorAll<HTMLElement>(`[role=\"tab\"]:not([hidden])`)],\n\t\t\te.clientX,\n\t\t\tOrientation.Horizontal,\n\t\t);\n\t\tconst overflowButton = e.target.closest<HTMLElement>(\"[data-ui5-stable=overflow-start],[data-ui5-stable=overflow-end]\");\n\t\tlet popoverTarget = null;\n\n\t\tif (overflowButton) {\n\t\t\tpopoverTarget = overflowButton;\n\t\t\te.preventDefault();\n\t\t} else if (closestPosition) {\n\t\t\tconst dropTarget = (closestPosition.element as TabInStrip).realTabReference;\n\t\t\tlet placements = closestPosition.placements;\n\n\t\t\tif (dropTarget === draggedElement) {\n\t\t\t\tplacements = placements.filter(placement => placement !== MovePlacement.On);\n\t\t\t}\n\n\t\t\tconst acceptedPlacement = placements.find(placement => {\n\t\t\t\tconst dragOverPrevented = !this.fireEvent<TabContainerMoveEventDetail>(\"move-over\", {\n\t\t\t\t\tsource: {\n\t\t\t\t\t\telement: draggedElement!,\n\t\t\t\t\t},\n\t\t\t\t\tdestination: {\n\t\t\t\t\t\telement: dropTarget,\n\t\t\t\t\t\tplacement,\n\t\t\t\t\t},\n\t\t\t\t}, true);\n\n\t\t\t\tif (dragOverPrevented) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\tthis.dropIndicatorDOM!.targetReference = closestPosition.element;\n\t\t\t\t\tthis.dropIndicatorDOM!.placement = placement;\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\n\t\t\t\treturn false;\n\t\t\t});\n\n\t\t\tif (acceptedPlacement === MovePlacement.On && (closestPosition.element as TabInStrip).realTabReference.items.length) {\n\t\t\t\tpopoverTarget = closestPosition.element;\n\t\t\t} else if (!acceptedPlacement) {\n\t\t\t\tthis.dropIndicatorDOM!.targetReference = null;\n\t\t\t}\n\t\t}\n\n\t\tif (popoverTarget && isLongDragOver) {\n\t\t\tthis._showPopoverAt(popoverTarget, false, true);\n\t\t} else {\n\t\t\tthis._closePopover();\n\t\t}\n\t}\n\n\t_onHeaderDrop(e: DragEvent) {\n\t\tif (e.target === this._getStartOverflowBtnDOM() || e.target === this._getEndOverflowBtnDOM()) {\n\t\t\treturn;\n\t\t}\n\n\t\te.preventDefault();\n\t\tconst draggedElement = DragRegistry.getDraggedElement()!;\n\n\t\tthis.fireEvent<TabContainerMoveEventDetail>(\"move\", {\n\t\t\tsource: {\n\t\t\t\telement: draggedElement,\n\t\t\t},\n\t\t\tdestination: {\n\t\t\t\telement: (this.dropIndicatorDOM!.targetReference as TabInStrip).realTabReference,\n\t\t\t\tplacement: this.dropIndicatorDOM!.placement,\n\t\t\t},\n\t\t});\n\n\t\tthis.dropIndicatorDOM!.targetReference = null;\n\t\tdraggedElement.focus();\n\t}\n\n\t_onHeaderDragLeave(e: DragEvent) {\n\t\tif (e.relatedTarget instanceof Node && this.shadowRoot!.contains(e.relatedTarget)) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.dropIndicatorDOM!.targetReference = null;\n\t}\n\n\t_onPopoverListMoveOver(e: CustomEvent<ListMoveEventDetail>) {\n\t\tconst { destination } = e.detail;\n\t\tconst draggedElement = DragRegistry.getDraggedElement()!;\n\t\tconst dropTarget = (destination.element as TabInStrip | TabSeparatorInStrip).realTabReference;\n\n\t\tif (destination.placement === MovePlacement.On && (dropTarget.isSeparator || draggedElement === dropTarget)) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (draggedElement !== dropTarget && draggedElement.contains(dropTarget)) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst placementAccepted = !this.fireEvent<TabContainerMoveEventDetail>(\"move-over\", {\n\t\t\tsource: {\n\t\t\t\telement: draggedElement,\n\t\t\t},\n\t\t\tdestination: {\n\t\t\t\telement: dropTarget,\n\t\t\t\tplacement: destination.placement,\n\t\t\t},\n\t\t}, true);\n\n\t\tif (placementAccepted) {\n\t\t\te.preventDefault();\n\t\t} else {\n\t\t\tthis.dropIndicatorDOM!.targetReference = null;\n\t\t}\n\t}\n\n\t_onPopoverListMove(e: CustomEvent<ListMoveEventDetail>) {\n\t\tconst { destination } = e.detail;\n\t\tconst draggedElement = DragRegistry.getDraggedElement()!;\n\n\t\te.preventDefault();\n\n\t\tthis.fireEvent<TabContainerMoveEventDetail>(\"move\", {\n\t\t\tsource: {\n\t\t\t\telement: draggedElement,\n\t\t\t},\n\t\t\tdestination: {\n\t\t\t\telement: (destination.element as TabInStrip).realTabReference,\n\t\t\t\tplacement: destination.placement,\n\t\t\t},\n\t\t}, true);\n\n\t\tthis.dropIndicatorDOM!.targetReference = null;\n\t\tdraggedElement.focus();\n\t}\n\n\tasync _onTabStripClick(e: Event) {\n\t\tconst tab = getTabInStrip(e.target as HTMLElement);\n\t\tif (!tab || tab.realTabReference.disabled) {\n\t\t\treturn;\n\t\t}\n\n\t\te.stopPropagation();\n\t\te.preventDefault();\n\n\t\tif ((e.target as HTMLElement).hasAttribute(\"ui5-button\")) {\n\t\t\tthis._onTabExpandButtonClick(e);\n\t\t\treturn;\n\t\t}\n\n\t\tif (!tab.realTabReference.hasOwnContent && tab.realTabReference.tabs.length) {\n\t\t\tawait this._togglePopover(tab);\n\n\t\t\treturn;\n\t\t}\n\n\t\tthis._onHeaderItemSelect(tab);\n\t}\n\n\tasync _onTabExpandButtonClick(e: Event) {\n\t\te.stopPropagation();\n\t\te.preventDefault();\n\n\t\tlet tabInstance: TabInStrip;\n\n\t\tif (isTabInStrip(e.target as HTMLElement)) {\n\t\t\ttabInstance = e.target as TabInStrip;\n\t\t} else {\n\t\t\ttabInstance = getTabInStrip(e.target as HTMLElement) as TabInStrip;\n\t\t}\n\n\t\tif (tabInstance) {\n\t\t\ttabInstance.focus();\n\t\t}\n\n\t\tlet opener = e.target as HTMLElement;\n\n\t\tif (e.type === \"keydown\" && !(e.target as TabInStrip).realTabReference.isSingleClickArea) {\n\t\t\topener = (e.target as TabInStrip).querySelector(\".ui5-tab-expand-button [ui5-button]\")!;\n\t\t}\n\n\t\t// if clicked between the expand button and the tab\n\t\tif (!tabInstance) {\n\t\t\tthis._onHeaderItemSelect(opener.parentElement as HTMLElement);\n\t\t\treturn;\n\t\t}\n\n\t\tawait this._togglePopover(opener, true);\n\t}\n\n\t_setPopoverInitialFocus() {\n\t\tconst selectedTabInOverflow = this._getSelectedTabInOverflow();\n\t\tconst tab = selectedTabInOverflow || this._getFirstFocusableItemInOverflow();\n\n\t\tthis.responsivePopover!.initialFocus = `${tab.realTabReference._id}-li`;\n\t}\n\n\t_getSelectedTabInOverflow() {\n\t\treturn <TabInOverflow>(<List> this.responsivePopover!.content[0]).items.find(item => {\n\t\t\treturn (<TabInOverflow>item).realTabReference && (<TabInOverflow>item).realTabReference.selected;\n\t\t});\n\t}\n\n\t_getFirstFocusableItemInOverflow() {\n\t\treturn <TabInOverflow>(<List> this.responsivePopover!.content[0]).items.find(item => item.classList.contains(\"ui5-tab-overflow-item\"));\n\t}\n\n\t_findTabInOverflow(realTab: ITab) {\n\t\tif (!this.responsivePopover!.open) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\treturn ((this.responsivePopover!.content[0] as List).items as Array<TabInOverflow | TabSeparatorInOverflow>).find(item => item.realTabReference === realTab);\n\t}\n\n\t_onTabStripKeyDown(e: KeyboardEvent) {\n\t\tconst tab = getTabInStrip(e.target as HTMLElement);\n\t\tif (!tab || tab.realTabReference.disabled) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (isEnter(e)) {\n\t\t\tif (tab.realTabReference.isSingleClickArea) {\n\t\t\t\tthis._onTabStripClick(e);\n\t\t\t} else {\n\t\t\t\tthis._onHeaderItemSelect(tab);\n\t\t\t}\n\t\t}\n\n\t\tif (isSpace(e)) {\n\t\t\te.preventDefault(); // prevent scrolling\n\t\t}\n\n\t\tif (isDown(e) || isUp(e)) {\n\t\t\tif (tab.realTabReference.requiresExpandButton) {\n\t\t\t\tthis._onTabExpandButtonClick(e);\n\t\t\t}\n\t\t\tif (tab.realTabReference.isSingleClickArea) {\n\t\t\t\tthis._onTabStripClick(e);\n\t\t\t}\n\t\t}\n\t}\n\n\t_onTabStripKeyUp(e: KeyboardEvent) {\n\t\tconst tab = getTabInStrip(e.target as HTMLElement);\n\t\tif (!tab || tab.realTabReference.disabled) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (isSpace(e)) {\n\t\t\te.preventDefault();\n\t\t\tif (tab.realTabReference.isSingleClickArea) {\n\t\t\t\tthis._onTabStripClick(e);\n\t\t\t} else {\n\t\t\t\tthis._onHeaderItemSelect(tab);\n\t\t\t}\n\t\t}\n\t}\n\n\t_onHeaderItemSelect(tab: HTMLElement) {\n\t\tif (!tab.hasAttribute(\"disabled\")) {\n\t\t\tthis._onItemSelect(tab.id);\n\t\t}\n\t}\n\n\tasync _onOverflowListItemClick(e: CustomEvent<ListItemClickEventDetail>) {\n\t\te.preventDefault(); // cancel the item selection\n\n\t\tthis._onItemSelect(e.detail.item.id.slice(0, -3)); // strip \"-li\" from end of id\n\t\tthis._closePopover();\n\t\tawait renderFinished();\n\n\t\tconst selectedTopLevel = this._getRootTab(this._selectedTab);\n\t\tselectedTopLevel?.getDomRefInStrip()!.focus();\n\t}\n\n\t/**\n\t * Returns all slotted tabs and their subTabs in a flattened array.\n\t * The order of tabs is depth-first.\n\t *\n\t * @public\n\t * @default []\n\t */\n\tget allItems() : Array<ITab> {\n\t\treturn this._flatten(this.items);\n\t}\n\n\t_flatten(items: Array<ITab>) {\n\t\tconst result: Array<ITab> = [];\n\n\t\twalk(items, item => {\n\t\t\tif (item.hasAttribute(\"ui5-tab\") || item.hasAttribute(\"ui5-tab-separator\")) {\n\t\t\t\tresult.push(item);\n\t\t\t}\n\t\t});\n\n\t\treturn result;\n\t}\n\n\t_onItemSelect(selectedTabId: string) {\n\t\tconst selectedTabIndex = this._itemsFlat.findIndex(item => item.__id === selectedTabId);\n\t\tconst selectedTab = this._itemsFlat[selectedTabIndex] as Tab;\n\n\t\tconst selectionSuccessful = this.selectTab(selectedTab, selectedTabIndex);\n\t\tif (!selectionSuccessful) {\n\t\t\treturn;\n\t\t}\n\n\t\t// update selected property on all items\n\t\tthis._itemsFlat.forEach(item => {\n\t\t\tif (!item.isSeparator) {\n\t\t\t\t(item as Tab).selected = item === selectedTab;\n\t\t\t}\n\t\t});\n\t}\n\n\t/**\n\t * Fires the `tab-select` event and changes the internal reference for the currently selected tab.\n\t * If the event is prevented, the current tab is not changed.\n\t * @private\n\t * @param selectedTab selected tab instance\n\t * @param selectedTabIndex selected tab index for an array containing all tabs and sub tabs. **Note:** Use the method `allTabs` to get this array.\n\t * @returns true if the tab selection is successful, false if it was prevented\n\t */\n\tselectTab(selectedTab: Tab, selectedTabIndex: number) {\n\t\tif (!this.fireEvent<TabContainerTabSelectEventDetail>(\"tab-select\", { tab: selectedTab, tabIndex: selectedTabIndex }, true)) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// select the tab\n\t\tthis._selectedTab = selectedTab;\n\t\treturn true;\n\t}\n\n\tslideContentDown(element: HTMLElement) {\n\t\treturn slideDown(element).promise();\n\t}\n\n\tslideContentUp(element: HTMLElement) {\n\t\treturn slideUp(element).promise();\n\t}\n\n\tasync _onOverflowClick(e: Event) {\n\t\tif ((e.target as HTMLElement).classList.contains(\"ui5-tc__overflow\")) {\n\t\t\t// the empty area in the overflow was clicked\n\t\t\treturn;\n\t\t}\n\n\t\tconst overflow = e.currentTarget as HTMLElement;\n\t\tconst isEndOverflow = overflow.classList.contains(\"ui5-tc__overflow--end\");\n\t\tlet opener;\n\n\t\tif (isEndOverflow) {\n\t\t\topener = this.overflowButton[0] || this._getEndOverflowBtnDOM();\n\t\t} else {\n\t\t\topener = this.startOverflowButton[0] || this._getStartOverflowBtnDOM();\n\t\t}\n\n\t\tawait this._togglePopover(opener, true);\n\t}\n\n\t_sendOverflowPresentationInfos(items: Array<ITab>) {\n\t\tconst extraIndent = items\n\t\t\t.filter((item): item is Tab => !item.isSeparator)\n\t\t\t.some(tab => tab.design !== SemanticColor.Default && tab.design !== SemanticColor.Neutral);\n\n\t\twalk(items, (item, level) => {\n\t\t\titem.receiveOverflowInfo({\n\t\t\t\tgetElementInOverflow: () => {\n\t\t\t\t\treturn this._findTabInOverflow(item);\n\t\t\t\t},\n\t\t\t\tstyle: {\n\t\t\t\t\t[getScopedVarName(\"--_ui5-tab-indentation-level\")]: item.isSeparator ? level + 1 : level,\n\t\t\t\t\t[getScopedVarName(\"--_ui5-tab-extra-indent\")]: extraIndent ? 1 : null,\n\t\t\t\t},\n\t\t\t});\n\t\t});\n\t}\n\n\tasync _onOverflowKeyDown(e: KeyboardEvent) {\n\t\tconst overflow = e.currentTarget as HTMLElement;\n\t\tconst isEndOverflow = overflow.classList.contains(\"ui5-tc__overflow--end\");\n\t\tconst isStartOverflow = overflow.classList.contains(\"ui5-tc__overflow--start\");\n\n\t\tif (isDown(e) || (isStartOverflow && isLeft(e)) || (isEndOverflow && isRight(e))) {\n\t\t\te.stopPropagation();\n\t\t\te.preventDefault();\n\t\t\tawait this._onOverflowClick(e);\n\t\t}\n\t}\n\n\t_setItemsForStrip() {\n\t\tconst tabStrip = this._getTabStrip();\n\t\tlet allItemsWidth = 0;\n\n\t\tif (!this._selectedTab) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst itemsDomRefs = this.items.map(item => item.getDomRefInStrip()) as Array<TabInStrip | TabSeparatorInStrip>;\n\n\t\t// make sure the overflows are hidden\n\t\tthis._getStartOverflow().setAttribute(\"hidden\", \"\");\n\t\tthis._getEndOverflow().setAttribute(\"hidden\", \"\");\n\n\t\t// show all tabs\n\t\tfor (let i = 0; i < itemsDomRefs.length; i++) {\n\t\t\titemsDomRefs[i].removeAttribute(\"hidden\");\n\t\t\titemsDomRefs[i].removeAttribute(\"start-overflow\");\n\t\t\titemsDomRefs[i].removeAttribute(\"end-overflow\");\n\t\t}\n\n\t\titemsDomRefs.forEach(item => {\n\t\t\tallItemsWidth += this._getItemWidth(item);\n\t\t});\n\n\t\tconst hasOverflow = tabStrip.offsetWidth < allItemsWidth;\n\t\tif (!hasOverflow) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.isModeStartAndEnd) {\n\t\t\tthis._updateStartAndEndOverflow(itemsDomRefs);\n\t\t\tthis._updateOverflowCounters();\n\t\t} else {\n\t\t\tthis._updateEndOverflow(itemsDomRefs);\n\t\t}\n\t}\n\n\t_getRootTab(tab: Tab | undefined) {\n\t\twhile (tab?.hasAttribute(\"ui5-tab\")) {\n\t\t\tif (tab.parentElement!.hasAttribute(\"ui5-tabcontainer\")) {\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\ttab = tab.parentElement as Tab;\n\t\t}\n\n\t\treturn tab;\n\t}\n\n\t_updateEndOverflow(itemsDomRefs: Array<TabInStrip | TabSeparatorInStrip>) {\n\t\t// show end overflow\n\t\tthis._getEndOverflow().removeAttribute(\"hidden\");\n\t\tconst selectedTab = this._getRootTab(this._selectedTab);\n\t\tconst selectedTabDomRef = selectedTab?.getDomRefInStrip() as TabInStrip | undefined;\n\t\tconst containerWidth = this._getTabStrip().offsetWidth;\n\n\t\tconst selectedItemIndexAndWidth = this._getSelectedItemIndexAndWidth(itemsDomRefs, selectedTabDomRef);\n\t\tconst lastVisibleTabIndex = this._findLastVisibleItem(itemsDomRefs, containerWidth, selectedItemIndexAndWidth.width);\n\n\t\tfor (let i = lastVisibleTabIndex + 1; i < itemsDomRefs.length; i++) {\n\t\t\titemsDomRefs[i].setAttribute(\"hidden\", \"\");\n\t\t\titemsDomRefs[i].setAttribute(\"end-overflow\", \"\");\n\t\t}\n\n\t\tthis._endOverflowText = this.overflowButtonText;\n\t}\n\n\t_updateStartAndEndOverflow(itemsDomRefs: Array<TabInStrip | TabSeparatorInStrip>) {\n\t\tlet containerWidth = this._getTabStrip().offsetWidth;\n\t\tconst selectedTab = this._getRootTab(this._selectedTab);\n\t\tconst selectedTabDomRef = selectedTab?.getDomRefInStrip() as TabInStrip | undefined;\n\t\tconst selectedItemIndexAndWidth = this._getSelectedItemIndexAndWidth(itemsDomRefs, selectedTabDomRef);\n\t\tconst hasStartOverflow = this._hasStartOverflow(containerWidth, itemsDomRefs, selectedItemIndexAndWidth);\n\t\tconst hasEndOverflow = this._hasEndOverflow(containerWidth, itemsDomRefs, selectedItemIndexAndWidth);\n\t\tlet firstVisible;\n\t\tlet lastVisible;\n\n\t\t// has \"end\", but no \"start\" overflow\n\t\tif (!hasStartOverflow) {\n\t\t\t// show \"end\" overflow\n\t\t\tthis._getEndOverflow().removeAttribute(\"hidden\");\n\t\t\t// width is changed\n\t\t\tcontainerWidth = this._getTabStrip().offsetWidth;\n\n\t\t\tlastVisible = this._findLastVisibleItem(itemsDomRefs, containerWidth, selectedItemIndexAndWidth.width);\n\n\t\t\tfor (let i = lastVisible + 1; i < itemsDomRefs.length; i++) {\n\t\t\t\titemsDomRefs[i].setAttribute(\"hidden\", \"\");\n\t\t\t\titemsDomRefs[i].setAttribute(\"end-overflow\", \"\");\n\t\t\t}\n\n\t\t\treturn;\n\t\t}\n\n\t\t// has \"start\", but no \"end\" overflow\n\t\tif (!hasEndOverflow) {\n\t\t\t// show \"start\" overflow\n\t\t\tthis._getStartOverflow().removeAttribute(\"hidden\");\n\t\t\t// width is changed\n\t\t\tcontainerWidth = this._getTabStrip().offsetWidth;\n\n\t\t\tfirstVisible = this._findFirstVisibleItem(itemsDomRefs, containerWidth, selectedItemIndexAndWidth.width);\n\n\t\t\tfor (let i = firstVisible - 1; i >= 0; i--) {\n\t\t\t\titemsDomRefs[i].setAttribute(\"hidden\", \"\");\n\t\t\t\titemsDomRefs[i].setAttribute(\"start-overflow\", \"\");\n\t\t\t}\n\n\t\t\treturn;\n\t\t}\n\n\t\t// show \"start\" overflow\n\t\tthis._getStartOverflow().removeAttribute(\"hidden\");\n\t\t// show \"end\" overflow\n\t\tthis._getEndOverflow().removeAttribute(\"hidden\");\n\t\t// width is changed\n\t\tcontainerWidth = this._getTabStrip().offsetWidth;\n\n\t\tfirstVisible = this._findFirstVisibleItem(itemsDomRefs, containerWidth, selectedItemIndexAndWidth.width, selectedItemIndexAndWidth.index - 1);\n\t\tlastVisible = this._findLastVisibleItem(itemsDomRefs, containerWidth, selectedItemIndexAndWidth.width, firstVisible);\n\n\t\tfor (let i = firstVisible - 1; i >= 0; i--) {\n\t\t\titemsDomRefs[i].setAttribute(\"hidden\", \"\");\n\t\t\titemsDomRefs[i].setAttribute(\"start-overflow\", \"\");\n\t\t}\n\n\t\tfor (let i = lastVisible + 1; i < itemsDomRefs.length; i++) {\n\t\t\titemsDomRefs[i].setAttribute(\"hidden\", \"\");\n\t\t\titemsDomRefs[i].setAttribute(\"end-overflow\", \"\");\n\t\t}\n\t}\n\n\t_hasStartOverflow(containerWidth: number, itemsDomRefs: Array<TabInStrip | TabSeparatorInStrip>, selectedItemIndexAndWidth: { width: number; index: number}) {\n\t\tif (selectedItemIndexAndWidth.index === 0) {\n\t\t\treturn false;\n\t\t}\n\n\t\tlet leftItemsWidth = 0;\n\n\t\tfor (let i = selectedItemIndexAndWidth.index - 1; i >= 0; i--) {\n\t\t\tleftItemsWidth += this._getItemWidth(itemsDomRefs[i]);\n\t\t}\n\n\t\tlet hasStartOverflow = containerWidth < leftItemsWidth + selectedItemIndexAndWidth.width;\n\n\t\t// if there is no \"start\" overflow, it has \"end\" overflow\n\t\t// check it again with the \"end\" overflow\n\t\tif (!hasStartOverflow) {\n\t\t\tthis._getEndOverflow().removeAttribute(\"hidden\");\n\t\t\tcontainerWidth = this._getTabStrip().offsetWidth;\n\t\t\thasStartOverflow = containerWidth < leftItemsWidth + selectedItemIndexAndWidth.width;\n\t\t\tthis._getEndOverflow().setAttribute(\"hidden\", \"\");\n\t\t}\n\n\t\treturn hasStartOverflow;\n\t}\n\n\t_hasEndOverflow(containerWidth: number, itemsDomRefs: Array<TabInStrip | TabSeparatorInStrip>, selectedItemIndexAndWidth: { width: number; index: number}) {\n\t\tif (selectedItemIndexAndWidth.index >= itemsDomRefs.length) {\n\t\t\treturn false;\n\t\t}\n\n\t\tlet rightItemsWidth = 0;\n\n\t\tfor (let i = selectedItemIndexAndWidth.index; i < itemsDomRefs.length; i++) {\n\t\t\trightItemsWidth += this._getItemWidth(itemsDomRefs[i]);\n\t\t}\n\n\t\tlet hasEndOverflow = containerWidth < rightItemsWidth + selectedItemIndexAndWidth.width;\n\n\t\t// if there is no \"end\" overflow, it has \"start\" overflow\n\t\t// check it again with the \"start\" overflow\n\t\tif (!hasEndOverflow) {\n\t\t\tthis._getStartOverflow().removeAttribute(\"hidden\");\n\t\t\tcontainerWidth = this._getTabStrip().offsetWidth;\n\t\t\thasEndOverflow = containerWidth < rightItemsWidth + selectedItemIndexAndWidth.width;\n\t\t\tthis._getStartOverflow().setAttribute(\"hidden\", \"\");\n\t\t}\n\n\t\treturn hasEndOverflow;\n\t}\n\n\t_getItemWidth(itemDomRef: HTMLElement) {\n\t\tconst styles = window.getComputedStyle(itemDomRef);\n\t\tconst margins = Number.parseInt(styles.marginLeft) + Number.parseInt(styles.marginRight);\n\n\t\treturn itemDomRef.offsetWidth + margins;\n\t}\n\n\t_getSelectedItemIndexAndWidth(itemsDomRefs: Array<TabInStrip | TabSeparatorInStrip>, selectedTabDomRef: TabInStrip | undefined) {\n\t\tif (!selectedTabDomRef) {\n\t\t\treturn {\n\t\t\t\tindex: 0,\n\t\t\t\twidth: 0,\n\t\t\t};\n\t\t}\n\n\t\tlet index = itemsDomRefs.indexOf(selectedTabDomRef);\n\t\tlet width = selectedTabDomRef.offsetWidth;\n\t\tlet selectedSeparator;\n\n\t\tif (itemsDomRefs[index - 1] && itemsDomRefs[index - 1].realTabReference.isSeparator) {\n\t\t\tselectedSeparator = itemsDomRefs[index - 1];\n\t\t\twidth += this._getItemWidth(selectedSeparator);\n\t\t}\n\n\t\titemsDomRefs.splice(index, 1);\n\n\t\t// if previous item is a separator - remove it\n\t\tif (selectedSeparator) {\n\t\t\titemsDomRefs.splice(index - 1, 1);\n\t\t\tindex--;\n\t\t}\n\n\t\treturn {\n\t\t\tindex,\n\t\t\twidth,\n\t\t};\n\t}\n\n\t_findFirstVisibleItem(itemsDomRefs: Array<TabInStrip | TabSeparatorInStrip>, containerWidth: number, selectedItemWidth: number, startIndex?: number) {\n\t\tif (startIndex === undefined) {\n\t\t\tstartIndex = itemsDomRefs.length - 1;\n\t\t}\n\n\t\tlet lastVisible = startIndex + 1;\n\n\t\tfor (let index = startIndex; index >= 0; index--) {\n\t\t\tconst itemWidth = this._getItemWidth(itemsDomRefs[index]);\n\n\t\t\tif (containerWidth < selectedItemWidth + itemWidth) {\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tselectedItemWidth += itemWidth;\n\t\t\tlastVisible = index;\n\t\t}\n\n\t\treturn lastVisible;\n\t}\n\n\t_findLastVisibleItem(itemsDomRefs: Array<TabInStrip | TabSeparatorInStrip>, containerWidth: number, selectedItemWidth: number, startIndex = 0) {\n\t\tlet lastVisibleIndex = startIndex - 1;\n\t\tlet index = startIndex;\n\n\t\tfor (; index < itemsDomRefs.length; index++) {\n\t\t\tconst itemWidth = this._getItemWidth(itemsDomRefs[index]);\n\n\t\t\tif (containerWidth < selectedItemWidth + itemWidth) {\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tselectedItemWidth += itemWidth;\n\t\t\tlastVisibleIndex = index;\n\t\t}\n\n\t\t// if prev item is separator - hide it\n\t\tconst prevItem = itemsDomRefs[index - 1];\n\t\tif (prevItem && prevItem.realTabReference.isSeparator) {\n\t\t\tlastVisibleIndex -= 1;\n\t\t}\n\n\t\treturn lastVisibleIndex;\n\t}\n\n\tget isModeStartAndEnd() {\n\t\treturn this.overflowMode === OverflowMode.StartAndEnd;\n\t}\n\n\t_updateOverflowCounters() {\n\t\tlet startOverflowItemsCount = 0;\n\t\tlet endOverflowItemsCount = 0;\n\n\t\tthis._getTabs()\n\t\t\t.map(tab => tab.getDomRefInStrip()!)\n\t\t\t.forEach(tab => {\n\t\t\t\tif (tab.hasAttribute(\"start-overflow\")) {\n\t\t\t\t\tstartOverflowItemsCount++;\n\t\t\t\t}\n\n\t\t\t\tif (tab.hasAttribute(\"end-overflow\")) {\n\t\t\t\t\tendOverflowItemsCount++;\n\t\t\t\t}\n\t\t\t});\n\n\t\tthis._startOverflowText = `+${startOverflowItemsCount}`;\n\t\tthis._endOverflowText = `+${endOverflowItemsCount}`;\n\t}\n\n\t_getFocusableRefs() {\n\t\tif (!this.getDomRef()) {\n\t\t\treturn [];\n\t\t}\n\n\t\tconst focusableRefs = [];\n\n\t\tif (!this._getStartOverflow().hasAttribute(\"hidden\")) {\n\t\t\tfocusableRefs.push(this.startOverflowButton[0] || this._getStartOverflowBtnDOM());\n\t\t}\n\n\t\tthis._getTabs().forEach(tab => {\n\t\t\tconst ref = tab.getDomRefInStrip();\n\t\t\tconst focusable = ref && !ref.hasAttribute(\"hidden\");\n\n\t\t\tif (focusable) {\n\t\t\t\tfocusableRefs.push(tab);\n\t\t\t}\n\t\t});\n\n\t\tif (!this._getEndOverflow().hasAttribute(\"hidden\")) {\n\t\t\tfocusableRefs.push(this.overflowButton[0] || this._getEndOverflowBtnDOM());\n\t\t}\n\n\t\treturn focusableRefs;\n\t}\n\n\t_getHeader() {\n\t\treturn this.shadowRoot!.querySelector<HTMLElement>(`#${this._id}-header`)!;\n\t}\n\n\t_getTabs(): Array<Tab> {\n\t\treturn this.items.filter((item): item is Tab => !item.isSeparator);\n\t}\n\n\t_getPopoverOwner(opener: HTMLElement): TabContainerPopoverOwner {\n\t\tif (opener === this._getStartOverflowBtnDOM() || opener.slot === \"startOverflowButton\") {\n\t\t\treturn \"start-overflow\";\n\t\t}\n\n\t\tif (opener === this._getEndOverflowBtnDOM() || opener.slot === \"overflowButton\") {\n\t\t\treturn \"end-overflow\";\n\t\t}\n\n\t\treturn getTabInStrip(opener) as TabInStrip;\n\t}\n\n\t_getPopoverItemsFor(targetOwner: TabContainerPopoverOwner) {\n\t\tif (targetOwner === \"start-overflow\") {\n\t\t\treturn this.items.filter(item => {\n\t\t\t\tconst stripRef = item.getDomRefInStrip();\n\n\t\t\t\treturn stripRef && stripRef.hasAttribute(\"start-overflow\");\n\t\t\t});\n\t\t}\n\n\t\tif (targetOwner === \"end-overflow\") {\n\t\t\treturn this.items.filter(item => {\n\t\t\t\tconst stripRef = item.getDomRefInStrip();\n\n\t\t\t\treturn stripRef && stripRef.hasAttribute(\"end-overflow\");\n\t\t\t});\n\t\t}\n\n\t\treturn targetOwner.realTabReference.items;\n\t}\n\n\t_setPopoverItems(items: Array<ITab>) {\n\t\tthis._sendOverflowPresentationInfos(items);\n\t\tconst newItemsFlat = this._flatten(items);\n\n\t\tif (!arraysAreEqual(this._popoverItemsFlat, newItemsFlat)) {\n\t\t\tthis._popoverItemsFlat = newItemsFlat;\n\t\t}\n\t}\n\n\tasync _togglePopover(opener: HTMLElement, setInitialFocus = false) {\n\t\tthis.responsivePopover = await this._respPopover();\n\n\t\tif (this.responsivePopover.open) {\n\t\t\tthis._closePopover();\n\t\t} else {\n\t\t\tawait this._showPopoverAt(opener, setInitialFocus);\n\t\t}\n\t}\n\n\tasync _showPopoverAt(opener: HTMLElement, setInitialFocus = false, preventInitialFocus = false) {\n\t\tthis._hasScheduledPopoverOpen = true;\n\t\tthis._setPopoverItems(this._getPopoverItemsFor(this._getPopoverOwner(opener)));\n\t\tthis.responsivePopover = await this._respPopover();\n\n\t\tif (setInitialFocus) {\n\t\t\tthis._setPopoverInitialFocus();\n\t\t}\n\n\t\tif (this._hasScheduledPopoverOpen) {\n\t\t\tthis.responsivePopover.preventInitialFocus = preventInitialFocus;\n\t\t\tthis.responsivePopover.opener = opener;\n\t\t\tthis.responsivePopover.open = true;\n\t\t}\n\t}\n\n\tget hasItems(): boolean {\n\t\tconst tabs = this._getTabs();\n\n\t\tfor (let i = 0; i < tabs.length; i++) {\n\t\t\tif (tabs[i].items.length > 0) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n\n\t_getTabStrip() {\n\t\treturn this.shadowRoot!.querySelector<HTMLElement>(`#${this._id}-tabStrip`)!;\n\t}\n\n\t_getStartOverflow() {\n\t\treturn this.shadowRoot!.querySelector<HTMLElement>(\".ui5-tc__overflow--start\")!;\n\t}\n\n\t_getEndOverflow() {\n\t\treturn this.shadowRoot!.querySelector<HTMLElement>(\".ui5-tc__overflow--end\")!;\n\t}\n\n\t_getStartOverflowBtnDOM() {\n\t\treturn this._getStartOverflow().querySelector<Button>(\"[ui5-button]\");\n\t}\n\n\t_getEndOverflowBtnDOM() {\n\t\treturn this._getEndOverflow().querySelector<Button>(\"[ui5-button]\");\n\t}\n\n\tasync _respPopover() {\n\t\tawait renderFinished();\n\t\treturn this.shadowRoot!.querySelector<ResponsivePopover>(`#${this._id}-overflowMenu`)!;\n\t}\n\n\t_closePopover() {\n\t\tthis._hasScheduledPopoverOpen = false;\n\t\tif (this.responsivePopover) {\n\t\t\tthis.responsivePopover.open = false;\n\t\t}\n\t}\n\n\tget dropIndicatorDOM(): DropIndicator | null {\n\t\treturn this.shadowRoot!.querySelector(\"[ui5-drop-indicator]\");\n\t}\n\n\tget classes() {\n\t\treturn {\n\t\t\troot: {\n\t\t\t\t\"ui5-tc-root\": true,\n\t\t\t\t\"ui5-tc--textOnly\": this.textOnly,\n\t\t\t\t\"ui5-tc--withAdditionalText\": this.withAdditionalText,\n\t\t\t\t\"ui5-tc--standardTabLayout\": this.standardTabLayout,\n\t\t\t},\n\t\t\theader: {\n\t\t\t\t\"ui5-tc__header\": true,\n\t\t\t},\n\t\t\ttabStrip: {\n\t\t\t\t\"ui5-tc__tabStrip\": true,\n\t\t\t},\n\t\t\tseparator: {\n\t\t\t\t\"ui5-tc__separator\": true,\n\t\t\t},\n\t\t\tcontent: {\n\t\t\t\t\"ui5-tc__content\": true,\n\t\t\t\t\"ui5-tc__content--collapsed\": this._contentCollapsed,\n\t\t\t},\n\t\t};\n\t}\n\n\tget mixedMode() {\n\t\tconst tabs = this._getTabs();\n\n\t\treturn tabs.some(item => item.icon) && tabs.some(item => item.text);\n\t}\n\n\tget textOnly() {\n\t\treturn this._getTabs().every(item => !item.icon);\n\t}\n\n\tget withAdditionalText() {\n\t\treturn this._getTabs().some(item => !!item.additionalText);\n\t}\n\n\tget standardTabLayout() {\n\t\treturn this.tabLayout === TabLayout.Standard;\n\t}\n\n\tget previousIconACCName() {\n\t\treturn TabContainer.i18nBundle.getText(TABCONTAINER_PREVIOUS_ICON_ACC_NAME);\n\t}\n\n\tget nextIconACCName() {\n\t\treturn TabContainer.i18nBundle.getText(TABCONTAINER_NEXT_ICON_ACC_NAME);\n\t}\n\n\tget overflowMenuTitle() {\n\t\treturn TabContainer.i18nBundle.getText(TABCONTAINER_OVERFLOW_MENU_TITLE);\n\t}\n\n\tget tabsAtTheBottom() {\n\t\treturn this.tabsPlacement === TabContainerTabsPlacement.Bottom;\n\t}\n\n\tget overflowMenuIcon() {\n\t\treturn this.tabsAtTheBottom ? \"slim-arrow-up\" : \"slim-arrow-down\";\n\t}\n\n\tget overflowButtonText() {\n\t\treturn TabContainer.i18nBundle.getText(TABCONTAINER_END_OVERFLOW);\n\t}\n\n\tget popoverCancelButtonText() {\n\t\treturn TabContainer.i18nBundle.getText(TABCONTAINER_POPOVER_CANCEL_BUTTON);\n\t}\n\n\tget accInvisibleText() {\n\t\treturn TabContainer.i18nBundle.getText(TABCONTAINER_SUBTABS_DESCRIPTION);\n\t}\n\n\tget overflowBtnAccessibilityAttributes(): Pick<AccessibilityAttributes, \"hasPopup\"> {\n\t\treturn {\n\t\t\thasPopup: \"menu\",\n\t\t};\n\t}\n\n\tget tablistAriaDescribedById() {\n\t\treturn this.hasItems ? `${this._id}-invisibleText` : undefined;\n\t}\n\n\tstatic async onDefine() {\n\t\tTabContainer.i18nBundle = await getI18nBundle(\"@ui5/webcomponents\");\n\t}\n}\n\nconst isTabInStrip = (el: HTMLElement) => el.localName === \"div\" && el.getAttribute(\"role\") === \"tab\";\n\nconst getTabInStrip = (el: HTMLElement | null) => {\n\twhile (el) {\n\t\tif (isTabInStrip(el)) {\n\t\t\treturn el as TabInStrip;\n\t\t}\n\n\t\tel = el.parentElement;\n\t}\n\n\treturn false;\n};\n\nconst _walk = (items: Array<ITab>, callback: (arg0: ITab, arg1: number) => void, level: number) => {\n\t[...items].forEach(item => {\n\t\tcallback(item, level);\n\t\tif (item.hasAttribute(\"ui5-tab\") && item.items) {\n\t\t\t_walk(item.items, callback, level + 1);\n\t\t}\n\t});\n};\n\nconst walk = (items: Array<ITab>, callback: (arg0: ITab, arg1: number) => void) => {\n\t_walk(items, callback, 0);\n};\n\nTabContainer.define();\n\nexport default TabContainer;\nexport type {\n\tTabContainerTabSelectEventDetail,\n\tTabContainerMoveEventDetail,\n\tTabContainerStripInfo,\n\tTabContainerOverflowInfo,\n\tITab,\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}