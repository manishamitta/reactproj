{"ast":null,"code":"import { useStylesheet } from '@ui5/webcomponents-react-base';\nimport { useEffect, useRef } from 'react';\nimport { classNames, styleData } from './RowSubComponent.module.css.js';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport const RowSubComponent = props => {\n  const {\n    subComponentsHeight,\n    virtualRow,\n    dispatch,\n    row,\n    rowHeight,\n    children,\n    rows,\n    alwaysShowSubComponent,\n    rowIndex\n  } = props;\n  const subComponentRef = useRef(null);\n  useStylesheet(styleData, RowSubComponent.displayName);\n  useEffect(() => {\n    const subComponentHeightObserver = new ResizeObserver(entries => {\n      entries.forEach(entry => {\n        const target = entry.target.getBoundingClientRect();\n        if (target) {\n          // Firefox implements `borderBoxSize` as a single content rect, rather than an array\n          const borderBoxSize = Array.isArray(entry.borderBoxSize) ? entry.borderBoxSize[0] : entry.borderBoxSize;\n          // Safari doesn't implement `borderBoxSize`\n          const subCompHeight = borderBoxSize?.blockSize ?? target.height;\n          if (subComponentsHeight?.[virtualRow.index]?.subComponentHeight !== subCompHeight && subCompHeight !== 0) {\n            // use most common sub-component height of first 10 sub-components as default height\n            if (alwaysShowSubComponent && subComponentsHeight && Object.keys(subComponentsHeight).length === 10) {\n              const objGroupedByHeight = Object.values(subComponentsHeight).reduce((acc, cur) => {\n                const count = acc?.[cur.subComponentHeight];\n                if (typeof count === 'number') {\n                  return {\n                    ...acc,\n                    [cur.subComponentHeight]: count + 1\n                  };\n                }\n                return {\n                  ...acc,\n                  [cur.subComponentHeight]: 1\n                };\n              }, {});\n              const mostUsedHeight = Object.keys(objGroupedByHeight).reduce((a, b) => objGroupedByHeight[a] > objGroupedByHeight[b] ? a : b);\n              const estimatedHeights = rows.reduce((acc, cur, index) => {\n                acc[index] = {\n                  subComponentHeight: parseInt(mostUsedHeight),\n                  rowId: cur.id\n                };\n                return acc;\n              }, {});\n              dispatch({\n                type: 'SUB_COMPONENTS_HEIGHT',\n                payload: {\n                  ...estimatedHeights,\n                  ...subComponentsHeight\n                }\n              });\n            } else {\n              dispatch({\n                type: 'SUB_COMPONENTS_HEIGHT',\n                payload: {\n                  ...subComponentsHeight,\n                  [virtualRow.index]: {\n                    subComponentHeight: subCompHeight,\n                    rowId: row.id\n                  }\n                }\n              });\n            }\n          }\n          // recalc if row id of row index has changed\n          if (subComponentsHeight?.[virtualRow.index]?.rowId != null && subComponentsHeight?.[virtualRow.index]?.rowId !== row.id) {\n            dispatch({\n              type: 'SUB_COMPONENTS_HEIGHT',\n              payload: {\n                ...subComponentsHeight,\n                [virtualRow.index]: {\n                  subComponentHeight: subCompHeight,\n                  rowId: row.id\n                }\n              }\n            });\n          }\n        }\n      });\n    });\n    if (subComponentRef.current?.firstChild) {\n      subComponentHeightObserver.observe(subComponentRef.current?.firstChild);\n    }\n    return () => {\n      subComponentHeightObserver.disconnect();\n    };\n  }, [subComponentRef.current?.firstChild, subComponentsHeight, row.id, subComponentsHeight?.[virtualRow.index]?.subComponentHeight, virtualRow.index]);\n  return /*#__PURE__*/_jsx(\"div\", {\n    ref: subComponentRef,\n    \"data-subcomponent\": true,\n    \"data-subcomponent-row-index\": rowIndex,\n    tabIndex: -1,\n    style: {\n      boxSizing: 'border-box',\n      transform: `translateY(${rowHeight}px)`\n    },\n    className: classNames.subcomponent,\n    children: children\n  });\n};\nRowSubComponent.displayName = 'RowSubComponent';","map":{"version":3,"names":["useStylesheet","useEffect","useRef","classNames","styleData","jsx","_jsx","RowSubComponent","props","subComponentsHeight","virtualRow","dispatch","row","rowHeight","children","rows","alwaysShowSubComponent","rowIndex","subComponentRef","displayName","subComponentHeightObserver","ResizeObserver","entries","forEach","entry","target","getBoundingClientRect","borderBoxSize","Array","isArray","subCompHeight","blockSize","height","index","subComponentHeight","Object","keys","length","objGroupedByHeight","values","reduce","acc","cur","count","mostUsedHeight","a","b","estimatedHeights","parseInt","rowId","id","type","payload","current","firstChild","observe","disconnect","ref","tabIndex","style","boxSizing","transform","className","subcomponent"],"sources":["/home/user/projects/reactproj/node_modules/@ui5/webcomponents-react/dist/components/AnalyticalTable/TableBody/RowSubComponent.js"],"sourcesContent":["import { useStylesheet } from '@ui5/webcomponents-react-base';\nimport { useEffect, useRef } from 'react';\nimport { classNames, styleData } from './RowSubComponent.module.css.js';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport const RowSubComponent = props => {\n  const {\n    subComponentsHeight,\n    virtualRow,\n    dispatch,\n    row,\n    rowHeight,\n    children,\n    rows,\n    alwaysShowSubComponent,\n    rowIndex\n  } = props;\n  const subComponentRef = useRef(null);\n  useStylesheet(styleData, RowSubComponent.displayName);\n  useEffect(() => {\n    const subComponentHeightObserver = new ResizeObserver(entries => {\n      entries.forEach(entry => {\n        const target = entry.target.getBoundingClientRect();\n        if (target) {\n          // Firefox implements `borderBoxSize` as a single content rect, rather than an array\n          const borderBoxSize = Array.isArray(entry.borderBoxSize) ? entry.borderBoxSize[0] : entry.borderBoxSize;\n          // Safari doesn't implement `borderBoxSize`\n          const subCompHeight = borderBoxSize?.blockSize ?? target.height;\n          if (subComponentsHeight?.[virtualRow.index]?.subComponentHeight !== subCompHeight && subCompHeight !== 0) {\n            // use most common sub-component height of first 10 sub-components as default height\n            if (alwaysShowSubComponent && subComponentsHeight && Object.keys(subComponentsHeight).length === 10) {\n              const objGroupedByHeight = Object.values(subComponentsHeight).reduce((acc, cur) => {\n                const count = acc?.[cur.subComponentHeight];\n                if (typeof count === 'number') {\n                  return {\n                    ...acc,\n                    [cur.subComponentHeight]: count + 1\n                  };\n                }\n                return {\n                  ...acc,\n                  [cur.subComponentHeight]: 1\n                };\n              }, {});\n              const mostUsedHeight = Object.keys(objGroupedByHeight).reduce((a, b) => objGroupedByHeight[a] > objGroupedByHeight[b] ? a : b);\n              const estimatedHeights = rows.reduce((acc, cur, index) => {\n                acc[index] = {\n                  subComponentHeight: parseInt(mostUsedHeight),\n                  rowId: cur.id\n                };\n                return acc;\n              }, {});\n              dispatch({\n                type: 'SUB_COMPONENTS_HEIGHT',\n                payload: {\n                  ...estimatedHeights,\n                  ...subComponentsHeight\n                }\n              });\n            } else {\n              dispatch({\n                type: 'SUB_COMPONENTS_HEIGHT',\n                payload: {\n                  ...subComponentsHeight,\n                  [virtualRow.index]: {\n                    subComponentHeight: subCompHeight,\n                    rowId: row.id\n                  }\n                }\n              });\n            }\n          }\n          // recalc if row id of row index has changed\n          if (subComponentsHeight?.[virtualRow.index]?.rowId != null && subComponentsHeight?.[virtualRow.index]?.rowId !== row.id) {\n            dispatch({\n              type: 'SUB_COMPONENTS_HEIGHT',\n              payload: {\n                ...subComponentsHeight,\n                [virtualRow.index]: {\n                  subComponentHeight: subCompHeight,\n                  rowId: row.id\n                }\n              }\n            });\n          }\n        }\n      });\n    });\n    if (subComponentRef.current?.firstChild) {\n      subComponentHeightObserver.observe(subComponentRef.current?.firstChild);\n    }\n    return () => {\n      subComponentHeightObserver.disconnect();\n    };\n  }, [subComponentRef.current?.firstChild, subComponentsHeight, row.id, subComponentsHeight?.[virtualRow.index]?.subComponentHeight, virtualRow.index]);\n  return /*#__PURE__*/_jsx(\"div\", {\n    ref: subComponentRef,\n    \"data-subcomponent\": true,\n    \"data-subcomponent-row-index\": rowIndex,\n    tabIndex: -1,\n    style: {\n      boxSizing: 'border-box',\n      transform: `translateY(${rowHeight}px)`\n    },\n    className: classNames.subcomponent,\n    children: children\n  });\n};\nRowSubComponent.displayName = 'RowSubComponent';"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}