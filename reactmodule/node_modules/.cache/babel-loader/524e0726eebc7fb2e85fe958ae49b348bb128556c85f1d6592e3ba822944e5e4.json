{"ast":null,"code":"\"use strict\";\n\nconst r = new Set(),\n  s = () => {\n    let e = document.querySelector(\".sapThemeMetaData-Base-baseLib\") || document.querySelector(\".sapThemeMetaData-UI5-sap-ui-core\");\n    if (e) return getComputedStyle(e).backgroundImage;\n    e = document.createElement(\"span\"), e.style.display = \"none\", e.classList.add(\"sapThemeMetaData-Base-baseLib\"), document.body.appendChild(e);\n    let t = getComputedStyle(e).backgroundImage;\n    return t === \"none\" && (e.classList.add(\"sapThemeMetaData-UI5-sap-ui-core\"), t = getComputedStyle(e).backgroundImage), document.body.removeChild(e), t;\n  },\n  o = e => {\n    const t = /\\([\"']?data:text\\/plain;utf-8,(.*?)['\"]?\\)$/i.exec(e);\n    if (t && t.length >= 2) {\n      let a = t[1];\n      if (a = a.replace(/\\\\\"/g, '\"'), a.charAt(0) !== \"{\" && a.charAt(a.length - 1) !== \"}\") try {\n        a = decodeURIComponent(a);\n      } catch {\n        r.has(\"decode\") || (console.warn(\"Malformed theme metadata string, unable to decodeURIComponent\"), r.add(\"decode\"));\n        return;\n      }\n      try {\n        return JSON.parse(a);\n      } catch {\n        r.has(\"parse\") || (console.warn(\"Malformed theme metadata string, unable to parse JSON\"), r.add(\"parse\"));\n      }\n    }\n  },\n  d = e => {\n    let t, a;\n    try {\n      t = e.Path.match(/\\.([^.]+)\\.css_variables$/)[1], a = e.Extends[0];\n    } catch {\n      r.has(\"object\") || (console.warn(\"Malformed theme metadata Object\", e), r.add(\"object\"));\n      return;\n    }\n    return {\n      themeName: t,\n      baseThemeName: a\n    };\n  },\n  m = () => {\n    const e = s();\n    if (!e || e === \"none\") return;\n    const t = o(e);\n    if (t) return d(t);\n  };\nexport default m;","map":{"version":3,"names":["r","Set","s","getThemeMetadata","e","document","querySelector","getComputedStyle","backgroundImage","createElement","style","display","classList","add","body","appendChild","t","removeChild","o","exec","length","a","replace","charAt","decodeURIComponent","has","console","warn","JSON","parse","d","Path","match","Extends","themeName","baseThemeName","m","getThemeDesignerTheme"],"sources":["/home/user/projects/reactproj/node_modules/@ui5/webcomponents-base/src/theming/getThemeDesignerTheme.ts"],"sourcesContent":["type ThemeDescriptor = {\n\tthemeName: string,\n\tbaseThemeName?: string,\n};\n\ntype ThemeMetadata = {\n\tPath: string,\n\tExtends: Array<string>,\n};\n\nconst warnings = new Set<string>();\n\nconst getThemeMetadata = () => {\n\t// Check if the class was already applied, most commonly to the link/style tag with the CSS Variables\n\tlet el = document.querySelector(\".sapThemeMetaData-Base-baseLib\") || document.querySelector(\".sapThemeMetaData-UI5-sap-ui-core\");\n\tif (el) {\n\t\treturn getComputedStyle(el).backgroundImage;\n\t}\n\n\tel = document.createElement(\"span\");\n\t(el as HTMLSpanElement).style.display = \"none\";\n\n\t// Try with sapThemeMetaData-Base-baseLib first\n\tel.classList.add(\"sapThemeMetaData-Base-baseLib\");\n\tdocument.body.appendChild(el);\n\tlet metadata = getComputedStyle(el).backgroundImage;\n\n\t// Try with sapThemeMetaData-UI5-sap-ui-core only if the previous selector was not found\n\tif (metadata === \"none\") {\n\t\tel.classList.add(\"sapThemeMetaData-UI5-sap-ui-core\");\n\t\tmetadata = getComputedStyle(el).backgroundImage;\n\t}\n\n\tdocument.body.removeChild(el);\n\n\treturn metadata;\n};\n\nconst parseThemeMetadata = (metadataString: string) => {\n\tconst params = /\\([\"']?data:text\\/plain;utf-8,(.*?)['\"]?\\)$/i.exec(metadataString);\n\tif (params && params.length >= 2) {\n\t\tlet paramsString = params[1];\n\t\tparamsString = paramsString.replace(/\\\\\"/g, `\"`);\n\t\tif (paramsString.charAt(0) !== \"{\" && paramsString.charAt(paramsString.length - 1) !== \"}\") {\n\t\t\ttry {\n\t\t\t\tparamsString = decodeURIComponent(paramsString);\n\t\t\t} catch (ex) {\n\t\t\t\tif (!warnings.has(\"decode\")) {\n\t\t\t\t\tconsole.warn(\"Malformed theme metadata string, unable to decodeURIComponent\"); // eslint-disable-line\n\t\t\t\t\twarnings.add(\"decode\");\n\t\t\t\t}\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\ttry {\n\t\t\treturn JSON.parse(paramsString) as ThemeMetadata;\n\t\t} catch (ex) {\n\t\t\tif (!warnings.has(\"parse\")) {\n\t\t\t\tconsole.warn(\"Malformed theme metadata string, unable to parse JSON\"); // eslint-disable-line\n\t\t\t\twarnings.add(\"parse\");\n\t\t\t}\n\t\t}\n\t}\n};\n\nconst processThemeMetadata = (metadata: ThemeMetadata): ThemeDescriptor | undefined => {\n\tlet themeName;\n\tlet baseThemeName;\n\n\ttry {\n\t\tthemeName = metadata.Path.match(/\\.([^.]+)\\.css_variables$/)![1];\n\t\tbaseThemeName = metadata.Extends[0];\n\t} catch (ex) {\n\t\tif (!warnings.has(\"object\")) {\n\t\t\tconsole.warn(\"Malformed theme metadata Object\", metadata); // eslint-disable-line\n\t\t\twarnings.add(\"object\");\n\t\t}\n\t\treturn;\n\t}\n\n\treturn {\n\t\tthemeName,\n\t\tbaseThemeName,\n\t};\n};\n\nconst getThemeDesignerTheme = (): ThemeDescriptor | undefined => {\n\tconst metadataString = getThemeMetadata();\n\tif (!metadataString || metadataString === \"none\") {\n\t\treturn;\n\t}\n\n\tconst metadata = parseThemeMetadata(metadataString);\n\n\tif (metadata) {\n\t\treturn processThemeMetadata(metadata);\n\t}\n};\n\nexport default getThemeDesignerTheme;\nexport type { ThemeDescriptor };\n"],"mappings":";;AAUA,MAAMA,CAAA,GAAW,IAAIC,GAAA;EAEfC,CAAA,GAAmBC,CAAA,KAAM;IAE9B,IAAIC,CAAA,GAAKC,QAAA,CAASC,aAAA,CAAc,gCAAgC,KAAKD,QAAA,CAASC,aAAA,CAAc,mCAAmC;IAC/H,IAAIF,CAAA,EACH,OAAOG,gBAAA,CAAiBH,CAAE,EAAEI,eAAA;IAG7BJ,CAAA,GAAKC,QAAA,CAASI,aAAA,CAAc,MAAM,GACjCL,CAAA,CAAuBM,KAAA,CAAMC,OAAA,GAAU,QAGxCP,CAAA,CAAGQ,SAAA,CAAUC,GAAA,CAAI,+BAA+B,GAChDR,QAAA,CAASS,IAAA,CAAKC,WAAA,CAAYX,CAAE;IAC5B,IAAIY,CAAA,GAAWT,gBAAA,CAAiBH,CAAE,EAAEI,eAAA;IAGpC,OAAIQ,CAAA,KAAa,WAChBZ,CAAA,CAAGQ,SAAA,CAAUC,GAAA,CAAI,kCAAkC,GACnDG,CAAA,GAAWT,gBAAA,CAAiBH,CAAE,EAAEI,eAAA,GAGjCH,QAAA,CAASS,IAAA,CAAKG,WAAA,CAAYb,CAAE,GAErBY,CACR;EAAA;EAEME,CAAA,GAAsBd,CAAA,IAA2B;IACtD,MAAMY,CAAA,GAAS,+CAA+CG,IAAA,CAAKf,CAAc;IACjF,IAAIY,CAAA,IAAUA,CAAA,CAAOI,MAAA,IAAU,GAAG;MACjC,IAAIC,CAAA,GAAeL,CAAA,CAAO,CAAC;MAE3B,IADAK,CAAA,GAAeA,CAAA,CAAaC,OAAA,CAAQ,QAAQ,GAAG,GAC3CD,CAAA,CAAaE,MAAA,CAAO,CAAC,MAAM,OAAOF,CAAA,CAAaE,MAAA,CAAOF,CAAA,CAAaD,MAAA,GAAS,CAAC,MAAM,KACtF,IAAI;QACHC,CAAA,GAAeG,kBAAA,CAAmBH,CAAY,CAC/C;MAAA,QAAa;QACPrB,CAAA,CAASyB,GAAA,CAAI,QAAQ,MACzBC,OAAA,CAAQC,IAAA,CAAK,+DAA+D,GAC5E3B,CAAA,CAASa,GAAA,CAAI,QAAQ;QAEtB;MACD;MAED,IAAI;QACH,OAAOe,IAAA,CAAKC,KAAA,CAAMR,CAAY,CAC/B;MAAA,QAAa;QACPrB,CAAA,CAASyB,GAAA,CAAI,OAAO,MACxBC,OAAA,CAAQC,IAAA,CAAK,uDAAuD,GACpE3B,CAAA,CAASa,GAAA,CAAI,OAAO,EAEtB;MAAA;IACD;EACD;EAEMiB,CAAA,GAAwB1B,CAAA,IAAyD;IACtF,IAAIY,CAAA,EACAK,CAAA;IAEJ,IAAI;MACHL,CAAA,GAAYZ,CAAA,CAAS2B,IAAA,CAAKC,KAAA,CAAM,2BAA2B,EAAG,CAAC,GAC/DX,CAAA,GAAgBjB,CAAA,CAAS6B,OAAA,CAAQ,CAAC,CACnC;IAAA,QAAa;MACPjC,CAAA,CAASyB,GAAA,CAAI,QAAQ,MACzBC,OAAA,CAAQC,IAAA,CAAK,mCAAmCvB,CAAQ,GACxDJ,CAAA,CAASa,GAAA,CAAI,QAAQ;MAEtB;IACD;IAEA,OAAO;MACNqB,SAAA,EAAAlB,CAAA;MACAmB,aAAA,EAAAd;IACD,CACD;EAAA;EAEMe,CAAA,GAAwBC,CAAA,KAAmC;IAChE,MAAMjC,CAAA,GAAiBF,CAAA,CAAiB;IACxC,IAAI,CAACE,CAAA,IAAkBA,CAAA,KAAmB,QACzC;IAGD,MAAMY,CAAA,GAAWE,CAAA,CAAmBd,CAAc;IAElD,IAAIY,CAAA,EACH,OAAOc,CAAA,CAAqBd,CAAQ,CAEtC;EAAA;AAEA,eAAeoB,CAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}