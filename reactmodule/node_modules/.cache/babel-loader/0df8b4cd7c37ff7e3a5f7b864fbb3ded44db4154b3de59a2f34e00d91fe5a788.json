{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import{Container,Box,Button}from\"@material-ui/core\";import{DataGrid}from\"@material-u i/data-grid\";import{getTableData,getTableCount}from\"api\";import{useNavigate,state}from\"react-router-dom\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const columns=[{field:\"complainno\",headerName:\"complainno\",width:250},{field:\"cpono\",headerName:\"cpono\",flex:1},{field:\"cvencode\",headerName:\"cvencode\",flex:1}];const PAGE_SIZE=15;export default function MasterPage(){const[items,setItems]=useState([]);const[loading,setLoading]=useState(false);// Number of rows which exist on the service\nconst[rowCount,setRowCount]=useState(0);const navigate=useNavigate();const loadData=async function(isFirstLoad){let skip=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;try{setItems([]);setLoading(true);if(isFirstLoad){const count=await getTableCount();setRowCount(count);}const _items=await getTableData({$top:PAGE_SIZE,$skip:skip});// Set items with s_id as the unique id\nconst itemsWithIds=_items.map(item=>{return{...item,id:item.complainno// Use s_id as the id\n};});setItems(itemsWithIds);}finally{setLoading(false);}};const handlePageChanged=_ref=>{let{page}=_ref;loadData(false,page*PAGE_SIZE);};const handleRowClick=params=>{console.log('Row clicked:',params.row);// Debug log\nconst navString=`/object/${params.id}`;// Use params.id\nnavigate(navString,{state:{row:params.row}});// Navigate with the row data\n};const handleCreateClick=()=>{navigate('/create');// Adjust the path as needed\n};useEffect(()=>{// when component mounted\nloadData(true);},[]);return/*#__PURE__*/_jsxs(Container,{disableGutters:true,children:[/*#__PURE__*/_jsxs(Box,{display:\"flex\",justifyContent:\"space-between\",alignItems:\"center\",py:2,children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Master Page\"}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"primary\",onClick:handleCreateClick,children:\"Create\"})]}),/*#__PURE__*/_jsx(Box,{height:\"80vh\",py:5,children:/*#__PURE__*/_jsx(DataGrid,{loading:loading,rows:items,columns:columns,pageSize:PAGE_SIZE,paginationMode:\"server\",rowCount:rowCount,onPageChange:handlePageChanged,onRowClick:handleRowClick})})]});}","map":{"version":3,"names":["React","useEffect","useState","Container","Box","Button","DataGrid","getTableData","getTableCount","useNavigate","state","jsx","_jsx","jsxs","_jsxs","columns","field","headerName","width","flex","PAGE_SIZE","MasterPage","items","setItems","loading","setLoading","rowCount","setRowCount","navigate","loadData","isFirstLoad","skip","arguments","length","undefined","count","_items","$top","$skip","itemsWithIds","map","item","id","complainno","handlePageChanged","_ref","page","handleRowClick","params","console","log","row","navString","handleCreateClick","disableGutters","children","display","justifyContent","alignItems","py","variant","color","onClick","height","rows","pageSize","paginationMode","onPageChange","onRowClick"],"sources":["/home/user/projects/reactproj/reactmodule/src/pages/MasterPage.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { Container, Box, Button} from \"@material-ui/core\";\nimport { DataGrid } from \"@material-u i/data-grid\";\nimport { getTableData, getTableCount } from \"api\";\nimport { useNavigate, state } from \"react-router-dom\";\n\nconst columns = [\n  { field: \"complainno\", headerName: \"complainno\", width: 250 },\n  { field: \"cpono\", headerName: \"cpono\", flex: 1 },\n  { field: \"cvencode\", headerName: \"cvencode\", flex: 1 },\n];\n\nconst PAGE_SIZE = 15;\n\nexport default function MasterPage() {\n  const [items, setItems] = useState([]);\n  const [loading, setLoading] = useState(false);\n\n  // Number of rows which exist on the service\n  const [rowCount, setRowCount] = useState(0);\n  const navigate = useNavigate();\n\n  const loadData = async (isFirstLoad, skip = 0) => {\n    try {\n      setItems([]);\n      setLoading(true);\n\n      if (isFirstLoad) {\n        const count = await getTableCount();\n        setRowCount(count);\n      }\n\n      const _items = await getTableData({\n        $top: PAGE_SIZE,\n        $skip: skip\n      });\n\n      // Set items with s_id as the unique id\n      const itemsWithIds = _items.map((item) => {\n        return {\n          ...item,\n          id: item.complainno // Use s_id as the id\n        };\n      });\n\n      setItems(itemsWithIds);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handlePageChanged = ({ page }) => {\n    loadData(false, page * PAGE_SIZE);\n  };\n\n  const handleRowClick = (params) => {\n    console.log('Row clicked:', params.row); // Debug log\n    const navString = `/object/${params.id}`; // Use params.id\n    navigate(navString, { state: { row: params.row } }); // Navigate with the row data\n  };\n  const handleCreateClick = () => {\n    navigate('/create'); // Adjust the path as needed\n  };\n\n  useEffect(() => {\n    // when component mounted\n    loadData(true);\n  }, []);\n\n  return (\n    <Container disableGutters>\n       <Box display=\"flex\" justifyContent=\"space-between\" alignItems=\"center\" py={2}>\n        <h2>Master Page</h2>\n        <Button variant=\"contained\" color=\"primary\" onClick={handleCreateClick}>\n          Create\n        </Button>\n      </Box>\n      <Box height=\"80vh\" py={5}>\n        <DataGrid\n          loading={loading}\n          rows={items}\n          columns={columns}\n          pageSize={PAGE_SIZE}\n          paginationMode=\"server\"\n          rowCount={rowCount}\n          onPageChange={handlePageChanged}\n          onRowClick={handleRowClick}\n        />\n      </Box>\n    </Container>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}