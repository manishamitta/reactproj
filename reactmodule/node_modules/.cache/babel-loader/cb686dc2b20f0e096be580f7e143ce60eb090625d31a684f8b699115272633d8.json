{"ast":null,"code":"import { isUp, isUpShift, isDown, isDownShift, isLeft, isRight, isPageUp, isPageDown, isHome, isEnd, isTabNext, isTabPrevious } from \"@ui5/webcomponents-base/dist/Keys.js\";\nimport isElementClickable from \"@ui5/webcomponents-base/dist/util/isElementClickable.js\";\nimport isElementHidden from \"@ui5/webcomponents-base/dist/util/isElementHidden.js\";\nimport getActiveElement from \"@ui5/webcomponents-base/dist/util/getActiveElement.js\";\nimport { getTabbableElements } from \"@ui5/webcomponents-base/dist/util/TabbableElements.js\";\nimport TableExtension from \"./TableExtension.js\";\nimport GridWalker from \"./GridWalker.js\";\n/**\n * Handles the keyboard navigation for the ui5-table.\n *\n * @class\n * @private\n */\nclass TableNavigation extends TableExtension {\n  constructor(table) {\n    super();\n    this._colPosition = 0;\n    this._tabPosition = 0;\n    this._table = table;\n    this._gridWalker = new GridWalker();\n    this._gridWalker.setGrid(this._getNavigationItemsOfGrid());\n    this._onKeyDownCaptureBound = this._onKeyDownCapture.bind(this);\n    // we register the keydown handler on the table element at the capturing phase since the\n    // busy indicator stops the propagation of the keydown event and it never reaches the table\n    this._table.addEventListener(\"keydown\", this._onKeyDownCaptureBound, {\n      capture: true\n    });\n  }\n  _getNavigationItemsOfRow(row) {\n    return [row, ...row.shadowRoot.children].map(element => {\n      return element.localName === \"slot\" ? element.assignedElements() : element;\n    }).flat().filter(element => {\n      return element.localName.includes(\"ui5-table-\") && !element.hasAttribute(\"excluded-from-navigation\");\n    });\n  }\n  _getNavigationItemsOfGrid() {\n    const items = [];\n    if (this._table.headerRow[0] && !isElementHidden(this._table.headerRow[0])) {\n      items.push(this._getNavigationItemsOfRow(this._table.headerRow[0]));\n      this._gridWalker.setFirstRowPos(1);\n    } else {\n      this._gridWalker.setFirstRowPos(0);\n    }\n    if (this._table.rows.length) {\n      this._table.rows.forEach(row => items.push(this._getNavigationItemsOfRow(row)));\n    } else {\n      items.push(this._getNavigationItemsOfRow(this._table._nodataRow));\n    }\n    if (this._table._shouldRenderGrowing) {\n      items.push([this._table._growing.getFocusDomRef()]);\n      this._gridWalker.setLastRowPos(-1);\n    } else {\n      this._gridWalker.setLastRowPos(0);\n    }\n    if (!this._gridWalker.getCurrent()) {\n      this._gridWalker.setRowPos(this._gridWalker.getFirstRowPos());\n    }\n    this._gridWalker.setGrid(items);\n    return items;\n  }\n  _setCurrentItem(e, callback) {\n    const navigationItems = this._getNavigationItemsOfGrid().flat();\n    const navigationItem = e.composedPath().find(target => navigationItems.includes(target));\n    if (navigationItem) {\n      this._gridWalker.setCurrent(navigationItem);\n      callback && callback(navigationItem);\n    }\n  }\n  _isEventFromCurrentItem(e) {\n    return e.composedPath()[0] === this._gridWalker.getCurrent();\n  }\n  _focusElement(element) {\n    let ignoreFocusIn = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n    if (!element || element === getActiveElement()) {\n      return;\n    }\n    const navigationItems = this._getNavigationItemsOfGrid().flat();\n    if (navigationItems.includes(this._lastFocusedItem)) {\n      this._lastFocusedItem?.removeAttribute(\"tabindex\");\n    }\n    if (navigationItems.includes(element)) {\n      element.setAttribute(\"tabindex\", \"-1\");\n      this._lastFocusedItem = element;\n    }\n    this._ignoreFocusIn = ignoreFocusIn;\n    element.focus();\n    if (element instanceof HTMLInputElement) {\n      element.select();\n    }\n    this._ignoreFocusIn = false;\n  }\n  _focusCurrentItem() {\n    this._focusElement(this._gridWalker.getCurrent());\n  }\n  _handleEnter(e, eventOrigin) {\n    if (eventOrigin.hasAttribute(\"ui5-table-cell-base\")) {\n      this._handleF2(e, eventOrigin);\n    }\n  }\n  _handleF2(e, eventOrigin) {\n    if (this._isEventFromCurrentItem(e)) {\n      const firstTabbable = getTabbableElements(eventOrigin)[0];\n      this._focusElement(firstTabbable);\n    } else {\n      this._setCurrentItem(e, () => this._focusCurrentItem());\n    }\n    e.preventDefault();\n  }\n  _handleF7(e, eventOrigin) {\n    if (eventOrigin.hasAttribute(\"ui5-table-row-base\")) {\n      this._gridWalker.setColPos(this._colPosition);\n      let elementToFocus = this._gridWalker.getCurrent();\n      if (this._tabPosition > -1) {\n        const tabbables = getTabbableElements(elementToFocus);\n        elementToFocus = tabbables[this._tabPosition] || tabbables.pop() || elementToFocus;\n      }\n      this._focusElement(elementToFocus);\n    } else {\n      this._setCurrentItem(e, currentItem => {\n        this._tabPosition = getTabbableElements(currentItem).indexOf(eventOrigin);\n        this._colPosition = this._gridWalker.getColPos();\n        this._gridWalker.setColPos(0);\n        this._focusCurrentItem();\n      });\n    }\n    e.preventDefault();\n  }\n  _handleTab(e, eventOrigin) {\n    if (this._isEventFromCurrentItem(e)) {\n      this._focusElement(e.shiftKey ? this._table._beforeElement : this._table._afterElement);\n    } else {\n      const tabbables = getTabbableElements(this._table._tableElement);\n      if (e.shiftKey && tabbables[0] === eventOrigin) {\n        this._focusElement(this._table._beforeElement);\n      }\n      if (!e.shiftKey && tabbables[tabbables.length - 1] === eventOrigin) {\n        this._focusElement(this._table._afterElement);\n      }\n    }\n  }\n  _handleArrowUpDown(e, eventOrigin, direction) {\n    if (e.shiftKey || e.altKey || e.ctrlKey || e.metaKey || e.defaultPrevented || this._isEventFromCurrentItem(e) || /^(input|textarea)$/i.test(eventOrigin.nodeName)) {\n      return false;\n    }\n    this._setCurrentItem(e, currentItem => {\n      this._tabPosition = getTabbableElements(currentItem).indexOf(eventOrigin);\n      this._gridWalker.setRowPos(this._gridWalker.getRowPos() + direction);\n      let elementToFocus = this._gridWalker.getCurrent();\n      const tabbables = getTabbableElements(elementToFocus);\n      elementToFocus = tabbables[this._tabPosition] || tabbables.pop() || elementToFocus;\n      this._focusElement(elementToFocus);\n      e.preventDefault();\n    });\n    return false;\n  }\n  _handleArrowUp(e, eventOrigin) {\n    return this._handleArrowUpDown(e, eventOrigin, -1);\n  }\n  _handleArrowDown(e, eventOrigin) {\n    return this._handleArrowUpDown(e, eventOrigin, 1);\n  }\n  _onkeydown(e, eventOrigin) {\n    if (e.defaultPrevented) {\n      return;\n    }\n    if (!this._isEventFromCurrentItem(e) && this._getNavigationItemsOfGrid().flat().includes(eventOrigin)) {\n      this._gridWalker.setCurrent(eventOrigin);\n    }\n    const keydownHandlerName = `_handle${e.code}`;\n    const keydownHandler = this[keydownHandlerName];\n    if (typeof keydownHandler === \"function\" && keydownHandler.call(this, e, eventOrigin) === undefined) {\n      return;\n    }\n    if (!this._isEventFromCurrentItem(e)) {\n      return;\n    }\n    if (isLeft(e)) {\n      this._gridWalker[this._table.effectiveDir === \"rtl\" ? \"right\" : \"left\"]();\n    } else if (isRight(e)) {\n      this._gridWalker[this._table.effectiveDir === \"rtl\" ? \"left\" : \"right\"]();\n    } else if (isUp(e) || isUpShift(e)) {\n      this._gridWalker.up();\n    } else if (isDown(e) || isDownShift(e)) {\n      this._gridWalker.down();\n    } else if (isHome(e)) {\n      this._gridWalker.home();\n    } else if (isEnd(e)) {\n      this._gridWalker.end();\n    } else if (isPageUp(e)) {\n      this._gridWalker.pageup();\n    } else if (isPageDown(e)) {\n      this._gridWalker.pagedown();\n    } else {\n      return;\n    }\n    this._focusCurrentItem();\n    e.preventDefault();\n  }\n  _onclick(e) {\n    const navigationItems = this._getNavigationItemsOfGrid();\n    const flatNavigationItems = navigationItems.flat();\n    let navigationItem = null;\n    let focusableElement = null;\n    // eslint-disable-next-line no-restricted-syntax\n    for (const target of e.composedPath()) {\n      if (target.nodeType === Node.ELEMENT_NODE) {\n        const element = target;\n        if (element.getAttribute(\"tabindex\") === \"-1\" || isElementClickable(element)) {\n          focusableElement = element;\n          break;\n        }\n        if (flatNavigationItems.includes(element)) {\n          navigationItem = element;\n          break;\n        }\n      }\n    }\n    if (focusableElement && focusableElement !== this._lastFocusedItem) {\n      this._lastFocusedItem?.removeAttribute(\"tabindex\");\n      this._lastFocusedItem = undefined;\n    } else if (navigationItem) {\n      this._gridWalker.setCurrent(navigationItem);\n      this._gridWalker.setColPos(0);\n      this._focusCurrentItem();\n    }\n  }\n  _onfocusin(e, eventOrigin) {\n    if (this._ignoreFocusIn) {\n      return;\n    }\n    if (eventOrigin === this._table._beforeElement || eventOrigin === this._table._afterElement) {\n      if (this._table.loading) {\n        this._table._loadingElement.focus();\n      } else {\n        this._gridWalker.setColPos(0);\n        this._focusCurrentItem();\n      }\n    } else if (eventOrigin !== this._lastFocusedItem && this._getNavigationItemsOfGrid().flat().includes(eventOrigin)) {\n      this._lastFocusedItem = eventOrigin;\n    }\n  }\n  _onKeyDownCapture(e) {\n    if (!this._table.loading) {\n      return;\n    }\n    if (isTabNext(e) || isTabPrevious(e)) {\n      this._focusElement(e.shiftKey ? this._table._beforeElement : this._table._afterElement);\n      e.stopImmediatePropagation();\n    }\n  }\n}\nexport default TableNavigation;","map":{"version":3,"names":["isUp","isUpShift","isDown","isDownShift","isLeft","isRight","isPageUp","isPageDown","isHome","isEnd","isTabNext","isTabPrevious","isElementClickable","isElementHidden","getActiveElement","getTabbableElements","TableExtension","GridWalker","TableNavigation","constructor","table","_colPosition","_tabPosition","_table","_gridWalker","setGrid","_getNavigationItemsOfGrid","_onKeyDownCaptureBound","_onKeyDownCapture","bind","addEventListener","capture","_getNavigationItemsOfRow","row","shadowRoot","children","map","element","localName","assignedElements","flat","filter","includes","hasAttribute","items","headerRow","push","setFirstRowPos","rows","length","forEach","_nodataRow","_shouldRenderGrowing","_growing","getFocusDomRef","setLastRowPos","getCurrent","setRowPos","getFirstRowPos","_setCurrentItem","e","callback","navigationItems","navigationItem","composedPath","find","target","setCurrent","_isEventFromCurrentItem","_focusElement","ignoreFocusIn","arguments","undefined","_lastFocusedItem","removeAttribute","setAttribute","_ignoreFocusIn","focus","HTMLInputElement","select","_focusCurrentItem","_handleEnter","eventOrigin","_handleF2","firstTabbable","preventDefault","_handleF7","setColPos","elementToFocus","tabbables","pop","currentItem","indexOf","getColPos","_handleTab","shiftKey","_beforeElement","_afterElement","_tableElement","_handleArrowUpDown","direction","altKey","ctrlKey","metaKey","defaultPrevented","test","nodeName","getRowPos","_handleArrowUp","_handleArrowDown","_onkeydown","keydownHandlerName","code","keydownHandler","call","effectiveDir","up","down","home","end","pageup","pagedown","_onclick","flatNavigationItems","focusableElement","nodeType","Node","ELEMENT_NODE","getAttribute","_onfocusin","loading","_loadingElement","stopImmediatePropagation"],"sources":["/home/user/projects/reactproj/node_modules/@ui5/webcomponents/src/TableNavigation.ts"],"sourcesContent":["import {\n\tisUp,\n\tisUpShift,\n\tisDown,\n\tisDownShift,\n\tisLeft,\n\tisRight,\n\tisPageUp,\n\tisPageDown,\n\tisHome,\n\tisEnd,\n\tisTabNext,\n\tisTabPrevious,\n} from \"@ui5/webcomponents-base/dist/Keys.js\";\nimport isElementClickable from \"@ui5/webcomponents-base/dist/util/isElementClickable.js\";\nimport isElementHidden from \"@ui5/webcomponents-base/dist/util/isElementHidden.js\";\nimport getActiveElement from \"@ui5/webcomponents-base/dist/util/getActiveElement.js\";\nimport { getTabbableElements } from \"@ui5/webcomponents-base/dist/util/TabbableElements.js\";\nimport type Table from \"./Table.js\";\nimport type TableRowBase from \"./TableRowBase.js\";\nimport TableExtension from \"./TableExtension.js\";\nimport GridWalker from \"./GridWalker.js\";\n\n/**\n * Handles the keyboard navigation for the ui5-table.\n *\n * @class\n * @private\n */\nclass TableNavigation extends TableExtension {\n\t_table: Table;\n\t_gridWalker: GridWalker;\n\t_colPosition: number = 0;\n\t_tabPosition: number = 0;\n\t_ignoreFocusIn?: boolean;\n\t_lastFocusedItem?: HTMLElement;\n\t_onKeyDownCaptureBound: (e: KeyboardEvent) => void;\n\n\tconstructor(table: Table) {\n\t\tsuper();\n\t\tthis._table = table;\n\t\tthis._gridWalker = new GridWalker();\n\t\tthis._gridWalker.setGrid(this._getNavigationItemsOfGrid());\n\t\tthis._onKeyDownCaptureBound = this._onKeyDownCapture.bind(this);\n\n\t\t// we register the keydown handler on the table element at the capturing phase since the\n\t\t// busy indicator stops the propagation of the keydown event and it never reaches the table\n\t\tthis._table.addEventListener(\"keydown\", this._onKeyDownCaptureBound, { capture: true });\n\t}\n\n\t_getNavigationItemsOfRow(row: TableRowBase) {\n\t\treturn [row, ...row.shadowRoot!.children].map(element => {\n\t\t\treturn element.localName === \"slot\" ? (element as HTMLSlotElement).assignedElements() : element;\n\t\t}).flat().filter(element => {\n\t\t\treturn element.localName.includes(\"ui5-table-\") && !element.hasAttribute(\"excluded-from-navigation\");\n\t\t}) as HTMLElement[];\n\t}\n\n\t_getNavigationItemsOfGrid() {\n\t\tconst items = [];\n\t\tif (this._table.headerRow[0] && !isElementHidden(this._table.headerRow[0])) {\n\t\t\titems.push(this._getNavigationItemsOfRow(this._table.headerRow[0]));\n\t\t\tthis._gridWalker.setFirstRowPos(1);\n\t\t} else {\n\t\t\tthis._gridWalker.setFirstRowPos(0);\n\t\t}\n\n\t\tif (this._table.rows.length) {\n\t\t\tthis._table.rows.forEach(row => items.push(this._getNavigationItemsOfRow(row)));\n\t\t} else {\n\t\t\titems.push(this._getNavigationItemsOfRow(this._table._nodataRow));\n\t\t}\n\n\t\tif (this._table._shouldRenderGrowing) {\n\t\t\titems.push([this._table._growing.getFocusDomRef()]);\n\t\t\tthis._gridWalker.setLastRowPos(-1);\n\t\t} else {\n\t\t\tthis._gridWalker.setLastRowPos(0);\n\t\t}\n\n\t\tif (!this._gridWalker.getCurrent()) {\n\t\t\tthis._gridWalker.setRowPos(this._gridWalker.getFirstRowPos());\n\t\t}\n\n\t\tthis._gridWalker.setGrid(items);\n\t\treturn items;\n\t}\n\n\t_setCurrentItem(e: Event, callback?: (currentItem: HTMLElement) => void) {\n\t\tconst navigationItems = this._getNavigationItemsOfGrid().flat();\n\t\tconst navigationItem = e.composedPath().find(target => navigationItems.includes(target as HTMLElement)) as HTMLElement;\n\t\tif (navigationItem) {\n\t\t\tthis._gridWalker.setCurrent(navigationItem);\n\t\t\tcallback && callback(navigationItem);\n\t\t}\n\t}\n\n\t_isEventFromCurrentItem(e: Event) {\n\t\treturn e.composedPath()[0] === this._gridWalker.getCurrent();\n\t}\n\n\t_focusElement(element: HTMLElement, ignoreFocusIn: boolean = true) {\n\t\tif (!element || element === getActiveElement()) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst navigationItems = this._getNavigationItemsOfGrid().flat();\n\t\tif (navigationItems.includes(this._lastFocusedItem)) {\n\t\t\tthis._lastFocusedItem?.removeAttribute(\"tabindex\");\n\t\t}\n\n\t\tif (navigationItems.includes(element)) {\n\t\t\telement.setAttribute(\"tabindex\", \"-1\");\n\t\t\tthis._lastFocusedItem = element;\n\t\t}\n\n\t\tthis._ignoreFocusIn = ignoreFocusIn;\n\t\telement.focus();\n\t\tif (element instanceof HTMLInputElement) {\n\t\t\telement.select();\n\t\t}\n\t\tthis._ignoreFocusIn = false;\n\t}\n\n\t_focusCurrentItem() {\n\t\tthis._focusElement(this._gridWalker.getCurrent() as HTMLElement);\n\t}\n\n\t_handleEnter(e: KeyboardEvent, eventOrigin: HTMLElement) {\n\t\tif (eventOrigin.hasAttribute(\"ui5-table-cell-base\")) {\n\t\t\tthis._handleF2(e, eventOrigin);\n\t\t}\n\t}\n\n\t_handleF2(e: KeyboardEvent, eventOrigin: HTMLElement) {\n\t\tif (this._isEventFromCurrentItem(e)) {\n\t\t\tconst firstTabbable = getTabbableElements(eventOrigin)[0];\n\t\t\tthis._focusElement(firstTabbable);\n\t\t} else {\n\t\t\tthis._setCurrentItem(e, () => this._focusCurrentItem());\n\t\t}\n\t\te.preventDefault();\n\t}\n\n\t_handleF7(e: KeyboardEvent, eventOrigin: HTMLElement) {\n\t\tif (eventOrigin.hasAttribute(\"ui5-table-row-base\")) {\n\t\t\tthis._gridWalker.setColPos(this._colPosition);\n\t\t\tlet elementToFocus = this._gridWalker.getCurrent() as HTMLElement;\n\t\t\tif (this._tabPosition > -1) {\n\t\t\t\tconst tabbables = getTabbableElements(elementToFocus);\n\t\t\t\telementToFocus = tabbables[this._tabPosition] || tabbables.pop() || elementToFocus;\n\t\t\t}\n\t\t\tthis._focusElement(elementToFocus);\n\t\t} else {\n\t\t\tthis._setCurrentItem(e, currentItem => {\n\t\t\t\tthis._tabPosition = getTabbableElements(currentItem).indexOf(eventOrigin);\n\t\t\t\tthis._colPosition = this._gridWalker.getColPos();\n\t\t\t\tthis._gridWalker.setColPos(0);\n\t\t\t\tthis._focusCurrentItem();\n\t\t\t});\n\t\t}\n\t\te.preventDefault();\n\t}\n\n\t_handleTab(e: KeyboardEvent, eventOrigin: HTMLElement) {\n\t\tif (this._isEventFromCurrentItem(e)) {\n\t\t\tthis._focusElement(e.shiftKey ? this._table._beforeElement : this._table._afterElement);\n\t\t} else {\n\t\t\tconst tabbables = getTabbableElements(this._table._tableElement);\n\t\t\tif (e.shiftKey && tabbables[0] === eventOrigin) {\n\t\t\t\tthis._focusElement(this._table._beforeElement);\n\t\t\t}\n\t\t\tif (!e.shiftKey && tabbables[tabbables.length - 1] === eventOrigin) {\n\t\t\t\tthis._focusElement(this._table._afterElement);\n\t\t\t}\n\t\t}\n\t}\n\n\t_handleArrowUpDown(e: KeyboardEvent, eventOrigin: HTMLElement, direction: -1 | 1) {\n\t\tif (e.shiftKey || e.altKey || e.ctrlKey || e.metaKey || e.defaultPrevented || this._isEventFromCurrentItem(e) || /^(input|textarea)$/i.test(eventOrigin.nodeName)) {\n\t\t\treturn false;\n\t\t}\n\n\t\tthis._setCurrentItem(e, currentItem => {\n\t\t\tthis._tabPosition = getTabbableElements(currentItem).indexOf(eventOrigin);\n\t\t\tthis._gridWalker.setRowPos(this._gridWalker.getRowPos() + direction);\n\t\t\tlet elementToFocus = this._gridWalker.getCurrent() as HTMLElement;\n\t\t\tconst tabbables = getTabbableElements(elementToFocus);\n\t\t\telementToFocus = tabbables[this._tabPosition] || tabbables.pop() || elementToFocus;\n\t\t\tthis._focusElement(elementToFocus);\n\t\t\te.preventDefault();\n\t\t});\n\t\treturn false;\n\t}\n\n\t_handleArrowUp(e: KeyboardEvent, eventOrigin: HTMLElement) {\n\t\treturn this._handleArrowUpDown(e, eventOrigin, -1);\n\t}\n\n\t_handleArrowDown(e: KeyboardEvent, eventOrigin: HTMLElement) {\n\t\treturn this._handleArrowUpDown(e, eventOrigin, 1);\n\t}\n\n\t_onkeydown(e: KeyboardEvent, eventOrigin: HTMLElement) {\n\t\tif (e.defaultPrevented) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (!this._isEventFromCurrentItem(e) && this._getNavigationItemsOfGrid().flat().includes(eventOrigin)) {\n\t\t\tthis._gridWalker.setCurrent(eventOrigin);\n\t\t}\n\n\t\tconst keydownHandlerName = `_handle${e.code}` as keyof TableNavigation;\n\t\tconst keydownHandler = this[keydownHandlerName] as (e: KeyboardEvent, eventOrigin: HTMLElement) => void | false;\n\t\tif (typeof keydownHandler === \"function\" && keydownHandler.call(this, e, eventOrigin) === undefined) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (!this._isEventFromCurrentItem(e)) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (isLeft(e)) {\n\t\t\tthis._gridWalker[this._table.effectiveDir === \"rtl\" ? \"right\" : \"left\"]();\n\t\t} else if (isRight(e)) {\n\t\t\tthis._gridWalker[this._table.effectiveDir === \"rtl\" ? \"left\" : \"right\"]();\n\t\t} else if (isUp(e) || isUpShift(e)) {\n\t\t\tthis._gridWalker.up();\n\t\t} else if (isDown(e) || isDownShift(e)) {\n\t\t\tthis._gridWalker.down();\n\t\t} else if (isHome(e)) {\n\t\t\tthis._gridWalker.home();\n\t\t} else if (isEnd(e)) {\n\t\t\tthis._gridWalker.end();\n\t\t} else if (isPageUp(e)) {\n\t\t\tthis._gridWalker.pageup();\n\t\t} else if (isPageDown(e)) {\n\t\t\tthis._gridWalker.pagedown();\n\t\t} else {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._focusCurrentItem();\n\t\te.preventDefault();\n\t}\n\n\t_onclick(e: PointerEvent) {\n\t\tconst navigationItems = this._getNavigationItemsOfGrid();\n\t\tconst flatNavigationItems = navigationItems.flat();\n\t\tlet navigationItem = null;\n\t\tlet focusableElement = null;\n\n\t\t// eslint-disable-next-line no-restricted-syntax\n\t\tfor (const target of e.composedPath() as any[]) {\n\t\t\tif (target.nodeType === Node.ELEMENT_NODE) {\n\t\t\t\tconst element = target as HTMLElement;\n\t\t\t\tif (element.getAttribute(\"tabindex\") === \"-1\" || isElementClickable(element)) {\n\t\t\t\t\tfocusableElement = element;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tif (flatNavigationItems.includes(element)) {\n\t\t\t\t\tnavigationItem = element;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (focusableElement && focusableElement !== this._lastFocusedItem) {\n\t\t\tthis._lastFocusedItem?.removeAttribute(\"tabindex\");\n\t\t\tthis._lastFocusedItem = undefined;\n\t\t} else if (navigationItem) {\n\t\t\tthis._gridWalker.setCurrent(navigationItem);\n\t\t\tthis._gridWalker.setColPos(0);\n\t\t\tthis._focusCurrentItem();\n\t\t}\n\t}\n\n\t_onfocusin(e: FocusEvent, eventOrigin: HTMLElement) {\n\t\tif (this._ignoreFocusIn) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (eventOrigin === this._table._beforeElement || eventOrigin === this._table._afterElement) {\n\t\t\tif (this._table.loading) {\n\t\t\t\tthis._table._loadingElement.focus();\n\t\t\t} else {\n\t\t\t\tthis._gridWalker.setColPos(0);\n\t\t\t\tthis._focusCurrentItem();\n\t\t\t}\n\t\t} else if (eventOrigin !== this._lastFocusedItem && this._getNavigationItemsOfGrid().flat().includes(eventOrigin)) {\n\t\t\tthis._lastFocusedItem = eventOrigin;\n\t\t}\n\t}\n\n\t_onKeyDownCapture(e: KeyboardEvent) {\n\t\tif (!this._table.loading) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (isTabNext(e) || isTabPrevious(e)) {\n\t\t\tthis._focusElement(e.shiftKey ? this._table._beforeElement : this._table._afterElement);\n\t\t\te.stopImmediatePropagation();\n\t\t}\n\t}\n}\n\nexport default TableNavigation;\n"],"mappings":"AAAA,SACCA,IAAI,EACJC,SAAS,EACTC,MAAM,EACNC,WAAW,EACXC,MAAM,EACNC,OAAO,EACPC,QAAQ,EACRC,UAAU,EACVC,MAAM,EACNC,KAAK,EACLC,SAAS,EACTC,aAAa,QACP,sCAAsC;AAC7C,OAAOC,kBAAkB,MAAM,yDAAyD;AACxF,OAAOC,eAAe,MAAM,sDAAsD;AAClF,OAAOC,gBAAgB,MAAM,uDAAuD;AACpF,SAASC,mBAAmB,QAAQ,uDAAuD;AAG3F,OAAOC,cAAc,MAAM,qBAAqB;AAChD,OAAOC,UAAU,MAAM,iBAAiB;AAExC;;;;;;AAMA,MAAMC,eAAgB,SAAQF,cAAc;EAS3CG,YAAYC,KAAY;IACvB,KAAK,EAAE;IAPR,KAAAC,YAAY,GAAW,CAAC;IACxB,KAAAC,YAAY,GAAW,CAAC;IAOvB,IAAI,CAACC,MAAM,GAAGH,KAAK;IACnB,IAAI,CAACI,WAAW,GAAG,IAAIP,UAAU,EAAE;IACnC,IAAI,CAACO,WAAW,CAACC,OAAO,CAAC,IAAI,CAACC,yBAAyB,EAAE,CAAC;IAC1D,IAAI,CAACC,sBAAsB,GAAG,IAAI,CAACC,iBAAiB,CAACC,IAAI,CAAC,IAAI,CAAC;IAE/D;IACA;IACA,IAAI,CAACN,MAAM,CAACO,gBAAgB,CAAC,SAAS,EAAE,IAAI,CAACH,sBAAsB,EAAE;MAAEI,OAAO,EAAE;IAAI,CAAE,CAAC;EACxF;EAEAC,wBAAwBA,CAACC,GAAiB;IACzC,OAAO,CAACA,GAAG,EAAE,GAAGA,GAAG,CAACC,UAAW,CAACC,QAAQ,CAAC,CAACC,GAAG,CAACC,OAAO,IAAG;MACvD,OAAOA,OAAO,CAACC,SAAS,KAAK,MAAM,GAAID,OAA2B,CAACE,gBAAgB,EAAE,GAAGF,OAAO;IAChG,CAAC,CAAC,CAACG,IAAI,EAAE,CAACC,MAAM,CAACJ,OAAO,IAAG;MAC1B,OAAOA,OAAO,CAACC,SAAS,CAACI,QAAQ,CAAC,YAAY,CAAC,IAAI,CAACL,OAAO,CAACM,YAAY,CAAC,0BAA0B,CAAC;IACrG,CAAC,CAAkB;EACpB;EAEAjB,yBAAyBA,CAAA;IACxB,MAAMkB,KAAK,GAAG,EAAE;IAChB,IAAI,IAAI,CAACrB,MAAM,CAACsB,SAAS,CAAC,CAAC,CAAC,IAAI,CAAChC,eAAe,CAAC,IAAI,CAACU,MAAM,CAACsB,SAAS,CAAC,CAAC,CAAC,CAAC,EAAE;MAC3ED,KAAK,CAACE,IAAI,CAAC,IAAI,CAACd,wBAAwB,CAAC,IAAI,CAACT,MAAM,CAACsB,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC;MACnE,IAAI,CAACrB,WAAW,CAACuB,cAAc,CAAC,CAAC,CAAC;KAClC,MAAM;MACN,IAAI,CAACvB,WAAW,CAACuB,cAAc,CAAC,CAAC,CAAC;;IAGnC,IAAI,IAAI,CAACxB,MAAM,CAACyB,IAAI,CAACC,MAAM,EAAE;MAC5B,IAAI,CAAC1B,MAAM,CAACyB,IAAI,CAACE,OAAO,CAACjB,GAAG,IAAIW,KAAK,CAACE,IAAI,CAAC,IAAI,CAACd,wBAAwB,CAACC,GAAG,CAAC,CAAC,CAAC;KAC/E,MAAM;MACNW,KAAK,CAACE,IAAI,CAAC,IAAI,CAACd,wBAAwB,CAAC,IAAI,CAACT,MAAM,CAAC4B,UAAU,CAAC,CAAC;;IAGlE,IAAI,IAAI,CAAC5B,MAAM,CAAC6B,oBAAoB,EAAE;MACrCR,KAAK,CAACE,IAAI,CAAC,CAAC,IAAI,CAACvB,MAAM,CAAC8B,QAAQ,CAACC,cAAc,EAAE,CAAC,CAAC;MACnD,IAAI,CAAC9B,WAAW,CAAC+B,aAAa,CAAC,CAAC,CAAC,CAAC;KAClC,MAAM;MACN,IAAI,CAAC/B,WAAW,CAAC+B,aAAa,CAAC,CAAC,CAAC;;IAGlC,IAAI,CAAC,IAAI,CAAC/B,WAAW,CAACgC,UAAU,EAAE,EAAE;MACnC,IAAI,CAAChC,WAAW,CAACiC,SAAS,CAAC,IAAI,CAACjC,WAAW,CAACkC,cAAc,EAAE,CAAC;;IAG9D,IAAI,CAAClC,WAAW,CAACC,OAAO,CAACmB,KAAK,CAAC;IAC/B,OAAOA,KAAK;EACb;EAEAe,eAAeA,CAACC,CAAQ,EAAEC,QAA6C;IACtE,MAAMC,eAAe,GAAG,IAAI,CAACpC,yBAAyB,EAAE,CAACc,IAAI,EAAE;IAC/D,MAAMuB,cAAc,GAAGH,CAAC,CAACI,YAAY,EAAE,CAACC,IAAI,CAACC,MAAM,IAAIJ,eAAe,CAACpB,QAAQ,CAACwB,MAAqB,CAAC,CAAgB;IACtH,IAAIH,cAAc,EAAE;MACnB,IAAI,CAACvC,WAAW,CAAC2C,UAAU,CAACJ,cAAc,CAAC;MAC3CF,QAAQ,IAAIA,QAAQ,CAACE,cAAc,CAAC;;EAEtC;EAEAK,uBAAuBA,CAACR,CAAQ;IAC/B,OAAOA,CAAC,CAACI,YAAY,EAAE,CAAC,CAAC,CAAC,KAAK,IAAI,CAACxC,WAAW,CAACgC,UAAU,EAAE;EAC7D;EAEAa,aAAaA,CAAChC,OAAoB,EAA+B;IAAA,IAA7BiC,aAAA,GAAAC,SAAA,CAAAtB,MAAA,QAAAsB,SAAA,QAAAC,SAAA,GAAAD,SAAA,MAAyB,IAAI;IAChE,IAAI,CAAClC,OAAO,IAAIA,OAAO,KAAKvB,gBAAgB,EAAE,EAAE;MAC/C;;IAGD,MAAMgD,eAAe,GAAG,IAAI,CAACpC,yBAAyB,EAAE,CAACc,IAAI,EAAE;IAC/D,IAAIsB,eAAe,CAACpB,QAAQ,CAAC,IAAI,CAAC+B,gBAAgB,CAAC,EAAE;MACpD,IAAI,CAACA,gBAAgB,EAAEC,eAAe,CAAC,UAAU,CAAC;;IAGnD,IAAIZ,eAAe,CAACpB,QAAQ,CAACL,OAAO,CAAC,EAAE;MACtCA,OAAO,CAACsC,YAAY,CAAC,UAAU,EAAE,IAAI,CAAC;MACtC,IAAI,CAACF,gBAAgB,GAAGpC,OAAO;;IAGhC,IAAI,CAACuC,cAAc,GAAGN,aAAa;IACnCjC,OAAO,CAACwC,KAAK,EAAE;IACf,IAAIxC,OAAO,YAAYyC,gBAAgB,EAAE;MACxCzC,OAAO,CAAC0C,MAAM,EAAE;;IAEjB,IAAI,CAACH,cAAc,GAAG,KAAK;EAC5B;EAEAI,iBAAiBA,CAAA;IAChB,IAAI,CAACX,aAAa,CAAC,IAAI,CAAC7C,WAAW,CAACgC,UAAU,EAAiB,CAAC;EACjE;EAEAyB,YAAYA,CAACrB,CAAgB,EAAEsB,WAAwB;IACtD,IAAIA,WAAW,CAACvC,YAAY,CAAC,qBAAqB,CAAC,EAAE;MACpD,IAAI,CAACwC,SAAS,CAACvB,CAAC,EAAEsB,WAAW,CAAC;;EAEhC;EAEAC,SAASA,CAACvB,CAAgB,EAAEsB,WAAwB;IACnD,IAAI,IAAI,CAACd,uBAAuB,CAACR,CAAC,CAAC,EAAE;MACpC,MAAMwB,aAAa,GAAGrE,mBAAmB,CAACmE,WAAW,CAAC,CAAC,CAAC,CAAC;MACzD,IAAI,CAACb,aAAa,CAACe,aAAa,CAAC;KACjC,MAAM;MACN,IAAI,CAACzB,eAAe,CAACC,CAAC,EAAE,MAAM,IAAI,CAACoB,iBAAiB,EAAE,CAAC;;IAExDpB,CAAC,CAACyB,cAAc,EAAE;EACnB;EAEAC,SAASA,CAAC1B,CAAgB,EAAEsB,WAAwB;IACnD,IAAIA,WAAW,CAACvC,YAAY,CAAC,oBAAoB,CAAC,EAAE;MACnD,IAAI,CAACnB,WAAW,CAAC+D,SAAS,CAAC,IAAI,CAAClE,YAAY,CAAC;MAC7C,IAAImE,cAAc,GAAG,IAAI,CAAChE,WAAW,CAACgC,UAAU,EAAiB;MACjE,IAAI,IAAI,CAAClC,YAAY,GAAG,CAAC,CAAC,EAAE;QAC3B,MAAMmE,SAAS,GAAG1E,mBAAmB,CAACyE,cAAc,CAAC;QACrDA,cAAc,GAAGC,SAAS,CAAC,IAAI,CAACnE,YAAY,CAAC,IAAImE,SAAS,CAACC,GAAG,EAAE,IAAIF,cAAc;;MAEnF,IAAI,CAACnB,aAAa,CAACmB,cAAc,CAAC;KAClC,MAAM;MACN,IAAI,CAAC7B,eAAe,CAACC,CAAC,EAAE+B,WAAW,IAAG;QACrC,IAAI,CAACrE,YAAY,GAAGP,mBAAmB,CAAC4E,WAAW,CAAC,CAACC,OAAO,CAACV,WAAW,CAAC;QACzE,IAAI,CAAC7D,YAAY,GAAG,IAAI,CAACG,WAAW,CAACqE,SAAS,EAAE;QAChD,IAAI,CAACrE,WAAW,CAAC+D,SAAS,CAAC,CAAC,CAAC;QAC7B,IAAI,CAACP,iBAAiB,EAAE;MACzB,CAAC,CAAC;;IAEHpB,CAAC,CAACyB,cAAc,EAAE;EACnB;EAEAS,UAAUA,CAAClC,CAAgB,EAAEsB,WAAwB;IACpD,IAAI,IAAI,CAACd,uBAAuB,CAACR,CAAC,CAAC,EAAE;MACpC,IAAI,CAACS,aAAa,CAACT,CAAC,CAACmC,QAAQ,GAAG,IAAI,CAACxE,MAAM,CAACyE,cAAc,GAAG,IAAI,CAACzE,MAAM,CAAC0E,aAAa,CAAC;KACvF,MAAM;MACN,MAAMR,SAAS,GAAG1E,mBAAmB,CAAC,IAAI,CAACQ,MAAM,CAAC2E,aAAa,CAAC;MAChE,IAAItC,CAAC,CAACmC,QAAQ,IAAIN,SAAS,CAAC,CAAC,CAAC,KAAKP,WAAW,EAAE;QAC/C,IAAI,CAACb,aAAa,CAAC,IAAI,CAAC9C,MAAM,CAACyE,cAAc,CAAC;;MAE/C,IAAI,CAACpC,CAAC,CAACmC,QAAQ,IAAIN,SAAS,CAACA,SAAS,CAACxC,MAAM,GAAG,CAAC,CAAC,KAAKiC,WAAW,EAAE;QACnE,IAAI,CAACb,aAAa,CAAC,IAAI,CAAC9C,MAAM,CAAC0E,aAAa,CAAC;;;EAGhD;EAEAE,kBAAkBA,CAACvC,CAAgB,EAAEsB,WAAwB,EAAEkB,SAAiB;IAC/E,IAAIxC,CAAC,CAACmC,QAAQ,IAAInC,CAAC,CAACyC,MAAM,IAAIzC,CAAC,CAAC0C,OAAO,IAAI1C,CAAC,CAAC2C,OAAO,IAAI3C,CAAC,CAAC4C,gBAAgB,IAAI,IAAI,CAACpC,uBAAuB,CAACR,CAAC,CAAC,IAAI,qBAAqB,CAAC6C,IAAI,CAACvB,WAAW,CAACwB,QAAQ,CAAC,EAAE;MAClK,OAAO,KAAK;;IAGb,IAAI,CAAC/C,eAAe,CAACC,CAAC,EAAE+B,WAAW,IAAG;MACrC,IAAI,CAACrE,YAAY,GAAGP,mBAAmB,CAAC4E,WAAW,CAAC,CAACC,OAAO,CAACV,WAAW,CAAC;MACzE,IAAI,CAAC1D,WAAW,CAACiC,SAAS,CAAC,IAAI,CAACjC,WAAW,CAACmF,SAAS,EAAE,GAAGP,SAAS,CAAC;MACpE,IAAIZ,cAAc,GAAG,IAAI,CAAChE,WAAW,CAACgC,UAAU,EAAiB;MACjE,MAAMiC,SAAS,GAAG1E,mBAAmB,CAACyE,cAAc,CAAC;MACrDA,cAAc,GAAGC,SAAS,CAAC,IAAI,CAACnE,YAAY,CAAC,IAAImE,SAAS,CAACC,GAAG,EAAE,IAAIF,cAAc;MAClF,IAAI,CAACnB,aAAa,CAACmB,cAAc,CAAC;MAClC5B,CAAC,CAACyB,cAAc,EAAE;IACnB,CAAC,CAAC;IACF,OAAO,KAAK;EACb;EAEAuB,cAAcA,CAAChD,CAAgB,EAAEsB,WAAwB;IACxD,OAAO,IAAI,CAACiB,kBAAkB,CAACvC,CAAC,EAAEsB,WAAW,EAAE,CAAC,CAAC,CAAC;EACnD;EAEA2B,gBAAgBA,CAACjD,CAAgB,EAAEsB,WAAwB;IAC1D,OAAO,IAAI,CAACiB,kBAAkB,CAACvC,CAAC,EAAEsB,WAAW,EAAE,CAAC,CAAC;EAClD;EAEA4B,UAAUA,CAAClD,CAAgB,EAAEsB,WAAwB;IACpD,IAAItB,CAAC,CAAC4C,gBAAgB,EAAE;MACvB;;IAGD,IAAI,CAAC,IAAI,CAACpC,uBAAuB,CAACR,CAAC,CAAC,IAAI,IAAI,CAAClC,yBAAyB,EAAE,CAACc,IAAI,EAAE,CAACE,QAAQ,CAACwC,WAAW,CAAC,EAAE;MACtG,IAAI,CAAC1D,WAAW,CAAC2C,UAAU,CAACe,WAAW,CAAC;;IAGzC,MAAM6B,kBAAkB,GAAG,UAAUnD,CAAC,CAACoD,IAAI,EAA2B;IACtE,MAAMC,cAAc,GAAG,IAAI,CAACF,kBAAkB,CAAiE;IAC/G,IAAI,OAAOE,cAAc,KAAK,UAAU,IAAIA,cAAc,CAACC,IAAI,CAAC,IAAI,EAAEtD,CAAC,EAAEsB,WAAW,CAAC,KAAKV,SAAS,EAAE;MACpG;;IAGD,IAAI,CAAC,IAAI,CAACJ,uBAAuB,CAACR,CAAC,CAAC,EAAE;MACrC;;IAGD,IAAIxD,MAAM,CAACwD,CAAC,CAAC,EAAE;MACd,IAAI,CAACpC,WAAW,CAAC,IAAI,CAACD,MAAM,CAAC4F,YAAY,KAAK,KAAK,GAAG,OAAO,GAAG,MAAM,CAAC,EAAE;KACzE,MAAM,IAAI9G,OAAO,CAACuD,CAAC,CAAC,EAAE;MACtB,IAAI,CAACpC,WAAW,CAAC,IAAI,CAACD,MAAM,CAAC4F,YAAY,KAAK,KAAK,GAAG,MAAM,GAAG,OAAO,CAAC,EAAE;KACzE,MAAM,IAAInH,IAAI,CAAC4D,CAAC,CAAC,IAAI3D,SAAS,CAAC2D,CAAC,CAAC,EAAE;MACnC,IAAI,CAACpC,WAAW,CAAC4F,EAAE,EAAE;KACrB,MAAM,IAAIlH,MAAM,CAAC0D,CAAC,CAAC,IAAIzD,WAAW,CAACyD,CAAC,CAAC,EAAE;MACvC,IAAI,CAACpC,WAAW,CAAC6F,IAAI,EAAE;KACvB,MAAM,IAAI7G,MAAM,CAACoD,CAAC,CAAC,EAAE;MACrB,IAAI,CAACpC,WAAW,CAAC8F,IAAI,EAAE;KACvB,MAAM,IAAI7G,KAAK,CAACmD,CAAC,CAAC,EAAE;MACpB,IAAI,CAACpC,WAAW,CAAC+F,GAAG,EAAE;KACtB,MAAM,IAAIjH,QAAQ,CAACsD,CAAC,CAAC,EAAE;MACvB,IAAI,CAACpC,WAAW,CAACgG,MAAM,EAAE;KACzB,MAAM,IAAIjH,UAAU,CAACqD,CAAC,CAAC,EAAE;MACzB,IAAI,CAACpC,WAAW,CAACiG,QAAQ,EAAE;KAC3B,MAAM;MACN;;IAGD,IAAI,CAACzC,iBAAiB,EAAE;IACxBpB,CAAC,CAACyB,cAAc,EAAE;EACnB;EAEAqC,QAAQA,CAAC9D,CAAe;IACvB,MAAME,eAAe,GAAG,IAAI,CAACpC,yBAAyB,EAAE;IACxD,MAAMiG,mBAAmB,GAAG7D,eAAe,CAACtB,IAAI,EAAE;IAClD,IAAIuB,cAAc,GAAG,IAAI;IACzB,IAAI6D,gBAAgB,GAAG,IAAI;IAE3B;IACA,KAAK,MAAM1D,MAAM,IAAIN,CAAC,CAACI,YAAY,EAAW,EAAE;MAC/C,IAAIE,MAAM,CAAC2D,QAAQ,KAAKC,IAAI,CAACC,YAAY,EAAE;QAC1C,MAAM1F,OAAO,GAAG6B,MAAqB;QACrC,IAAI7B,OAAO,CAAC2F,YAAY,CAAC,UAAU,CAAC,KAAK,IAAI,IAAIpH,kBAAkB,CAACyB,OAAO,CAAC,EAAE;UAC7EuF,gBAAgB,GAAGvF,OAAO;UAC1B;;QAED,IAAIsF,mBAAmB,CAACjF,QAAQ,CAACL,OAAO,CAAC,EAAE;UAC1C0B,cAAc,GAAG1B,OAAO;UACxB;;;;IAKH,IAAIuF,gBAAgB,IAAIA,gBAAgB,KAAK,IAAI,CAACnD,gBAAgB,EAAE;MACnE,IAAI,CAACA,gBAAgB,EAAEC,eAAe,CAAC,UAAU,CAAC;MAClD,IAAI,CAACD,gBAAgB,GAAGD,SAAS;KACjC,MAAM,IAAIT,cAAc,EAAE;MAC1B,IAAI,CAACvC,WAAW,CAAC2C,UAAU,CAACJ,cAAc,CAAC;MAC3C,IAAI,CAACvC,WAAW,CAAC+D,SAAS,CAAC,CAAC,CAAC;MAC7B,IAAI,CAACP,iBAAiB,EAAE;;EAE1B;EAEAiD,UAAUA,CAACrE,CAAa,EAAEsB,WAAwB;IACjD,IAAI,IAAI,CAACN,cAAc,EAAE;MACxB;;IAGD,IAAIM,WAAW,KAAK,IAAI,CAAC3D,MAAM,CAACyE,cAAc,IAAId,WAAW,KAAK,IAAI,CAAC3D,MAAM,CAAC0E,aAAa,EAAE;MAC5F,IAAI,IAAI,CAAC1E,MAAM,CAAC2G,OAAO,EAAE;QACxB,IAAI,CAAC3G,MAAM,CAAC4G,eAAe,CAACtD,KAAK,EAAE;OACnC,MAAM;QACN,IAAI,CAACrD,WAAW,CAAC+D,SAAS,CAAC,CAAC,CAAC;QAC7B,IAAI,CAACP,iBAAiB,EAAE;;KAEzB,MAAM,IAAIE,WAAW,KAAK,IAAI,CAACT,gBAAgB,IAAI,IAAI,CAAC/C,yBAAyB,EAAE,CAACc,IAAI,EAAE,CAACE,QAAQ,CAACwC,WAAW,CAAC,EAAE;MAClH,IAAI,CAACT,gBAAgB,GAAGS,WAAW;;EAErC;EAEAtD,iBAAiBA,CAACgC,CAAgB;IACjC,IAAI,CAAC,IAAI,CAACrC,MAAM,CAAC2G,OAAO,EAAE;MACzB;;IAGD,IAAIxH,SAAS,CAACkD,CAAC,CAAC,IAAIjD,aAAa,CAACiD,CAAC,CAAC,EAAE;MACrC,IAAI,CAACS,aAAa,CAACT,CAAC,CAACmC,QAAQ,GAAG,IAAI,CAACxE,MAAM,CAACyE,cAAc,GAAG,IAAI,CAACzE,MAAM,CAAC0E,aAAa,CAAC;MACvFrC,CAAC,CAACwE,wBAAwB,EAAE;;EAE9B;;AAGD,eAAelH,eAAe","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}