{"ast":null,"code":"import BarDesign from '@ui5/webcomponents/dist/types/BarDesign.js';\nimport ButtonDesign from '@ui5/webcomponents/dist/types/ButtonDesign.js';\nimport TableSelectionMode from '@ui5/webcomponents/dist/types/TableSelectionMode.js';\nimport TitleLevel from '@ui5/webcomponents/dist/types/TitleLevel.js';\nimport group2Icon from '@ui5/webcomponents-icons/dist/group-2.js';\nimport listIcon from '@ui5/webcomponents-icons/dist/list.js';\nimport searchIcon from '@ui5/webcomponents-icons/dist/search.js';\nimport { enrichEventWithDetails, useI18nBundle, useStylesheet } from '@ui5/webcomponents-react-base';\nimport { Children, cloneElement, useEffect, useId, useReducer, useRef, useState } from 'react';\nimport { FlexBoxDirection, FlexBoxJustifyContent, MessageBoxAction, MessageBoxType } from '../../enums/index.js';\nimport { ACTIVE, ALL, BASIC, CANCEL, FIELDS_BY_ATTRIBUTE, FILTER, FILTER_DIALOG_RESET_WARNING, FILTERS, GROUP_VIEW, HIDE_VALUES, LIST_VIEW, MANDATORY, OK, RESET, SEARCH_FOR_FILTERS, SHOW_VALUES, VISIBLE, VISIBLE_AND_ACTIVE } from '../../i18n/i18n-defaults.js';\nimport { addCustomCSSWithScoping } from '../../internal/addCustomCSSWithScoping.js';\nimport { FilterBarDialogContext } from '../../internal/FilterBarDialogContext.js';\nimport { stopPropagation } from '../../internal/stopPropagation.js';\nimport { Bar, Button, Dialog, Icon, Input, Option, Panel, SegmentedButton, SegmentedButtonItem, Select, Table, TableHeaderCell, TableHeaderRow, TableSelection, Title } from '../../webComponents/index.js';\nimport { FlexBox } from '../FlexBox/index.js';\nimport { MessageBox } from '../MessageBox/index.js';\nimport { classNames, styleData } from './FilterBarDialog.module.css.js';\nimport { jsx as _jsx, jsxs as _jsxs, Fragment as _Fragment } from \"react/jsx-runtime\";\naddCustomCSSWithScoping('ui5-table', `\n:host([data-component-name=\"FilterBarDialogTable\"][data-with-value=\"false\"]) #table,\n:host([data-component-name=\"FilterBarDialogPanelTable\"][data-with-value=\"false\"]) #table {\n   grid-template-columns: var(--_ui5wcr-CheckBoxWidthHeight) minmax(3rem, auto) minmax(3rem, 25%) !important;\n}\n:host([data-component-name=\"FilterBarDialogTable\"][data-is-grouped]) #nodata-row {\n  display: none;\n}\n`);\naddCustomCSSWithScoping('ui5-table-header-row', `\n:host([data-component-name=\"FilterBarDialogGroupTableHeaderRow\"]) :first-child {\n  visibility: hidden;\n}\n`);\nconst getActiveFilters = (activeFilterAttribute, filter) => {\n  switch (activeFilterAttribute) {\n    case 'all':\n      return true;\n    case 'visible':\n      return filter.props?.hiddenInFilterBar !== true;\n    case 'active':\n      return filter.props?.active;\n    case 'visibleAndActive':\n      return filter.props?.hiddenInFilterBar !== true && filter.props?.active;\n    case 'mandatory':\n      return filter.props?.required;\n    default:\n      return true;\n  }\n};\nexport const FilterDialog = props => {\n  const {\n    open,\n    handleDialogClose,\n    children,\n    showRestoreButton,\n    dialogRef,\n    enableReordering,\n    isPhone,\n    handleRestoreFilters,\n    handleDialogSave,\n    onFiltersDialogSelectionChange,\n    handleDialogSearch,\n    handleDialogCancel,\n    onAfterFiltersDialogOpen,\n    onReorder\n  } = props;\n  useStylesheet(styleData, 'FilterBarDialog');\n  const uniqueId = useId();\n  const [searchString, setSearchString] = useState('');\n  const [selectedFilters, setSelectedFilters] = useState(undefined);\n  const [requiredFilters, setRequiredKeys] = useState({});\n  const [showValues, toggleValues] = useReducer(prev => !prev, false);\n  const [messageBoxOpen, setMessageBoxOpen] = useState(false);\n  const [forceRequired, setForceRequired] = useState();\n  const [showBtnsOnHover, setShowBtnsOnHover] = useState(true);\n  const [isListView, setIsListView] = useState(true);\n  const [filteredAttribute, setFilteredAttribute] = useState('all');\n  const [currentReorderedItem, setCurrentReorderedItem] = useState({});\n  const [orderedChildren, setOrderedChildren] = useState([]);\n  const [updatedIndex, setUpdatedIndex] = useState(undefined);\n  const currentReorderedItemOrderId = currentReorderedItem?.filterKey;\n  const selected = (selectedFilters ?? []).join(' ');\n  const dialogSearchRef = useRef(null);\n  const tableRef = useRef(null);\n  const okBtnRef = useRef(null);\n  const prevIsListView = useRef(true);\n  const selectionChangePayloadRef = useRef({\n    selectedFilterKeys: selectedFilters ?? []\n  });\n  const initialSelected = useRef(undefined);\n  const prevRowKey = useRef(undefined);\n  const i18nBundle = useI18nBundle('@ui5/webcomponents-react');\n  const basicText = i18nBundle.getText(BASIC);\n  const cancelText = i18nBundle.getText(CANCEL);\n  const okText = i18nBundle.getText(OK);\n  const searchForFiltersText = i18nBundle.getText(SEARCH_FOR_FILTERS);\n  const filtersTitle = i18nBundle.getText(FILTERS);\n  const resetText = i18nBundle.getText(RESET);\n  const allText = i18nBundle.getText(ALL);\n  const activeText = i18nBundle.getText(ACTIVE);\n  const visibleText = i18nBundle.getText(VISIBLE);\n  const visibleAndActiveText = i18nBundle.getText(VISIBLE_AND_ACTIVE);\n  const mandatoryText = i18nBundle.getText(MANDATORY);\n  const listViewText = i18nBundle.getText(LIST_VIEW);\n  const groupViewText = i18nBundle.getText(GROUP_VIEW);\n  const showValuesText = i18nBundle.getText(SHOW_VALUES);\n  const hideValuesText = i18nBundle.getText(HIDE_VALUES);\n  const filterText = i18nBundle.getText(FILTER);\n  const fieldsByAttributeText = i18nBundle.getText(FIELDS_BY_ATTRIBUTE);\n  const wasReordered = useRef(false);\n  const handleReorder = e => {\n    wasReordered.current = true;\n    setCurrentReorderedItem(e);\n  };\n  const handleFocusFallback = () => {\n    const rowKey = currentReorderedItem?.target?.rowKey;\n    if (rowKey && tableRef.current && rowKey !== prevRowKey.current) {\n      // we have to retrigger the internal item navigation logic after reordering,\n      // otherwise keyboard nav and general focus handling is not working properly\n      setTimeout(() => {\n        const itemNav = tableRef.current._tableNavigation;\n        itemNav._gridWalker.setGrid(itemNav._getNavigationItemsOfGrid());\n        tableRef.current.querySelector(`[row-key=\"${rowKey}\"]`).focus();\n      }, 0);\n      prevRowKey.current = rowKey;\n    }\n  };\n  const visibleChildren = () => children.filter(item => {\n    return !!item?.props && !item?.props?.hidden;\n  });\n  useEffect(() => {\n    if (children.length) {\n      setOrderedChildren(visibleChildren());\n    }\n  }, [children]);\n  const renderChildren = () => {\n    const searchStringLower = searchString.toLowerCase();\n    const filteredChildren = searchStringLower.length > 0 || filteredAttribute !== 'all' ? orderedChildren.filter(item => (searchStringLower === '' || item.props.label?.toLowerCase().includes(searchStringLower)) && getActiveFilters(filteredAttribute, item)) : orderedChildren;\n    return filteredChildren.map((child, index) => {\n      return /*#__PURE__*/cloneElement(child, {\n        'data-index': index\n      });\n    });\n  };\n  const handleSearch = e => {\n    if (typeof handleDialogSearch === 'function') {\n      handleDialogSearch(enrichEventWithDetails(e, {\n        value: e.target.value,\n        element: e.target\n      }));\n    }\n    setSearchString(e.target.value);\n  };\n  const handleSave = e => {\n    const orderedChildrenIds = enableReordering ? orderedChildren.map(child => child.props.filterKey) : [];\n    handleDialogSave(e, selectionChangePayloadRef.current, orderedChildrenIds);\n  };\n  const handleClose = e => {\n    stopPropagation(e);\n    if (e.target !== e.currentTarget) {\n      return;\n    }\n    if (typeof handleDialogCancel === 'function') {\n      handleDialogCancel(true);\n    }\n    handleDialogClose('escPressed');\n  };\n  const handleCancel = () => {\n    if (typeof handleDialogCancel === 'function') {\n      handleDialogCancel(false);\n    }\n    handleDialogClose('cancelButtonPressed');\n  };\n  const handleRestore = () => {\n    setMessageBoxOpen(true);\n  };\n  const handleViewChange = e => {\n    const selectedItem = e.detail.selectedItems.at(0);\n    prevIsListView.current = isListView;\n    setIsListView(selectedItem.dataset.id === 'list');\n  };\n  const handleMessageBoxClose = action => {\n    if (action === 'OK') {\n      const initialChildren = visibleChildren();\n      const payload = {\n        source: 'dialog',\n        selectedFilterKeys: initialSelected.current,\n        previousSelectedFilterKeys: selectedFilters,\n        reorderedFilterKeys: enableReordering ? initialChildren.map(child => `${child.props.filterKey}`) : null\n      };\n      setSelectedFilters(initialSelected.current);\n      setOrderedChildren(initialChildren);\n      handleRestoreFilters(payload);\n    }\n    setMessageBoxOpen(false);\n    setTimeout(() => {\n      okBtnRef.current.focus();\n    }, 50);\n  };\n  useEffect(() => {\n    if (orderedChildren.length && wasReordered.current) {\n      if (typeof onReorder === 'function') {\n        onReorder({\n          reorderedFilterKeys: orderedChildren.map(item => `${item.props.filterKey}`)\n        });\n      }\n      wasReordered.current = false;\n    }\n  }, [orderedChildren, onReorder]);\n  useEffect(() => {\n    if (currentReorderedItem?.index != null) {\n      setOrderedChildren(prev => {\n        const {\n          index,\n          direction\n        } = currentReorderedItem;\n        switch (direction) {\n          case 'up':\n            if (index > 0) {\n              setUpdatedIndex(index - 1);\n              const temp = prev[index];\n              prev[index] = prev[index - 1];\n              prev[index - 1] = temp;\n            }\n            break;\n          case 'down':\n            if (index < prev.length - 1) {\n              setUpdatedIndex(index + 1);\n              const temp = prev[index];\n              prev[index] = prev[index + 1];\n              prev[index + 1] = temp;\n            }\n            break;\n          case 'top':\n            if (index > 0) {\n              setUpdatedIndex(0);\n              const item = prev.splice(index, 1)[0];\n              prev.unshift(item);\n            }\n            break;\n          case 'bottom':\n            if (index < prev.length - 1) {\n              setUpdatedIndex(prev.length - 1);\n              const item = prev.splice(index, 1)[0];\n              prev.push(item);\n            }\n            break;\n        }\n        return [...prev];\n      });\n      void currentReorderedItem.target.focus();\n    }\n  }, [currentReorderedItem]);\n  useEffect(() => {\n    if (updatedIndex != null) {\n      prevRowKey.current = undefined;\n    }\n  }, [updatedIndex]);\n  const handleAttributeFilterChange = e => {\n    setFilteredAttribute(e.detail.selectedOption.dataset.id);\n  };\n  const fireOnFiltersDialogSelectionChange = function (_selected, selectedKeys, prevSelected) {\n    let prevent = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n    setSelectedFilters(Array.from(_selected));\n    if (!prevent && typeof onFiltersDialogSelectionChange === 'function') {\n      const payload = {\n        toggledFilterKeys: selectedKeys,\n        selected: selectedKeys.size === 1 ? _selected.has(selectedKeys.values().next().value) : undefined,\n        selectedFilterKeys: _selected,\n        previousSelectedFilterKeys: prevSelected\n      };\n      onFiltersDialogSelectionChange(payload);\n    }\n  };\n  useEffect(() => {\n    if (selectedFilters?.length) {\n      selectionChangePayloadRef.current = {\n        selectedFilterKeys: selectedFilters\n      };\n    }\n  }, [selectedFilters]);\n  const handleCheckBoxChange = e => {\n    if (e.target.hasAttribute('ui5-table-selection')) {\n      const _selected = new Set(e.target.selected.length ? e.target.selected.split(' ') : []);\n      const prevSelected = new Set(selectedFilters ?? []);\n      const alwaysSelected = Object.keys(requiredFilters).filter(key => requiredFilters[key]);\n      const selectedKeys = _selected.symmetricDifference(prevSelected);\n\n      // reset required filters to `true`\n      if (alwaysSelected.length) {\n        setForceRequired({\n          required: alwaysSelected,\n          target: e.target,\n          selected: _selected,\n          prevSelected,\n          selectedKeys\n        });\n        return;\n      }\n      fireOnFiltersDialogSelectionChange(_selected, selectedKeys, prevSelected);\n    }\n  };\n  useEffect(() => {\n    if (forceRequired && forceRequired.target) {\n      const {\n        prevSelected,\n        selectedKeys,\n        selected: _selected,\n        required,\n        target\n      } = forceRequired;\n      required.forEach(requiredString => {\n        _selected.add(requiredString);\n      });\n      setTimeout(() => {\n        target.selected = Array.from(_selected).join(' ');\n        const prevent = selectedKeys.size === 1 && required.includes(selectedKeys.values().next().value);\n        fireOnFiltersDialogSelectionChange(_selected, selectedKeys, prevSelected, prevent);\n      });\n      setForceRequired(undefined);\n    }\n  }, [forceRequired]);\n  const renderGroups = () => {\n    const groups = {};\n    Children.forEach(renderChildren(), child => {\n      const childGroups = child.props.groupName ?? 'default';\n      if (groups[childGroups]) {\n        groups[childGroups].push(child);\n      } else {\n        groups[childGroups] = [child];\n      }\n    });\n\n    // filter groups\n    return Object.keys(groups).sort((x, y) => x === 'default' ? -1 : y === 'role' ? 1 : 0).map((item, index) => {\n      return /*#__PURE__*/_jsx(Panel, {\n        headerText: item === 'default' ? basicText : item,\n        className: classNames.groupPanel,\n        children: /*#__PURE__*/_jsx(Table, {\n          className: classNames.tableInGroup,\n          \"data-component-name\": \"FilterBarDialogPanelTable\",\n          \"data-with-value\": showValues,\n          features: /*#__PURE__*/_jsx(TableSelection, {\n            mode: TableSelectionMode.Multiple,\n            selected: selected,\n            onChange: handleCheckBoxChange\n          }),\n          headerRow: /*#__PURE__*/_jsxs(TableHeaderRow, {\n            className: classNames.groupedTableHeader,\n            children: [/*#__PURE__*/_jsx(TableHeaderCell, {\n              children: filterText\n            }), !showValues && /*#__PURE__*/_jsx(TableHeaderCell, {\n              className: classNames.tHactive,\n              children: activeText\n            })]\n          }),\n          children: groups[item]\n        })\n      }, `${item === 'default' ? basicText : item}${index}`);\n    });\n  };\n  useEffect(() => {\n    if (initialSelected.current === undefined && selected.length) {\n      initialSelected.current = selectedFilters;\n    }\n  }, [selected]);\n  return /*#__PURE__*/_jsxs(FilterBarDialogContext.Provider, {\n    value: {\n      isFilterInDialog: true,\n      enableReordering,\n      onReorder: handleReorder,\n      isListView,\n      withValues: showValues,\n      handleFocusFallback,\n      showBtnsOnHover,\n      setShowBtnsOnHover,\n      currentReorderedItemOrderId,\n      setSelectedKeys: setSelectedFilters,\n      setRequiredKeys,\n      prevIsListView\n    },\n    children: [/*#__PURE__*/_jsxs(Dialog, {\n      open: open,\n      ref: dialogRef,\n      \"data-component-name\": \"FilterBarDialog\",\n      \"data-is-phone\": isPhone,\n      onClose: handleClose,\n      onOpen: onAfterFiltersDialogOpen,\n      resizable: true,\n      draggable: true,\n      className: classNames.dialogComponent,\n      preventFocusRestore: true,\n      initialFocus: `${uniqueId}-fb-dialog-search`,\n      header: /*#__PURE__*/_jsx(Bar, {\n        design: BarDesign.Header,\n        startContent: /*#__PURE__*/_jsx(Title, {\n          level: TitleLevel.H4,\n          title: filtersTitle,\n          children: filtersTitle\n        }),\n        endContent: showRestoreButton && /*#__PURE__*/_jsx(Button, {\n          design: ButtonDesign.Transparent,\n          onClick: handleRestore,\n          children: resetText\n        })\n      }),\n      footer: /*#__PURE__*/_jsx(Bar, {\n        design: BarDesign.Footer,\n        endContent: /*#__PURE__*/_jsxs(FlexBox, {\n          justifyContent: FlexBoxJustifyContent.End,\n          className: classNames.footer,\n          children: [/*#__PURE__*/_jsx(Button, {\n            ref: okBtnRef,\n            onClick: handleSave,\n            \"data-component-name\": \"FilterBarDialogSaveBtn\",\n            design: ButtonDesign.Emphasized,\n            children: okText\n          }), /*#__PURE__*/_jsx(Button, {\n            design: ButtonDesign.Transparent,\n            onClick: handleCancel,\n            \"data-component-name\": \"FilterBarDialogCancelBtn\",\n            children: cancelText\n          })]\n        })\n      }),\n      children: [/*#__PURE__*/_jsxs(FlexBox, {\n        direction: FlexBoxDirection.Column,\n        className: classNames.subheaderContainer,\n        children: [/*#__PURE__*/_jsxs(FlexBox, {\n          direction: FlexBoxDirection.Row,\n          children: [/*#__PURE__*/_jsxs(Select, {\n            onChange: handleAttributeFilterChange,\n            title: fieldsByAttributeText,\n            accessibleName: fieldsByAttributeText,\n            onClose: e => {\n              e.stopPropagation();\n            },\n            children: [/*#__PURE__*/_jsx(Option, {\n              selected: filteredAttribute === 'all',\n              \"data-id\": \"all\",\n              children: allText\n            }), /*#__PURE__*/_jsx(Option, {\n              selected: filteredAttribute === 'visible',\n              \"data-id\": \"visible\",\n              children: visibleText\n            }), /*#__PURE__*/_jsx(Option, {\n              selected: filteredAttribute === 'active',\n              \"data-id\": \"active\",\n              children: activeText\n            }), /*#__PURE__*/_jsx(Option, {\n              selected: filteredAttribute === 'visibleAndActive',\n              \"data-id\": \"visibleAndActive\",\n              children: visibleAndActiveText\n            }), /*#__PURE__*/_jsx(Option, {\n              selected: filteredAttribute === 'mandatory',\n              \"data-id\": \"mandatory\",\n              children: mandatoryText\n            })]\n          }), /*#__PURE__*/_jsx(\"span\", {\n            className: classNames.spacer\n          }), /*#__PURE__*/_jsx(Button, {\n            design: ButtonDesign.Transparent,\n            onClick: toggleValues,\n            \"aria-live\": \"polite\",\n            className: classNames.showValuesBtn,\n            children: showValues ? hideValuesText : showValuesText\n          }), /*#__PURE__*/_jsxs(SegmentedButton, {\n            onSelectionChange: handleViewChange,\n            children: [/*#__PURE__*/_jsx(SegmentedButtonItem, {\n              icon: listIcon,\n              \"data-id\": \"list\",\n              selected: isListView,\n              accessibleName: listViewText\n            }), /*#__PURE__*/_jsx(SegmentedButtonItem, {\n              icon: group2Icon,\n              \"data-id\": \"group\",\n              selected: !isListView,\n              accessibleName: groupViewText\n            })]\n          })]\n        }), /*#__PURE__*/_jsx(FlexBox, {\n          className: classNames.searchInputContainer,\n          children: /*#__PURE__*/_jsx(Input, {\n            id: `${uniqueId}-fb-dialog-search`,\n            noTypeahead: true,\n            placeholder: searchForFiltersText,\n            onInput: handleSearch,\n            showClearIcon: true,\n            icon: /*#__PURE__*/_jsx(Icon, {\n              name: searchIcon\n            }),\n            ref: dialogSearchRef,\n            className: classNames.searchInput,\n            \"data-component-name\": \"FilterBarDialogSearchInput\"\n          })\n        })]\n      }), /*#__PURE__*/_jsx(Table, {\n        ref: tableRef,\n        className: !isListView && classNames.inactiveTable,\n        \"data-component-name\": \"FilterBarDialogTable\",\n        \"data-is-grouped\": !isListView,\n        \"data-with-value\": `${showValues}`,\n        nodata: !isListView ? /*#__PURE__*/_jsx(\"span\", {}) : undefined,\n        tabIndex: !isListView ? -1 : undefined,\n        features: /*#__PURE__*/_jsx(_Fragment, {\n          children: /*#__PURE__*/_jsx(TableSelection, {\n            mode: TableSelectionMode.Multiple,\n            onChange: handleCheckBoxChange,\n            selected: selected\n          })\n        }),\n        headerRow: /*#__PURE__*/_jsxs(TableHeaderRow, {\n          \"data-component-name\": !isListView ? 'FilterBarDialogGroupTableHeaderRow' : 'FilterBarDialogTableHeaderRow',\n          children: [/*#__PURE__*/_jsx(TableHeaderCell, {\n            children: filterText\n          }), !showValues && /*#__PURE__*/_jsx(TableHeaderCell, {\n            className: classNames.tHactive,\n            children: activeText\n          })]\n        }),\n        children: isListView && renderChildren()\n      }), !isListView && renderGroups()]\n    }), showRestoreButton && messageBoxOpen && /*#__PURE__*/_jsx(MessageBox, {\n      open: true,\n      type: MessageBoxType.Warning,\n      actions: [MessageBoxAction.OK, MessageBoxAction.Cancel],\n      onClose: handleMessageBoxClose,\n      \"data-component-name\": \"FilterBarDialogResetMessageBox\",\n      children: i18nBundle.getText(FILTER_DIALOG_RESET_WARNING)\n    })]\n  });\n};","map":{"version":3,"names":["BarDesign","ButtonDesign","TableSelectionMode","TitleLevel","group2Icon","listIcon","searchIcon","enrichEventWithDetails","useI18nBundle","useStylesheet","Children","cloneElement","useEffect","useId","useReducer","useRef","useState","FlexBoxDirection","FlexBoxJustifyContent","MessageBoxAction","MessageBoxType","ACTIVE","ALL","BASIC","CANCEL","FIELDS_BY_ATTRIBUTE","FILTER","FILTER_DIALOG_RESET_WARNING","FILTERS","GROUP_VIEW","HIDE_VALUES","LIST_VIEW","MANDATORY","OK","RESET","SEARCH_FOR_FILTERS","SHOW_VALUES","VISIBLE","VISIBLE_AND_ACTIVE","addCustomCSSWithScoping","FilterBarDialogContext","stopPropagation","Bar","Button","Dialog","Icon","Input","Option","Panel","SegmentedButton","SegmentedButtonItem","Select","Table","TableHeaderCell","TableHeaderRow","TableSelection","Title","FlexBox","MessageBox","classNames","styleData","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","getActiveFilters","activeFilterAttribute","filter","props","hiddenInFilterBar","active","required","FilterDialog","open","handleDialogClose","children","showRestoreButton","dialogRef","enableReordering","isPhone","handleRestoreFilters","handleDialogSave","onFiltersDialogSelectionChange","handleDialogSearch","handleDialogCancel","onAfterFiltersDialogOpen","onReorder","uniqueId","searchString","setSearchString","selectedFilters","setSelectedFilters","undefined","requiredFilters","setRequiredKeys","showValues","toggleValues","prev","messageBoxOpen","setMessageBoxOpen","forceRequired","setForceRequired","showBtnsOnHover","setShowBtnsOnHover","isListView","setIsListView","filteredAttribute","setFilteredAttribute","currentReorderedItem","setCurrentReorderedItem","orderedChildren","setOrderedChildren","updatedIndex","setUpdatedIndex","currentReorderedItemOrderId","filterKey","selected","join","dialogSearchRef","tableRef","okBtnRef","prevIsListView","selectionChangePayloadRef","selectedFilterKeys","initialSelected","prevRowKey","i18nBundle","basicText","getText","cancelText","okText","searchForFiltersText","filtersTitle","resetText","allText","activeText","visibleText","visibleAndActiveText","mandatoryText","listViewText","groupViewText","showValuesText","hideValuesText","filterText","fieldsByAttributeText","wasReordered","handleReorder","e","current","handleFocusFallback","rowKey","target","setTimeout","itemNav","_tableNavigation","_gridWalker","setGrid","_getNavigationItemsOfGrid","querySelector","focus","visibleChildren","item","hidden","length","renderChildren","searchStringLower","toLowerCase","filteredChildren","label","includes","map","child","index","handleSearch","value","element","handleSave","orderedChildrenIds","handleClose","currentTarget","handleCancel","handleRestore","handleViewChange","selectedItem","detail","selectedItems","at","dataset","id","handleMessageBoxClose","action","initialChildren","payload","source","previousSelectedFilterKeys","reorderedFilterKeys","direction","temp","splice","unshift","push","handleAttributeFilterChange","selectedOption","fireOnFiltersDialogSelectionChange","_selected","selectedKeys","prevSelected","prevent","arguments","Array","from","toggledFilterKeys","size","has","values","next","handleCheckBoxChange","hasAttribute","Set","split","alwaysSelected","Object","keys","key","symmetricDifference","forEach","requiredString","add","renderGroups","groups","childGroups","groupName","sort","x","y","headerText","className","groupPanel","tableInGroup","features","mode","Multiple","onChange","headerRow","groupedTableHeader","tHactive","Provider","isFilterInDialog","withValues","setSelectedKeys","ref","onClose","onOpen","resizable","draggable","dialogComponent","preventFocusRestore","initialFocus","header","design","Header","startContent","level","H4","title","endContent","Transparent","onClick","footer","Footer","justifyContent","End","Emphasized","Column","subheaderContainer","Row","accessibleName","spacer","showValuesBtn","onSelectionChange","icon","searchInputContainer","noTypeahead","placeholder","onInput","showClearIcon","name","searchInput","inactiveTable","nodata","tabIndex","type","Warning","actions","Cancel"],"sources":["/home/user/projects/reactproj/node_modules/@ui5/webcomponents-react/dist/components/FilterBar/FilterDialog.js"],"sourcesContent":["import BarDesign from '@ui5/webcomponents/dist/types/BarDesign.js';\nimport ButtonDesign from '@ui5/webcomponents/dist/types/ButtonDesign.js';\nimport TableSelectionMode from '@ui5/webcomponents/dist/types/TableSelectionMode.js';\nimport TitleLevel from '@ui5/webcomponents/dist/types/TitleLevel.js';\nimport group2Icon from '@ui5/webcomponents-icons/dist/group-2.js';\nimport listIcon from '@ui5/webcomponents-icons/dist/list.js';\nimport searchIcon from '@ui5/webcomponents-icons/dist/search.js';\nimport { enrichEventWithDetails, useI18nBundle, useStylesheet } from '@ui5/webcomponents-react-base';\nimport { Children, cloneElement, useEffect, useId, useReducer, useRef, useState } from 'react';\nimport { FlexBoxDirection, FlexBoxJustifyContent, MessageBoxAction, MessageBoxType } from '../../enums/index.js';\nimport { ACTIVE, ALL, BASIC, CANCEL, FIELDS_BY_ATTRIBUTE, FILTER, FILTER_DIALOG_RESET_WARNING, FILTERS, GROUP_VIEW, HIDE_VALUES, LIST_VIEW, MANDATORY, OK, RESET, SEARCH_FOR_FILTERS, SHOW_VALUES, VISIBLE, VISIBLE_AND_ACTIVE } from '../../i18n/i18n-defaults.js';\nimport { addCustomCSSWithScoping } from '../../internal/addCustomCSSWithScoping.js';\nimport { FilterBarDialogContext } from '../../internal/FilterBarDialogContext.js';\nimport { stopPropagation } from '../../internal/stopPropagation.js';\nimport { Bar, Button, Dialog, Icon, Input, Option, Panel, SegmentedButton, SegmentedButtonItem, Select, Table, TableHeaderCell, TableHeaderRow, TableSelection, Title } from '../../webComponents/index.js';\nimport { FlexBox } from '../FlexBox/index.js';\nimport { MessageBox } from '../MessageBox/index.js';\nimport { classNames, styleData } from './FilterBarDialog.module.css.js';\nimport { jsx as _jsx, jsxs as _jsxs, Fragment as _Fragment } from \"react/jsx-runtime\";\naddCustomCSSWithScoping('ui5-table', `\n:host([data-component-name=\"FilterBarDialogTable\"][data-with-value=\"false\"]) #table,\n:host([data-component-name=\"FilterBarDialogPanelTable\"][data-with-value=\"false\"]) #table {\n   grid-template-columns: var(--_ui5wcr-CheckBoxWidthHeight) minmax(3rem, auto) minmax(3rem, 25%) !important;\n}\n:host([data-component-name=\"FilterBarDialogTable\"][data-is-grouped]) #nodata-row {\n  display: none;\n}\n`);\naddCustomCSSWithScoping('ui5-table-header-row', `\n:host([data-component-name=\"FilterBarDialogGroupTableHeaderRow\"]) :first-child {\n  visibility: hidden;\n}\n`);\nconst getActiveFilters = (activeFilterAttribute, filter) => {\n  switch (activeFilterAttribute) {\n    case 'all':\n      return true;\n    case 'visible':\n      return filter.props?.hiddenInFilterBar !== true;\n    case 'active':\n      return filter.props?.active;\n    case 'visibleAndActive':\n      return filter.props?.hiddenInFilterBar !== true && filter.props?.active;\n    case 'mandatory':\n      return filter.props?.required;\n    default:\n      return true;\n  }\n};\nexport const FilterDialog = props => {\n  const {\n    open,\n    handleDialogClose,\n    children,\n    showRestoreButton,\n    dialogRef,\n    enableReordering,\n    isPhone,\n    handleRestoreFilters,\n    handleDialogSave,\n    onFiltersDialogSelectionChange,\n    handleDialogSearch,\n    handleDialogCancel,\n    onAfterFiltersDialogOpen,\n    onReorder\n  } = props;\n  useStylesheet(styleData, 'FilterBarDialog');\n  const uniqueId = useId();\n  const [searchString, setSearchString] = useState('');\n  const [selectedFilters, setSelectedFilters] = useState(undefined);\n  const [requiredFilters, setRequiredKeys] = useState({});\n  const [showValues, toggleValues] = useReducer(prev => !prev, false);\n  const [messageBoxOpen, setMessageBoxOpen] = useState(false);\n  const [forceRequired, setForceRequired] = useState();\n  const [showBtnsOnHover, setShowBtnsOnHover] = useState(true);\n  const [isListView, setIsListView] = useState(true);\n  const [filteredAttribute, setFilteredAttribute] = useState('all');\n  const [currentReorderedItem, setCurrentReorderedItem] = useState({});\n  const [orderedChildren, setOrderedChildren] = useState([]);\n  const [updatedIndex, setUpdatedIndex] = useState(undefined);\n  const currentReorderedItemOrderId = currentReorderedItem?.filterKey;\n  const selected = (selectedFilters ?? []).join(' ');\n  const dialogSearchRef = useRef(null);\n  const tableRef = useRef(null);\n  const okBtnRef = useRef(null);\n  const prevIsListView = useRef(true);\n  const selectionChangePayloadRef = useRef({\n    selectedFilterKeys: selectedFilters ?? []\n  });\n  const initialSelected = useRef(undefined);\n  const prevRowKey = useRef(undefined);\n  const i18nBundle = useI18nBundle('@ui5/webcomponents-react');\n  const basicText = i18nBundle.getText(BASIC);\n  const cancelText = i18nBundle.getText(CANCEL);\n  const okText = i18nBundle.getText(OK);\n  const searchForFiltersText = i18nBundle.getText(SEARCH_FOR_FILTERS);\n  const filtersTitle = i18nBundle.getText(FILTERS);\n  const resetText = i18nBundle.getText(RESET);\n  const allText = i18nBundle.getText(ALL);\n  const activeText = i18nBundle.getText(ACTIVE);\n  const visibleText = i18nBundle.getText(VISIBLE);\n  const visibleAndActiveText = i18nBundle.getText(VISIBLE_AND_ACTIVE);\n  const mandatoryText = i18nBundle.getText(MANDATORY);\n  const listViewText = i18nBundle.getText(LIST_VIEW);\n  const groupViewText = i18nBundle.getText(GROUP_VIEW);\n  const showValuesText = i18nBundle.getText(SHOW_VALUES);\n  const hideValuesText = i18nBundle.getText(HIDE_VALUES);\n  const filterText = i18nBundle.getText(FILTER);\n  const fieldsByAttributeText = i18nBundle.getText(FIELDS_BY_ATTRIBUTE);\n  const wasReordered = useRef(false);\n  const handleReorder = e => {\n    wasReordered.current = true;\n    setCurrentReorderedItem(e);\n  };\n  const handleFocusFallback = () => {\n    const rowKey = currentReorderedItem?.target?.rowKey;\n    if (rowKey && tableRef.current && rowKey !== prevRowKey.current) {\n      // we have to retrigger the internal item navigation logic after reordering,\n      // otherwise keyboard nav and general focus handling is not working properly\n      setTimeout(() => {\n        const itemNav = tableRef.current._tableNavigation;\n        itemNav._gridWalker.setGrid(itemNav._getNavigationItemsOfGrid());\n        tableRef.current.querySelector(`[row-key=\"${rowKey}\"]`).focus();\n      }, 0);\n      prevRowKey.current = rowKey;\n    }\n  };\n  const visibleChildren = () => children.filter(item => {\n    return !!item?.props && !item?.props?.hidden;\n  });\n  useEffect(() => {\n    if (children.length) {\n      setOrderedChildren(visibleChildren());\n    }\n  }, [children]);\n  const renderChildren = () => {\n    const searchStringLower = searchString.toLowerCase();\n    const filteredChildren = searchStringLower.length > 0 || filteredAttribute !== 'all' ? orderedChildren.filter(item => (searchStringLower === '' || item.props.label?.toLowerCase().includes(searchStringLower)) && getActiveFilters(filteredAttribute, item)) : orderedChildren;\n    return filteredChildren.map((child, index) => {\n      return /*#__PURE__*/cloneElement(child, {\n        'data-index': index\n      });\n    });\n  };\n  const handleSearch = e => {\n    if (typeof handleDialogSearch === 'function') {\n      handleDialogSearch(enrichEventWithDetails(e, {\n        value: e.target.value,\n        element: e.target\n      }));\n    }\n    setSearchString(e.target.value);\n  };\n  const handleSave = e => {\n    const orderedChildrenIds = enableReordering ? orderedChildren.map(child => child.props.filterKey) : [];\n    handleDialogSave(e, selectionChangePayloadRef.current, orderedChildrenIds);\n  };\n  const handleClose = e => {\n    stopPropagation(e);\n    if (e.target !== e.currentTarget) {\n      return;\n    }\n    if (typeof handleDialogCancel === 'function') {\n      handleDialogCancel(true);\n    }\n    handleDialogClose('escPressed');\n  };\n  const handleCancel = () => {\n    if (typeof handleDialogCancel === 'function') {\n      handleDialogCancel(false);\n    }\n    handleDialogClose('cancelButtonPressed');\n  };\n  const handleRestore = () => {\n    setMessageBoxOpen(true);\n  };\n  const handleViewChange = e => {\n    const selectedItem = e.detail.selectedItems.at(0);\n    prevIsListView.current = isListView;\n    setIsListView(selectedItem.dataset.id === 'list');\n  };\n  const handleMessageBoxClose = action => {\n    if (action === 'OK') {\n      const initialChildren = visibleChildren();\n      const payload = {\n        source: 'dialog',\n        selectedFilterKeys: initialSelected.current,\n        previousSelectedFilterKeys: selectedFilters,\n        reorderedFilterKeys: enableReordering ? initialChildren.map(child => `${child.props.filterKey}`) : null\n      };\n      setSelectedFilters(initialSelected.current);\n      setOrderedChildren(initialChildren);\n      handleRestoreFilters(payload);\n    }\n    setMessageBoxOpen(false);\n    setTimeout(() => {\n      okBtnRef.current.focus();\n    }, 50);\n  };\n  useEffect(() => {\n    if (orderedChildren.length && wasReordered.current) {\n      if (typeof onReorder === 'function') {\n        onReorder({\n          reorderedFilterKeys: orderedChildren.map(item => `${item.props.filterKey}`)\n        });\n      }\n      wasReordered.current = false;\n    }\n  }, [orderedChildren, onReorder]);\n  useEffect(() => {\n    if (currentReorderedItem?.index != null) {\n      setOrderedChildren(prev => {\n        const {\n          index,\n          direction\n        } = currentReorderedItem;\n        switch (direction) {\n          case 'up':\n            if (index > 0) {\n              setUpdatedIndex(index - 1);\n              const temp = prev[index];\n              prev[index] = prev[index - 1];\n              prev[index - 1] = temp;\n            }\n            break;\n          case 'down':\n            if (index < prev.length - 1) {\n              setUpdatedIndex(index + 1);\n              const temp = prev[index];\n              prev[index] = prev[index + 1];\n              prev[index + 1] = temp;\n            }\n            break;\n          case 'top':\n            if (index > 0) {\n              setUpdatedIndex(0);\n              const item = prev.splice(index, 1)[0];\n              prev.unshift(item);\n            }\n            break;\n          case 'bottom':\n            if (index < prev.length - 1) {\n              setUpdatedIndex(prev.length - 1);\n              const item = prev.splice(index, 1)[0];\n              prev.push(item);\n            }\n            break;\n        }\n        return [...prev];\n      });\n      void currentReorderedItem.target.focus();\n    }\n  }, [currentReorderedItem]);\n  useEffect(() => {\n    if (updatedIndex != null) {\n      prevRowKey.current = undefined;\n    }\n  }, [updatedIndex]);\n  const handleAttributeFilterChange = e => {\n    setFilteredAttribute(e.detail.selectedOption.dataset.id);\n  };\n  const fireOnFiltersDialogSelectionChange = (_selected, selectedKeys, prevSelected, prevent = false) => {\n    setSelectedFilters(Array.from(_selected));\n    if (!prevent && typeof onFiltersDialogSelectionChange === 'function') {\n      const payload = {\n        toggledFilterKeys: selectedKeys,\n        selected: selectedKeys.size === 1 ? _selected.has(selectedKeys.values().next().value) : undefined,\n        selectedFilterKeys: _selected,\n        previousSelectedFilterKeys: prevSelected\n      };\n      onFiltersDialogSelectionChange(payload);\n    }\n  };\n  useEffect(() => {\n    if (selectedFilters?.length) {\n      selectionChangePayloadRef.current = {\n        selectedFilterKeys: selectedFilters\n      };\n    }\n  }, [selectedFilters]);\n  const handleCheckBoxChange = e => {\n    if (e.target.hasAttribute('ui5-table-selection')) {\n      const _selected = new Set(e.target.selected.length ? e.target.selected.split(' ') : []);\n      const prevSelected = new Set(selectedFilters ?? []);\n      const alwaysSelected = Object.keys(requiredFilters).filter(key => requiredFilters[key]);\n      const selectedKeys = _selected.symmetricDifference(prevSelected);\n\n      // reset required filters to `true`\n      if (alwaysSelected.length) {\n        setForceRequired({\n          required: alwaysSelected,\n          target: e.target,\n          selected: _selected,\n          prevSelected,\n          selectedKeys\n        });\n        return;\n      }\n      fireOnFiltersDialogSelectionChange(_selected, selectedKeys, prevSelected);\n    }\n  };\n  useEffect(() => {\n    if (forceRequired && forceRequired.target) {\n      const {\n        prevSelected,\n        selectedKeys,\n        selected: _selected,\n        required,\n        target\n      } = forceRequired;\n      required.forEach(requiredString => {\n        _selected.add(requiredString);\n      });\n      setTimeout(() => {\n        target.selected = Array.from(_selected).join(' ');\n        const prevent = selectedKeys.size === 1 && required.includes(selectedKeys.values().next().value);\n        fireOnFiltersDialogSelectionChange(_selected, selectedKeys, prevSelected, prevent);\n      });\n      setForceRequired(undefined);\n    }\n  }, [forceRequired]);\n  const renderGroups = () => {\n    const groups = {};\n    Children.forEach(renderChildren(), child => {\n      const childGroups = child.props.groupName ?? 'default';\n      if (groups[childGroups]) {\n        groups[childGroups].push(child);\n      } else {\n        groups[childGroups] = [child];\n      }\n    });\n\n    // filter groups\n    return Object.keys(groups).sort((x, y) => x === 'default' ? -1 : y === 'role' ? 1 : 0).map((item, index) => {\n      return /*#__PURE__*/_jsx(Panel, {\n        headerText: item === 'default' ? basicText : item,\n        className: classNames.groupPanel,\n        children: /*#__PURE__*/_jsx(Table, {\n          className: classNames.tableInGroup,\n          \"data-component-name\": \"FilterBarDialogPanelTable\",\n          \"data-with-value\": showValues,\n          features: /*#__PURE__*/_jsx(TableSelection, {\n            mode: TableSelectionMode.Multiple,\n            selected: selected,\n            onChange: handleCheckBoxChange\n          }),\n          headerRow: /*#__PURE__*/_jsxs(TableHeaderRow, {\n            className: classNames.groupedTableHeader,\n            children: [/*#__PURE__*/_jsx(TableHeaderCell, {\n              children: filterText\n            }), !showValues && /*#__PURE__*/_jsx(TableHeaderCell, {\n              className: classNames.tHactive,\n              children: activeText\n            })]\n          }),\n          children: groups[item]\n        })\n      }, `${item === 'default' ? basicText : item}${index}`);\n    });\n  };\n  useEffect(() => {\n    if (initialSelected.current === undefined && selected.length) {\n      initialSelected.current = selectedFilters;\n    }\n  }, [selected]);\n  return /*#__PURE__*/_jsxs(FilterBarDialogContext.Provider, {\n    value: {\n      isFilterInDialog: true,\n      enableReordering,\n      onReorder: handleReorder,\n      isListView,\n      withValues: showValues,\n      handleFocusFallback,\n      showBtnsOnHover,\n      setShowBtnsOnHover,\n      currentReorderedItemOrderId,\n      setSelectedKeys: setSelectedFilters,\n      setRequiredKeys,\n      prevIsListView\n    },\n    children: [/*#__PURE__*/_jsxs(Dialog, {\n      open: open,\n      ref: dialogRef,\n      \"data-component-name\": \"FilterBarDialog\",\n      \"data-is-phone\": isPhone,\n      onClose: handleClose,\n      onOpen: onAfterFiltersDialogOpen,\n      resizable: true,\n      draggable: true,\n      className: classNames.dialogComponent,\n      preventFocusRestore: true,\n      initialFocus: `${uniqueId}-fb-dialog-search`,\n      header: /*#__PURE__*/_jsx(Bar, {\n        design: BarDesign.Header,\n        startContent: /*#__PURE__*/_jsx(Title, {\n          level: TitleLevel.H4,\n          title: filtersTitle,\n          children: filtersTitle\n        }),\n        endContent: showRestoreButton && /*#__PURE__*/_jsx(Button, {\n          design: ButtonDesign.Transparent,\n          onClick: handleRestore,\n          children: resetText\n        })\n      }),\n      footer: /*#__PURE__*/_jsx(Bar, {\n        design: BarDesign.Footer,\n        endContent: /*#__PURE__*/_jsxs(FlexBox, {\n          justifyContent: FlexBoxJustifyContent.End,\n          className: classNames.footer,\n          children: [/*#__PURE__*/_jsx(Button, {\n            ref: okBtnRef,\n            onClick: handleSave,\n            \"data-component-name\": \"FilterBarDialogSaveBtn\",\n            design: ButtonDesign.Emphasized,\n            children: okText\n          }), /*#__PURE__*/_jsx(Button, {\n            design: ButtonDesign.Transparent,\n            onClick: handleCancel,\n            \"data-component-name\": \"FilterBarDialogCancelBtn\",\n            children: cancelText\n          })]\n        })\n      }),\n      children: [/*#__PURE__*/_jsxs(FlexBox, {\n        direction: FlexBoxDirection.Column,\n        className: classNames.subheaderContainer,\n        children: [/*#__PURE__*/_jsxs(FlexBox, {\n          direction: FlexBoxDirection.Row,\n          children: [/*#__PURE__*/_jsxs(Select, {\n            onChange: handleAttributeFilterChange,\n            title: fieldsByAttributeText,\n            accessibleName: fieldsByAttributeText,\n            onClose: e => {\n              e.stopPropagation();\n            },\n            children: [/*#__PURE__*/_jsx(Option, {\n              selected: filteredAttribute === 'all',\n              \"data-id\": \"all\",\n              children: allText\n            }), /*#__PURE__*/_jsx(Option, {\n              selected: filteredAttribute === 'visible',\n              \"data-id\": \"visible\",\n              children: visibleText\n            }), /*#__PURE__*/_jsx(Option, {\n              selected: filteredAttribute === 'active',\n              \"data-id\": \"active\",\n              children: activeText\n            }), /*#__PURE__*/_jsx(Option, {\n              selected: filteredAttribute === 'visibleAndActive',\n              \"data-id\": \"visibleAndActive\",\n              children: visibleAndActiveText\n            }), /*#__PURE__*/_jsx(Option, {\n              selected: filteredAttribute === 'mandatory',\n              \"data-id\": \"mandatory\",\n              children: mandatoryText\n            })]\n          }), /*#__PURE__*/_jsx(\"span\", {\n            className: classNames.spacer\n          }), /*#__PURE__*/_jsx(Button, {\n            design: ButtonDesign.Transparent,\n            onClick: toggleValues,\n            \"aria-live\": \"polite\",\n            className: classNames.showValuesBtn,\n            children: showValues ? hideValuesText : showValuesText\n          }), /*#__PURE__*/_jsxs(SegmentedButton, {\n            onSelectionChange: handleViewChange,\n            children: [/*#__PURE__*/_jsx(SegmentedButtonItem, {\n              icon: listIcon,\n              \"data-id\": \"list\",\n              selected: isListView,\n              accessibleName: listViewText\n            }), /*#__PURE__*/_jsx(SegmentedButtonItem, {\n              icon: group2Icon,\n              \"data-id\": \"group\",\n              selected: !isListView,\n              accessibleName: groupViewText\n            })]\n          })]\n        }), /*#__PURE__*/_jsx(FlexBox, {\n          className: classNames.searchInputContainer,\n          children: /*#__PURE__*/_jsx(Input, {\n            id: `${uniqueId}-fb-dialog-search`,\n            noTypeahead: true,\n            placeholder: searchForFiltersText,\n            onInput: handleSearch,\n            showClearIcon: true,\n            icon: /*#__PURE__*/_jsx(Icon, {\n              name: searchIcon\n            }),\n            ref: dialogSearchRef,\n            className: classNames.searchInput,\n            \"data-component-name\": \"FilterBarDialogSearchInput\"\n          })\n        })]\n      }), /*#__PURE__*/_jsx(Table, {\n        ref: tableRef,\n        className: !isListView && classNames.inactiveTable,\n        \"data-component-name\": \"FilterBarDialogTable\",\n        \"data-is-grouped\": !isListView,\n        \"data-with-value\": `${showValues}`,\n        nodata: !isListView ? /*#__PURE__*/_jsx(\"span\", {}) : undefined,\n        tabIndex: !isListView ? -1 : undefined,\n        features: /*#__PURE__*/_jsx(_Fragment, {\n          children: /*#__PURE__*/_jsx(TableSelection, {\n            mode: TableSelectionMode.Multiple,\n            onChange: handleCheckBoxChange,\n            selected: selected\n          })\n        }),\n        headerRow: /*#__PURE__*/_jsxs(TableHeaderRow, {\n          \"data-component-name\": !isListView ? 'FilterBarDialogGroupTableHeaderRow' : 'FilterBarDialogTableHeaderRow',\n          children: [/*#__PURE__*/_jsx(TableHeaderCell, {\n            children: filterText\n          }), !showValues && /*#__PURE__*/_jsx(TableHeaderCell, {\n            className: classNames.tHactive,\n            children: activeText\n          })]\n        }),\n        children: isListView && renderChildren()\n      }), !isListView && renderGroups()]\n    }), showRestoreButton && messageBoxOpen && /*#__PURE__*/_jsx(MessageBox, {\n      open: true,\n      type: MessageBoxType.Warning,\n      actions: [MessageBoxAction.OK, MessageBoxAction.Cancel],\n      onClose: handleMessageBoxClose,\n      \"data-component-name\": \"FilterBarDialogResetMessageBox\",\n      children: i18nBundle.getText(FILTER_DIALOG_RESET_WARNING)\n    })]\n  });\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}