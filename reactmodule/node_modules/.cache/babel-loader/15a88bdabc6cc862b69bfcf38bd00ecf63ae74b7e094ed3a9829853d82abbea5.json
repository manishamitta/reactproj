{"ast":null,"code":"var __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar Tokenizer_1;\nimport UI5Element from \"@ui5/webcomponents-base/dist/UI5Element.js\";\nimport property from \"@ui5/webcomponents-base/dist/decorators/property.js\";\nimport slot from \"@ui5/webcomponents-base/dist/decorators/slot.js\";\nimport event from \"@ui5/webcomponents-base/dist/decorators/event.js\";\nimport customElement from \"@ui5/webcomponents-base/dist/decorators/customElement.js\";\nimport litRender from \"@ui5/webcomponents-base/dist/renderer/LitRenderer.js\";\nimport ResizeHandler from \"@ui5/webcomponents-base/dist/delegate/ResizeHandler.js\";\nimport { renderFinished } from \"@ui5/webcomponents-base/dist/Render.js\";\nimport ItemNavigation from \"@ui5/webcomponents-base/dist/delegate/ItemNavigation.js\";\nimport { getEffectiveAriaLabelText } from \"@ui5/webcomponents-base/dist/util/AriaLabelHelper.js\";\nimport getActiveElement from \"@ui5/webcomponents-base/dist/util/getActiveElement.js\";\nimport { getFocusedElement } from \"@ui5/webcomponents-base/dist/util/PopupUtils.js\";\nimport ScrollEnablement from \"@ui5/webcomponents-base/dist/delegate/ScrollEnablement.js\";\nimport { getI18nBundle } from \"@ui5/webcomponents-base/dist/i18nBundle.js\";\nimport DOMReferenceConverter from \"@ui5/webcomponents-base/dist/converters/DOMReference.js\";\nimport { isSpace, isSpaceCtrl, isSpaceShift, isLeftCtrl, isRightCtrl, isUpCtrl, isDownCtrl, isUpShift, isDownShift, isLeftShift, isRightShift, isLeftShiftCtrl, isRightShiftCtrl, isDeleteShift, isInsertCtrl, isEnd, isHome, isHomeShift, isEndShift, isPageUpShift, isPageDownShift, isHomeCtrl, isEndCtrl, isRight, isLeft, isUp, isDown, isEscape } from \"@ui5/webcomponents-base/dist/Keys.js\";\nimport { isPhone } from \"@ui5/webcomponents-base/dist/Device.js\";\nimport ResponsivePopover from \"./ResponsivePopover.js\";\nimport List from \"./List.js\";\nimport ListSelectionMode from \"./types/ListSelectionMode.js\";\nimport Title from \"./Title.js\";\nimport Button from \"./Button.js\";\nimport Icon from \"./Icon.js\";\nimport ListItemStandard from \"./ListItemStandard.js\";\nimport TokenizerTemplate from \"./generated/templates/TokenizerTemplate.lit.js\";\nimport { MULTIINPUT_SHOW_MORE_TOKENS, TOKENIZER_ARIA_LABEL, TOKENIZER_POPOVER_REMOVE, TOKENIZER_ARIA_CONTAIN_TOKEN, TOKENIZER_ARIA_CONTAIN_ONE_TOKEN, TOKENIZER_ARIA_CONTAIN_SEVERAL_TOKENS, TOKENIZER_SHOW_ALL_ITEMS } from \"./generated/i18n/i18n-defaults.js\";\n// Styles\nimport TokenizerCss from \"./generated/themes/Tokenizer.css.js\";\nimport TokenizerPopoverCss from \"./generated/themes/TokenizerPopover.css.js\";\nimport ResponsivePopoverCommonCss from \"./generated/themes/ResponsivePopoverCommon.css.js\";\n// reuse suggestions focus styling for NMore popup\nimport SuggestionsCss from \"./generated/themes/Suggestions.css.js\";\nvar ClipboardDataOperation;\n(function (ClipboardDataOperation) {\n  ClipboardDataOperation[\"cut\"] = \"cut\";\n  ClipboardDataOperation[\"copy\"] = \"copy\";\n})(ClipboardDataOperation || (ClipboardDataOperation = {}));\n/**\n * @class\n *\n * ### Overview\n *\n * A `ui5-tokenizer` is an invisible container for `ui5-token`s that supports keyboard navigation and token selection.\n *\n * The `ui5-tokenizer` consists of two parts:\n * - Tokens - displays the available tokens.\n * - N-more indicator - contains the number of the remaining tokens that cannot be displayed due to the limited space.\n *\n * ### Keyboard Handling\n *\n * #### Basic Navigation\n * The `ui5-tokenizer` provides advanced keyboard handling.\n * When a token is focused the user can use the following keyboard\n * shortcuts in order to perform a navigation:\n *\n * - [Left] or [Right] / [Up] or [Down] - Navigates left and right through the tokens.\n * - [Home] - Navigates to the first token.\n * - [End] - Navigates to the last token.\n *\n * The user can use the following keyboard shortcuts to perform actions (such as select, delete):\n *\n * - [Space] - Selects a token.\n * - [Backspace] / [Delete] - Deletes a token.\n * **Note:** The deletion of a token is handled by the application with the use of the `token-delete` event.\n *\n * ### ES6 Module Import\n *\n * `import \"@ui5/webcomponents/dist/Tokenizer.js\";`\n *\n * @constructor\n * @extends UI5Element\n * @public\n * @since 2.0.0\n * @experimental This component is availabe since 2.0 under an experimental flag and its API and behaviour are subject to change.\n */\nlet Tokenizer = Tokenizer_1 = class Tokenizer extends UI5Element {\n  _handleResize() {\n    this._nMoreCount = this.overflownTokens.length;\n  }\n  constructor() {\n    super();\n    /**\n     * Defines whether the component is read-only.\n     *\n     * **Note:** A read-only component is not editable,\n     * but still provides visual feedback upon user interaction.\n     * @default false\n     * @public\n     */\n    this.readonly = false;\n    /**\n     * Defines whether the component is disabled.\n     *\n     * **Note:** A disabled component is completely noninteractive.\n     * @default false\n     * @public\n     */\n    this.disabled = false;\n    /**\n     * Indicates if the tokenizer should show all tokens or n more label instead\n     * **Note:** Used inside MultiInput and MultiComboBox components.\n     * @default false\n     * @private\n     */\n    this.expanded = false;\n    /**\n     * Indicates if the nMore popover is open\n     * **Note:** Used inside MultiInput and MultiComboBox components.\n     * @default false\n     * @private\n     */\n    this.open = false;\n    /**\n     * Prevents tokens to be part of the tab chain.\n     * **Note:** Used inside MultiInput and MultiComboBox components.\n     * @default false\n     * @private\n     */\n    this.preventInitialFocus = false;\n    /**\n     * Prevent opening of n-more Popover when label is clicked\n     * **Note:** Used inside MultiComboBox component.\n     * @default false\n     * @private\n     */\n    this.preventPopoverOpen = false;\n    /**\n     * Hides the popover arrow.\n     * **Note:** Used inside MultiInput and MultiComboBox components.\n     * @default false\n     * @private\n     */\n    this.hidePopoverArrow = false;\n    this._nMoreCount = 0;\n    this._tokensCount = 0;\n    this._tokenDeleting = false;\n    this._preventCollapse = false;\n    this._skipTabIndex = false;\n    this._previousToken = null;\n    this._resizeHandler = this._handleResize.bind(this);\n    this._itemNav = new ItemNavigation(this, {\n      currentIndex: -1,\n      getItemsCallback: this._getVisibleTokens.bind(this)\n    });\n    this._scrollEnablement = new ScrollEnablement(this);\n    this._deletedDialogItems = [];\n  }\n  onBeforeRendering() {\n    const tokensLength = this._tokens.length;\n    this._tokensCount = tokensLength;\n    this._tokens.forEach(token => {\n      token.singleToken = tokensLength === 1;\n      token.readonly = this.readonly;\n    });\n  }\n  onEnterDOM() {\n    ResizeHandler.register(this.contentDom, this._resizeHandler);\n  }\n  onExitDOM() {\n    ResizeHandler.deregister(this.contentDom, this._resizeHandler);\n  }\n  _handleNMoreClick() {\n    if (this.disabled) {\n      return;\n    }\n    this.expanded = true;\n    if (!this.preventPopoverOpen) {\n      this.open = true;\n      this.scrollToEnd();\n    }\n    this._tokens.forEach(token => {\n      token.forcedTabIndex = \"-1\";\n    });\n    this._skipTabIndex = true;\n    this.fireEvent(\"show-more-items-press\");\n  }\n  _onmousedown(e) {\n    if (e.target.hasAttribute(\"ui5-token\")) {\n      const target = e.target;\n      this.expanded = true;\n      if (this.open) {\n        this._preventCollapse = true;\n      }\n      if (!target.toBeDeleted) {\n        this._itemNav.setCurrentItem(target);\n        this._scrollToToken(target);\n      }\n    }\n  }\n  onTokenSelect() {\n    const tokens = this._tokens;\n    const firstToken = tokens[0];\n    if (tokens.length === 1 && firstToken.isTruncatable) {\n      this.open = firstToken.selected;\n    }\n  }\n  _getVisibleTokens() {\n    if (this.disabled) {\n      return [];\n    }\n    return this._tokens.filter((token, index) => {\n      return index < this._tokens.length - this._nMoreCount;\n    });\n  }\n  onAfterRendering() {\n    const tokensArray = this._tokens;\n    const firstToken = tokensArray[0];\n    this._nMoreCount = this.overflownTokens.length;\n    if (firstToken && !this.disabled && !this.preventInitialFocus && !this._skipTabIndex) {\n      firstToken.forcedTabIndex = \"0\";\n    }\n    this._scrollEnablement.scrollContainer = this.contentDom;\n    if (this.expanded) {\n      this._expandedScrollWidth = this.contentDom.scrollWidth;\n    }\n    this._tokenDeleting = false;\n  }\n  _delete(e) {\n    const target = e.target;\n    if (!e.detail) {\n      // if there are no details, the event is triggered by a click\n      this._tokenClickDelete(e, target);\n      this.open = false;\n      return;\n    }\n    this.deleteToken(target, e.detail.backSpace);\n  }\n  _tokenClickDelete(e, token) {\n    const tokens = this._getVisibleTokens();\n    const target = e.target;\n    const deletedTokenIndex = token ? tokens.indexOf(token) : tokens.indexOf(target); // The index of the token that just got deleted\n    const nextTokenIndex = deletedTokenIndex === tokens.length - 1 ? deletedTokenIndex - 1 : deletedTokenIndex + 1; // The index of the next token that needs to be focused next due to the deletion\n    const nextToken = tokens[nextTokenIndex]; // if the last item was deleted this will be undefined\n    this._handleCurrentItemAfterDeletion(nextToken);\n    this._tokenDeleting = true;\n    this.fireEvent(\"token-delete\", {\n      tokens: [token] || [target]\n    });\n  }\n  _handleCurrentItemAfterDeletion(nextToken) {\n    if (nextToken && !isPhone()) {\n      setTimeout(() => {\n        nextToken.focus();\n      }, 0);\n    }\n  }\n  /**\n   * Removes a token from the Tokenizer.\n   * This method should only be used by ui5-multi-combobox and ui5-multi-input\n   * @protected\n   * @param token Token to be focused.\n   * @param forwardFocusToPrevious Indicates whether the focus will be forwarded to previous or next token after deletion.\n   */\n  deleteToken(token, forwardFocusToPrevious) {\n    const tokens = this._getVisibleTokens();\n    const deletedTokenIndex = tokens.indexOf(token);\n    let nextTokenIndex = deletedTokenIndex === tokens.length - 1 ? deletedTokenIndex - 1 : deletedTokenIndex + 1;\n    const notSelectedTokens = tokens.filter(t => !t.selected);\n    if (forwardFocusToPrevious) {\n      // on backspace key select the previous item (unless deleting the first)\n      nextTokenIndex = deletedTokenIndex === 0 ? deletedTokenIndex + 1 : deletedTokenIndex - 1;\n    } else {\n      // on delete key or mouse click on the \"x\" select the next item (unless deleting the last)\n      nextTokenIndex = deletedTokenIndex === tokens.length - 1 ? deletedTokenIndex - 1 : deletedTokenIndex + 1;\n    }\n    let nextToken = tokens[nextTokenIndex];\n    if (notSelectedTokens.length > 1) {\n      while (nextToken && nextToken.selected) {\n        nextTokenIndex = forwardFocusToPrevious ? --nextTokenIndex : ++nextTokenIndex;\n        if (nextTokenIndex < 0) {\n          nextToken = notSelectedTokens[0];\n        }\n        if (nextTokenIndex > notSelectedTokens.length) {\n          nextToken = notSelectedTokens[notSelectedTokens.length - 1];\n        }\n      }\n    } else {\n      nextToken = notSelectedTokens[0];\n    }\n    this._handleCurrentItemAfterDeletion(nextToken);\n    this._tokenDeleting = true;\n    if (this._selectedTokens.length) {\n      this.fireEvent(\"token-delete\", {\n        tokens: this._selectedTokens\n      });\n    } else {\n      this.fireEvent(\"token-delete\", {\n        tokens: [token]\n      });\n    }\n  }\n  async itemDelete(e) {\n    const token = e.detail.item.tokenRef;\n    const tokensArray = this._tokens;\n    // delay the token deletion in order to close the popover before removing token of the DOM\n    if (tokensArray.length === 1) {\n      const morePopover = this.getPopover();\n      morePopover.addEventListener(\"ui5-close\", () => {\n        this.fireEvent(\"token-delete\", {\n          tokens: [token]\n        });\n      }, {\n        once: true\n      });\n      this.open = false;\n    } else {\n      if (isPhone()) {\n        token._isVisible = false;\n        this._deletedDialogItems.push(token);\n      } else {\n        this.fireEvent(\"token-delete\", {\n          tokens: [token]\n        });\n      }\n      const currentListItem = e.detail.item;\n      const nextListItem = currentListItem.nextElementSibling;\n      const previousListItem = currentListItem.previousElementSibling;\n      const focusItem = nextListItem || previousListItem;\n      if (focusItem) {\n        await renderFinished();\n        focusItem.focus();\n      }\n    }\n  }\n  handleBeforeClose() {\n    const tokensArray = this._tokens;\n    if (isPhone()) {\n      tokensArray.forEach(token => {\n        token.selected = false;\n      });\n    }\n    if (!this._tokenDeleting && !this._preventCollapse) {\n      this._preventCollapse = false;\n      this.expanded = false;\n    }\n  }\n  handleBeforeOpen() {\n    this._tokens.forEach(token => {\n      token._isVisible = true;\n    });\n    const list = this._getList();\n    const firstListItem = list.querySelectorAll(\"[ui5-li]\")[0];\n    list._itemNavigation.setCurrentItem(firstListItem);\n    this.fireEvent(\"before-more-popover-open\");\n  }\n  handleAfterClose() {\n    this.open = false;\n    this._preventCollapse = false;\n    this._focusedElementBeforeOpen = null;\n    this._tokens.forEach(token => {\n      token._isVisible = true;\n    });\n  }\n  handleDialogButtonPress(e) {\n    const isOkButton = e.target.hasAttribute(\"data-ui5-tokenizer-dialog-ok-button\");\n    const confirm = !!isOkButton;\n    if (confirm && this._deletedDialogItems.length) {\n      this.fireEvent(\"token-delete\", {\n        tokens: this._deletedDialogItems\n      });\n    }\n    this.open = false;\n  }\n  _onkeydown(e) {\n    const isCtrl = !!(e.metaKey || e.ctrlKey);\n    if (isCtrl && [\"c\", \"x\"].includes(e.key.toLowerCase()) || isDeleteShift(e) || isInsertCtrl(e)) {\n      e.preventDefault();\n      const isCut = e.key.toLowerCase() === \"x\" || isDeleteShift(e);\n      const selectedTokens = this._tokens.filter(token => token.selected);\n      const focusedToken = selectedTokens.find(token => token.focused);\n      if (isCut) {\n        const cutResult = this._fillClipboard(ClipboardDataOperation.cut, selectedTokens);\n        focusedToken && this.deleteToken(focusedToken);\n        return cutResult;\n      }\n      return this._fillClipboard(ClipboardDataOperation.copy, selectedTokens);\n    }\n    if (isCtrl && e.key.toLowerCase() === \"i\" && this._tokens.length > 0) {\n      e.preventDefault();\n      this._preventCollapse = true;\n      this._focusedElementBeforeOpen = getFocusedElement();\n      this.open = true;\n    }\n    if (isSpaceShift(e)) {\n      e.preventDefault();\n    }\n    if (isSpace(e) || isSpaceCtrl(e)) {\n      e.preventDefault();\n      return this._handleTokenSelection(e, false);\n    }\n    if (isHomeShift(e) || isPageUpShift(e)) {\n      this._handleHomeShift(e);\n    }\n    if (isEndShift(e) || isPageDownShift(e)) {\n      this._handleEndShift(e);\n    }\n    this._handleItemNavigation(e, this._tokens);\n  }\n  _onPopoverListKeydown(e) {\n    const isCtrl = !!(e.metaKey || e.ctrlKey);\n    if (isCtrl && e.key.toLowerCase() === \"i\" || isEscape(e)) {\n      e.preventDefault();\n      this.open = false;\n      this._preventCollapse = true;\n      this._focusedElementBeforeOpen && this._focusedElementBeforeOpen.focus();\n      if (!this._focusedElementBeforeOpen) {\n        this._focusLastToken();\n      }\n    }\n    if (e.key.toLowerCase() === \"f7\") {\n      e.preventDefault();\n      const eventTarget = e.target;\n      const activeElement = getActiveElement();\n      if (activeElement?.part.value === \"native-li\") {\n        eventTarget.shadowRoot.querySelector(\"[part=delete-button]\").focus();\n      } else {\n        eventTarget.focus();\n      }\n    }\n  }\n  _handleItemNavigation(e, tokens) {\n    const isCtrl = !!(e.metaKey || e.ctrlKey);\n    const target = e.target;\n    if (isLeftCtrl(e) || isRightCtrl(e) || isDownCtrl(e) || isUpCtrl(e)) {\n      return this._handleArrowCtrl(e, target, tokens, isRightCtrl(e) || isDownCtrl(e));\n    }\n    if (isLeftShift(e) || isRightShift(e) || isUpShift(e) || isDownShift(e) || isLeftShiftCtrl(e) || isRightShiftCtrl(e)) {\n      e.preventDefault();\n      return this._handleArrowShift(target, tokens, isRightShift(e) || isRightShiftCtrl(e) || isDownShift(e));\n    }\n    if (isHome(e) || isEnd(e) || isHomeCtrl(e) || isEndCtrl(e)) {\n      e.preventDefault();\n      return this._handleHome(tokens, isEnd(e) || isEndCtrl(e));\n    }\n    if (isCtrl && e.key.toLowerCase() === \"a\") {\n      e.preventDefault();\n      return this._toggleTokenSelection(tokens);\n    }\n    if (isLeft(e) || isRight(e) || isUp(e) || isDown(e)) {\n      e.preventDefault();\n      const nextTokenIdx = this._calcNextTokenIndex(this._tokens.find(token => token.focused), tokens, isRight(e) || isDown(e));\n      this._scrollToToken(tokens[nextTokenIdx]);\n    }\n  }\n  _handleHome(tokens, endKeyPressed) {\n    if (!tokens || !tokens.length) {\n      return -1;\n    }\n    const index = endKeyPressed ? tokens.length - 1 : 0;\n    tokens[index].focus();\n  }\n  _handleHomeShift(e) {\n    const tokens = this._tokens;\n    const target = e.target;\n    const currentTokenIdx = tokens.indexOf(target);\n    const previousSelectedTokens = [...this._selectedTokens];\n    tokens.filter((token, index) => index <= currentTokenIdx).forEach(token => {\n      token.selected = true;\n    });\n    const selectedTokensChanged = JSON.stringify(previousSelectedTokens) !== JSON.stringify(this._selectedTokens);\n    if (selectedTokensChanged) {\n      this.fireEvent(\"selection-change\", {\n        tokens: this._selectedTokens\n      });\n    }\n    tokens[0].focus();\n  }\n  _handleEndShift(e) {\n    const tokens = this._tokens;\n    const target = e.target;\n    const currentTokenIdx = tokens.indexOf(target);\n    const previousSelectedTokens = [...this._selectedTokens];\n    tokens.filter((token, index) => index >= currentTokenIdx).forEach(token => {\n      token.selected = true;\n    });\n    const selectedTokensChanged = JSON.stringify(previousSelectedTokens) !== JSON.stringify(this._selectedTokens);\n    if (selectedTokensChanged) {\n      this.fireEvent(\"selection-change\", {\n        tokens: this._selectedTokens\n      });\n    }\n    tokens[tokens.length - 1].focus();\n  }\n  _calcNextTokenIndex(focusedToken, tokens, backwards) {\n    if (!tokens.length) {\n      return -1;\n    }\n    const focusedTokenIndex = tokens.indexOf(focusedToken);\n    let nextIndex = backwards ? focusedTokenIndex + 1 : focusedTokenIndex - 1;\n    if (nextIndex >= tokens.length) {\n      nextIndex = tokens.length - 1;\n    }\n    if (nextIndex < 0) {\n      nextIndex = 0;\n    }\n    return nextIndex;\n  }\n  _handleArrowCtrl(e, focusedToken, tokens, backwards) {\n    const nextIndex = this._calcNextTokenIndex(focusedToken, tokens, backwards);\n    e.preventDefault();\n    if (nextIndex === -1) {\n      return;\n    }\n    setTimeout(() => {\n      tokens[nextIndex].focus();\n    }, 0);\n    this._scrollToToken(tokens[nextIndex]);\n  }\n  _handleArrowShift(focusedToken, tokens, backwards) {\n    const focusedTokenIndex = tokens.indexOf(focusedToken);\n    const nextIndex = backwards ? focusedTokenIndex + 1 : focusedTokenIndex - 1;\n    const previousSelectedTokens = [...this._selectedTokens];\n    if (nextIndex === -1 || nextIndex === tokens.length) {\n      return;\n    }\n    focusedToken.selected = true;\n    tokens[nextIndex].selected = true;\n    const selectedTokensChanged = JSON.stringify(previousSelectedTokens) !== JSON.stringify(this._selectedTokens);\n    if (selectedTokensChanged) {\n      this.fireEvent(\"selection-change\", {\n        tokens: this._selectedTokens\n      });\n    }\n    tokens[nextIndex].focus();\n    this._scrollToToken(tokens[nextIndex]);\n  }\n  _click(e) {\n    if (e.metaKey || e.ctrlKey) {\n      this.fireEvent(\"selection-change\", {\n        tokens: this._selectedTokens\n      });\n      return;\n    }\n    const targetToken = e.target;\n    if (!e.shiftKey) {\n      this._previousToken = targetToken;\n    }\n    let focusedToken = targetToken;\n    if (this._previousToken) {\n      focusedToken = this._previousToken;\n    } else {\n      this._previousToken = focusedToken;\n    }\n    if (e.shiftKey) {\n      const tokensArray = this._tokens;\n      const lastClickedIndex = tokensArray.indexOf(targetToken);\n      const firstSelectedTokenIndex = tokensArray.indexOf(focusedToken);\n      const start = Math.min(lastClickedIndex, firstSelectedTokenIndex);\n      const end = Math.max(lastClickedIndex, firstSelectedTokenIndex);\n      if (lastClickedIndex !== -1) {\n        tokensArray.forEach((token, i) => {\n          token.selected = i >= start && i <= end;\n        });\n      }\n      this.fireEvent(\"selection-change\", {\n        tokens: this._selectedTokens\n      });\n      return;\n    }\n    this._handleTokenSelection(e);\n  }\n  _onfocusin(e) {\n    const target = e.target;\n    this.open = false;\n    this._itemNav.setCurrentItem(target);\n    if (!this.expanded) {\n      this.expanded = true;\n    }\n  }\n  _onfocusout(e) {\n    const relatedTarget = e.relatedTarget;\n    this._tokens.forEach(token => {\n      token.forcedTabIndex = \"-1\";\n    });\n    this._itemNav._currentIndex = -1;\n    this._skipTabIndex = true;\n    if (!this.contains(relatedTarget)) {\n      this._tokens[0].forcedTabIndex = \"0\";\n      this._skipTabIndex = false;\n    }\n    if (!this._tokenDeleting && !this._preventCollapse) {\n      this._preventCollapse = false;\n      this.expanded = false;\n    }\n  }\n  _toggleTokenSelection(tokens) {\n    if (!tokens || !tokens.length) {\n      return;\n    }\n    const tokensAreSelected = tokens.every(token => token.selected);\n    tokens.forEach(token => {\n      token.selected = !tokensAreSelected;\n    });\n    this.fireEvent(\"selection-change\", {\n      tokens: this._selectedTokens\n    });\n  }\n  _handleTokenSelection(e) {\n    let deselectAll = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n    const target = e.target;\n    if (target.hasAttribute(\"ui5-token\")) {\n      const deselectTokens = deselectAll ? this._tokens : [];\n      deselectTokens.forEach(token => {\n        if (token !== target) {\n          token.selected = false;\n        }\n      });\n      this.fireEvent(\"selection-change\", {\n        tokens: this._selectedTokens\n      });\n    }\n  }\n  _fillClipboard(shortcutName, tokens) {\n    const tokensTexts = tokens.filter(token => token.selected).map(token => token.text).join(\"\\r\\n\");\n    const cutToClipboard = e => {\n      if (e.clipboardData) {\n        e.clipboardData.setData(\"text/plain\", tokensTexts);\n      }\n      e.preventDefault();\n    };\n    document.addEventListener(shortcutName, cutToClipboard);\n    document.execCommand(shortcutName);\n    document.removeEventListener(shortcutName, cutToClipboard);\n  }\n  /**\n   * Scrolls the container of the tokens to its beginning.\n   * This method is used by MultiInput and MultiComboBox.\n   * @protected\n   */\n  scrollToStart() {\n    if (this._scrollEnablement.scrollContainer) {\n      this._scrollEnablement.scrollTo(0, 0);\n    }\n  }\n  /**\n   * Scrolls the container of the tokens to its end when expanded.\n   * This method is used by MultiInput and MultiComboBox.\n   * @protected\n   */\n  scrollToEnd() {\n    const expandedTokenizerScrollWidth = this.contentDom && (this.effectiveDir !== \"rtl\" ? this.contentDom.scrollWidth : -this.contentDom.scrollWidth);\n    if (this._scrollEnablement.scrollContainer) {\n      this._scrollEnablement.scrollTo(expandedTokenizerScrollWidth, 0, 5, 10);\n    }\n  }\n  /**\n   * Scrolls token to the visible area of the container.\n   * Adds 4 pixels to the scroll position to ensure padding and border visibility on both ends\n   * @protected\n   */\n  _scrollToToken(token) {\n    if (!this.contentDom) {\n      return;\n    }\n    const tokenRect = token.getBoundingClientRect();\n    const tokenContainerRect = this.contentDom.getBoundingClientRect();\n    if (tokenRect.left < tokenContainerRect.left) {\n      this._scrollEnablement.scrollTo(this.contentDom.scrollLeft - (tokenContainerRect.left - tokenRect.left + 5), 0);\n    } else if (tokenRect.right > tokenContainerRect.right) {\n      this._scrollEnablement.scrollTo(this.contentDom.scrollLeft + (tokenRect.right - tokenContainerRect.right + 5), 0);\n    }\n  }\n  _getList() {\n    return this.getPopover().querySelector(\"[ui5-list]\");\n  }\n  get _tokens() {\n    return this.getSlottedNodes(\"tokens\");\n  }\n  get morePopoverOpener() {\n    // return this.opener ? this : this.opener;\n    if (this.opener) {\n      return this.opener;\n    }\n    return this;\n  }\n  get _nMoreText() {\n    if (!this._nMoreCount) {\n      return;\n    }\n    if (this._getVisibleTokens().length) {\n      return Tokenizer_1.i18nBundle.getText(MULTIINPUT_SHOW_MORE_TOKENS, this._nMoreCount);\n    }\n    return Tokenizer_1.i18nBundle.getText(TOKENIZER_SHOW_ALL_ITEMS, this._nMoreCount);\n  }\n  get showNMore() {\n    return !this.expanded && !!this.overflownTokens.length;\n  }\n  get contentDom() {\n    return this.shadowRoot.querySelector(\".ui5-tokenizer--content\");\n  }\n  get moreLink() {\n    return this.shadowRoot.querySelector(\".ui5-tokenizer-more-text\");\n  }\n  get tokenizerLabel() {\n    const effectiveLabelText = getEffectiveAriaLabelText(this);\n    return effectiveLabelText || Tokenizer_1.i18nBundle.getText(TOKENIZER_ARIA_LABEL);\n  }\n  get tokenizerAriaDescription() {\n    return getEffectiveAriaLabelText(this) ? Tokenizer_1.i18nBundle.getText(TOKENIZER_ARIA_LABEL) : undefined;\n  }\n  get _ariaDisabled() {\n    return this.disabled || undefined;\n  }\n  get _ariaReadonly() {\n    return this.readonly || undefined;\n  }\n  get morePopoverTitle() {\n    return Tokenizer_1.i18nBundle.getText(TOKENIZER_POPOVER_REMOVE);\n  }\n  get overflownTokens() {\n    if (!this.contentDom) {\n      return [];\n    }\n    const tokensArray = this._tokens;\n    // Reset the overflow prop of the tokens first in order\n    // to use their dimensions for calculation because already\n    // hidden tokens are set to 'display: none'\n    tokensArray.forEach(token => {\n      token.overflows = false;\n    });\n    return tokensArray.filter(token => {\n      const parentRect = this.contentDom.getBoundingClientRect();\n      const tokenRect = token.getBoundingClientRect();\n      const tokenEnd = Number(tokenRect.right.toFixed(2));\n      const parentEnd = Number(parentRect.right.toFixed(2));\n      const tokenStart = Number(tokenRect.left.toFixed(2));\n      const parentStart = Number(parentRect.left.toFixed(2));\n      token.overflows = !this.expanded && (tokenStart < parentStart || tokenEnd > parentEnd);\n      return token.overflows;\n    });\n  }\n  get _isPhone() {\n    return isPhone();\n  }\n  get _selectedTokens() {\n    return this._tokens.filter(token => token.selected);\n  }\n  get _nMoreListMode() {\n    if (this.readonly || this.disabled) {\n      return ListSelectionMode.None;\n    }\n    return ListSelectionMode.Delete;\n  }\n  get styles() {\n    return {\n      popover: {\n        \"min-width\": this.popoverMinWidth ? `${this.popoverMinWidth}px` : `${this.getBoundingClientRect().width}px`\n      }\n    };\n  }\n  /**\n   * @protected\n   */\n  _focusLastToken() {\n    const tokens = this._tokens;\n    if (tokens.length === 0) {\n      return;\n    }\n    const lastToken = tokens[tokens.length - 1];\n    lastToken.focus();\n  }\n  static async onDefine() {\n    Tokenizer_1.i18nBundle = await getI18nBundle(\"@ui5/webcomponents\");\n  }\n  getPopover() {\n    return this.shadowRoot.querySelector(\"[ui5-responsive-popover]\");\n  }\n};\n__decorate([property({\n  type: Boolean\n})], Tokenizer.prototype, \"readonly\", void 0);\n__decorate([property({\n  type: Boolean\n})], Tokenizer.prototype, \"disabled\", void 0);\n__decorate([property()], Tokenizer.prototype, \"accessibleName\", void 0);\n__decorate([property()], Tokenizer.prototype, \"accessibleNameRef\", void 0);\n__decorate([property({\n  type: Boolean\n})], Tokenizer.prototype, \"expanded\", void 0);\n__decorate([property({\n  type: Boolean\n})], Tokenizer.prototype, \"open\", void 0);\n__decorate([property({\n  converter: DOMReferenceConverter\n})], Tokenizer.prototype, \"opener\", void 0);\n__decorate([property({\n  type: Number\n})], Tokenizer.prototype, \"popoverMinWidth\", void 0);\n__decorate([property({\n  type: Boolean\n})], Tokenizer.prototype, \"preventInitialFocus\", void 0);\n__decorate([property({\n  type: Boolean\n})], Tokenizer.prototype, \"preventPopoverOpen\", void 0);\n__decorate([property({\n  type: Boolean\n})], Tokenizer.prototype, \"hidePopoverArrow\", void 0);\n__decorate([property({\n  type: Number\n})], Tokenizer.prototype, \"_nMoreCount\", void 0);\n__decorate([property({\n  type: Number\n})], Tokenizer.prototype, \"_tokensCount\", void 0);\n__decorate([slot({\n  type: HTMLElement,\n  \"default\": true,\n  individualSlots: true,\n  invalidateOnChildChange: {\n    properties: [\"_isVisible\"],\n    slots: false\n  }\n})], Tokenizer.prototype, \"tokens\", void 0);\nTokenizer = Tokenizer_1 = __decorate([customElement({\n  tag: \"ui5-tokenizer\",\n  languageAware: true,\n  renderer: litRender,\n  template: TokenizerTemplate,\n  styles: [TokenizerCss, ResponsivePopoverCommonCss, SuggestionsCss, TokenizerPopoverCss],\n  dependencies: [ResponsivePopover, List, ListItemStandard, Title, Button, Icon]\n})\n/**\n * Fired when tokens are being deleted (delete icon, delete or backspace is pressed)\n * @param {Array} tokens An array containing the deleted tokens.\n * @public\n */, event(\"token-delete\", {\n  detail: {\n    /**\n    * @public\n    */\n    tokens: {\n      type: Array\n    }\n  }\n})\n/**\n * Fired when token selection is changed by user interaction\n *\n * @param {Array<Token>} tokens An array of the selected items.\n * @public\n */, event(\"selection-change\", {\n  detail: {\n    tokens: {\n      type: Array\n    }\n  }\n})\n/**\n * Fired when nMore link is pressed.\n * @private\n */, event(\"show-more-items-press\")\n/**\n * Fired before nMore Popover is opened.\n * @private\n */, event(\"before-more-popover-open\")], Tokenizer);\nconst getTokensCountText = iTokenCount => {\n  const tokenCountMap = {\n    0: TOKENIZER_ARIA_CONTAIN_TOKEN,\n    1: TOKENIZER_ARIA_CONTAIN_ONE_TOKEN\n  };\n  if (iTokenCount in tokenCountMap) {\n    return Tokenizer.i18nBundle.getText(tokenCountMap[iTokenCount]);\n  }\n  return Tokenizer.i18nBundle.getText(TOKENIZER_ARIA_CONTAIN_SEVERAL_TOKENS, iTokenCount);\n};\nTokenizer.define();\nexport default Tokenizer;\nexport { getTokensCountText };\nexport { ClipboardDataOperation };","map":{"version":3,"names":["UI5Element","property","slot","event","customElement","litRender","ResizeHandler","renderFinished","ItemNavigation","getEffectiveAriaLabelText","getActiveElement","getFocusedElement","ScrollEnablement","getI18nBundle","DOMReferenceConverter","isSpace","isSpaceCtrl","isSpaceShift","isLeftCtrl","isRightCtrl","isUpCtrl","isDownCtrl","isUpShift","isDownShift","isLeftShift","isRightShift","isLeftShiftCtrl","isRightShiftCtrl","isDeleteShift","isInsertCtrl","isEnd","isHome","isHomeShift","isEndShift","isPageUpShift","isPageDownShift","isHomeCtrl","isEndCtrl","isRight","isLeft","isUp","isDown","isEscape","isPhone","ResponsivePopover","List","ListSelectionMode","Title","Button","Icon","ListItemStandard","TokenizerTemplate","MULTIINPUT_SHOW_MORE_TOKENS","TOKENIZER_ARIA_LABEL","TOKENIZER_POPOVER_REMOVE","TOKENIZER_ARIA_CONTAIN_TOKEN","TOKENIZER_ARIA_CONTAIN_ONE_TOKEN","TOKENIZER_ARIA_CONTAIN_SEVERAL_TOKENS","TOKENIZER_SHOW_ALL_ITEMS","TokenizerCss","TokenizerPopoverCss","ResponsivePopoverCommonCss","SuggestionsCss","ClipboardDataOperation","Tokenizer","Tokenizer_1","_handleResize","_nMoreCount","overflownTokens","length","constructor","readonly","disabled","expanded","open","preventInitialFocus","preventPopoverOpen","hidePopoverArrow","_tokensCount","_tokenDeleting","_preventCollapse","_skipTabIndex","_previousToken","_resizeHandler","bind","_itemNav","currentIndex","getItemsCallback","_getVisibleTokens","_scrollEnablement","_deletedDialogItems","onBeforeRendering","tokensLength","_tokens","forEach","token","singleToken","onEnterDOM","register","contentDom","onExitDOM","deregister","_handleNMoreClick","scrollToEnd","forcedTabIndex","fireEvent","_onmousedown","e","target","hasAttribute","toBeDeleted","setCurrentItem","_scrollToToken","onTokenSelect","tokens","firstToken","isTruncatable","selected","filter","index","onAfterRendering","tokensArray","scrollContainer","_expandedScrollWidth","scrollWidth","_delete","detail","_tokenClickDelete","deleteToken","backSpace","deletedTokenIndex","indexOf","nextTokenIndex","nextToken","_handleCurrentItemAfterDeletion","setTimeout","focus","forwardFocusToPrevious","notSelectedTokens","t","_selectedTokens","itemDelete","item","tokenRef","morePopover","getPopover","addEventListener","once","_isVisible","push","currentListItem","nextListItem","nextElementSibling","previousListItem","previousElementSibling","focusItem","handleBeforeClose","handleBeforeOpen","list","_getList","firstListItem","querySelectorAll","_itemNavigation","handleAfterClose","_focusedElementBeforeOpen","handleDialogButtonPress","isOkButton","confirm","_onkeydown","isCtrl","metaKey","ctrlKey","includes","key","toLowerCase","preventDefault","isCut","selectedTokens","focusedToken","find","focused","cutResult","_fillClipboard","cut","copy","_handleTokenSelection","_handleHomeShift","_handleEndShift","_handleItemNavigation","_onPopoverListKeydown","_focusLastToken","eventTarget","activeElement","part","value","shadowRoot","querySelector","_handleArrowCtrl","_handleArrowShift","_handleHome","_toggleTokenSelection","nextTokenIdx","_calcNextTokenIndex","endKeyPressed","currentTokenIdx","previousSelectedTokens","selectedTokensChanged","JSON","stringify","backwards","focusedTokenIndex","nextIndex","_click","targetToken","shiftKey","lastClickedIndex","firstSelectedTokenIndex","start","Math","min","end","max","i","_onfocusin","_onfocusout","relatedTarget","_currentIndex","contains","tokensAreSelected","every","deselectAll","arguments","undefined","deselectTokens","shortcutName","tokensTexts","map","text","join","cutToClipboard","clipboardData","setData","document","execCommand","removeEventListener","scrollToStart","scrollTo","expandedTokenizerScrollWidth","effectiveDir","tokenRect","getBoundingClientRect","tokenContainerRect","left","scrollLeft","right","getSlottedNodes","morePopoverOpener","opener","_nMoreText","i18nBundle","getText","showNMore","moreLink","tokenizerLabel","effectiveLabelText","tokenizerAriaDescription","_ariaDisabled","_ariaReadonly","morePopoverTitle","overflows","parentRect","tokenEnd","Number","toFixed","parentEnd","tokenStart","parentStart","_isPhone","_nMoreListMode","None","Delete","styles","popover","popoverMinWidth","width","lastToken","onDefine","__decorate","type","Boolean","converter","HTMLElement","individualSlots","invalidateOnChildChange","properties","slots","tag","languageAware","renderer","template","dependencies","Array","getTokensCountText","iTokenCount","tokenCountMap","define"],"sources":["/home/user/projects/reactproj/node_modules/@ui5/webcomponents/src/Tokenizer.ts"],"sourcesContent":["import UI5Element from \"@ui5/webcomponents-base/dist/UI5Element.js\";\nimport property from \"@ui5/webcomponents-base/dist/decorators/property.js\";\nimport slot from \"@ui5/webcomponents-base/dist/decorators/slot.js\";\nimport event from \"@ui5/webcomponents-base/dist/decorators/event.js\";\nimport customElement from \"@ui5/webcomponents-base/dist/decorators/customElement.js\";\nimport litRender from \"@ui5/webcomponents-base/dist/renderer/LitRenderer.js\";\nimport ResizeHandler from \"@ui5/webcomponents-base/dist/delegate/ResizeHandler.js\";\nimport { renderFinished } from \"@ui5/webcomponents-base/dist/Render.js\";\nimport type { ResizeObserverCallback } from \"@ui5/webcomponents-base/dist/delegate/ResizeHandler.js\";\nimport ItemNavigation from \"@ui5/webcomponents-base/dist/delegate/ItemNavigation.js\";\nimport { getEffectiveAriaLabelText } from \"@ui5/webcomponents-base/dist/util/AriaLabelHelper.js\";\nimport getActiveElement from \"@ui5/webcomponents-base/dist/util/getActiveElement.js\";\nimport { getFocusedElement } from \"@ui5/webcomponents-base/dist/util/PopupUtils.js\";\nimport ScrollEnablement from \"@ui5/webcomponents-base/dist/delegate/ScrollEnablement.js\";\nimport type I18nBundle from \"@ui5/webcomponents-base/dist/i18nBundle.js\";\nimport type { I18nText } from \"@ui5/webcomponents-base/dist/i18nBundle.js\";\nimport { getI18nBundle } from \"@ui5/webcomponents-base/dist/i18nBundle.js\";\nimport DOMReferenceConverter from \"@ui5/webcomponents-base/dist/converters/DOMReference.js\";\nimport {\n\tisSpace,\n\tisSpaceCtrl,\n\tisSpaceShift,\n\tisLeftCtrl,\n\tisRightCtrl,\n\tisUpCtrl,\n\tisDownCtrl,\n\tisUpShift,\n\tisDownShift,\n\tisLeftShift,\n\tisRightShift,\n\tisLeftShiftCtrl,\n\tisRightShiftCtrl,\n\tisDeleteShift,\n\tisInsertCtrl,\n\tisEnd,\n\tisHome,\n\tisHomeShift,\n\tisEndShift,\n\tisPageUpShift,\n\tisPageDownShift,\n\tisHomeCtrl,\n\tisEndCtrl,\n\tisRight,\n\tisLeft,\n\tisUp,\n\tisDown,\n\tisEscape,\n} from \"@ui5/webcomponents-base/dist/Keys.js\";\nimport { isPhone } from \"@ui5/webcomponents-base/dist/Device.js\";\nimport ResponsivePopover from \"./ResponsivePopover.js\";\nimport List from \"./List.js\";\nimport ListSelectionMode from \"./types/ListSelectionMode.js\";\nimport Title from \"./Title.js\";\nimport Button from \"./Button.js\";\nimport Icon from \"./Icon.js\";\nimport ListItemStandard from \"./ListItemStandard.js\";\nimport type Token from \"./Token.js\";\nimport type { IToken } from \"./MultiInput.js\";\nimport type { TokenDeleteEventDetail } from \"./Token.js\";\nimport TokenizerTemplate from \"./generated/templates/TokenizerTemplate.lit.js\";\nimport {\n\tMULTIINPUT_SHOW_MORE_TOKENS,\n\tTOKENIZER_ARIA_LABEL,\n\tTOKENIZER_POPOVER_REMOVE,\n\tTOKENIZER_ARIA_CONTAIN_TOKEN,\n\tTOKENIZER_ARIA_CONTAIN_ONE_TOKEN,\n\tTOKENIZER_ARIA_CONTAIN_SEVERAL_TOKENS,\n\tTOKENIZER_SHOW_ALL_ITEMS,\n} from \"./generated/i18n/i18n-defaults.js\";\n\n// Styles\nimport TokenizerCss from \"./generated/themes/Tokenizer.css.js\";\nimport TokenizerPopoverCss from \"./generated/themes/TokenizerPopover.css.js\";\nimport ResponsivePopoverCommonCss from \"./generated/themes/ResponsivePopoverCommon.css.js\";\n\n// reuse suggestions focus styling for NMore popup\nimport SuggestionsCss from \"./generated/themes/Suggestions.css.js\";\nimport type ListItem from \"./ListItem.js\";\n\ntype TokenCountMapType = { [x: number]: I18nText };\n\ntype TokenizerTokenDeleteEventDetail = {\n\ttokens: Token[];\n}\n\ntype TokenizerSelectionChangeEventDetail = {\n\ttokens: Token[];\n}\n\ntype TokenizerDialogButtonPressDetail = {\n\tconfirm: boolean;\n}\n\nenum ClipboardDataOperation {\n\tcut = \"cut\",\n\tcopy = \"copy\",\n}\n\n/**\n * @class\n *\n * ### Overview\n *\n * A `ui5-tokenizer` is an invisible container for `ui5-token`s that supports keyboard navigation and token selection.\n *\n * The `ui5-tokenizer` consists of two parts:\n * - Tokens - displays the available tokens.\n * - N-more indicator - contains the number of the remaining tokens that cannot be displayed due to the limited space.\n *\n * ### Keyboard Handling\n *\n * #### Basic Navigation\n * The `ui5-tokenizer` provides advanced keyboard handling.\n * When a token is focused the user can use the following keyboard\n * shortcuts in order to perform a navigation:\n *\n * - [Left] or [Right] / [Up] or [Down] - Navigates left and right through the tokens.\n * - [Home] - Navigates to the first token.\n * - [End] - Navigates to the last token.\n *\n * The user can use the following keyboard shortcuts to perform actions (such as select, delete):\n *\n * - [Space] - Selects a token.\n * - [Backspace] / [Delete] - Deletes a token.\n * **Note:** The deletion of a token is handled by the application with the use of the `token-delete` event.\n *\n * ### ES6 Module Import\n *\n * `import \"@ui5/webcomponents/dist/Tokenizer.js\";`\n *\n * @constructor\n * @extends UI5Element\n * @public\n * @since 2.0.0\n * @experimental This component is availabe since 2.0 under an experimental flag and its API and behaviour are subject to change.\n */\n@customElement({\n\ttag: \"ui5-tokenizer\",\n\tlanguageAware: true,\n\trenderer: litRender,\n\ttemplate: TokenizerTemplate,\n\tstyles: [\n\t\tTokenizerCss,\n\t\tResponsivePopoverCommonCss,\n\t\tSuggestionsCss,\n\t\tTokenizerPopoverCss,\n\t],\n\tdependencies: [\n\t\tResponsivePopover,\n\t\tList,\n\t\tListItemStandard,\n\t\tTitle,\n\t\tButton,\n\t\tIcon,\n\t],\n})\n\n/**\n * Fired when tokens are being deleted (delete icon, delete or backspace is pressed)\n * @param {Array} tokens An array containing the deleted tokens.\n * @public\n */\n@event<TokenizerTokenDeleteEventDetail>(\"token-delete\", {\n\tdetail: {\n\t\t/**\n\t\t* @public\n\t\t*/\n\t\ttokens: { type: Array },\n\t},\n})\n\n/**\n * Fired when token selection is changed by user interaction\n *\n * @param {Array<Token>} tokens An array of the selected items.\n * @public\n */\n@event<TokenizerSelectionChangeEventDetail>(\"selection-change\", {\n\tdetail: {\n\t\ttokens: { type: Array },\n\t},\n})\n\n/**\n * Fired when nMore link is pressed.\n * @private\n */\n@event(\"show-more-items-press\")\n\n/**\n * Fired before nMore Popover is opened.\n * @private\n */\n@event(\"before-more-popover-open\")\n\nclass Tokenizer extends UI5Element {\n\t/**\n\t * Defines whether the component is read-only.\n\t *\n\t * **Note:** A read-only component is not editable,\n\t * but still provides visual feedback upon user interaction.\n\t * @default false\n\t * @public\n\t */\n\t@property({ type: Boolean })\n\treadonly = false;\n\n\t/**\n\t * Defines whether the component is disabled.\n\t *\n\t * **Note:** A disabled component is completely noninteractive.\n\t * @default false\n\t * @public\n\t */\n\t@property({ type: Boolean })\n\tdisabled = false;\n\n\t/**\n\t * Defines the accessible ARIA name of the component.\n\t * @default undefined\n\t * @public\n\t */\n\t@property()\n\taccessibleName?: string;\n\n\t/**\n\t * Receives id(or many ids) of the elements that label the component.\n\t * @default undefined\n\t * @public\n\t */\n\t@property()\n\taccessibleNameRef?: string;\n\n\t/**\n\t * Indicates if the tokenizer should show all tokens or n more label instead\n\t * **Note:** Used inside MultiInput and MultiComboBox components.\n\t * @default false\n\t * @private\n\t */\n\t@property({ type: Boolean })\n\texpanded = false;\n\n\t/**\n\t * Indicates if the nMore popover is open\n\t * **Note:** Used inside MultiInput and MultiComboBox components.\n\t * @default false\n\t * @private\n\t */\n\t@property({ type: Boolean })\n\topen = false\n\n\t/**\n\t * Defines the ID or DOM Reference of the element that the menu is shown at\n\t * When using this attribute in a declarative way, you must only use the `id` (as a string) of the element at which you want to show the tokenizer.\n\t * You can only set the `opener` attribute to a DOM Reference when using JavaScript.\n\t * **Note:** Used inside MultiInput and MultiComboBox components.\n\t * @private\n\t * @default undefined\n\t */\n\t@property({\n\t\tconverter: DOMReferenceConverter,\n\t})\n\topener?: HTMLElement;\n\n\t/**\n\t * Sets the min-width of the nMore Popover.\n\t * **Note:** Used inside MultiInput and MultiComboBox components.\n\t * @private\n\t */\n\t@property({ type: Number })\n\tpopoverMinWidth?: number;\n\n\t/**\n\t * Prevents tokens to be part of the tab chain.\n\t * **Note:** Used inside MultiInput and MultiComboBox components.\n\t * @default false\n\t * @private\n\t */\n\t@property({ type: Boolean })\n\tpreventInitialFocus = false;\n\n\t/**\n\t * Prevent opening of n-more Popover when label is clicked\n\t * **Note:** Used inside MultiComboBox component.\n\t * @default false\n\t * @private\n\t */\n\t@property({ type: Boolean })\n\tpreventPopoverOpen = false;\n\n\t/**\n\t * Hides the popover arrow.\n\t * **Note:** Used inside MultiInput and MultiComboBox components.\n\t * @default false\n\t * @private\n\t */\n\t@property({ type: Boolean })\n\thidePopoverArrow = false;\n\n\t@property({ type: Number })\n\t_nMoreCount = 0;\n\n\t@property({ type: Number })\n\t_tokensCount = 0;\n\n\t@slot({\n\t\ttype: HTMLElement,\n\t\t\"default\": true,\n\t\tindividualSlots: true,\n\t\tinvalidateOnChildChange: {\n\t\t\tproperties: [\"_isVisible\"],\n\t\t\tslots: false,\n\t\t},\n\t})\n\ttokens!: Array<Token>;\n\n\tstatic i18nBundle: I18nBundle;\n\t_resizeHandler: ResizeObserverCallback;\n\t_itemNav: ItemNavigation;\n\t_scrollEnablement: ScrollEnablement;\n\t_expandedScrollWidth?: number;\n\t_tokenDeleting = false;\n\t_preventCollapse = false;\n\t_skipTabIndex = false;\n\t_previousToken: Token | null = null;\n\t_focusedElementBeforeOpen?: HTMLElement | null;\n\t_deletedDialogItems!: Token[];\n\n\t_handleResize() {\n\t\tthis._nMoreCount = this.overflownTokens.length;\n\t}\n\n\tconstructor() {\n\t\tsuper();\n\n\t\tthis._resizeHandler = this._handleResize.bind(this);\n\n\t\tthis._itemNav = new ItemNavigation(this, {\n\t\t\tcurrentIndex: -1,\n\t\t\tgetItemsCallback: this._getVisibleTokens.bind(this),\n\t\t});\n\n\t\tthis._scrollEnablement = new ScrollEnablement(this);\n\t\tthis._deletedDialogItems = [];\n\t}\n\n\tonBeforeRendering() {\n\t\tconst tokensLength = this._tokens.length;\n\t\tthis._tokensCount = tokensLength;\n\n\t\tthis._tokens.forEach(token => {\n\t\t\ttoken.singleToken = tokensLength === 1;\n\t\t\ttoken.readonly = this.readonly;\n\t\t});\n\t}\n\n\tonEnterDOM() {\n\t\tResizeHandler.register(this.contentDom, this._resizeHandler);\n\t}\n\n\tonExitDOM() {\n\t\tResizeHandler.deregister(this.contentDom, this._resizeHandler);\n\t}\n\n\t_handleNMoreClick() {\n\t\tif (this.disabled) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.expanded = true;\n\n\t\tif (!this.preventPopoverOpen) {\n\t\t\tthis.open = true;\n\t\t\tthis.scrollToEnd();\n\t\t}\n\n\t\tthis._tokens.forEach(token => {\n\t\t\ttoken.forcedTabIndex = \"-1\";\n\t\t});\n\n\t\tthis._skipTabIndex = true;\n\n\t\tthis.fireEvent(\"show-more-items-press\");\n\t}\n\n\t_onmousedown(e: MouseEvent) {\n\t\tif ((e.target as HTMLElement).hasAttribute(\"ui5-token\")) {\n\t\t\tconst target = e.target as Token;\n\t\t\tthis.expanded = true;\n\n\t\t\tif (this.open) {\n\t\t\t\tthis._preventCollapse = true;\n\t\t\t}\n\n\t\t\tif (!target.toBeDeleted) {\n\t\t\t\tthis._itemNav.setCurrentItem(target);\n\t\t\t\tthis._scrollToToken(target);\n\t\t\t}\n\t\t}\n\t}\n\n\tonTokenSelect() {\n\t\tconst tokens = this._tokens;\n\t\tconst firstToken = tokens[0];\n\n\t\tif (tokens.length === 1 && firstToken.isTruncatable) {\n\t\t\tthis.open = firstToken.selected;\n\t\t}\n\t}\n\n\t_getVisibleTokens() {\n\t\tif (this.disabled) {\n\t\t\treturn [];\n\t\t}\n\n\t\treturn this._tokens.filter((token, index) => {\n\t\t\treturn index < (this._tokens.length - this._nMoreCount);\n\t\t});\n\t}\n\n\tonAfterRendering() {\n\t\tconst tokensArray = this._tokens;\n\t\tconst firstToken = tokensArray[0];\n\n\t\tthis._nMoreCount = this.overflownTokens.length;\n\n\t\tif (firstToken && !this.disabled && !this.preventInitialFocus && !this._skipTabIndex) {\n\t\t\tfirstToken.forcedTabIndex = \"0\";\n\t\t}\n\n\t\tthis._scrollEnablement.scrollContainer = this.contentDom;\n\n\t\tif (this.expanded) {\n\t\t\tthis._expandedScrollWidth = this.contentDom.scrollWidth;\n\t\t}\n\n\t\tthis._tokenDeleting = false;\n\t}\n\n\t_delete(e: CustomEvent<TokenDeleteEventDetail>) {\n\t\tconst target = e.target as Token;\n\n\t\tif (!e.detail) { // if there are no details, the event is triggered by a click\n\t\t\tthis._tokenClickDelete(e, target);\n\t\t\tthis.open = false;\n\n\t\t\treturn;\n\t\t}\n\n\t\tthis.deleteToken(target, e.detail.backSpace);\n\t}\n\n\t_tokenClickDelete(e: CustomEvent<TokenDeleteEventDetail>, token: Token) {\n\t\tconst tokens = this._getVisibleTokens();\n\t\tconst target = e.target as Token;\n\t\tconst deletedTokenIndex = token ? tokens.indexOf(token) : tokens.indexOf(target); // The index of the token that just got deleted\n\t\tconst nextTokenIndex = deletedTokenIndex === tokens.length - 1 ? deletedTokenIndex - 1 : deletedTokenIndex + 1; // The index of the next token that needs to be focused next due to the deletion\n\t\tconst nextToken = tokens[nextTokenIndex]; // if the last item was deleted this will be undefined\n\n\t\tthis._handleCurrentItemAfterDeletion(nextToken);\n\n\t\tthis._tokenDeleting = true;\n\t\tthis.fireEvent<TokenizerTokenDeleteEventDetail>(\"token-delete\", { tokens: [token] || [target] });\n\t}\n\n\t_handleCurrentItemAfterDeletion(nextToken: Token) {\n\t\tif (nextToken && !isPhone()) {\n\t\t\tsetTimeout(() => {\n\t\t\t\tnextToken.focus();\n\t\t\t}, 0);\n\t\t}\n\t}\n\n\t/**\n\t * Removes a token from the Tokenizer.\n\t * This method should only be used by ui5-multi-combobox and ui5-multi-input\n\t * @protected\n\t * @param token Token to be focused.\n\t * @param forwardFocusToPrevious Indicates whether the focus will be forwarded to previous or next token after deletion.\n\t */\n\tdeleteToken(token: Token, forwardFocusToPrevious?: boolean) {\n\t\tconst tokens = this._getVisibleTokens();\n\t\tconst deletedTokenIndex = tokens.indexOf(token);\n\t\tlet nextTokenIndex = (deletedTokenIndex === tokens.length - 1) ? deletedTokenIndex - 1 : deletedTokenIndex + 1;\n\t\tconst notSelectedTokens = tokens.filter(t => !t.selected);\n\n\t\tif (forwardFocusToPrevious) { // on backspace key select the previous item (unless deleting the first)\n\t\t\tnextTokenIndex = deletedTokenIndex === 0 ? deletedTokenIndex + 1 : deletedTokenIndex - 1;\n\t\t} else { // on delete key or mouse click on the \"x\" select the next item (unless deleting the last)\n\t\t\tnextTokenIndex = deletedTokenIndex === tokens.length - 1 ? deletedTokenIndex - 1 : deletedTokenIndex + 1;\n\t\t}\n\n\t\tlet nextToken = tokens[nextTokenIndex];\n\n\t\tif (notSelectedTokens.length > 1) {\n\t\t\twhile (nextToken && nextToken.selected) {\n\t\t\t\tnextTokenIndex = forwardFocusToPrevious ? --nextTokenIndex : ++nextTokenIndex;\n\n\t\t\t\tif (nextTokenIndex < 0) {\n\t\t\t\t\tnextToken = notSelectedTokens[0];\n\t\t\t\t}\n\n\t\t\t\tif (nextTokenIndex > notSelectedTokens.length) {\n\t\t\t\t\tnextToken = notSelectedTokens[notSelectedTokens.length - 1];\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tnextToken = notSelectedTokens[0];\n\t\t}\n\n\t\tthis._handleCurrentItemAfterDeletion(nextToken);\n\n\t\tthis._tokenDeleting = true;\n\n\t\tif (this._selectedTokens.length) {\n\t\t\tthis.fireEvent<TokenizerTokenDeleteEventDetail>(\"token-delete\", { tokens: this._selectedTokens });\n\t\t} else {\n\t\t\tthis.fireEvent<TokenizerTokenDeleteEventDetail>(\"token-delete\", { tokens: [token] });\n\t\t}\n\t}\n\n\tasync itemDelete(e: CustomEvent) {\n\t\tconst token = e.detail.item.tokenRef;\n\t\tconst tokensArray = this._tokens;\n\n\t\t// delay the token deletion in order to close the popover before removing token of the DOM\n\t\tif (tokensArray.length === 1) {\n\t\t\tconst morePopover = this.getPopover();\n\n\t\t\tmorePopover.addEventListener(\"ui5-close\", () => {\n\t\t\t\tthis.fireEvent<TokenizerTokenDeleteEventDetail>(\"token-delete\", { tokens: [token] });\n\t\t\t}, {\n\t\t\t\tonce: true,\n\t\t\t});\n\t\t\tthis.open = false;\n\t\t} else {\n\t\t\tif (isPhone()) {\n\t\t\t\ttoken._isVisible = false;\n\t\t\t\tthis._deletedDialogItems.push(token as Token);\n\t\t\t} else {\n\t\t\t\tthis.fireEvent<TokenizerTokenDeleteEventDetail>(\"token-delete\", { tokens: [token] });\n\t\t\t}\n\t\t\tconst currentListItem = e.detail.item as ListItem;\n\t\t\tconst nextListItem = currentListItem.nextElementSibling as ListItem;\n\t\t\tconst previousListItem = currentListItem.previousElementSibling as ListItem;\n\t\t\tconst focusItem = nextListItem || previousListItem;\n\n\t\t\tif (focusItem) {\n\t\t\t\tawait renderFinished();\n\t\t\t\tfocusItem.focus();\n\t\t\t}\n\t\t}\n\t}\n\n\thandleBeforeClose() {\n\t\tconst tokensArray = this._tokens;\n\n\t\tif (isPhone()) {\n\t\t\ttokensArray.forEach(token => {\n\t\t\t\ttoken.selected = false;\n\t\t\t});\n\t\t}\n\n\t\tif (!this._tokenDeleting && !this._preventCollapse) {\n\t\t\tthis._preventCollapse = false;\n\t\t\tthis.expanded = false;\n\t\t}\n\t}\n\n\thandleBeforeOpen() {\n\t\tthis._tokens.forEach(token => {\n\t\t\ttoken._isVisible = true;\n\t\t});\n\n\t\tconst list = this._getList();\n\t\tconst firstListItem = list.querySelectorAll(\"[ui5-li]\")[0]! as ListItem;\n\n\t\tlist._itemNavigation.setCurrentItem(firstListItem);\n\n\t\tthis.fireEvent(\"before-more-popover-open\");\n\t}\n\n\thandleAfterClose() {\n\t\tthis.open = false;\n\t\tthis._preventCollapse = false;\n\t\tthis._focusedElementBeforeOpen = null;\n\n\t\tthis._tokens.forEach(token => {\n\t\t\ttoken._isVisible = true;\n\t\t});\n\t}\n\n\thandleDialogButtonPress(e: MouseEvent) {\n\t\tconst isOkButton = (e.target as HTMLElement).hasAttribute(\"data-ui5-tokenizer-dialog-ok-button\");\n\t\tconst confirm = !!isOkButton;\n\n\t\tif (confirm && this._deletedDialogItems.length) {\n\t\t\tthis.fireEvent<TokenizerTokenDeleteEventDetail>(\"token-delete\", { tokens: this._deletedDialogItems });\n\t\t}\n\n\t\tthis.open = false;\n\t}\n\n\t_onkeydown(e: KeyboardEvent) {\n\t\tconst isCtrl = !!(e.metaKey || e.ctrlKey);\n\n\t\tif ((isCtrl && [\"c\", \"x\"].includes(e.key.toLowerCase())) || isDeleteShift(e) || isInsertCtrl(e)) {\n\t\t\te.preventDefault();\n\n\t\t\tconst isCut = e.key.toLowerCase() === \"x\" || isDeleteShift(e);\n\t\t\tconst selectedTokens = this._tokens.filter(token => token.selected);\n\t\t\tconst focusedToken = selectedTokens.find(token => token.focused);\n\n\t\t\tif (isCut) {\n\t\t\t\tconst cutResult = this._fillClipboard(ClipboardDataOperation.cut, selectedTokens);\n\n\t\t\t\tfocusedToken && this.deleteToken(focusedToken);\n\n\t\t\t\treturn cutResult;\n\t\t\t}\n\n\t\t\treturn this._fillClipboard(ClipboardDataOperation.copy, selectedTokens);\n\t\t}\n\n\t\tif (isCtrl && e.key.toLowerCase() === \"i\" && this._tokens.length > 0) {\n\t\t\te.preventDefault();\n\n\t\t\tthis._preventCollapse = true;\n\t\t\tthis._focusedElementBeforeOpen = getFocusedElement();\n\n\t\t\tthis.open = true;\n\t\t}\n\n\t\tif (isSpaceShift(e)) {\n\t\t\te.preventDefault();\n\t\t}\n\n\t\tif (isSpace(e) || isSpaceCtrl(e)) {\n\t\t\te.preventDefault();\n\n\t\t\treturn this._handleTokenSelection(e, false);\n\t\t}\n\n\t\tif (isHomeShift(e) || isPageUpShift(e)) {\n\t\t\tthis._handleHomeShift(e);\n\t\t}\n\n\t\tif (isEndShift(e) || isPageDownShift(e)) {\n\t\t\tthis._handleEndShift(e);\n\t\t}\n\n\t\tthis._handleItemNavigation(e, this._tokens);\n\t}\n\n\t_onPopoverListKeydown(e: KeyboardEvent) {\n\t\tconst isCtrl = !!(e.metaKey || e.ctrlKey);\n\n\t\tif ((isCtrl && e.key.toLowerCase() === \"i\") || isEscape(e)) {\n\t\t\te.preventDefault();\n\t\t\tthis.open = false;\n\n\t\t\tthis._preventCollapse = true;\n\t\t\tthis._focusedElementBeforeOpen && this._focusedElementBeforeOpen.focus();\n\n\t\t\tif (!this._focusedElementBeforeOpen) {\n\t\t\t\tthis._focusLastToken();\n\t\t\t}\n\t\t}\n\n\t\tif (e.key.toLowerCase() === \"f7\") {\n\t\t\te.preventDefault();\n\n\t\t\tconst eventTarget = e.target as ListItem;\n\t\t\tconst activeElement = getActiveElement();\n\n\t\t\tif (activeElement?.part.value === \"native-li\") {\n\t\t\t\teventTarget.shadowRoot!.querySelector<HTMLElement>(\"[part=delete-button]\")!.focus();\n\t\t\t} else {\n\t\t\t\teventTarget.focus();\n\t\t\t}\n\t\t}\n\t}\n\n\t_handleItemNavigation(e: KeyboardEvent, tokens: Array<Token>) {\n\t\tconst isCtrl = !!(e.metaKey || e.ctrlKey);\n\t\tconst target = e.target as Token;\n\n\t\tif (isLeftCtrl(e) || isRightCtrl(e) || isDownCtrl(e) || isUpCtrl(e)) {\n\t\t\treturn this._handleArrowCtrl(e, target, tokens, isRightCtrl(e) || isDownCtrl(e));\n\t\t}\n\n\t\tif (isLeftShift(e) || isRightShift(e) || isUpShift(e) || isDownShift(e) || isLeftShiftCtrl(e) || isRightShiftCtrl(e)) {\n\t\t\te.preventDefault();\n\t\t\treturn this._handleArrowShift(target, tokens, (isRightShift(e) || isRightShiftCtrl(e) || isDownShift(e)));\n\t\t}\n\n\t\tif (isHome(e) || isEnd(e) || isHomeCtrl(e) || isEndCtrl(e)) {\n\t\t\te.preventDefault();\n\t\t\treturn this._handleHome(tokens, isEnd(e) || isEndCtrl(e));\n\t\t}\n\n\t\tif (isCtrl && e.key.toLowerCase() === \"a\") {\n\t\t\te.preventDefault();\n\n\t\t\treturn this._toggleTokenSelection(tokens);\n\t\t}\n\n\t\tif (isLeft(e) || isRight(e) || isUp(e) || isDown(e)) {\n\t\t\te.preventDefault();\n\t\t\tconst nextTokenIdx = this._calcNextTokenIndex(this._tokens.find(token => token.focused)!, tokens, (isRight(e) || isDown(e)));\n\t\t\tthis._scrollToToken(tokens[nextTokenIdx]);\n\t\t}\n\t}\n\n\t_handleHome(tokens: Array<Token>, endKeyPressed: boolean) {\n\t\tif (!tokens || !tokens.length) {\n\t\t\treturn -1;\n\t\t}\n\n\t\tconst index = endKeyPressed ? tokens.length - 1 : 0;\n\n\t\ttokens[index].focus();\n\t}\n\n\t_handleHomeShift(e: KeyboardEvent) {\n\t\tconst tokens = this._tokens;\n\t\tconst target = e.target as Token;\n\t\tconst currentTokenIdx = tokens.indexOf(target);\n\t\tconst previousSelectedTokens = [...this._selectedTokens];\n\n\t\ttokens.filter((token, index) => index <= currentTokenIdx).forEach(token => {\n\t\t\ttoken.selected = true;\n\t\t});\n\n\t\tconst selectedTokensChanged = JSON.stringify(previousSelectedTokens) !== JSON.stringify(this._selectedTokens);\n\n\t\tif (selectedTokensChanged) {\n\t\t\tthis.fireEvent<TokenizerSelectionChangeEventDetail>(\"selection-change\", {\n\t\t\t\ttokens: this._selectedTokens,\n\t\t\t});\n\t\t}\n\n\t\ttokens[0].focus();\n\t}\n\n\t_handleEndShift(e: KeyboardEvent) {\n\t\tconst tokens = this._tokens;\n\t\tconst target = e.target as Token;\n\t\tconst currentTokenIdx = tokens.indexOf(target);\n\t\tconst previousSelectedTokens = [...this._selectedTokens];\n\n\t\ttokens.filter((token, index) => index >= currentTokenIdx).forEach(token => {\n\t\t\ttoken.selected = true;\n\t\t});\n\n\t\tconst selectedTokensChanged = JSON.stringify(previousSelectedTokens) !== JSON.stringify(this._selectedTokens);\n\n\t\tif (selectedTokensChanged) {\n\t\t\tthis.fireEvent<TokenizerSelectionChangeEventDetail>(\"selection-change\", {\n\t\t\t\ttokens: this._selectedTokens,\n\t\t\t});\n\t\t}\n\n\t\ttokens[tokens.length - 1].focus();\n\t}\n\n\t_calcNextTokenIndex(focusedToken: IToken, tokens: Array<IToken>, backwards: boolean) {\n\t\tif (!tokens.length) {\n\t\t\treturn -1;\n\t\t}\n\n\t\tconst focusedTokenIndex = tokens.indexOf(focusedToken);\n\t\tlet nextIndex = backwards ? (focusedTokenIndex + 1) : (focusedTokenIndex - 1);\n\n\t\tif (nextIndex >= tokens.length) {\n\t\t\tnextIndex = tokens.length - 1;\n\t\t}\n\n\t\tif (nextIndex < 0) {\n\t\t\tnextIndex = 0;\n\t\t}\n\n\t\treturn nextIndex;\n\t}\n\n\t_handleArrowCtrl(e: KeyboardEvent, focusedToken: IToken, tokens: Array<IToken>, backwards: boolean) {\n\t\tconst nextIndex = this._calcNextTokenIndex(focusedToken, tokens, backwards);\n\n\t\te.preventDefault();\n\n\t\tif (nextIndex === -1) {\n\t\t\treturn;\n\t\t}\n\n\t\tsetTimeout(() => {\n\t\t\ttokens[nextIndex].focus();\n\t\t}, 0);\n\n\t\tthis._scrollToToken(tokens[nextIndex]);\n\t}\n\n\t_handleArrowShift(focusedToken: Token, tokens: Array<Token>, backwards: boolean) {\n\t\tconst focusedTokenIndex = tokens.indexOf(focusedToken);\n\t\tconst nextIndex = backwards ? (focusedTokenIndex + 1) : (focusedTokenIndex - 1);\n\t\tconst previousSelectedTokens = [...this._selectedTokens];\n\n\t\tif (nextIndex === -1 || nextIndex === tokens.length) {\n\t\t\treturn;\n\t\t}\n\n\t\tfocusedToken.selected = true;\n\t\ttokens[nextIndex].selected = true;\n\n\t\tconst selectedTokensChanged = JSON.stringify(previousSelectedTokens) !== JSON.stringify(this._selectedTokens);\n\n\t\tif (selectedTokensChanged) {\n\t\t\tthis.fireEvent<TokenizerSelectionChangeEventDetail>(\"selection-change\", {\n\t\t\t\ttokens: this._selectedTokens,\n\t\t\t});\n\t\t}\n\n\t\ttokens[nextIndex].focus();\n\n\t\tthis._scrollToToken(tokens[nextIndex]);\n\t}\n\n\t_click(e: MouseEvent) {\n\t\tif (e.metaKey || e.ctrlKey) {\n\t\t\tthis.fireEvent<TokenizerSelectionChangeEventDetail>(\"selection-change\", {\n\t\t\t\ttokens: this._selectedTokens,\n\t\t\t});\n\t\t\treturn;\n\t\t}\n\n\t\tconst targetToken = e.target as Token;\n\n\t\tif (!e.shiftKey) {\n\t\t\tthis._previousToken = targetToken;\n\t\t}\n\n\t\tlet focusedToken = targetToken;\n\n\t\tif (this._previousToken) {\n\t\t\tfocusedToken = this._previousToken;\n\t\t} else {\n\t\t\tthis._previousToken = focusedToken;\n\t\t}\n\n\t\tif (e.shiftKey) {\n\t\t\tconst tokensArray = this._tokens;\n\t\t\tconst lastClickedIndex = tokensArray.indexOf(targetToken);\n\t\t\tconst firstSelectedTokenIndex = tokensArray.indexOf(focusedToken);\n\t\t\tconst start = Math.min(lastClickedIndex, firstSelectedTokenIndex);\n\t\t\tconst end = Math.max(lastClickedIndex, firstSelectedTokenIndex);\n\n\t\t\tif (lastClickedIndex !== -1) {\n\t\t\t\ttokensArray.forEach((token, i) => {\n\t\t\t\t\ttoken.selected = i >= start && i <= end;\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tthis.fireEvent<TokenizerSelectionChangeEventDetail>(\"selection-change\", {\n\t\t\t\ttokens: this._selectedTokens,\n\t\t\t});\n\n\t\t\treturn;\n\t\t}\n\n\t\tthis._handleTokenSelection(e);\n\t}\n\n\t_onfocusin(e: FocusEvent) {\n\t\tconst target = e.target as Token;\n\t\tthis.open = false;\n\t\tthis._itemNav.setCurrentItem(target);\n\n\t\tif (!this.expanded) {\n\t\t\tthis.expanded = true;\n\t\t}\n\t}\n\n\t_onfocusout(e: FocusEvent) {\n\t\tconst relatedTarget = e.relatedTarget as HTMLElement;\n\n\t\tthis._tokens.forEach(token => {\n\t\t\ttoken.forcedTabIndex = \"-1\";\n\t\t});\n\n\t\tthis._itemNav._currentIndex = -1;\n\t\tthis._skipTabIndex = true;\n\n\t\tif (!this.contains(relatedTarget)) {\n\t\t\tthis._tokens[0].forcedTabIndex = \"0\";\n\t\t\tthis._skipTabIndex = false;\n\t\t}\n\n\t\tif (!this._tokenDeleting && !this._preventCollapse) {\n\t\t\tthis._preventCollapse = false;\n\t\t\tthis.expanded = false;\n\t\t}\n\t}\n\n\t_toggleTokenSelection(tokens: Array<Token>) {\n\t\tif (!tokens || !tokens.length) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst tokensAreSelected = tokens.every(token => token.selected);\n\t\ttokens.forEach(token => { token.selected = !tokensAreSelected; });\n\n\t\tthis.fireEvent<TokenizerSelectionChangeEventDetail>(\"selection-change\", {\n\t\t\ttokens: this._selectedTokens,\n\t\t});\n\t}\n\n\t_handleTokenSelection(e: KeyboardEvent | MouseEvent, deselectAll = true) {\n\t\tconst target = e.target as Token;\n\n\t\tif (target.hasAttribute(\"ui5-token\")) {\n\t\t\tconst deselectTokens = deselectAll ? this._tokens : [];\n\n\t\t\tdeselectTokens.forEach(token => {\n\t\t\t\tif (token !== target) {\n\t\t\t\t\ttoken.selected = false;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis.fireEvent<TokenizerSelectionChangeEventDetail>(\"selection-change\", {\n\t\t\t\ttokens: this._selectedTokens,\n\t\t\t});\n\t\t}\n\t}\n\n\t_fillClipboard(shortcutName: ClipboardDataOperation, tokens: Array<IToken>) {\n\t\tconst tokensTexts = tokens.filter(token => token.selected).map(token => token.text).join(\"\\r\\n\");\n\n\t\tconst cutToClipboard = (e: ClipboardEvent) => {\n\t\t\tif (e.clipboardData) {\n\t\t\t\te.clipboardData.setData(\"text/plain\", tokensTexts);\n\t\t\t}\n\n\t\t\te.preventDefault();\n\t\t};\n\n\t\tdocument.addEventListener(shortcutName, cutToClipboard);\n\t\tdocument.execCommand(shortcutName);\n\t\tdocument.removeEventListener(shortcutName, cutToClipboard);\n\t}\n\n\t/**\n\t * Scrolls the container of the tokens to its beginning.\n\t * This method is used by MultiInput and MultiComboBox.\n\t * @protected\n\t */\n\tscrollToStart() {\n\t\tif (this._scrollEnablement.scrollContainer) {\n\t\t\tthis._scrollEnablement.scrollTo(0, 0);\n\t\t}\n\t}\n\n\t/**\n\t * Scrolls the container of the tokens to its end when expanded.\n\t * This method is used by MultiInput and MultiComboBox.\n\t * @protected\n\t */\n\tscrollToEnd() {\n\t\tconst expandedTokenizerScrollWidth = this.contentDom && (this.effectiveDir !== \"rtl\" ? this.contentDom.scrollWidth : -this.contentDom.scrollWidth);\n\t\tif (this._scrollEnablement.scrollContainer) {\n\t\t\tthis._scrollEnablement.scrollTo(expandedTokenizerScrollWidth, 0, 5, 10);\n\t\t}\n\t}\n\n\t/**\n\t * Scrolls token to the visible area of the container.\n\t * Adds 4 pixels to the scroll position to ensure padding and border visibility on both ends\n\t * @protected\n\t */\n\t_scrollToToken(token: IToken) {\n\t\tif (!this.contentDom) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst tokenRect = token.getBoundingClientRect();\n\t\tconst tokenContainerRect = this.contentDom.getBoundingClientRect();\n\n\t\tif (tokenRect.left < tokenContainerRect.left) {\n\t\t\tthis._scrollEnablement.scrollTo(this.contentDom.scrollLeft - (tokenContainerRect.left - tokenRect.left + 5), 0);\n\t\t} else if (tokenRect.right > tokenContainerRect.right) {\n\t\t\tthis._scrollEnablement.scrollTo(this.contentDom.scrollLeft + (tokenRect.right - tokenContainerRect.right + 5), 0);\n\t\t}\n\t}\n\n\t_getList() {\n\t\treturn this.getPopover().querySelector<List>(\"[ui5-list]\")!;\n\t}\n\n\tget _tokens() {\n\t\treturn this.getSlottedNodes<Token>(\"tokens\");\n\t}\n\n\tget morePopoverOpener(): HTMLElement {\n\t\t// return this.opener ? this : this.opener;\n\t\tif (this.opener) {\n\t\t\treturn this.opener;\n\t\t}\n\t\treturn this;\n\t}\n\n\tget _nMoreText() {\n\t\tif (!this._nMoreCount) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (this._getVisibleTokens().length) {\n\t\t\treturn Tokenizer.i18nBundle.getText(MULTIINPUT_SHOW_MORE_TOKENS, this._nMoreCount);\n\t\t}\n\n\t\treturn Tokenizer.i18nBundle.getText(TOKENIZER_SHOW_ALL_ITEMS, this._nMoreCount);\n\t}\n\n\tget showNMore() {\n\t\treturn !this.expanded && !!this.overflownTokens.length;\n\t}\n\n\tget contentDom() {\n\t\treturn this.shadowRoot!.querySelector<HTMLElement>(\".ui5-tokenizer--content\")!;\n\t}\n\n\tget moreLink() {\n\t\treturn this.shadowRoot!.querySelector<HTMLElement>(\".ui5-tokenizer-more-text\");\n\t}\n\n\tget tokenizerLabel() {\n\t\tconst effectiveLabelText = getEffectiveAriaLabelText(this);\n\t\treturn effectiveLabelText || Tokenizer.i18nBundle.getText(TOKENIZER_ARIA_LABEL);\n\t}\n\n\tget tokenizerAriaDescription() {\n\t\treturn getEffectiveAriaLabelText(this) ? Tokenizer.i18nBundle.getText(TOKENIZER_ARIA_LABEL) : undefined;\n\t}\n\n\tget _ariaDisabled() {\n\t\treturn this.disabled || undefined;\n\t}\n\n\tget _ariaReadonly() {\n\t\treturn this.readonly || undefined;\n\t}\n\n\tget morePopoverTitle() {\n\t\treturn Tokenizer.i18nBundle.getText(TOKENIZER_POPOVER_REMOVE);\n\t}\n\n\tget overflownTokens() {\n\t\tif (!this.contentDom) {\n\t\t\treturn [];\n\t\t}\n\n\t\tconst tokensArray = this._tokens;\n\n\t\t// Reset the overflow prop of the tokens first in order\n\t\t// to use their dimensions for calculation because already\n\t\t// hidden tokens are set to 'display: none'\n\t\ttokensArray.forEach(token => {\n\t\t\ttoken.overflows = false;\n\t\t});\n\n\t\treturn tokensArray.filter(token => {\n\t\t\tconst parentRect = this.contentDom.getBoundingClientRect();\n\t\t\tconst tokenRect = token.getBoundingClientRect();\n\t\t\tconst tokenEnd = Number(tokenRect.right.toFixed(2));\n\t\t\tconst parentEnd = Number(parentRect.right.toFixed(2));\n\t\t\tconst tokenStart = Number(tokenRect.left.toFixed(2));\n\t\t\tconst parentStart = Number(parentRect.left.toFixed(2));\n\n\t\t\ttoken.overflows = !this.expanded && ((tokenStart < parentStart) || (tokenEnd > parentEnd));\n\n\t\t\treturn token.overflows;\n\t\t});\n\t}\n\n\tget _isPhone() {\n\t\treturn isPhone();\n\t}\n\n\tget _selectedTokens() {\n\t\treturn this._tokens.filter(token => token.selected);\n\t}\n\n\tget _nMoreListMode() {\n\t\tif (this.readonly || this.disabled) {\n\t\t\treturn ListSelectionMode.None;\n\t\t}\n\n\t\treturn ListSelectionMode.Delete;\n\t}\n\n\tget styles() {\n\t\treturn {\n\t\t\tpopover: {\n\t\t\t\t\"min-width\": this.popoverMinWidth ? `${this.popoverMinWidth}px` : `${this.getBoundingClientRect().width}px`,\n\t\t\t},\n\t\t};\n\t}\n\n\t/**\n\t * @protected\n\t */\n\t_focusLastToken() {\n\t\tconst tokens = this._tokens;\n\t\tif (tokens.length === 0) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst lastToken = tokens[tokens.length - 1];\n\t\tlastToken.focus();\n\t}\n\n\tstatic async onDefine() {\n\t\tTokenizer.i18nBundle = await getI18nBundle(\"@ui5/webcomponents\");\n\t}\n\n\tgetPopover() {\n\t\treturn this.shadowRoot!.querySelector<ResponsivePopover>(\"[ui5-responsive-popover]\")!;\n\t}\n}\n\nconst getTokensCountText = (iTokenCount: number) => {\n\tconst tokenCountMap: TokenCountMapType = {\n\t\t0: TOKENIZER_ARIA_CONTAIN_TOKEN,\n\t\t1: TOKENIZER_ARIA_CONTAIN_ONE_TOKEN,\n\t};\n\n\tif (iTokenCount in tokenCountMap) {\n\t\treturn Tokenizer.i18nBundle.getText(tokenCountMap[iTokenCount]);\n\t}\n\n\treturn Tokenizer.i18nBundle.getText(TOKENIZER_ARIA_CONTAIN_SEVERAL_TOKENS, iTokenCount);\n};\n\nTokenizer.define();\n\nexport default Tokenizer;\nexport { getTokensCountText };\nexport { ClipboardDataOperation };\nexport type { TokenizerTokenDeleteEventDetail, TokenizerSelectionChangeEventDetail, TokenizerDialogButtonPressDetail };\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}