{"ast":null,"code":"\"use strict\";\n\nimport u from \"./EventProvider.js\";\nclass d {\n  constructor() {}\n}\nconst s = new Map(),\n  o = new Map(),\n  i = new Map(),\n  p = \"componentFeatureLoad\",\n  a = new u(),\n  c = e => `${p}_${e}`,\n  g = (e, t) => {\n    s.set(e, t);\n  },\n  m = e => s.get(e),\n  f = async (e, t) => {\n    await Promise.all(t.dependencies?.map(n => n.define()) || []), await t.define?.(), o.set(e, t), E(e);\n  },\n  F = e => o.get(e),\n  b = (e, t, n) => {\n    const r = i.get(t);\n    r?.includes(e) || (r ? r.push(e) : i.set(t, [e]), a.attachEvent(c(e), n));\n  },\n  E = e => {\n    a.fireEvent(c(e), void 0);\n  };\nexport { g as registerFeature, m as getFeature, f as registerComponentFeature, F as getComponentFeature, b as subscribeForFeatureLoad, d as ComponentFeature };","map":{"version":3,"names":["u","d","constructor","s","Map","o","i","p","a","c","e","g","registerFeature","t","set","m","get","f","registerComponentFeature","Promise","all","dependencies","map","n","define","E","F","b","subscribeForFeatureLoad","r","includes","push","attachEvent","fireEvent","getFeature","getComponentFeature","ComponentFeature"],"sources":["/home/user/projects/reactproj/node_modules/@ui5/webcomponents-base/src/FeaturesRegistry.ts"],"sourcesContent":["import EventProvider from \"./EventProvider.js\";\nimport type UI5Element from \"./UI5Element.js\";\n\nabstract class ComponentFeature {\n\t// eslint-disable-next-line @typescript-eslint/no-unused-vars, no-empty-function\n\tconstructor(...args: any[]) {}\n\tstatic define?: () => Promise<void>;\n\tstatic dependencies?: Array<typeof UI5Element>\n}\n\nconst features = new Map<string, any>();\nconst componentFeatures = new Map<string, ComponentFeature>();\nconst subscribers = new Map<typeof UI5Element, Array<string>>();\n\nconst EVENT_NAME = \"componentFeatureLoad\";\nconst eventProvider = new EventProvider<undefined, void>();\n\nconst featureLoadEventName = (name: string) => `${EVENT_NAME}_${name}`;\n\nconst registerFeature = (name: string, feature: object) => {\n\tfeatures.set(name, feature);\n};\n\nconst getFeature = <T>(name: string): T => {\n\treturn features.get(name) as T;\n};\n\nconst registerComponentFeature = async (name: string, feature: typeof ComponentFeature) => {\n\tawait Promise.all(feature.dependencies?.map(dep => dep.define()) || []);\n\tawait feature.define?.();\n\n\tcomponentFeatures.set(name, feature);\n\tnotifyForFeatureLoad(name);\n};\n\nconst getComponentFeature = <T>(name: string): T => {\n\treturn componentFeatures.get(name) as T;\n};\n\nconst subscribeForFeatureLoad = (name: string, klass: typeof UI5Element, callback: () => void) => {\n\tconst subscriber = subscribers.get(klass);\n\tconst isSubscribed = subscriber?.includes(name);\n\n\tif (isSubscribed) {\n\t\treturn;\n\t}\n\n\tif (!subscriber) {\n\t\tsubscribers.set(klass, [name]);\n\t} else {\n\t\tsubscriber.push(name);\n\t}\n\n\teventProvider.attachEvent(featureLoadEventName(name), callback);\n};\n\nconst notifyForFeatureLoad = (name: string) => {\n\teventProvider.fireEvent(featureLoadEventName(name), undefined);\n};\n\nexport {\n\tregisterFeature,\n\tgetFeature,\n\tregisterComponentFeature,\n\tgetComponentFeature,\n\tsubscribeForFeatureLoad,\n\tComponentFeature,\n};\n"],"mappings":";;AAAA,OAAOA,CAAA,MAAmB;AAG1B,MAAeC,CAAiB;EAE/BC,YAAA,EAA4B,CAAC;AAG9B;AAEA,MAAMC,CAAA,GAAW,IAAIC,GAAA;EACfC,CAAA,GAAoB,IAAID,GAAA;EACxBE,CAAA,GAAc,IAAIF,GAAA;EAElBG,CAAA,GAAa;EACbC,CAAA,GAAgB,IAAIR,CAAA;EAEpBS,CAAA,GAAwBC,CAAA,IAAiB,GAAGH,CAAU,IAAIG,CAAI;EAE9DC,CAAA,GAAkBC,CAACF,CAAA,EAAcG,CAAA,KAAoB;IAC1DV,CAAA,CAASW,GAAA,CAAIJ,CAAA,EAAMG,CAAO,CAC3B;EAAA;EAEME,CAAA,GAAiBL,CAAA,IACfP,CAAA,CAASa,GAAA,CAAIN,CAAI;EAGnBO,CAAA,GAA2B,MAAAC,CAAOR,CAAA,EAAcG,CAAA,KAAqC;IAC1F,MAAMM,OAAA,CAAQC,GAAA,CAAIP,CAAA,CAAQQ,YAAA,EAAcC,GAAA,CAAIC,CAAA,IAAOA,CAAA,CAAIC,MAAA,CAAO,CAAC,KAAK,EAAE,GACtE,MAAMX,CAAA,CAAQW,MAAA,GAAS,GAEvBnB,CAAA,CAAkBS,GAAA,CAAIJ,CAAA,EAAMG,CAAO,GACnCY,CAAA,CAAqBf,CAAI,CAC1B;EAAA;EAEMgB,CAAA,GAA0BhB,CAAA,IACxBL,CAAA,CAAkBW,GAAA,CAAIN,CAAI;EAG5BiB,CAAA,GAA0BC,CAAClB,CAAA,EAAcG,CAAA,EAA0BU,CAAA,KAAyB;IACjG,MAAMM,CAAA,GAAavB,CAAA,CAAYU,GAAA,CAAIH,CAAK;IACnBgB,CAAA,EAAYC,QAAA,CAASpB,CAAI,MAMzCmB,CAAA,GAGJA,CAAA,CAAWE,IAAA,CAAKrB,CAAI,IAFpBJ,CAAA,CAAYQ,GAAA,CAAID,CAAA,EAAO,CAACH,CAAI,CAAC,GAK9BF,CAAA,CAAcwB,WAAA,CAAYvB,CAAA,CAAqBC,CAAI,GAAGa,CAAQ,EAC/D;EAAA;EAEME,CAAA,GAAwBf,CAAA,IAAiB;IAC9CF,CAAA,CAAcyB,SAAA,CAAUxB,CAAA,CAAqBC,CAAI,GAAG,MAAS,CAC9D;EAAA;AAEA,SACCC,CAAA,IAAAC,eAAA,EACAG,CAAA,IAAAmB,UAAA,EACAjB,CAAA,IAAAC,wBAAA,EACAQ,CAAA,IAAAS,mBAAA,EACAR,CAAA,IAAAC,uBAAA,EACA3B,CAAA,IAAAmC,gBAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}