{"ast":null,"code":"\"use strict\";\n\nconst r = 10;\nclass l {\n  constructor() {\n    this.list = [], this.lookup = new Set();\n  }\n  add(t) {\n    this.lookup.has(t) || (this.list.push(t), this.lookup.add(t));\n  }\n  remove(t) {\n    this.lookup.has(t) && (this.list = this.list.filter(e => e !== t), this.lookup.delete(t));\n  }\n  shift() {\n    const t = this.list.shift();\n    if (t) return this.lookup.delete(t), t;\n  }\n  isEmpty() {\n    return this.list.length === 0;\n  }\n  isAdded(t) {\n    return this.lookup.has(t);\n  }\n  process(t) {\n    let e;\n    const s = new Map();\n    for (e = this.shift(); e;) {\n      const i = s.get(e) || 0;\n      if (i > 10) throw new Error(\"Web component processed too many times this task, max allowed is: 10\");\n      t(e), s.set(e, i + 1), e = this.shift();\n    }\n  }\n}\nexport default l;","map":{"version":3,"names":["r","l","constructor","list","lookup","Set","add","t","has","push","remove","filter","e","delete","shift","isEmpty","length","isAdded","process","s","Map","i","get","Error","set"],"sources":["/home/user/projects/reactproj/node_modules/@ui5/webcomponents-base/src/RenderQueue.ts"],"sourcesContent":["import type UI5Element from \"./UI5Element.js\";\n\nconst MAX_PROCESS_COUNT = 10;\n\nclass RenderQueue {\n\tlist: Array<UI5Element>;\n\tlookup: Set<UI5Element>;\n\n\tconstructor() {\n\t\tthis.list = []; // Used to store the web components in order\n\t\tthis.lookup = new Set(); // Used for faster search\n\t}\n\n\tadd(webComponent: UI5Element) {\n\t\tif (this.lookup.has(webComponent)) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.list.push(webComponent);\n\t\tthis.lookup.add(webComponent);\n\t}\n\n\tremove(webComponent: UI5Element) {\n\t\tif (!this.lookup.has(webComponent)) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.list = this.list.filter(item => item !== webComponent);\n\t\tthis.lookup.delete(webComponent);\n\t}\n\n\tshift() {\n\t\tconst webComponent = this.list.shift();\n\t\tif (webComponent) {\n\t\t\tthis.lookup.delete(webComponent);\n\t\t\treturn webComponent;\n\t\t}\n\t}\n\n\tisEmpty() {\n\t\treturn this.list.length === 0;\n\t}\n\n\tisAdded(webComponent: UI5Element) {\n\t\treturn this.lookup.has(webComponent);\n\t}\n\n\t/**\n\t * Processes the whole queue by executing the callback on each component,\n\t * while also imposing restrictions on how many times a component may be processed.\n\t *\n\t * @param callback - function with one argument (the web component to be processed)\n\t */\n\tprocess(callback: (el: UI5Element) => void) {\n\t\tlet webComponent;\n\t\tconst stats = new Map<UI5Element, number>();\n\n\t\twebComponent = this.shift();\n\t\twhile (webComponent) {\n\t\t\tconst timesProcessed = stats.get(webComponent) || 0;\n\t\t\tif (timesProcessed > MAX_PROCESS_COUNT) {\n\t\t\t\tthrow new Error(`Web component processed too many times this task, max allowed is: ${MAX_PROCESS_COUNT}`);\n\t\t\t}\n\t\t\tcallback(webComponent);\n\t\t\tstats.set(webComponent, timesProcessed + 1);\n\t\t\twebComponent = this.shift();\n\t\t}\n\t}\n}\n\nexport default RenderQueue;\n"],"mappings":";;AAEA,MAAMA,CAAA,GAAoB;AAE1B,MAAMC,CAAY;EAIjBC,YAAA,EAAc;IACb,KAAKC,IAAA,GAAO,EAAC,EACb,KAAKC,MAAA,GAAS,IAAIC,GACnB,CADmB,CACnB;EAAA;EAEAC,IAAIC,CAAA,EAA0B;IACzB,KAAKH,MAAA,CAAOI,GAAA,CAAID,CAAY,MAIhC,KAAKJ,IAAA,CAAKM,IAAA,CAAKF,CAAY,GAC3B,KAAKH,MAAA,CAAOE,GAAA,CAAIC,CAAY,EAC7B;EAAA;EAEAG,OAAOH,CAAA,EAA0B;IAC3B,KAAKH,MAAA,CAAOI,GAAA,CAAID,CAAY,MAIjC,KAAKJ,IAAA,GAAO,KAAKA,IAAA,CAAKQ,MAAA,CAAOC,CAAA,IAAQA,CAAA,KAASL,CAAY,GAC1D,KAAKH,MAAA,CAAOS,MAAA,CAAON,CAAY,EAChC;EAAA;EAEAO,MAAA,EAAQ;IACP,MAAMP,CAAA,GAAe,KAAKJ,IAAA,CAAKW,KAAA,CAAM;IACrC,IAAIP,CAAA,EACH,YAAKH,MAAA,CAAOS,MAAA,CAAON,CAAY,GACxBA,CAET;EAAA;EAEAQ,QAAA,EAAU;IACT,OAAO,KAAKZ,IAAA,CAAKa,MAAA,KAAW,CAC7B;EAAA;EAEAC,QAAQV,CAAA,EAA0B;IACjC,OAAO,KAAKH,MAAA,CAAOI,GAAA,CAAID,CAAY,CACpC;EAAA;EAQAW,QAAQX,CAAA,EAAoC;IAC3C,IAAIK,CAAA;IACJ,MAAMO,CAAA,GAAQ,IAAIC,GAAA;IAGlB,KADAR,CAAA,GAAe,KAAKE,KAAA,CAAM,GACnBF,CAAA,GAAc;MACpB,MAAMS,CAAA,GAAiBF,CAAA,CAAMG,GAAA,CAAIV,CAAY,KAAK;MAClD,IAAIS,CAAA,GAAiB,IACpB,MAAM,IAAIE,KAAA,CAAM,sEAAwF;MAEzGhB,CAAA,CAASK,CAAY,GACrBO,CAAA,CAAMK,GAAA,CAAIZ,CAAA,EAAcS,CAAA,GAAiB,CAAC,GAC1CT,CAAA,GAAe,KAAKE,KAAA,CAAM,CAC3B;IAAA;EACD;AACD;AAEA,eAAeb,CAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}