{"ast":null,"code":"var __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar Wizard_1;\nimport UI5Element from \"@ui5/webcomponents-base/dist/UI5Element.js\";\nimport property from \"@ui5/webcomponents-base/dist/decorators/property.js\";\nimport slot from \"@ui5/webcomponents-base/dist/decorators/slot.js\";\nimport event from \"@ui5/webcomponents-base/dist/decorators/event.js\";\nimport customElement from \"@ui5/webcomponents-base/dist/decorators/customElement.js\";\nimport litRender from \"@ui5/webcomponents-base/dist/renderer/LitRenderer.js\";\nimport { getI18nBundle } from \"@ui5/webcomponents-base/dist/i18nBundle.js\";\nimport getEffectiveScrollbarStyle from \"@ui5/webcomponents-base/dist/util/getEffectiveScrollbarStyle.js\";\nimport ItemNavigation from \"@ui5/webcomponents-base/dist/delegate/ItemNavigation.js\";\nimport NavigationMode from \"@ui5/webcomponents-base/dist/types/NavigationMode.js\";\nimport clamp from \"@ui5/webcomponents-base/dist/util/clamp.js\";\nimport ResizeHandler from \"@ui5/webcomponents-base/dist/delegate/ResizeHandler.js\";\nimport { isPhone } from \"@ui5/webcomponents-base/dist/Device.js\";\nimport debounce from \"@ui5/webcomponents-base/dist/util/debounce.js\";\nimport { getFirstFocusableElement } from \"@ui5/webcomponents-base/dist/util/FocusableElements.js\";\nimport Button from \"@ui5/webcomponents/dist/Button.js\";\nimport ResponsivePopover from \"@ui5/webcomponents/dist/ResponsivePopover.js\";\n// Texts\nimport { WIZARD_NAV_STEP_DEFAULT_HEADING, WIZARD_NAV_ARIA_ROLE_DESCRIPTION, WIZARD_NAV_ARIA_LABEL, WIZARD_LIST_ARIA_LABEL, WIZARD_LIST_ARIA_DESCRIBEDBY, WIZARD_ACTIONSHEET_STEPS_ARIA_LABEL, WIZARD_OPTIONAL_STEP_ARIA_LABEL, WIZARD_STEP_ARIA_LABEL, WIZARD_STEP_ACTIVE, WIZARD_STEP_INACTIVE } from \"./generated/i18n/i18n-defaults.js\";\n// Step in header and content\nimport WizardTab from \"./WizardTab.js\";\nimport WizardStep from \"./WizardStep.js\";\n// Template and Styles\nimport WizardTemplate from \"./generated/templates/WizardTemplate.lit.js\";\nimport WizardCss from \"./generated/themes/Wizard.css.js\";\nimport WizardPopoverCss from \"./generated/themes/WizardPopover.css.js\";\nconst MIN_STEP_WIDTH_NO_TITLE = 64;\nconst MIN_STEP_WIDTH_WITH_TITLE = 200;\nconst EXPANDED_STEP = \"data-ui5-wizard-expanded-tab\";\nconst AFTER_EXPANDED_STEP = \"data-ui5-wizard-expanded-tab-next\";\nconst AFTER_CURRENT_STEP = \"data-ui5-wizard-after-current-tab\";\nconst BEFORE_EXPANDED_STEP = \"data-ui5-wizard-expanded-tab-prev\";\nconst STEP_SWITCH_THRESHOLDS = {\n  MIN: 0.5,\n  DEFAULT: 0.7,\n  MAX: 1\n};\nconst RESPONSIVE_BREAKPOINTS = {\n  \"0\": \"S\",\n  \"599\": \"M\",\n  \"1023\": \"L\",\n  \"1439\": \"XL\"\n};\n/**\n * @class\n *\n * ### Overview\n *\n * The `ui5-wizard` helps users to complete a complex task by dividing it into sections and guiding them through it.\n * It has two main areas - a navigation area at the top showing the step sequence and a content area below it.\n *\n * ### Structure\n * #### Navigation area\n * The top most area of the `ui5-wizard` is occupied by the navigation area.\n * It shows the sequence of steps, where the recommended number of steps is between 3 and 8 steps.\n *\n * -  Steps can have different visual representations - numbers or icons.\n * -  Steps might have labels for better readability - titleText and subTitleText.\n * -  Steps are defined by using the `ui5-wizard-step` as slotted element within the `ui5-wizard`.\n *\n * **Note:** If no selected step is defined, the first step will be auto selected.\n *\n * **Note:** If multiple selected steps are defined, the last step will be selected.\n *\n * ### Keyboard Handling\n * The user can navigate using the following keyboard shortcuts:\n *\n * #### Wizard Progress Navigation\n *\n * \t- [Left] or [Down] - Focus moves backward to the WizardProgressNavAnchors.\n * \t- [Up] or [Right] - Focus moves forward to the WizardProgressNavAnchor.\n * \t- [Space] / [Enter] or [Return] - Selects an active step\n * \t- [Home] or [PAGE UP] - Focus goes to the first step\n * \t- [End] or [PAGE DOWN] - Focus goes to the last step\n *\n * #### Fast Navigation\n * This component provides a build in fast navigation group which can be used via [F6] / [Shift] + [F6] / [Ctrl] + [Alt/Option] / [Down] or [Ctrl] + [Alt/Option] + [Up].\n * In order to use this functionality, you need to import the following module:\n * `import \"@ui5/webcomponents-base/dist/features/F6Navigation.js\"`\n *\n * #### Content\n * The content occupies the main part of the page. It can hold any type of HTML elements.\n * It's defined by using the `ui5-wizard-step` as slotted element within the `ui5-wizard`.\n *\n * ### Scrolling\n * The component handles user scrolling by selecting the closest step, based on the current scroll position\n * and scrolls to particular place, when the user clicks on the step within the navigation area.\n *\n * **Important:** In order the component's scrolling behaviour to work, it has to be limited from the outside parent element in terms of height.\n * The component or its parent has to be given percentage or absolute height. Otherwise, the component will be scrolled out with the entire page.\n *\n * **For example:**\n *\n * ```html\n * <ui5-dialog style=\"height: 80%\">\n * \t<ui5-wizard></ui5-wizard>\n * </ui5-dialog>\n * ```\n *\n * #### Moving to next step\n * The `ui5-wizard-step` provides the necessary API and it's up to the user of the component to use it to move to the next step.\n * You have to set its `selected` property (and remove the `disabled` one if set) to `true`.\n * The `ui5-wizard` will automatically scroll to the content of the newly selected step.\n *\n * The Fiori 3 guidelines recommends having a \"nextStep\" button in the content area.\n * You can place a button, or any other type of element to trigger step change, inside the `ui5-wizard-step`,\n * and show/hide it when certain fields are filled or user defined criteria is met.\n *\n * ### Usage\n * #### When to use:\n * When the user has to accomplish a long or unfamiliar task.\n *\n * #### When not to use:\n * When the task has less than 3 steps.\n *\n * ### Responsive Behavior\n * On small widths the step's titleText, subtitleText and separators in the navigation area shrink and from particular point the steps are grouped together and overlap.\n * Tapping on them will show a popover to select the step to navigate to. On mobile device, the grouped steps are presented within a dialog.\n *\n * ### ES6 Module Import\n * `import \"@ui5/webcomponents-fiori/dist/Wizard.js\";` (includes <ui5-wizard-step/>)\n * @constructor\n * @extends UI5Element\n * @since 1.0.0-rc.10\n * @public\n * @csspart navigator - Used to style the progress navigator of the `ui5-wizard`.\n * @csspart step-content - Used to style a `ui5-wizard-step` container.\n */\nlet Wizard = Wizard_1 = class Wizard extends UI5Element {\n  constructor() {\n    super();\n    /**\n     * Defines how the content of the `ui5-wizard` would be visualized.\n     * @public\n     * @since 1.14.0\n     * @default \"MultipleSteps\"\n     */\n    this.contentLayout = \"MultipleSteps\";\n    /**\n     * Defines the threshold to switch between steps upon user scrolling.\n     *\n     * **For Example:**\n     *\n     * (1) To switch to the next step, when half of the step is scrolled out - set `step-switch-threshold=\"0.5\"`.\n     * (2) To switch to the next step, when the entire current step is scrolled out - set `step-switch-threshold=\"1\"`.\n     *\n     * **Note:** Supported values are between 0.5 and 1\n     * and values out of the range will be normalized to 0.5 and 1 respectively.\n     * @private\n     * @default 0.7\n     * @since 1.0.0-rc.13\n     */\n    this.stepSwitchThreshold = STEP_SWITCH_THRESHOLDS.DEFAULT;\n    /**\n     * Stores references to the grouped steps.\n     * @private\n     */\n    this._groupedTabs = [];\n    // Stores the scroll offsets of the steps,\n    // e.g. the steps' starting point.\n    this.stepScrollOffsets = [];\n    // Keeps track of the currently selected step index.\n    this.selectedStepIndex = 0;\n    // Keeps track of the previously selected step index.\n    this.previouslySelectedStepIndex = 0;\n    // Indicates that selection will be changed\n    // due to user click.\n    this.selectionRequestedByClick = false;\n    // Stores the previous width\n    this._prevWidth = 0;\n    // Stores the previous height\n    this._prevContentHeight = 0;\n    // Indicates that selection will be changed\n    // due to user scroll.\n    this.selectionRequestedByScroll = false;\n    this._itemNavigation = new ItemNavigation(this, {\n      navigationMode: NavigationMode.Auto,\n      getItemsCallback: () => this.enabledStepsInHeaderDOM\n    });\n    this._onStepResize = this.onStepResize.bind(this);\n  }\n  get classes() {\n    return {\n      root: {\n        \"ui5-wiz-root\": true\n      },\n      popover: {\n        \"ui5-wizard-responsive-popover\": true,\n        \"ui5-wizard-popover\": !isPhone(),\n        \"ui5-wizard-dialog\": isPhone()\n      }\n    };\n  }\n  static async onDefine() {\n    Wizard_1.i18nBundle = await getI18nBundle(\"@ui5/webcomponents-fiori\");\n  }\n  static get SCROLL_DEBOUNCE_RATE() {\n    return 25;\n  }\n  onExitDOM() {\n    this.detachStepsResizeObserver();\n  }\n  onBeforeRendering() {\n    this.syncSelection();\n  }\n  onAfterRendering() {\n    this.storeStepScrollOffsets();\n    if (this.previouslySelectedStepIndex !== this.selectedStepIndex) {\n      this.scrollToSelectedStep();\n    }\n    this.attachStepsResizeObserver();\n    this.previouslySelectedStepIndex = this.selectedStepIndex;\n  }\n  /**\n   * Normalizes the step selection as follows:\n   * (1) If there is no selected step - the first step is going to be selected.\n   * (2) If the selected steps are more than one - the last step is going to be selected.\n   * (3) If the selected step is also disabled - log a warning.\n   * @private\n   */\n  syncSelection() {\n    if (this.stepsCount === 0) {\n      return;\n    }\n    // If no selected steps -> select the first step.\n    if (this.selectedStepsCount === 0) {\n      this.selectFirstStep();\n      console.warn(\"Selecting the first step: no selected step is defined.\"); // eslint-disable-line\n    }\n    // If there are multiple selected steps -> keep the last selected one.\n    if (this.selectedStepsCount > 1) {\n      this.selectLastSelectedStep();\n      console.warn(`Selecting the last step defined as selected: multiple selected steps are defined.`); // eslint-disable-line\n    }\n    // If the selected step is defined as disabled - log warning.\n    if (this.selectedStep && this.selectedStep.disabled) {\n      console.warn(\"The selected step is disabled: you need to enable it in order to interact with the step.\"); // eslint-disable-line\n    }\n    // Place for improvement: If the selected step is not the first, enable all the prior steps\n    this.selectedStepIndex = this.getSelectedStepIndex();\n    if (this.selectedStep && this.stepsInHeaderDOM.length) {\n      if (this._itemNavigation._getItems().includes(this.stepsInHeaderDOM[this.selectedStepIndex])) {\n        this._itemNavigation.setCurrentItem(this.stepsInHeaderDOM[this.selectedStepIndex]);\n      } else {\n        this._itemNavigation.setCurrentItem(this.stepsInHeaderDOM.find(el => el.selected));\n      }\n    }\n  }\n  /**\n   * Selects the first step.\n   * @private\n   */\n  selectFirstStep() {\n    this.deselectAll();\n    this.slottedSteps[0].selected = true;\n    this.slottedSteps[0].disabled = false;\n  }\n  /**\n   * Selects the last step from multiple selected ones.\n   * @private\n   */\n  selectLastSelectedStep() {\n    const lastSelectedStep = this.lastSelectedStep;\n    if (lastSelectedStep) {\n      this.deselectAll();\n      lastSelectedStep.selected = true;\n      lastSelectedStep.disabled = false;\n    }\n  }\n  /**\n   * Deselects all steps.\n   * @private\n   */\n  deselectAll() {\n    this.slottedSteps.forEach(step => {\n      step.selected = false;\n    });\n  }\n  /**\n   * Stores the scroll offsets of the steps,\n   * e.g. the steps' starting point.\n   *\n   * **Note:** the disabled ones has negative offsets.\n   * @private\n   */\n  storeStepScrollOffsets() {\n    this.stepScrollOffsets = this.slottedSteps.map(step => {\n      const contentItem = this.getStepWrapperByRefId(step._id);\n      return contentItem.offsetTop + contentItem.offsetHeight;\n    });\n  }\n  /**\n   * Handles user click on steps' tabs within the header.\n   * **Note:** the handler is bound in the template.\n   * @private\n   */\n  onSelectionChangeRequested(e) {\n    this.selectionRequestedByClick = true;\n    this.changeSelectionByStepAction(e.target);\n  }\n  /**\n   * Handles user scrolling with debouncing.\n   * **Note:** the handler is bound in the template.\n   * @private\n   */\n  onScroll(e) {\n    if (this.selectionRequestedByClick) {\n      this.selectionRequestedByClick = false;\n      return;\n    }\n    debounce(this.changeSelectionByScroll.bind(this, e.target.scrollTop), Wizard_1.SCROLL_DEBOUNCE_RATE);\n  }\n  /**\n   * Handles when a step in the header is focused in order to update the `ItemNavigation`.\n   * **Note:** the handler is bound in the template.\n   * @private\n   */\n  onStepInHeaderFocused(e) {\n    this._itemNavigation.setCurrentItem(e.target);\n  }\n  /**\n   * Handles resize in order to:\n   * (1) sync steps' scroll offset and selection\n   * (2) adapt navition step header\n   * @private\n   */\n  onStepResize() {\n    this.width = this.getBoundingClientRect().width;\n    this.contentHeight = this.getContentHeight();\n    if (this._prevWidth !== this.width || this.contentHeight !== this._prevContentHeight) {\n      this._closeRespPopover();\n    }\n    this._prevWidth = this.width;\n    this._prevContentHeight = this.contentHeight;\n    this._calcCurrentBreakpoint();\n  }\n  attachStepsResizeObserver() {\n    this.stepsDOM.forEach(stepDOM => {\n      ResizeHandler.deregister(stepDOM, this._onStepResize);\n      ResizeHandler.register(stepDOM, this._onStepResize);\n    });\n  }\n  detachStepsResizeObserver() {\n    this.stepsDOM.forEach(stepDOM => {\n      ResizeHandler.deregister(stepDOM, this._onStepResize);\n    });\n  }\n  _calcCurrentBreakpoint() {\n    const breakpointDimensions = Object.keys(RESPONSIVE_BREAKPOINTS).reverse();\n    const breakpoint = breakpointDimensions.find(size => Number(size) < this.width);\n    this._breakpoint = breakpoint ? RESPONSIVE_BREAKPOINTS[breakpoint] : RESPONSIVE_BREAKPOINTS[\"0\"];\n  }\n  /**\n   * Updates the expanded attribute for each ui5-wizard-tab based on the ui5-wizard width\n   * @private\n   */\n  _adjustHeaderOverflow() {\n    let counter = 0;\n    let isForward = true;\n    const tabs = this.stepsInHeaderDOM;\n    if (!tabs.length) {\n      return;\n    }\n    const iWidth = this.progressNavigatorListDOM.getBoundingClientRect().width;\n    const iCurrStep = this.getSelectedStepIndex();\n    const iStepsToShow = this.steps.length ? Math.floor(iWidth / MIN_STEP_WIDTH_WITH_TITLE) : Math.floor(iWidth / MIN_STEP_WIDTH_NO_TITLE);\n    [...tabs].forEach((step, index) => {\n      step.setAttribute(EXPANDED_STEP, \"false\");\n      step.setAttribute(BEFORE_EXPANDED_STEP, \"false\");\n      step.setAttribute(AFTER_EXPANDED_STEP, \"false\");\n      // Add \"data-ui5-wizard-after-current-tab\" to all tabs after the current one\n      if (index > iCurrStep) {\n        tabs[index].setAttribute(AFTER_CURRENT_STEP, \"true\");\n      } else {\n        tabs[index].removeAttribute(AFTER_CURRENT_STEP);\n      }\n    });\n    // Add \"data-ui5-wizard-expanded-tab\" to the current step\n    if (tabs[iCurrStep]) {\n      tabs[iCurrStep].setAttribute(EXPANDED_STEP, \"true\");\n    }\n    // Set the \"data-ui5-wizard-expanded-tab\" to the steps that are expanded\n    // The algorithm is as follows:\n    // 1. A step towards the end is expanded\n    // \t1.2. If there are no available steps towards the end a step towards the beginning is expanded\n    // 2. A step towards the beginning is expanded\n    // \t2.2. If there are no available steps towards the beginning a step towards the end is expanded\n    for (let i = 1; i < iStepsToShow; i++) {\n      if (isForward) {\n        counter += 1;\n      }\n      if (isForward && tabs[iCurrStep + counter]) {\n        tabs[iCurrStep + counter].setAttribute(EXPANDED_STEP, \"true\");\n        isForward = !isForward;\n      } else if (!isForward && tabs[iCurrStep - counter]) {\n        tabs[iCurrStep - counter].setAttribute(EXPANDED_STEP, \"true\");\n        isForward = !isForward;\n      } else if (tabs[iCurrStep + counter + 1]) {\n        counter += 1;\n        tabs[iCurrStep + counter].setAttribute(EXPANDED_STEP, \"true\");\n        isForward = true;\n      } else if (tabs[iCurrStep - counter]) {\n        tabs[iCurrStep - counter].setAttribute(EXPANDED_STEP, \"true\");\n        counter += 1;\n        isForward = false;\n      }\n    }\n    // mark the topmost steps of both groups (in the beginning and the end),\n    // using the \"data-ui5-wizard-after-current-tab\" and \"data-ui5-wizard-expanded-tab-prev\" attributes\n    for (let i = 0; i < tabs.length; i++) {\n      if (tabs[i].getAttribute(EXPANDED_STEP) === \"true\" && tabs[i - 1] && tabs[i - 1].getAttribute(EXPANDED_STEP) === \"false\") {\n        tabs[i - 1].setAttribute(BEFORE_EXPANDED_STEP, \"true\");\n      }\n      if (tabs[i].getAttribute(EXPANDED_STEP) === \"false\" && tabs[i - 1] && tabs[i - 1].getAttribute(EXPANDED_STEP) === \"true\") {\n        tabs[i].setAttribute(AFTER_EXPANDED_STEP, \"true\");\n        break;\n      }\n    }\n  }\n  _isGroupAtStart(selectedStep) {\n    const iStepNumber = this.stepsInHeaderDOM.indexOf(selectedStep);\n    return selectedStep.getAttribute(EXPANDED_STEP) === \"false\" && selectedStep.getAttribute(BEFORE_EXPANDED_STEP) === \"true\" && iStepNumber > 0;\n  }\n  _isGroupAtEnd(selectedStep) {\n    const iStepNumber = this.stepsInHeaderDOM.indexOf(selectedStep);\n    return selectedStep.getAttribute(EXPANDED_STEP) === \"false\" && selectedStep.getAttribute(AFTER_EXPANDED_STEP) === \"true\" && iStepNumber + 1 < this.steps.length;\n  }\n  _showPopover(oDomTarget, isAtStart) {\n    const tabs = Array.from(this.stepsInHeaderDOM);\n    this._groupedTabs = [];\n    const iFromStep = isAtStart ? 0 : this.stepsInHeaderDOM.indexOf(oDomTarget);\n    const iToStep = isAtStart ? this.stepsInHeaderDOM.indexOf(oDomTarget) : tabs.length - 1;\n    for (let i = iFromStep; i <= iToStep; i++) {\n      this._groupedTabs.push(tabs[i]);\n    }\n    const responsivePopover = this._respPopover();\n    responsivePopover.opener = oDomTarget;\n    responsivePopover.open = true;\n  }\n  _onGroupedTabClick(e) {\n    const eTarget = e.target;\n    if (this._isGroupAtStart(eTarget)) {\n      return this._showPopover(eTarget, true);\n    }\n    if (this._isGroupAtEnd(eTarget)) {\n      return this._showPopover(eTarget, false);\n    }\n  }\n  _onOverflowStepButtonClick(e) {\n    const tabs = Array.from(this.stepsInHeaderDOM);\n    const eTarget = e.target;\n    const stepRefId = eTarget.getAttribute(\"data-ui5-header-tab-ref-id\");\n    const stepToSelect = this.slottedSteps[Number(stepRefId) - 1];\n    const selectedStep = this.selectedStep;\n    const newlySelectedIndex = this.slottedSteps.indexOf(stepToSelect);\n    this.switchSelectionFromOldToNewStep(selectedStep, stepToSelect, newlySelectedIndex, false);\n    this._closeRespPopover();\n    tabs[newlySelectedIndex].focus();\n  }\n  _closeRespPopover() {\n    const responsivePopover = this._respPopover();\n    if (responsivePopover) {\n      responsivePopover.open = false;\n    }\n  }\n  _respPopover() {\n    return this.shadowRoot.querySelector(`.ui5-wizard-responsive-popover`);\n  }\n  /**\n   * Called upon `onScroll`.\n   * Selects the closest step, based on the user scroll position.\n   * @param scrollPos the current scroll position\n   * @private\n   */\n  changeSelectionByScroll(scrollPos) {\n    const newlySelectedIndex = this.getClosestStepIndexByScrollPos(scrollPos);\n    const stepToSelect = this.slottedSteps[newlySelectedIndex];\n    // Skip if already selected - stop.\n    if (this.selectedStepIndex === newlySelectedIndex) {\n      return;\n    }\n    // If the calculated index is in range,\n    // change selection and fire \"step-change\".\n    if (!stepToSelect.disabled && newlySelectedIndex >= 0 && newlySelectedIndex <= this.stepsCount - 1) {\n      this.switchSelectionFromOldToNewStep(this.selectedStep, stepToSelect, newlySelectedIndex, true);\n      this.selectionRequestedByScroll = true;\n    }\n  }\n  /**\n   * Called upon `onSelectionChangeRequested`.\n   * Selects the external step (ui5-wizard-step),\n   * based on the clicked or activated via keyboard step in the header (ui5-wizard-tab).\n   * @param stepInHeader the step equivalent in the header\n   * @private\n   */\n  async changeSelectionByStepAction(stepInHeader) {\n    const stepRefId = stepInHeader.getAttribute(\"data-ui5-content-ref-id\");\n    const selectedStep = this.selectedStep;\n    const stepToSelect = this.getStepByRefId(stepRefId);\n    const bExpanded = stepInHeader.getAttribute(EXPANDED_STEP) === \"true\";\n    const newlySelectedIndex = this.slottedSteps.indexOf(stepToSelect);\n    const firstElementChild = stepToSelect.firstElementChild;\n    const firstFocusableElement = await getFirstFocusableElement(firstElementChild);\n    if (firstFocusableElement) {\n      // Focus the first focusable element within the step content corresponding to the currently focused tab\n      firstFocusableElement.focus();\n    }\n    // If the currently selected (active) step is clicked,\n    // just scroll to its starting point and stop.\n    if (selectedStep === stepToSelect) {\n      this.scrollToContentItem(this.selectedStepIndex);\n      return;\n    }\n    if (bExpanded || !bExpanded && (newlySelectedIndex === 0 || newlySelectedIndex === this.steps.length - 1)) {\n      // Change selection and fire \"step-change\".\n      this.switchSelectionFromOldToNewStep(selectedStep, stepToSelect, newlySelectedIndex, false);\n    }\n  }\n  getContentHeight() {\n    let contentHeight = 0;\n    this.stepsDOM.forEach(step => {\n      contentHeight += step.getBoundingClientRect().height;\n    });\n    return contentHeight;\n  }\n  getStepAriaLabelText(step, ariaLabel) {\n    return Wizard_1.i18nBundle.getText(WIZARD_STEP_ARIA_LABEL, ariaLabel);\n  }\n  get stepsDOM() {\n    return Array.from(this.shadowRoot.querySelectorAll(\".ui5-wiz-content-item\"));\n  }\n  get progressNavigatorListDOM() {\n    return this.shadowRoot.querySelector(\".ui5-wiz-nav-list\");\n  }\n  get _stepsInHeader() {\n    return this.getStepsInfo();\n  }\n  get _steps() {\n    const lastEnabledStepIndex = this.getLastEnabledStepIndex();\n    const stepsInfo = this.getStepsInfo();\n    return this.steps.map((step, idx) => {\n      step.stretch = idx === lastEnabledStepIndex;\n      step.stepContentAriaLabel = `${this.navStepDefaultHeading} ${stepsInfo[idx].number} ${stepsInfo[idx].titleText}`;\n      return step;\n    });\n  }\n  get stepsCount() {\n    return this.slottedSteps.length;\n  }\n  get selectedStep() {\n    if (this.selectedStepsCount) {\n      return this.selectedSteps[0];\n    }\n    return null;\n  }\n  get lastSelectedStep() {\n    if (this.selectedStepsCount) {\n      return this.selectedSteps[this.selectedStepsCount - 1];\n    }\n    return null;\n  }\n  get selectedSteps() {\n    return this.slottedSteps.filter(step => step.selected);\n  }\n  get enabledSteps() {\n    return this.slottedSteps.filter(step => !step.disabled);\n  }\n  get selectedStepsCount() {\n    return this.selectedSteps.length;\n  }\n  get slottedSteps() {\n    return this.getSlottedNodes(\"steps\");\n  }\n  get contentDOM() {\n    return this.shadowRoot.querySelector(`.ui5-wiz-content`);\n  }\n  get stepsInHeaderDOM() {\n    return Array.from(this.shadowRoot.querySelectorAll(\"[ui5-wizard-tab]\"));\n  }\n  get enabledStepsInHeaderDOM() {\n    return this.stepsInHeaderDOM.filter(step => !step.disabled);\n  }\n  get navAriaRoleDescription() {\n    return Wizard_1.i18nBundle.getText(WIZARD_NAV_ARIA_ROLE_DESCRIPTION);\n  }\n  get navAriaLabelText() {\n    return Wizard_1.i18nBundle.getText(WIZARD_NAV_ARIA_LABEL);\n  }\n  get navAriaDescribedbyText() {\n    return Wizard_1.i18nBundle.getText(WIZARD_LIST_ARIA_DESCRIBEDBY);\n  }\n  get listAriaLabelText() {\n    return Wizard_1.i18nBundle.getText(WIZARD_LIST_ARIA_LABEL);\n  }\n  get actionSheetStepsText() {\n    return Wizard_1.i18nBundle.getText(WIZARD_ACTIONSHEET_STEPS_ARIA_LABEL);\n  }\n  get navStepDefaultHeading() {\n    return Wizard_1.i18nBundle.getText(WIZARD_NAV_STEP_DEFAULT_HEADING);\n  }\n  get optionalStepText() {\n    return Wizard_1.i18nBundle.getText(WIZARD_OPTIONAL_STEP_ARIA_LABEL);\n  }\n  get activeStepText() {\n    return Wizard_1.i18nBundle.getText(WIZARD_STEP_ACTIVE);\n  }\n  get inactiveStepText() {\n    return Wizard_1.i18nBundle.getText(WIZARD_STEP_INACTIVE);\n  }\n  get ariaLabelText() {\n    return Wizard_1.i18nBundle.getText(WIZARD_NAV_ARIA_ROLE_DESCRIPTION);\n  }\n  get effectiveStepSwitchThreshold() {\n    return clamp(this.stepSwitchThreshold, STEP_SWITCH_THRESHOLDS.MIN, STEP_SWITCH_THRESHOLDS.MAX);\n  }\n  /**\n   * Returns an array of data objects, based on the user defined steps\n   * to later build the steps (tabs) within the header.\n   * @private\n   */\n  getStepsInfo() {\n    const lastEnabledStepIndex = this.getLastEnabledStepIndex();\n    const stepsCount = this.stepsCount;\n    const selectedStepIndex = this.getSelectedStepIndex();\n    let inintialZIndex = this.steps.length + 10;\n    let accInfo;\n    this._adjustHeaderOverflow();\n    return this.steps.map((step, idx) => {\n      const pos = idx + 1;\n      // Hide separator if it's the last step and it's not a branching one\n      const hideSeparator = idx === stepsCount - 1 && !step.branching;\n      const isOptional = step.subtitleText ? this.optionalStepText : \"\";\n      const stepStateText = step.disabled ? this.inactiveStepText : this.activeStepText;\n      const ariaLabel = (step.titleText ? `${pos} ${step.titleText} ${stepStateText} ${isOptional}` : `${this.navStepDefaultHeading} ${pos} ${stepStateText} ${isOptional}`).trim();\n      const isAfterCurrent = idx > selectedStepIndex;\n      accInfo = {\n        \"ariaSetsize\": stepsCount,\n        \"ariaPosinset\": pos,\n        \"ariaLabel\": this.getStepAriaLabelText(step, ariaLabel)\n      };\n      const stepInfo = {\n        icon: step.icon,\n        titleText: step.titleText,\n        subtitleText: step.subtitleText,\n        number: pos,\n        selected: step.selected,\n        disabled: step.disabled,\n        hideSeparator,\n        activeSeparator: idx < lastEnabledStepIndex && !step.disabled,\n        branchingSeparator: step.branching,\n        pos,\n        accInfo,\n        refStepId: step._id,\n        styles: {\n          zIndex: isAfterCurrent ? --inintialZIndex : 1\n        }\n      };\n      return stepInfo;\n    });\n  }\n  /**\n   * Returns the index of the selected step.\n   * @private\n   */\n  getSelectedStepIndex() {\n    if (this.selectedStep) {\n      return this.slottedSteps.indexOf(this.selectedStep);\n    }\n    return 0;\n  }\n  /**\n   * Returns the index of the last enabled step.\n   * @private\n   */\n  getLastEnabledStepIndex() {\n    let lastEnabledStepIndex = 0;\n    this.slottedSteps.forEach((step, idx) => {\n      if (!step.disabled) {\n        lastEnabledStepIndex = idx;\n      }\n    });\n    return lastEnabledStepIndex;\n  }\n  getStepByRefId(refId) {\n    return this.slottedSteps.find(step => step._id === refId);\n  }\n  getStepWrapperByRefId(refId) {\n    return this.shadowRoot.querySelector(`[data-ui5-content-item-ref-id=${refId}]`);\n  }\n  getStepWrapperByIdx(idx) {\n    return this.getStepWrapperByRefId(this.steps[idx]._id);\n  }\n  /**\n   * Scrolls to the content of the selected step, used in `onAfterRendering`.\n   * @private\n   */\n  scrollToSelectedStep() {\n    if (!this.selectionRequestedByScroll) {\n      this.scrollToContentItem(this.selectedStepIndex);\n    }\n    this.selectionRequestedByScroll = false;\n  }\n  /**\n   * Scrolls to the content item within the `ui5-wizard` shadowDOM\n   * by given step index.\n   * @private\n   * @param stepIndex the index of a step\n   */\n  scrollToContentItem(stepIndex) {\n    this.contentDOM.scrollTop = this.getClosestScrollPosByStepIndex(stepIndex);\n  }\n  /**\n   * Returns to closest scroll position for the given step index.\n   * @private\n   * @param stepIndex the index of a step\n   */\n  getClosestScrollPosByStepIndex(stepIndex) {\n    if (stepIndex === 0) {\n      return 0;\n    }\n    // It's possible to have [enabled - 0, disabled - 1, enabled - 2, disabled - 3] step definition and similar.\n    // Consider selection of the third step at index 2, the wizard should scroll where the previous step ends,\n    // but in this case the 2nd step is disabled, so we have to fallback to the first possible step.\n    for (let closestStepIndex = stepIndex - 1; closestStepIndex >= 0; closestStepIndex--) {\n      if (this.stepScrollOffsets[closestStepIndex] > 0) {\n        return this.stepScrollOffsets[closestStepIndex];\n      }\n    }\n    return 0;\n  }\n  /**\n   * Returns the closest step index by given scroll position.\n   * @private\n   * @param scrollPos the scroll position\n   */\n  getClosestStepIndexByScrollPos(scrollPos) {\n    for (let closestStepIndex = 0; closestStepIndex <= this.stepScrollOffsets.length - 1; closestStepIndex++) {\n      const stepScrollOffset = this.stepScrollOffsets[closestStepIndex];\n      const step = this.getStepWrapperByIdx(closestStepIndex);\n      const switchStepBoundary = step.offsetTop + step.offsetHeight * this.effectiveStepSwitchThreshold;\n      if (stepScrollOffset > 0 && scrollPos < stepScrollOffset) {\n        if (scrollPos > switchStepBoundary) {\n          return closestStepIndex + 1;\n        }\n        return closestStepIndex;\n      }\n    }\n    return this.selectedStepIndex;\n  }\n  /**\n   * Switches the selection from the old step to the newly selected step.\n   * @param selectedStep the old step\n   * @param stepToSelect the step to be selected\n   * @param stepToSelectIndex the index of the newly selected step\n   * @param withScroll the selection changed due to user scrolling\n   * @private\n   */\n  switchSelectionFromOldToNewStep(selectedStep, stepToSelect, stepToSelectIndex, withScroll) {\n    if (selectedStep && stepToSelect) {\n      // keep the selection if next step is disabled\n      if (!stepToSelect.disabled) {\n        selectedStep.selected = false;\n        stepToSelect.selected = true;\n      }\n      this.fireEvent(\"step-change\", {\n        step: stepToSelect,\n        previousStep: selectedStep,\n        withScroll\n      });\n      this.selectedStepIndex = stepToSelectIndex;\n    }\n  }\n  /**\n   * Sorter method for sorting an array in ascending order.\n   * @private\n   */\n  sortAscending(a, b) {\n    if (a < b) {\n      return -1;\n    }\n    if (a > b) {\n      return 1;\n    }\n    return 0;\n  }\n};\n__decorate([property()], Wizard.prototype, \"contentLayout\", void 0);\n__decorate([property({\n  type: Number\n})], Wizard.prototype, \"width\", void 0);\n__decorate([property({\n  type: Number\n})], Wizard.prototype, \"stepSwitchThreshold\", void 0);\n__decorate([property({\n  type: Number\n})], Wizard.prototype, \"contentHeight\", void 0);\n__decorate([property({\n  type: Array\n})], Wizard.prototype, \"_groupedTabs\", void 0);\n__decorate([property()], Wizard.prototype, \"_breakpoint\", void 0);\n__decorate([slot({\n  \"default\": true,\n  type: HTMLElement,\n  \"individualSlots\": true,\n  invalidateOnChildChange: true\n})], Wizard.prototype, \"steps\", void 0);\nWizard = Wizard_1 = __decorate([customElement({\n  tag: \"ui5-wizard\",\n  languageAware: true,\n  fastNavigation: true,\n  renderer: litRender,\n  styles: [WizardCss, WizardPopoverCss, getEffectiveScrollbarStyle()],\n  template: WizardTemplate,\n  dependencies: [WizardTab, WizardStep, ResponsivePopover, Button]\n})\n/**\n * Fired when the step is changed by user interaction - either with scrolling,\n * or by clicking on the steps within the component header.\n * @param {WizardStep} step The new step.\n * @param {WizardStep} previousStep The previous step.\n * @param {boolean} withScroll true when the event occurs due to user scrolling.\n * @public\n */, event(\"step-change\", {\n  detail: {\n    /**\n    * @public\n    */\n    step: {\n      type: HTMLElement\n    },\n    /**\n    * @public\n    */\n    previousStep: {\n      type: HTMLElement\n    },\n    /**\n    * @public\n    */\n    withScroll: {\n      type: Boolean\n    }\n  }\n})], Wizard);\nWizard.define();\nexport default Wizard;","map":{"version":3,"names":["UI5Element","property","slot","event","customElement","litRender","getI18nBundle","getEffectiveScrollbarStyle","ItemNavigation","NavigationMode","clamp","ResizeHandler","isPhone","debounce","getFirstFocusableElement","Button","ResponsivePopover","WIZARD_NAV_STEP_DEFAULT_HEADING","WIZARD_NAV_ARIA_ROLE_DESCRIPTION","WIZARD_NAV_ARIA_LABEL","WIZARD_LIST_ARIA_LABEL","WIZARD_LIST_ARIA_DESCRIBEDBY","WIZARD_ACTIONSHEET_STEPS_ARIA_LABEL","WIZARD_OPTIONAL_STEP_ARIA_LABEL","WIZARD_STEP_ARIA_LABEL","WIZARD_STEP_ACTIVE","WIZARD_STEP_INACTIVE","WizardTab","WizardStep","WizardTemplate","WizardCss","WizardPopoverCss","MIN_STEP_WIDTH_NO_TITLE","MIN_STEP_WIDTH_WITH_TITLE","EXPANDED_STEP","AFTER_EXPANDED_STEP","AFTER_CURRENT_STEP","BEFORE_EXPANDED_STEP","STEP_SWITCH_THRESHOLDS","MIN","DEFAULT","MAX","RESPONSIVE_BREAKPOINTS","Wizard","Wizard_1","constructor","contentLayout","stepSwitchThreshold","_groupedTabs","stepScrollOffsets","selectedStepIndex","previouslySelectedStepIndex","selectionRequestedByClick","_prevWidth","_prevContentHeight","selectionRequestedByScroll","_itemNavigation","navigationMode","Auto","getItemsCallback","enabledStepsInHeaderDOM","_onStepResize","onStepResize","bind","classes","root","popover","onDefine","i18nBundle","SCROLL_DEBOUNCE_RATE","onExitDOM","detachStepsResizeObserver","onBeforeRendering","syncSelection","onAfterRendering","storeStepScrollOffsets","scrollToSelectedStep","attachStepsResizeObserver","stepsCount","selectedStepsCount","selectFirstStep","console","warn","selectLastSelectedStep","selectedStep","disabled","getSelectedStepIndex","stepsInHeaderDOM","length","_getItems","includes","setCurrentItem","find","el","selected","deselectAll","slottedSteps","lastSelectedStep","forEach","step","map","contentItem","getStepWrapperByRefId","_id","offsetTop","offsetHeight","onSelectionChangeRequested","e","changeSelectionByStepAction","target","onScroll","changeSelectionByScroll","scrollTop","onStepInHeaderFocused","width","getBoundingClientRect","contentHeight","getContentHeight","_closeRespPopover","_calcCurrentBreakpoint","stepsDOM","stepDOM","deregister","register","breakpointDimensions","Object","keys","reverse","breakpoint","size","Number","_breakpoint","_adjustHeaderOverflow","counter","isForward","tabs","iWidth","progressNavigatorListDOM","iCurrStep","iStepsToShow","steps","Math","floor","index","setAttribute","removeAttribute","i","getAttribute","_isGroupAtStart","iStepNumber","indexOf","_isGroupAtEnd","_showPopover","oDomTarget","isAtStart","Array","from","iFromStep","iToStep","push","responsivePopover","_respPopover","opener","open","_onGroupedTabClick","eTarget","_onOverflowStepButtonClick","stepRefId","stepToSelect","newlySelectedIndex","switchSelectionFromOldToNewStep","focus","shadowRoot","querySelector","scrollPos","getClosestStepIndexByScrollPos","stepInHeader","getStepByRefId","bExpanded","firstElementChild","firstFocusableElement","scrollToContentItem","height","getStepAriaLabelText","ariaLabel","getText","querySelectorAll","_stepsInHeader","getStepsInfo","_steps","lastEnabledStepIndex","getLastEnabledStepIndex","stepsInfo","idx","stretch","stepContentAriaLabel","navStepDefaultHeading","number","titleText","selectedSteps","filter","enabledSteps","getSlottedNodes","contentDOM","navAriaRoleDescription","navAriaLabelText","navAriaDescribedbyText","listAriaLabelText","actionSheetStepsText","optionalStepText","activeStepText","inactiveStepText","ariaLabelText","effectiveStepSwitchThreshold","inintialZIndex","accInfo","pos","hideSeparator","branching","isOptional","subtitleText","stepStateText","trim","isAfterCurrent","stepInfo","icon","activeSeparator","branchingSeparator","refStepId","styles","zIndex","refId","getStepWrapperByIdx","stepIndex","getClosestScrollPosByStepIndex","closestStepIndex","stepScrollOffset","switchStepBoundary","stepToSelectIndex","withScroll","fireEvent","previousStep","sortAscending","a","b","__decorate","type","HTMLElement","invalidateOnChildChange","tag","languageAware","fastNavigation","renderer","template","dependencies","detail","Boolean","define"],"sources":["/home/user/projects/reactproj/node_modules/@ui5/webcomponents-fiori/src/Wizard.ts"],"sourcesContent":["import UI5Element from \"@ui5/webcomponents-base/dist/UI5Element.js\";\nimport property from \"@ui5/webcomponents-base/dist/decorators/property.js\";\nimport slot from \"@ui5/webcomponents-base/dist/decorators/slot.js\";\nimport event from \"@ui5/webcomponents-base/dist/decorators/event.js\";\nimport customElement from \"@ui5/webcomponents-base/dist/decorators/customElement.js\";\nimport litRender from \"@ui5/webcomponents-base/dist/renderer/LitRenderer.js\";\nimport { getI18nBundle } from \"@ui5/webcomponents-base/dist/i18nBundle.js\";\nimport getEffectiveScrollbarStyle from \"@ui5/webcomponents-base/dist/util/getEffectiveScrollbarStyle.js\";\nimport type I18nBundle from \"@ui5/webcomponents-base/dist/i18nBundle.js\";\nimport ItemNavigation from \"@ui5/webcomponents-base/dist/delegate/ItemNavigation.js\";\nimport NavigationMode from \"@ui5/webcomponents-base/dist/types/NavigationMode.js\";\nimport clamp from \"@ui5/webcomponents-base/dist/util/clamp.js\";\nimport ResizeHandler from \"@ui5/webcomponents-base/dist/delegate/ResizeHandler.js\";\nimport type { ResizeObserverCallback } from \"@ui5/webcomponents-base/dist/delegate/ResizeHandler.js\";\nimport { isPhone } from \"@ui5/webcomponents-base/dist/Device.js\";\nimport debounce from \"@ui5/webcomponents-base/dist/util/debounce.js\";\nimport { getFirstFocusableElement } from \"@ui5/webcomponents-base/dist/util/FocusableElements.js\";\nimport Button from \"@ui5/webcomponents/dist/Button.js\";\nimport ResponsivePopover from \"@ui5/webcomponents/dist/ResponsivePopover.js\";\nimport type WizardContentLayout from \"./types/WizardContentLayout.js\";\n\n// Texts\nimport {\n\tWIZARD_NAV_STEP_DEFAULT_HEADING,\n\tWIZARD_NAV_ARIA_ROLE_DESCRIPTION,\n\tWIZARD_NAV_ARIA_LABEL,\n\tWIZARD_LIST_ARIA_LABEL,\n\tWIZARD_LIST_ARIA_DESCRIBEDBY,\n\tWIZARD_ACTIONSHEET_STEPS_ARIA_LABEL,\n\tWIZARD_OPTIONAL_STEP_ARIA_LABEL,\n\tWIZARD_STEP_ARIA_LABEL,\n\tWIZARD_STEP_ACTIVE,\n\tWIZARD_STEP_INACTIVE,\n} from \"./generated/i18n/i18n-defaults.js\";\n\n// Step in header and content\nimport WizardTab from \"./WizardTab.js\";\nimport WizardStep from \"./WizardStep.js\";\n\n// Template and Styles\nimport WizardTemplate from \"./generated/templates/WizardTemplate.lit.js\";\nimport WizardCss from \"./generated/themes/Wizard.css.js\";\nimport WizardPopoverCss from \"./generated/themes/WizardPopover.css.js\";\n\nconst MIN_STEP_WIDTH_NO_TITLE = 64;\nconst MIN_STEP_WIDTH_WITH_TITLE = 200;\n\nconst EXPANDED_STEP = \"data-ui5-wizard-expanded-tab\";\nconst AFTER_EXPANDED_STEP = \"data-ui5-wizard-expanded-tab-next\";\nconst AFTER_CURRENT_STEP = \"data-ui5-wizard-after-current-tab\";\nconst BEFORE_EXPANDED_STEP = \"data-ui5-wizard-expanded-tab-prev\";\n\nconst STEP_SWITCH_THRESHOLDS = {\n\tMIN: 0.5,\n\tDEFAULT: 0.7,\n\tMAX: 1,\n};\n\ntype ResponsiveBreakpoints = {\n\t[key: string]: string,\n}\n\ntype WizardStepChangeEventDetail = {\n\tstep: WizardStep,\n\tpreviousStep: WizardStep,\n\twithScroll: boolean,\n}\n\nconst RESPONSIVE_BREAKPOINTS: ResponsiveBreakpoints = {\n\t\"0\": \"S\",\n\t\"599\": \"M\",\n\t\"1023\": \"L\",\n\t\"1439\": \"XL\",\n};\n\ntype AccessibilityInformation = {\n\tariaSetsize: number,\n\tariaPosinset: number,\n\tariaLabel: string,\n}\n\ntype StepInfo = {\n\ticon?: string,\n\ttitleText?: string,\n\tsubtitleText?: string,\n\tnumber: number,\n\tselected: boolean,\n\tdisabled: boolean,\n\thideSeparator: boolean,\n\tactiveSeparator: boolean,\n\tbranchingSeparator: boolean,\n\tpos: number,\n\taccInfo: AccessibilityInformation,\n\trefStepId: string,\n\tstyles: object,\n}\n\n/**\n * @class\n *\n * ### Overview\n *\n * The `ui5-wizard` helps users to complete a complex task by dividing it into sections and guiding them through it.\n * It has two main areas - a navigation area at the top showing the step sequence and a content area below it.\n *\n * ### Structure\n * #### Navigation area\n * The top most area of the `ui5-wizard` is occupied by the navigation area.\n * It shows the sequence of steps, where the recommended number of steps is between 3 and 8 steps.\n *\n * -  Steps can have different visual representations - numbers or icons.\n * -  Steps might have labels for better readability - titleText and subTitleText.\n * -  Steps are defined by using the `ui5-wizard-step` as slotted element within the `ui5-wizard`.\n *\n * **Note:** If no selected step is defined, the first step will be auto selected.\n *\n * **Note:** If multiple selected steps are defined, the last step will be selected.\n *\n * ### Keyboard Handling\n * The user can navigate using the following keyboard shortcuts:\n *\n * #### Wizard Progress Navigation\n *\n * \t- [Left] or [Down] - Focus moves backward to the WizardProgressNavAnchors.\n * \t- [Up] or [Right] - Focus moves forward to the WizardProgressNavAnchor.\n * \t- [Space] / [Enter] or [Return] - Selects an active step\n * \t- [Home] or [PAGE UP] - Focus goes to the first step\n * \t- [End] or [PAGE DOWN] - Focus goes to the last step\n *\n * #### Fast Navigation\n * This component provides a build in fast navigation group which can be used via [F6] / [Shift] + [F6] / [Ctrl] + [Alt/Option] / [Down] or [Ctrl] + [Alt/Option] + [Up].\n * In order to use this functionality, you need to import the following module:\n * `import \"@ui5/webcomponents-base/dist/features/F6Navigation.js\"`\n *\n * #### Content\n * The content occupies the main part of the page. It can hold any type of HTML elements.\n * It's defined by using the `ui5-wizard-step` as slotted element within the `ui5-wizard`.\n *\n * ### Scrolling\n * The component handles user scrolling by selecting the closest step, based on the current scroll position\n * and scrolls to particular place, when the user clicks on the step within the navigation area.\n *\n * **Important:** In order the component's scrolling behaviour to work, it has to be limited from the outside parent element in terms of height.\n * The component or its parent has to be given percentage or absolute height. Otherwise, the component will be scrolled out with the entire page.\n *\n * **For example:**\n *\n * ```html\n * <ui5-dialog style=\"height: 80%\">\n * \t<ui5-wizard></ui5-wizard>\n * </ui5-dialog>\n * ```\n *\n * #### Moving to next step\n * The `ui5-wizard-step` provides the necessary API and it's up to the user of the component to use it to move to the next step.\n * You have to set its `selected` property (and remove the `disabled` one if set) to `true`.\n * The `ui5-wizard` will automatically scroll to the content of the newly selected step.\n *\n * The Fiori 3 guidelines recommends having a \"nextStep\" button in the content area.\n * You can place a button, or any other type of element to trigger step change, inside the `ui5-wizard-step`,\n * and show/hide it when certain fields are filled or user defined criteria is met.\n *\n * ### Usage\n * #### When to use:\n * When the user has to accomplish a long or unfamiliar task.\n *\n * #### When not to use:\n * When the task has less than 3 steps.\n *\n * ### Responsive Behavior\n * On small widths the step's titleText, subtitleText and separators in the navigation area shrink and from particular point the steps are grouped together and overlap.\n * Tapping on them will show a popover to select the step to navigate to. On mobile device, the grouped steps are presented within a dialog.\n *\n * ### ES6 Module Import\n * `import \"@ui5/webcomponents-fiori/dist/Wizard.js\";` (includes <ui5-wizard-step/>)\n * @constructor\n * @extends UI5Element\n * @since 1.0.0-rc.10\n * @public\n * @csspart navigator - Used to style the progress navigator of the `ui5-wizard`.\n * @csspart step-content - Used to style a `ui5-wizard-step` container.\n */\n@customElement({\n\ttag: \"ui5-wizard\",\n\tlanguageAware: true,\n\tfastNavigation: true,\n\trenderer: litRender,\n\tstyles: [\n\t\tWizardCss,\n\t\tWizardPopoverCss,\n\t\tgetEffectiveScrollbarStyle(),\n\t],\n\ttemplate: WizardTemplate,\n\tdependencies: [\n\t\tWizardTab,\n\t\tWizardStep,\n\t\tResponsivePopover,\n\t\tButton,\n\t],\n})\n\n/**\n * Fired when the step is changed by user interaction - either with scrolling,\n * or by clicking on the steps within the component header.\n * @param {WizardStep} step The new step.\n * @param {WizardStep} previousStep The previous step.\n * @param {boolean} withScroll true when the event occurs due to user scrolling.\n * @public\n */\n@event<WizardStepChangeEventDetail>(\"step-change\", {\n\tdetail: {\n\t\t/**\n\t\t* @public\n\t\t*/\n\t\tstep: { type: HTMLElement },\n\t\t/**\n\t\t* @public\n\t\t*/\n\t\tpreviousStep: { type: HTMLElement },\n\t\t/**\n\t\t* @public\n\t\t*/\n\t\twithScroll: { type: Boolean },\n\t},\n})\n\nclass Wizard extends UI5Element {\n\t/**\n\t * Defines how the content of the `ui5-wizard` would be visualized.\n\t * @public\n\t * @since 1.14.0\n\t * @default \"MultipleSteps\"\n\t */\n\t@property()\n\tcontentLayout: `${WizardContentLayout}` = \"MultipleSteps\";\n\n\t/**\n\t * Defines the width of the `ui5-wizard`.\n\t * @private\n\t */\n\t@property({ type: Number })\n\twidth?: number\n\n\t/**\n\t * Defines the threshold to switch between steps upon user scrolling.\n\t *\n\t * **For Example:**\n\t *\n\t * (1) To switch to the next step, when half of the step is scrolled out - set `step-switch-threshold=\"0.5\"`.\n\t * (2) To switch to the next step, when the entire current step is scrolled out - set `step-switch-threshold=\"1\"`.\n\t *\n\t * **Note:** Supported values are between 0.5 and 1\n\t * and values out of the range will be normalized to 0.5 and 1 respectively.\n\t * @private\n\t * @default 0.7\n\t * @since 1.0.0-rc.13\n\t */\n\t@property({ type: Number })\n\tstepSwitchThreshold = STEP_SWITCH_THRESHOLDS.DEFAULT;\n\n\t/**\n\t * Defines the height of the `ui5-wizard` content.\n\t * @private\n\t */\n\t@property({ type: Number })\n\tcontentHeight?: number;\n\n\t/**\n\t * Stores references to the grouped steps.\n\t * @private\n\t */\n\t@property({ type: Array })\n\t_groupedTabs: Array<WizardTab> = [];\n\n\t@property()\n\t_breakpoint?: string\n\n\t/**\n\t * Defines the steps.\n\t *\n\t * **Note:** Use the available `ui5-wizard-step` component.\n\t * @public\n\t */\n\t@slot({\n\t\t\"default\": true,\n\t\ttype: HTMLElement,\n\t\t\"individualSlots\": true,\n\t\tinvalidateOnChildChange: true,\n\t})\n\tsteps!: Array<WizardStep>\n\n\tstatic i18nBundle: I18nBundle;\n\n\tstepScrollOffsets: Array<number>;\n\tselectedStepIndex: number;\n\tpreviouslySelectedStepIndex: number;\n\tselectionRequestedByClick: boolean;\n\tselectionRequestedByScroll: boolean;\n\n\t_prevWidth: number;\n\t_prevContentHeight: number;\n\t_itemNavigation: ItemNavigation;\n\t_onStepResize: ResizeObserverCallback;\n\n\tconstructor() {\n\t\tsuper();\n\n\t\t// Stores the scroll offsets of the steps,\n\t\t// e.g. the steps' starting point.\n\t\tthis.stepScrollOffsets = [];\n\n\t\t// Keeps track of the currently selected step index.\n\t\tthis.selectedStepIndex = 0;\n\n\t\t// Keeps track of the previously selected step index.\n\t\tthis.previouslySelectedStepIndex = 0;\n\n\t\t// Indicates that selection will be changed\n\t\t// due to user click.\n\t\tthis.selectionRequestedByClick = false;\n\n\t\t// Stores the previous width\n\t\tthis._prevWidth = 0;\n\n\t\t// Stores the previous height\n\t\tthis._prevContentHeight = 0;\n\n\t\t// Indicates that selection will be changed\n\t\t// due to user scroll.\n\t\tthis.selectionRequestedByScroll = false;\n\n\t\tthis._itemNavigation = new ItemNavigation(this, {\n\t\t\tnavigationMode: NavigationMode.Auto,\n\t\t\tgetItemsCallback: () => this.enabledStepsInHeaderDOM,\n\t\t});\n\n\t\tthis._onStepResize = this.onStepResize.bind(this);\n\t}\n\n\tget classes() {\n\t\treturn {\n\t\t\troot: {\n\t\t\t\t\"ui5-wiz-root\": true,\n\t\t\t},\n\t\t\tpopover: {\n\t\t\t\t\"ui5-wizard-responsive-popover\": true,\n\t\t\t\t\"ui5-wizard-popover\": !isPhone(),\n\t\t\t\t\"ui5-wizard-dialog\": isPhone(),\n\t\t\t},\n\t\t};\n\t}\n\n\tstatic async onDefine() {\n\t\tWizard.i18nBundle = await getI18nBundle(\"@ui5/webcomponents-fiori\");\n\t}\n\n\tstatic get SCROLL_DEBOUNCE_RATE() {\n\t\treturn 25;\n\t}\n\n\tonExitDOM() {\n\t\tthis.detachStepsResizeObserver();\n\t}\n\n\tonBeforeRendering() {\n\t\tthis.syncSelection();\n\t}\n\n\tonAfterRendering() {\n\t\tthis.storeStepScrollOffsets();\n\n\t\tif (this.previouslySelectedStepIndex !== this.selectedStepIndex) {\n\t\t\tthis.scrollToSelectedStep();\n\t\t}\n\n\t\tthis.attachStepsResizeObserver();\n\t\tthis.previouslySelectedStepIndex = this.selectedStepIndex;\n\t}\n\n\t/**\n\t * Normalizes the step selection as follows:\n\t * (1) If there is no selected step - the first step is going to be selected.\n\t * (2) If the selected steps are more than one - the last step is going to be selected.\n\t * (3) If the selected step is also disabled - log a warning.\n\t * @private\n\t */\n\tsyncSelection() {\n\t\tif (this.stepsCount === 0) {\n\t\t\treturn;\n\t\t}\n\n\t\t// If no selected steps -> select the first step.\n\t\tif (this.selectedStepsCount === 0) {\n\t\t\tthis.selectFirstStep();\n\t\t\tconsole.warn(\"Selecting the first step: no selected step is defined.\"); // eslint-disable-line\n\t\t}\n\n\t\t// If there are multiple selected steps -> keep the last selected one.\n\t\tif (this.selectedStepsCount > 1) {\n\t\t\tthis.selectLastSelectedStep();\n\t\t\tconsole.warn(`Selecting the last step defined as selected: multiple selected steps are defined.`); // eslint-disable-line\n\t\t}\n\n\t\t// If the selected step is defined as disabled - log warning.\n\t\tif (this.selectedStep && this.selectedStep.disabled) {\n\t\t\tconsole.warn(\"The selected step is disabled: you need to enable it in order to interact with the step.\"); // eslint-disable-line\n\t\t}\n\n\t\t// Place for improvement: If the selected step is not the first, enable all the prior steps\n\t\tthis.selectedStepIndex = this.getSelectedStepIndex();\n\n\t\tif (this.selectedStep && this.stepsInHeaderDOM.length) {\n\t\t\tif (this._itemNavigation._getItems().includes(this.stepsInHeaderDOM[this.selectedStepIndex])) {\n\t\t\t\tthis._itemNavigation.setCurrentItem(this.stepsInHeaderDOM[this.selectedStepIndex]);\n\t\t\t} else {\n\t\t\t\tthis._itemNavigation.setCurrentItem(this.stepsInHeaderDOM.find(el => el.selected) as WizardTab);\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Selects the first step.\n\t * @private\n\t */\n\tselectFirstStep() {\n\t\tthis.deselectAll();\n\t\tthis.slottedSteps[0].selected = true;\n\t\tthis.slottedSteps[0].disabled = false;\n\t}\n\n\t/**\n\t * Selects the last step from multiple selected ones.\n\t * @private\n\t */\n\tselectLastSelectedStep() {\n\t\tconst lastSelectedStep = this.lastSelectedStep;\n\n\t\tif (lastSelectedStep) {\n\t\t\tthis.deselectAll();\n\t\t\tlastSelectedStep.selected = true;\n\t\t\tlastSelectedStep.disabled = false;\n\t\t}\n\t}\n\n\t/**\n\t * Deselects all steps.\n\t * @private\n\t */\n\tdeselectAll() {\n\t\tthis.slottedSteps.forEach(step => {\n\t\t\tstep.selected = false;\n\t\t});\n\t}\n\n\t/**\n\t * Stores the scroll offsets of the steps,\n\t * e.g. the steps' starting point.\n\t *\n\t * **Note:** the disabled ones has negative offsets.\n\t * @private\n\t */\n\tstoreStepScrollOffsets() {\n\t\tthis.stepScrollOffsets = this.slottedSteps.map(step => {\n\t\t\tconst contentItem = this.getStepWrapperByRefId(step._id);\n\t\t\treturn contentItem.offsetTop + contentItem.offsetHeight;\n\t\t});\n\t}\n\n\t/**\n\t * Handles user click on steps' tabs within the header.\n\t * **Note:** the handler is bound in the template.\n\t * @private\n\t */\n\tonSelectionChangeRequested(e: MouseEvent) {\n\t\tthis.selectionRequestedByClick = true;\n\t\tthis.changeSelectionByStepAction(e.target as WizardTab);\n\t}\n\n\t/**\n\t * Handles user scrolling with debouncing.\n\t * **Note:** the handler is bound in the template.\n\t * @private\n\t */\n\tonScroll(e: MouseEvent) {\n\t\tif (this.selectionRequestedByClick) {\n\t\t\tthis.selectionRequestedByClick = false;\n\t\t\treturn;\n\t\t}\n\n\t\tdebounce(this.changeSelectionByScroll.bind(this, (e.target as HTMLElement).scrollTop), Wizard.SCROLL_DEBOUNCE_RATE);\n\t}\n\n\t/**\n\t * Handles when a step in the header is focused in order to update the `ItemNavigation`.\n\t * **Note:** the handler is bound in the template.\n\t * @private\n\t */\n\tonStepInHeaderFocused(e: FocusEvent) {\n\t\tthis._itemNavigation.setCurrentItem(e.target as WizardTab);\n\t}\n\n\t/**\n\t * Handles resize in order to:\n\t * (1) sync steps' scroll offset and selection\n\t * (2) adapt navition step header\n\t * @private\n\t */\n\tonStepResize() {\n\t\tthis.width = this.getBoundingClientRect().width;\n\t\tthis.contentHeight = this.getContentHeight();\n\n\t\tif (this._prevWidth !== this.width || this.contentHeight !== this._prevContentHeight) {\n\t\t\tthis._closeRespPopover();\n\t\t}\n\n\t\tthis._prevWidth = this.width;\n\t\tthis._prevContentHeight = this.contentHeight;\n\n\t\tthis._calcCurrentBreakpoint();\n\t}\n\n\tattachStepsResizeObserver() {\n\t\tthis.stepsDOM.forEach(stepDOM => {\n\t\t\tResizeHandler.deregister(stepDOM, this._onStepResize);\n\t\t\tResizeHandler.register(stepDOM, this._onStepResize);\n\t\t});\n\t}\n\n\tdetachStepsResizeObserver() {\n\t\tthis.stepsDOM.forEach(stepDOM => {\n\t\t\tResizeHandler.deregister(stepDOM, this._onStepResize);\n\t\t});\n\t}\n\n\t_calcCurrentBreakpoint() {\n\t\tconst breakpointDimensions = Object.keys(RESPONSIVE_BREAKPOINTS).reverse();\n\t\tconst breakpoint = breakpointDimensions.find((size: string) => Number(size) < this.width!);\n\t\tthis._breakpoint = breakpoint ? RESPONSIVE_BREAKPOINTS[breakpoint] : RESPONSIVE_BREAKPOINTS[\"0\"];\n\t}\n\n\t/**\n\t * Updates the expanded attribute for each ui5-wizard-tab based on the ui5-wizard width\n\t * @private\n\t */\n\t_adjustHeaderOverflow() {\n\t\tlet counter = 0;\n\t\tlet isForward = true;\n\t\tconst tabs = this.stepsInHeaderDOM;\n\n\t\tif (!tabs.length) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst iWidth = this.progressNavigatorListDOM.getBoundingClientRect().width;\n\t\tconst iCurrStep = this.getSelectedStepIndex();\n\t\tconst iStepsToShow = this.steps.length ? Math.floor(iWidth / MIN_STEP_WIDTH_WITH_TITLE) : Math.floor(iWidth / MIN_STEP_WIDTH_NO_TITLE);\n\n\t\t[...tabs].forEach((step, index) => {\n\t\t\tstep.setAttribute(EXPANDED_STEP, \"false\");\n\t\t\tstep.setAttribute(BEFORE_EXPANDED_STEP, \"false\");\n\t\t\tstep.setAttribute(AFTER_EXPANDED_STEP, \"false\");\n\n\t\t\t// Add \"data-ui5-wizard-after-current-tab\" to all tabs after the current one\n\t\t\tif (index > iCurrStep) {\n\t\t\t\ttabs[index].setAttribute(AFTER_CURRENT_STEP, \"true\");\n\t\t\t} else {\n\t\t\t\ttabs[index].removeAttribute(AFTER_CURRENT_STEP);\n\t\t\t}\n\t\t});\n\n\t\t// Add \"data-ui5-wizard-expanded-tab\" to the current step\n\t\tif (tabs[iCurrStep]) {\n\t\t\ttabs[iCurrStep].setAttribute(EXPANDED_STEP, \"true\");\n\t\t}\n\n\t\t// Set the \"data-ui5-wizard-expanded-tab\" to the steps that are expanded\n\t\t// The algorithm is as follows:\n\t\t// 1. A step towards the end is expanded\n\t\t// \t1.2. If there are no available steps towards the end a step towards the beginning is expanded\n\t\t// 2. A step towards the beginning is expanded\n\t\t// \t2.2. If there are no available steps towards the beginning a step towards the end is expanded\n\t\tfor (let i = 1; i < iStepsToShow; i++) {\n\t\t\tif (isForward) {\n\t\t\t\tcounter += 1;\n\t\t\t}\n\n\t\t\tif (isForward && tabs[iCurrStep + counter]) {\n\t\t\t\ttabs[iCurrStep + counter].setAttribute(EXPANDED_STEP, \"true\");\n\t\t\t\tisForward = !isForward;\n\t\t\t} else if (!isForward && tabs[iCurrStep - counter]) {\n\t\t\t\ttabs[iCurrStep - counter].setAttribute(EXPANDED_STEP, \"true\");\n\t\t\t\tisForward = !isForward;\n\t\t\t} else if (tabs[iCurrStep + counter + 1]) {\n\t\t\t\tcounter += 1;\n\t\t\t\ttabs[iCurrStep + counter].setAttribute(EXPANDED_STEP, \"true\");\n\t\t\t\tisForward = true;\n\t\t\t} else if (tabs[iCurrStep - counter]) {\n\t\t\t\ttabs[iCurrStep - counter].setAttribute(EXPANDED_STEP, \"true\");\n\t\t\t\tcounter += 1;\n\t\t\t\tisForward = false;\n\t\t\t}\n\t\t}\n\n\t\t// mark the topmost steps of both groups (in the beginning and the end),\n\t\t// using the \"data-ui5-wizard-after-current-tab\" and \"data-ui5-wizard-expanded-tab-prev\" attributes\n\t\tfor (let i = 0; i < tabs.length; i++) {\n\t\t\tif (tabs[i].getAttribute(EXPANDED_STEP) === \"true\" && tabs[i - 1] && tabs[i - 1].getAttribute(EXPANDED_STEP) === \"false\") {\n\t\t\t\ttabs[i - 1].setAttribute(BEFORE_EXPANDED_STEP, \"true\");\n\t\t\t}\n\n\t\t\tif (tabs[i].getAttribute(EXPANDED_STEP) === \"false\" && tabs[i - 1] && tabs[i - 1].getAttribute(EXPANDED_STEP) === \"true\") {\n\t\t\t\ttabs[i].setAttribute(AFTER_EXPANDED_STEP, \"true\");\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\t_isGroupAtStart(selectedStep: WizardTab) {\n\t\tconst iStepNumber = this.stepsInHeaderDOM.indexOf(selectedStep);\n\t\treturn selectedStep.getAttribute(EXPANDED_STEP) === \"false\" && selectedStep.getAttribute(BEFORE_EXPANDED_STEP) === \"true\" && iStepNumber > 0;\n\t}\n\n\t_isGroupAtEnd(selectedStep: WizardTab) {\n\t\tconst iStepNumber = this.stepsInHeaderDOM.indexOf(selectedStep);\n\t\treturn selectedStep.getAttribute(EXPANDED_STEP) === \"false\" && selectedStep.getAttribute(AFTER_EXPANDED_STEP) === \"true\" && (iStepNumber + 1 < this.steps.length);\n\t}\n\n\t_showPopover(oDomTarget: WizardTab, isAtStart: boolean) {\n\t\tconst tabs = Array.from(this.stepsInHeaderDOM);\n\t\tthis._groupedTabs = [];\n\n\t\tconst iFromStep = isAtStart ? 0 : this.stepsInHeaderDOM.indexOf(oDomTarget);\n\t\tconst iToStep = isAtStart ? this.stepsInHeaderDOM.indexOf(oDomTarget) : tabs.length - 1;\n\n\t\tfor (let i = iFromStep; i <= iToStep; i++) {\n\t\t\tthis._groupedTabs.push(tabs[i]);\n\t\t}\n\n\t\tconst responsivePopover = this._respPopover();\n\t\tresponsivePopover.opener = oDomTarget;\n\t\tresponsivePopover.open = true;\n\t}\n\n\t_onGroupedTabClick(e: MouseEvent) {\n\t\tconst eTarget = e.target as WizardTab;\n\n\t\tif (this._isGroupAtStart(eTarget)) {\n\t\t\treturn this._showPopover(eTarget, true);\n\t\t}\n\n\t\tif (this._isGroupAtEnd(eTarget)) {\n\t\t\treturn this._showPopover(eTarget, false);\n\t\t}\n\t}\n\n\t_onOverflowStepButtonClick(e: MouseEvent) {\n\t\tconst tabs = Array.from(this.stepsInHeaderDOM);\n\t\tconst eTarget = e.target as HTMLElement;\n\t\tconst stepRefId = eTarget.getAttribute(\"data-ui5-header-tab-ref-id\");\n\t\tconst stepToSelect = this.slottedSteps[Number(stepRefId) - 1];\n\t\tconst selectedStep = this.selectedStep;\n\t\tconst newlySelectedIndex = this.slottedSteps.indexOf(stepToSelect);\n\n\t\tthis.switchSelectionFromOldToNewStep(selectedStep, stepToSelect, newlySelectedIndex, false);\n\t\tthis._closeRespPopover();\n\t\ttabs[newlySelectedIndex].focus();\n\t}\n\n\t_closeRespPopover() {\n\t\tconst responsivePopover = this._respPopover();\n\t\tif (responsivePopover) {\n\t\t\tresponsivePopover.open = false;\n\t\t}\n\t}\n\n\t_respPopover() {\n\t\treturn this.shadowRoot!.querySelector<ResponsivePopover>(`.ui5-wizard-responsive-popover`)!;\n\t}\n\n\t/**\n\t * Called upon `onScroll`.\n\t * Selects the closest step, based on the user scroll position.\n\t * @param scrollPos the current scroll position\n\t * @private\n\t */\n\tchangeSelectionByScroll(scrollPos: number) {\n\t\tconst newlySelectedIndex = this.getClosestStepIndexByScrollPos(scrollPos);\n\t\tconst stepToSelect = this.slottedSteps[newlySelectedIndex];\n\n\t\t// Skip if already selected - stop.\n\t\tif (this.selectedStepIndex === newlySelectedIndex) {\n\t\t\treturn;\n\t\t}\n\n\t\t// If the calculated index is in range,\n\t\t// change selection and fire \"step-change\".\n\t\tif (!stepToSelect.disabled && newlySelectedIndex >= 0 && newlySelectedIndex <= this.stepsCount - 1) {\n\t\t\tthis.switchSelectionFromOldToNewStep(this.selectedStep, stepToSelect, newlySelectedIndex, true);\n\t\t\tthis.selectionRequestedByScroll = true;\n\t\t}\n\t}\n\n\t/**\n\t * Called upon `onSelectionChangeRequested`.\n\t * Selects the external step (ui5-wizard-step),\n\t * based on the clicked or activated via keyboard step in the header (ui5-wizard-tab).\n\t * @param stepInHeader the step equivalent in the header\n\t * @private\n\t */\n\tasync changeSelectionByStepAction(stepInHeader: WizardTab) {\n\t\tconst stepRefId = stepInHeader.getAttribute(\"data-ui5-content-ref-id\")!;\n\t\tconst selectedStep = this.selectedStep;\n\t\tconst stepToSelect = this.getStepByRefId(stepRefId);\n\t\tconst bExpanded = stepInHeader.getAttribute(EXPANDED_STEP) === \"true\";\n\t\tconst newlySelectedIndex = this.slottedSteps.indexOf(stepToSelect);\n\t\tconst firstElementChild = stepToSelect.firstElementChild as HTMLElement;\n\t\tconst firstFocusableElement = await getFirstFocusableElement(firstElementChild);\n\n\t\tif (firstFocusableElement) {\n\t\t\t// Focus the first focusable element within the step content corresponding to the currently focused tab\n\t\t\tfirstFocusableElement.focus();\n\t\t}\n\n\t\t// If the currently selected (active) step is clicked,\n\t\t// just scroll to its starting point and stop.\n\t\tif (selectedStep === stepToSelect) {\n\t\t\tthis.scrollToContentItem(this.selectedStepIndex);\n\t\t\treturn;\n\t\t}\n\n\t\tif (bExpanded || (!bExpanded && (newlySelectedIndex === 0 || newlySelectedIndex === this.steps.length - 1))) {\n\t\t\t// Change selection and fire \"step-change\".\n\t\t\tthis.switchSelectionFromOldToNewStep(selectedStep, stepToSelect, newlySelectedIndex, false);\n\t\t}\n\t}\n\n\tgetContentHeight() {\n\t\tlet contentHeight = 0;\n\n\t\tthis.stepsDOM.forEach(step => {\n\t\t\tcontentHeight += step.getBoundingClientRect().height;\n\t\t});\n\n\t\treturn contentHeight;\n\t}\n\n\tgetStepAriaLabelText(step: WizardStep, ariaLabel: string) {\n\t\treturn Wizard.i18nBundle.getText(WIZARD_STEP_ARIA_LABEL, ariaLabel);\n\t}\n\n\tget stepsDOM() {\n\t\treturn Array.from(this.shadowRoot!.querySelectorAll<HTMLElement>(\".ui5-wiz-content-item\"));\n\t}\n\n\tget progressNavigatorListDOM() {\n\t\treturn this.shadowRoot!.querySelector(\".ui5-wiz-nav-list\")!;\n\t}\n\n\tget _stepsInHeader() {\n\t\treturn this.getStepsInfo();\n\t}\n\n\tget _steps() {\n\t\tconst lastEnabledStepIndex = this.getLastEnabledStepIndex();\n\t\tconst stepsInfo = this.getStepsInfo();\n\n\t\treturn this.steps.map((step, idx) => {\n\t\t\tstep.stretch = idx === lastEnabledStepIndex;\n\t\t\tstep.stepContentAriaLabel = `${this.navStepDefaultHeading} ${stepsInfo[idx].number} ${stepsInfo[idx].titleText}`;\n\t\t\treturn step;\n\t\t});\n\t}\n\n\tget stepsCount() {\n\t\treturn this.slottedSteps.length;\n\t}\n\n\tget selectedStep() {\n\t\tif (this.selectedStepsCount) {\n\t\t\treturn this.selectedSteps[0];\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tget lastSelectedStep() {\n\t\tif (this.selectedStepsCount) {\n\t\t\treturn this.selectedSteps[this.selectedStepsCount - 1];\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tget selectedSteps() {\n\t\treturn this.slottedSteps.filter(step => step.selected);\n\t}\n\n\tget enabledSteps() {\n\t\treturn this.slottedSteps.filter(step => !step.disabled);\n\t}\n\n\tget selectedStepsCount() {\n\t\treturn this.selectedSteps.length;\n\t}\n\n\tget slottedSteps() {\n\t\treturn this.getSlottedNodes<WizardStep>(\"steps\");\n\t}\n\n\tget contentDOM() {\n\t\treturn this.shadowRoot!.querySelector(`.ui5-wiz-content`)!;\n\t}\n\n\tget stepsInHeaderDOM() {\n\t\treturn Array.from(this.shadowRoot!.querySelectorAll<WizardTab>(\"[ui5-wizard-tab]\"));\n\t}\n\n\tget enabledStepsInHeaderDOM() {\n\t\treturn this.stepsInHeaderDOM.filter(step => !step.disabled);\n\t}\n\n\tget navAriaRoleDescription() {\n\t\treturn Wizard.i18nBundle.getText(WIZARD_NAV_ARIA_ROLE_DESCRIPTION);\n\t}\n\n\tget navAriaLabelText() {\n\t\treturn Wizard.i18nBundle.getText(WIZARD_NAV_ARIA_LABEL);\n\t}\n\n\tget navAriaDescribedbyText() {\n\t\treturn Wizard.i18nBundle.getText(WIZARD_LIST_ARIA_DESCRIBEDBY);\n\t}\n\n\tget listAriaLabelText() {\n\t\treturn Wizard.i18nBundle.getText(WIZARD_LIST_ARIA_LABEL);\n\t}\n\n\tget actionSheetStepsText() {\n\t\treturn Wizard.i18nBundle.getText(WIZARD_ACTIONSHEET_STEPS_ARIA_LABEL);\n\t}\n\n\tget navStepDefaultHeading() {\n\t\treturn Wizard.i18nBundle.getText(WIZARD_NAV_STEP_DEFAULT_HEADING);\n\t}\n\n\tget optionalStepText() {\n\t\treturn Wizard.i18nBundle.getText(WIZARD_OPTIONAL_STEP_ARIA_LABEL);\n\t}\n\n\tget activeStepText() {\n\t\treturn Wizard.i18nBundle.getText(WIZARD_STEP_ACTIVE);\n\t}\n\n\tget inactiveStepText() {\n\t\treturn Wizard.i18nBundle.getText(WIZARD_STEP_INACTIVE);\n\t}\n\n\tget ariaLabelText() {\n\t\treturn Wizard.i18nBundle.getText(WIZARD_NAV_ARIA_ROLE_DESCRIPTION);\n\t}\n\n\tget effectiveStepSwitchThreshold() {\n\t\treturn clamp(this.stepSwitchThreshold, STEP_SWITCH_THRESHOLDS.MIN, STEP_SWITCH_THRESHOLDS.MAX);\n\t}\n\n\t/**\n\t * Returns an array of data objects, based on the user defined steps\n\t * to later build the steps (tabs) within the header.\n\t * @private\n\t */\n\tgetStepsInfo() {\n\t\tconst lastEnabledStepIndex = this.getLastEnabledStepIndex();\n\t\tconst stepsCount = this.stepsCount;\n\t\tconst selectedStepIndex = this.getSelectedStepIndex();\n\t\tlet inintialZIndex = this.steps.length + 10;\n\t\tlet accInfo;\n\n\t\tthis._adjustHeaderOverflow();\n\n\t\treturn this.steps.map((step, idx) => {\n\t\t\tconst pos = idx + 1;\n\n\t\t\t// Hide separator if it's the last step and it's not a branching one\n\t\t\tconst hideSeparator = (idx === stepsCount - 1) && !step.branching;\n\n\t\t\tconst isOptional = step.subtitleText ? this.optionalStepText : \"\";\n\t\t\tconst stepStateText = step.disabled ? this.inactiveStepText : this.activeStepText;\n\t\t\tconst ariaLabel = (step.titleText ? `${pos} ${step.titleText} ${stepStateText} ${isOptional}` : `${this.navStepDefaultHeading} ${pos} ${stepStateText} ${isOptional}`).trim();\n\t\t\tconst isAfterCurrent = (idx > selectedStepIndex);\n\n\t\t\taccInfo = {\n\t\t\t\t\"ariaSetsize\": stepsCount,\n\t\t\t\t\"ariaPosinset\": pos,\n\t\t\t\t\"ariaLabel\": this.getStepAriaLabelText(step, ariaLabel),\n\t\t\t};\n\n\t\t\tconst stepInfo: StepInfo = {\n\t\t\t\ticon: step.icon,\n\t\t\t\ttitleText: step.titleText,\n\t\t\t\tsubtitleText: step.subtitleText,\n\t\t\t\tnumber: pos,\n\t\t\t\tselected: step.selected,\n\t\t\t\tdisabled: step.disabled,\n\t\t\t\thideSeparator,\n\t\t\t\tactiveSeparator: (idx < lastEnabledStepIndex) && !step.disabled,\n\t\t\t\tbranchingSeparator: step.branching,\n\t\t\t\tpos,\n\t\t\t\taccInfo,\n\t\t\t\trefStepId: step._id,\n\t\t\t\tstyles: {\n\t\t\t\t\tzIndex: isAfterCurrent ? --inintialZIndex : 1,\n\t\t\t\t},\n\t\t\t};\n\n\t\t\treturn stepInfo;\n\t\t});\n\t}\n\n\t/**\n\t * Returns the index of the selected step.\n\t * @private\n\t */\n\tgetSelectedStepIndex() {\n\t\tif (this.selectedStep) {\n\t\t\treturn this.slottedSteps.indexOf(this.selectedStep);\n\t\t}\n\t\treturn 0;\n\t}\n\n\t/**\n\t * Returns the index of the last enabled step.\n\t * @private\n\t */\n\tgetLastEnabledStepIndex() {\n\t\tlet lastEnabledStepIndex = 0;\n\n\t\tthis.slottedSteps.forEach((step, idx) => {\n\t\t\tif (!step.disabled) {\n\t\t\t\tlastEnabledStepIndex = idx;\n\t\t\t}\n\t\t});\n\n\t\treturn lastEnabledStepIndex;\n\t}\n\n\tgetStepByRefId(refId: string) {\n\t\treturn this.slottedSteps.find(step => step._id === refId)!;\n\t}\n\n\tgetStepWrapperByRefId(refId: string) {\n\t\treturn this.shadowRoot!.querySelector<HTMLElement>(`[data-ui5-content-item-ref-id=${refId}]`)!;\n\t}\n\n\tgetStepWrapperByIdx(idx: number) {\n\t\treturn this.getStepWrapperByRefId(this.steps[idx]._id);\n\t}\n\n\t/**\n\t * Scrolls to the content of the selected step, used in `onAfterRendering`.\n\t * @private\n\t */\n\tscrollToSelectedStep() {\n\t\tif (!this.selectionRequestedByScroll) {\n\t\t\tthis.scrollToContentItem(this.selectedStepIndex);\n\t\t}\n\t\tthis.selectionRequestedByScroll = false;\n\t}\n\n\t/**\n\t * Scrolls to the content item within the `ui5-wizard` shadowDOM\n\t * by given step index.\n\t * @private\n\t * @param stepIndex the index of a step\n\t */\n\tscrollToContentItem(stepIndex: number) {\n\t\tthis.contentDOM.scrollTop = this.getClosestScrollPosByStepIndex(stepIndex);\n\t}\n\n\t/**\n\t * Returns to closest scroll position for the given step index.\n\t * @private\n\t * @param stepIndex the index of a step\n\t */\n\tgetClosestScrollPosByStepIndex(stepIndex: number) {\n\t\tif (stepIndex === 0) {\n\t\t\treturn 0;\n\t\t}\n\n\t\t// It's possible to have [enabled - 0, disabled - 1, enabled - 2, disabled - 3] step definition and similar.\n\t\t// Consider selection of the third step at index 2, the wizard should scroll where the previous step ends,\n\t\t// but in this case the 2nd step is disabled, so we have to fallback to the first possible step.\n\t\tfor (let closestStepIndex = stepIndex - 1; closestStepIndex >= 0; closestStepIndex--) {\n\t\t\tif (this.stepScrollOffsets[closestStepIndex] > 0) {\n\t\t\t\treturn this.stepScrollOffsets[closestStepIndex];\n\t\t\t}\n\t\t}\n\n\t\treturn 0;\n\t}\n\n\t/**\n\t * Returns the closest step index by given scroll position.\n\t * @private\n\t * @param scrollPos the scroll position\n\t */\n\tgetClosestStepIndexByScrollPos(scrollPos: number) {\n\t\tfor (let closestStepIndex = 0; closestStepIndex <= this.stepScrollOffsets.length - 1; closestStepIndex++) {\n\t\t\tconst stepScrollOffset = this.stepScrollOffsets[closestStepIndex];\n\t\t\tconst step = this.getStepWrapperByIdx(closestStepIndex);\n\t\t\tconst switchStepBoundary = step.offsetTop + (step.offsetHeight * this.effectiveStepSwitchThreshold);\n\n\t\t\tif (stepScrollOffset > 0 && scrollPos < stepScrollOffset) {\n\t\t\t\tif (scrollPos > switchStepBoundary) {\n\t\t\t\t\treturn closestStepIndex + 1;\n\t\t\t\t}\n\n\t\t\t\treturn closestStepIndex;\n\t\t\t}\n\t\t}\n\n\t\treturn this.selectedStepIndex;\n\t}\n\n\t/**\n\t * Switches the selection from the old step to the newly selected step.\n\t * @param selectedStep the old step\n\t * @param stepToSelect the step to be selected\n\t * @param stepToSelectIndex the index of the newly selected step\n\t * @param withScroll the selection changed due to user scrolling\n\t * @private\n\t */\n\tswitchSelectionFromOldToNewStep(selectedStep: WizardStep | null, stepToSelect: WizardStep, stepToSelectIndex: number, withScroll: boolean) {\n\t\tif (selectedStep && stepToSelect) {\n\t\t\t// keep the selection if next step is disabled\n\t\t\tif (!stepToSelect.disabled) {\n\t\t\t\tselectedStep.selected = false;\n\t\t\t\tstepToSelect.selected = true;\n\t\t\t}\n\n\t\t\tthis.fireEvent<WizardStepChangeEventDetail>(\"step-change\", {\n\t\t\t\tstep: stepToSelect,\n\t\t\t\tpreviousStep: selectedStep,\n\t\t\t\twithScroll,\n\t\t\t});\n\n\t\t\tthis.selectedStepIndex = stepToSelectIndex;\n\t\t}\n\t}\n\n\t/**\n\t * Sorter method for sorting an array in ascending order.\n\t * @private\n\t */\n\tsortAscending(a: number, b: number) {\n\t\tif (a < b) {\n\t\t\treturn -1;\n\t\t}\n\t\tif (a > b) {\n\t\t\treturn 1;\n\t\t}\n\t\treturn 0;\n\t}\n}\n\nWizard.define();\n\nexport type {\n\tWizardStepChangeEventDetail,\n};\n\nexport default Wizard;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}